import{a as e}from"./index.21daaf86.js";import{r as l,o as r,g as s,h as a,w as t,j as i}from"./vendor.92d3e6d8.js";const o={name:"login",data:()=>({user:{email:"",password:""},register:{email:"",password:""},rules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}),methods:{loginHandle(){this.$refs.userForm.validate((async l=>{if(l){let l=this.$route.query.redirect||"",r=this.$route.query.backUrl;await e.login(this.user).then((e=>{if(200===e.code){if(r)return void(location.href=r);this.$router.replace(l||"/")}else this.$message(e.msg)}))}}))},registerHandle(){this.$refs.registerForm.validate((async l=>{if(l){let l=this.$route.query.redirect||"",r=this.$route.query.backUrl;await e.register({email:this.register.email,password:this.register.password}).then((e=>{if(200===e.code){if(r)return void(location.href=r);this.$router.replace(l||"/")}else this.$message(e.msg)}))}}))}}},u={class:"login-wrapper"},d={class:"flex mt-16 justify-center"},n=a("div",{class:"title text-center mb-4"},"登录帐号",-1),m=i("登录"),p=a("div",{class:"title text-center mb-4"},"注册账号",-1),c=i("注册");o.render=function(e,i,o,f,g,w){const h=l("el-input"),b=l("el-form-item"),x=l("el-button"),y=l("el-form"),V=l("el-card");return r(),s("div",u,[a(V,{class:"box-card"},{default:t((()=>[a("div",d,[a(y,{class:"px-16",ref:"userForm",model:g.user,"status-icon":"",rules:g.rules,"label-width":"auto"},{default:t((()=>[n,a(b,{prop:"email",label:"邮箱"},{default:t((()=>[a(h,{type:"text","prefix-icon":"el-icon-user",modelValue:g.user.email,"onUpdate:modelValue":i[1]||(i[1]=e=>g.user.email=e)},null,8,["modelValue"])])),_:1}),a(b,{prop:"password",label:"密码"},{default:t((()=>[a(h,{type:"password","prefix-icon":"el-icon-view",modelValue:g.user.password,"onUpdate:modelValue":i[2]||(i[2]=e=>g.user.password=e)},null,8,["modelValue"])])),_:1}),a(b,null,{default:t((()=>[a(x,{type:"primary",class:"btn-login w-full",onClick:w.loginHandle},{default:t((()=>[m])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),a(y,{class:"px-16",ref:"registerForm",model:g.register,"status-icon":"",rules:g.rules,"label-width":"auto"},{default:t((()=>[p,a(b,{prop:"email",label:"邮箱"},{default:t((()=>[a(h,{type:"text","prefix-icon":"el-icon-user",modelValue:g.register.email,"onUpdate:modelValue":i[3]||(i[3]=e=>g.register.email=e)},null,8,["modelValue"])])),_:1}),a(b,{prop:"password",label:"密码"},{default:t((()=>[a(h,{type:"password","prefix-icon":"el-icon-view",modelValue:g.register.password,"onUpdate:modelValue":i[4]||(i[4]=e=>g.register.password=e)},null,8,["modelValue"])])),_:1}),a(b,null,{default:t((()=>[a(x,{type:"success",class:"btn-register w-full",onClick:w.registerHandle},{default:t((()=>[c])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])])),_:1})])};export default o;
