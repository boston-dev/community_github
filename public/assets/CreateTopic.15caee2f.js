var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,c=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&s(e,a,t[a]);return e};import{m as d,f as i,r as m,o as u,g as p,h as n,w as f,F as g,i as h,j as b}from"./vendor.92d3e6d8.js";const F={name:"createTopic",components:{},computed:c(c({},d("appShell",["baseInfo"])),d("topic",["cateList"])),data:()=>({valid:!0,createForm:{cat:"",title:"",cont:"",pic:"",type:2},rules:{cat:[{required:!0,message:"请选择模块",trigger:"change"}],title:[{required:!0,message:"请输入主题标题",trigger:"blur"}],cont:[{required:!0,message:"请输入主题内容",trigger:"change"}]}}),created(){this.fetchTopicCate({query:{type:3}})},methods:(y=c({},i("topic",["fetchTopicCate","fetchArticlesList","createArticle"])),v={handleUploadImage(e,t,a){console.log(a);let r=new FormData;r.append("file",a[0]),this.$request.post("/users/upload",r).then((e=>{if(200==!e.data.code)return this.$message(e.data.msg),!1;t({url:e.data.result.src})}))},submitForm(e){this.$refs[e].validate((e=>{e&&this.createArticle(this.createForm).then((e=>{200==e.code&&(this.$message.success(e.msg),setTimeout((()=>{this.$router.replace({name:"topicDetail",params:{id:e.result._id}})}),1500))}))}))}},t(y,a(v)))};var y,v;const _={class:"create-topic-wrapper"},O=n("div",{class:"card-header"},[n("span",null,"发布主题")],-1),V=b("发布");F.render=function(e,t,a,r,l,o){const s=m("el-option"),c=m("el-select"),d=m("el-form-item"),i=m("el-input"),b=m("v-md-editor"),F=m("el-button"),y=m("el-form"),v=m("el-card");return u(),p("div",_,[n(v,{class:"box-card"},{header:f((()=>[O])),default:f((()=>[n(y,{model:l.createForm,rules:l.rules,ref:"createForm","label-width":"100px",class:"demo-createForm"},{default:f((()=>[n(d,{label:"选择板块",prop:"cat",rules:[{required:!0,message:"必填"}]},{default:f((()=>[n(c,{modelValue:l.createForm.cat,"onUpdate:modelValue":t[1]||(t[1]=e=>l.createForm.cat=e),placeholder:"请选择模块"},{default:f((()=>[(u(!0),p(g,null,h(e.cateList,((e,t)=>(u(),p(s,{key:t,label:e.title,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(d,{label:"主题标题",prop:"title",rules:[{required:!0,message:"必填"}]},{default:f((()=>[n(i,{modelValue:l.createForm.title,"onUpdate:modelValue":t[2]||(t[2]=e=>l.createForm.title=e)},null,8,["modelValue"])])),_:1}),n(d,{label:"",prop:"cont"},{default:f((()=>[n(b,{"disabled-menus":[],class:"my-4",onUploadImage:o.handleUploadImage,modelValue:l.createForm.cont,"onUpdate:modelValue":t[3]||(t[3]=e=>l.createForm.cont=e),height:"400px"},null,8,["onUploadImage","modelValue"])])),_:1}),n(d,null,{default:f((()=>[n(F,{type:"primary",onClick:t[4]||(t[4]=e=>o.submitForm("createForm"))},{default:f((()=>[V])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])};export default F;
