import{x as e,F as t,T as n,y as i,z as r,A as o,B as a,E as s,h as l,G as c,H as u,J as d,L as h,M as f,N as p,O as g,Q as v,R as m,p as b,S as y,U as w,j as k,W as x,X as C,Y as M,Z as S,_ as E,k as O,s as N,r as T,o as A,g as I,w as D,t as _,i as j,$ as L,q as R,u as P}from"./vendor.0935d5ab.js";function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),e}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function U(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(r[n]=e[n]);return r}function Y(e){return 1==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var V=Object.prototype,W=V.toString,$=V.hasOwnProperty,G=/^\s*function (\w+)/;function Z(e){var t,n=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:e;if(n){var i=n.toString().match(G);return i?i[1]:""}return""}var q=function(e){var t,n;return!1!==Y(e)&&"function"==typeof(t=e.constructor)&&!1!==Y(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")},Q=function(e){return e},K=function(e,t){return $.call(e,t)},X=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},J=Array.isArray||function(e){return"[object Array]"===W.call(e)},ee=function(e){return"[object Function]"===W.call(e)},te=function(e){return q(e)&&K(e,"_vueTypes_name")},ne=function(e){return q(e)&&(K(e,"type")||["_vueTypes_name","validator","default","required"].some((function(t){return K(e,t)})))};function ie(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function re(e,t,n){var i;void 0===n&&(n=!1);var r=!0,o="";i=q(e)?e:{type:e};var a=te(i)?i._vueTypes_name+" - ":"";if(ne(i)&&null!==i.type){if(void 0===i.type||!0===i.type)return r;if(!i.required&&void 0===t)return r;J(i.type)?(r=i.type.some((function(e){return!0===re(e,t,!0)})),o=i.type.map((function(e){return Z(e)})).join(" or ")):r="Array"===(o=Z(i))?J(t):"Object"===o?q(t):"String"===o||"Number"===o||"Boolean"===o||"Function"===o?function(e){if(null==e)return"";var t=e.constructor.toString().match(G);return t?t[1]:""}(t)===o:t instanceof i.type}if(!r){var s=a+'value "'+t+'" should be of type "'+o+'"';return!1===n?(Q(s),!1):s}if(K(i,"validator")&&ee(i.validator)){var l=Q,c=[];if(Q=function(e){c.push(e)},r=i.validator(t),Q=l,!r){var u=(c.length>1?"* ":"")+c.join("\n* ");return c.length=0,!1===n?(Q(u),r):u}}return r}function oe(e,t){var n=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(e){return void 0!==e||this.default?ee(e)||!0===re(this,e,!0)?(this.default=J(e)?function(){return[].concat(e)}:q(e)?function(){return Object.assign({},e)}:e,this):(Q(this._vueTypes_name+' - invalid default value: "'+e+'"'),this):this}}}),i=n.validator;return ee(i)&&(n.validator=ie(i,n)),n}function ae(e,t){var n=oe(e,t);return Object.defineProperty(n,"validate",{value:function(e){return ee(this.validator)&&Q(this._vueTypes_name+" - calling .validate() will overwrite the current custom validator function. Validator info:\n"+JSON.stringify(this)),this.validator=ie(e,this),this}})}function se(e,t,n){var i,r,o=(i=t,r={},Object.getOwnPropertyNames(i).forEach((function(e){r[e]=Object.getOwnPropertyDescriptor(i,e)})),Object.defineProperties({},r));if(o._vueTypes_name=e,!q(n))return o;var a,s,l=n.validator,c=U(n,["validator"]);if(ee(l)){var u=o.validator;u&&(u=null!==(s=(a=u).__original)&&void 0!==s?s:a),o.validator=ie(u?function(e){return u.call(this,e)&&l.call(this,e)}:l,o)}return Object.assign(o,c)}function le(e){return e.replace(/^(?!\s*$)/gm,"  ")}var ce=function(){function e(){}return e.extend=function(e){var t=this;if(J(e))return e.forEach((function(e){return t.extend(e)})),this;var n=e.name,i=e.validate,r=void 0!==i&&i,o=e.getter,a=void 0!==o&&o,s=U(e,["name","validate","getter"]);if(K(this,n))throw new TypeError('[VueTypes error]: Type "'+n+'" already defined');var l,c=s.type;return te(c)?(delete s.type,Object.defineProperty(this,n,a?{get:function(){return se(n,c,s)}}:{value:function(){var e,t=se(n,c,s);return t.validator&&(t.validator=(e=t.validator).bind.apply(e,[t].concat([].slice.call(arguments)))),t}})):(l=a?{get:function(){var e=Object.assign({},s);return r?ae(n,e):oe(n,e)},enumerable:!0}:{value:function(){var e,t,i=Object.assign({},s);return e=r?ae(n,i):oe(n,i),i.validator&&(e.validator=(t=i.validator).bind.apply(t,[e].concat([].slice.call(arguments)))),e},enumerable:!0},Object.defineProperty(this,n,l))},B(e,null,[{key:"any",get:function(){return ae("any",{})}},{key:"func",get:function(){return ae("function",{type:Function}).def(this.defaults.func)}},{key:"bool",get:function(){return ae("boolean",{type:Boolean}).def(this.defaults.bool)}},{key:"string",get:function(){return ae("string",{type:String}).def(this.defaults.string)}},{key:"number",get:function(){return ae("number",{type:Number}).def(this.defaults.number)}},{key:"array",get:function(){return ae("array",{type:Array}).def(this.defaults.array)}},{key:"object",get:function(){return ae("object",{type:Object}).def(this.defaults.object)}},{key:"integer",get:function(){return oe("integer",{type:Number,validator:function(e){return X(e)}}).def(this.defaults.integer)}},{key:"symbol",get:function(){return oe("symbol",{validator:function(e){return"symbol"==typeof e}})}}]),e}();function ue(e){var t;return void 0===e&&(e={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(t=function(t){function n(){return t.apply(this,arguments)||this}return H(n,t),B(n,null,[{key:"sensibleDefaults",get:function(){return F({},this.defaults)},set:function(t){this.defaults=!1!==t?F({},!0!==t?t:e):{}}}]),n}(ce)).defaults=F({},e),t}ce.defaults={},ce.custom=function(e,t){if(void 0===t&&(t="custom validation failed"),"function"!=typeof e)throw new TypeError("[VueTypes error]: You must provide a function as argument");return oe(e.name||"<<anonymous function>>",{validator:function(n){var i=e(n);return i||Q(this._vueTypes_name+" - "+t),i}})},ce.oneOf=function(e){if(!J(e))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var t='oneOf - value should be one of "'+e.join('", "')+'".',n=e.reduce((function(e,t){if(null!=t){var n=t.constructor;-1===e.indexOf(n)&&e.push(n)}return e}),[]);return oe("oneOf",{type:n.length>0?n:void 0,validator:function(n){var i=-1!==e.indexOf(n);return i||Q(t),i}})},ce.instanceOf=function(e){return oe("instanceOf",{type:e})},ce.oneOfType=function(e){if(!J(e))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var t=!1,n=[],i=0;i<e.length;i+=1){var r=e[i];if(ne(r)){if(te(r)&&"oneOf"===r._vueTypes_name){n=n.concat(r.type);continue}if(ee(r.validator)&&(t=!0),!0!==r.type&&r.type){n=n.concat(r.type);continue}}n.push(r)}return n=n.filter((function(e,t){return n.indexOf(e)===t})),oe("oneOfType",t?{type:n,validator:function(t){var n=[],i=e.some((function(e){var i=re(te(e)&&"oneOf"===e._vueTypes_name?e.type||null:e,t,!0);return"string"==typeof i&&n.push(i),!0===i}));return i||Q("oneOfType - provided value does not match any of the "+n.length+" passed-in validators:\n"+le(n.join("\n"))),i}}:{type:n})},ce.arrayOf=function(e){return oe("arrayOf",{type:Array,validator:function(t){var n,i=t.every((function(t){return!0===(n=re(e,t,!0))}));return i||Q("arrayOf - value validation error:\n"+le(n)),i}})},ce.objectOf=function(e){return oe("objectOf",{type:Object,validator:function(t){var n,i=Object.keys(t).every((function(i){return!0===(n=re(e,t[i],!0))}));return i||Q("objectOf - value validation error:\n"+le(n)),i}})},ce.shape=function(e){var t=Object.keys(e),n=t.filter((function(t){var n;return!!(null===(n=e[t])||void 0===n?void 0:n.required)})),i=oe("shape",{type:Object,validator:function(i){var r=this;if(!q(i))return!1;var o=Object.keys(i);if(n.length>0&&n.some((function(e){return-1===o.indexOf(e)}))){var a=n.filter((function(e){return-1===o.indexOf(e)}));return Q(1===a.length?'shape - required property "'+a[0]+'" is not defined.':'shape - required properties "'+a.join('", "')+'" are not defined.'),!1}return o.every((function(n){if(-1===t.indexOf(n))return!0===r._vueTypes_isLoose||(Q('shape - shape definition does not include a "'+n+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var o=re(e[n],i[n],!0);return"string"==typeof o&&Q('shape - "'+n+'" property validation error:\n '+le(o)),!0===o}))}});return Object.defineProperty(i,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(i,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),i},ce.utils={validate:function(e,t){return!0===re(t,e,!0)},toType:function(e,t,n){return void 0===n&&(n=!1),n?ae(e,t):oe(e,t)}},function(e){function t(){return e.apply(this,arguments)||this}H(t,e)}(ue());var de=ue({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});function he(e){return e.default=void 0,e}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}de.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VNodeChild",getter:!0,type:null}]);var pe=Array.isArray,ge=function(e){return"string"==typeof e},ve=function(e){return null!==e&&"object"===fe(e)},me=/^on[^a-z]/,be=function(e){return me.test(e)},ye=function(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}},we=/-(\w)/g,ke=ye((function(e){return e.replace(we,(function(e,t){return t?t.toUpperCase():""}))})),xe=/\B([A-Z])/g,Ce=ye((function(e){return e.replace(xe,"-$1").toLowerCase()})),Me=Object.prototype.hasOwnProperty,Se=function(e,t){return Me.call(e,t)};function Ee(){for(var e=[],t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(n)if(ge(n))e.push(n);else if(pe(n))for(var i=0;i<n.length;i++){var r=Ee(n[i]);r&&e.push(r)}else if(ve(n))for(var o in n)n[o]&&e.push(o)}return e.join(" ")}function Oe(e,t){for(var n=Object.assign({},e),i=0;i<t.length;i+=1){delete n[t[i]]}return n}var Ne="object"==typeof global&&global&&global.Object===Object&&global,Te="object"==typeof self&&self&&self.Object===Object&&self,Ae=Ne||Te||Function("return this")(),Ie=Ae.Symbol,De=Object.prototype,_e=De.hasOwnProperty,je=De.toString,Le=Ie?Ie.toStringTag:void 0;var Re=Object.prototype.toString;var Pe=Ie?Ie.toStringTag:void 0;function ze(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Pe&&Pe in Object(e)?function(e){var t=_e.call(e,Le),n=e[Le];try{e[Le]=void 0;var i=!0}catch(o){}var r=je.call(e);return i&&(t?e[Le]=n:delete e[Le]),r}(e):function(e){return Re.call(e)}(e)}function Be(e,t){return function(n){return e(t(n))}}var Fe=Be(Object.getPrototypeOf,Object);function He(e){return null!=e&&"object"==typeof e}var Ue=Function.prototype,Ye=Object.prototype,Ve=Ue.toString,We=Ye.hasOwnProperty,$e=Ve.call(Object);function Ge(e){if(!He(e)||"[object Object]"!=ze(e))return!1;var t=Fe(e);if(null===t)return!0;var n=We.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ve.call(n)==$e}var Ze=function(e){return null!=e&&""!==e};function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var Je=function(e){for(var t=Object.keys(e),n={},i={},r={},o=0,a=t.length;o<a;o++){var s=t[o];be(s)?(n[s[2].toLowerCase()+s.slice(3)]=e[s],i[s]=e[s]):r[s]=e[s]}return{onEvents:i,events:n,extraAttrs:r}},et=function(e,t){return t in rt(e)},tt=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Array.isArray(n)?n:[n],a=[];return o.forEach((function(n){Array.isArray(n)?a.push.apply(a,Qe(e(n,r))):n&&n.type===t?a.push.apply(a,Qe(e(n.children,r))):n&&i(n)?r&&!lt(n)?a.push(n):r||a.push(n):Ze(n)&&a.push(n)})),a},nt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i(e))return e.type===t?"default"===n?tt(e.children):[]:e.children&&e.children[n]?tt(e.children[n](r)):[];var o=e.$slots[n]&&e.$slots[n](r);return tt(o)},it=function(e){for(var t=e&&(e.$el||e);t&&!t.tagName;)t=t.nextSibling;return t},rt=function(e){var t={};if(e.$&&e.$.vnode){var n=e.$.vnode.props||{};Object.keys(e.$props).forEach((function(i){var r=e.$props[i],o=Ce(i);(void 0!==r||o in n)&&(t[i]=r)}))}else if(i(e)&&"object"===qe(e.type)){var r=e.props||{},o={};Object.keys(r).forEach((function(e){o[ke(e)]=r[e]}));var a=e.type.props||{};Object.keys(a).forEach((function(e){var n=function(e,t,n,i){var r=e[n];if(null!=r){var o=Se(r,"default");if(o&&void 0===i){var a=r.default;i=r.type!==Function&&"function"==typeof a?a():a}r.type===Boolean&&(Se(t,n)||o?""===i&&(i=!0):i=!1)}return i}(a,o,e,o[e]);(void 0!==n||e in o)&&(t[e]=n)}))}return t},ot=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=void 0;if(e.$){var s=e[n];if(void 0!==s)return"function"==typeof s&&o?s(r):s;a=e.$slots[n],a=o&&a?a(r):a}else if(i(e)){var l=e.props&&e.props[n];if(void 0!==l&&null!==e.props)return"function"==typeof l&&o?l(r):l;e.type===t?a=e.children:e.children&&e.children[n]&&(a=e.children[n],a=o&&a?a(r):a)}return Array.isArray(a)&&(a=0===(a=1===(a=tt(a)).length?a[0]:a).length?void 0:a),a};function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={};return n=e.$?Xe(Xe({},n),e.$attrs):Xe(Xe({},n),e.props),Je(n)[t?"onEvents":"events"]}function st(e,t){var n=((i(e)?e.props:e.$attrs)||{}).style||{};if("string"==typeof n)n=function(){var e=arguments.length>1?arguments[1]:void 0,t={},n=/;(?![^(]*\))/g,i=/:(.+)/;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(n).forEach((function(n){if(n){var r=n.split(i);if(r.length>1){var o=e?ke(r[0].trim()):r[0].trim();t[o]=r[1].trim()}}})),t}(n,t);else if(t&&n){var r={};return Object.keys(n).forEach((function(e){return r[ke(e)]=n[e]})),r}return n}function lt(i){return i.type===e||i.type===t&&0===i.children.length||i.type===n&&""===i.children.trim()}function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return e.forEach((function(e){Array.isArray(e)?n.push.apply(n,Qe(e)):e.type===t?n.push.apply(n,Qe(e.children)):n.push(e)})),n.filter((function(e){return!lt(e)}))}function ut(e){return e&&e.__v_isVNode&&"symbol"!==qe(e.type)}function dt(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var pt={methods:{setState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n="function"==typeof e?e(this.$data,this.$props):e;if(this.getDerivedStateFromProps){var i=this.getDerivedStateFromProps(rt(this),ft(ft({},this.$data),n));if(null===i)return;n=ft(ft({},n),i||{})}ft(this.$data,n),this._.isMounted&&this.$forceUpdate(),r((function(){t&&t()}))},__emit:function(){var e=[].slice.call(arguments,0),t=e[0];t="on".concat(t[0].toUpperCase()).concat(t.substring(1));var n=this.$props[t]||this.$attrs[t];if(e.length&&n)if(Array.isArray(n))for(var i=0,r=n.length;i<r;i++)n[i].apply(n,dt(e.slice(1)));else n.apply(void 0,dt(e.slice(1)))}}},gt=o({name:"ResizeObserver",mixins:[pt],props:{disabled:Boolean,onResize:Function},data:function(){return this.currentElement=null,this.resizeObserver=null,{width:0,height:0}},mounted:function(){this.onComponentUpdated()},updated:function(){this.onComponentUpdated()},beforeUnmount:function(){this.destroyObserver()},methods:{onComponentUpdated:function(){if(this.$props.disabled)this.destroyObserver();else{var e=it(this);e!==this.currentElement&&(this.destroyObserver(),this.currentElement=e),!this.resizeObserver&&e&&(this.resizeObserver=new a(this.handleResize),this.resizeObserver.observe(e))}},handleResize:function(e){var t=e[0].target,n=t.getBoundingClientRect(),i=n.width,r=n.height,o=t.offsetWidth,a=t.offsetHeight,s=Math.floor(i),l=Math.floor(r);if(this.width!==s||this.height!==l){var c={width:s,height:l,offsetWidth:o,offsetHeight:a};this.width=s,this.height=l,this.__emit("resize",c)}},destroyObserver:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},render:function(){var e,t;return null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)[0]}}),vt={placeholder:"Select time"};function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var bt={lang:mt({placeholder:"Select date",rangePlaceholder:["Start date","End date"]},{today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:mt({},vt)},yt={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},DatePicker:bt,TimePicker:vt,Calendar:bt,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",selectAll:"Select current page",selectInvert:"Invert current page",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"}};function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var kt=o({name:"LocaleReceiver",props:{componentName:de.string,defaultLocale:{type:[Object,Function]},children:{type:Function}},setup:function(){return{localeData:s("localeData",{})}},methods:{getLocale:function(){var e=this.componentName,t=void 0===e?"global":e,n=this.defaultLocale||yt[t||"global"],i=this.localeData.antLocale,r=t&&i?i[t]:{};return wt(wt({},"function"==typeof n?n():n),r||{})},getLocaleCode:function(){var e=this.localeData.antLocale,t=e&&e.locale;return e&&e.exist&&!t?yt.locale:t}},render:function(){var e=this.$slots,t=this.children||e.default,n=this.localeData.antLocale;return null==t?void 0:t(this.getLocale(),this.getLocaleCode(),n)}}),xt=function(){var e=(0,s("configProvider",Qo).getPrefixCls)("empty-img-default");return l("svg",{class:e,width:"184",height:"152",viewBox:"0 0 184 152"},[l("g",{fill:"none","fill-rule":"evenodd"},[l("g",{transform:"translate(24 31.67)"},[l("ellipse",{class:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},null),l("path",{class:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},null),l("path",{class:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"},null),l("path",{class:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},null),l("path",{class:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},null)]),l("path",{class:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},null),l("g",{class:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},[l("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},null),l("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},null)])])])};xt.PRESENTED_IMAGE_DEFAULT=!0;var Ct=function(){var e=(0,s("configProvider",Qo).getPrefixCls)("empty-img-simple");return l("svg",{class:e,width:"64",height:"41",viewBox:"0 0 64 41"},[l("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[l("ellipse",{class:"".concat(e,"-ellipse"),fill:"#F5F5F5",cx:"32",cy:"33",rx:"32",ry:"7"},null),l("g",{class:"".concat(e,"-g"),"fill-rule":"nonzero",stroke:"#D9D9D9"},[l("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"},null),l("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:"#FAFAFA",class:"".concat(e,"-path")},null)])])])};Ct.PRESENTED_IMAGE_SIMPLE=!0;var Mt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},St=function(e){var t=e;return t.install=function(n){n.component(t.displayName||t.name,e)},e};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var Tt=l(xt,null,null),At=l(Ct,null,null),It=function(e,t){var n,i=t.slots,r=void 0===i?{}:i,o=t.attrs,a=s("configProvider",Qo),c=a.getPrefixCls,u=a.direction,d=Nt(Nt({},e),o),h=d.prefixCls,f=d.image,p=void 0===f?Tt:f,g=d.description,v=void 0===g?(null===(n=r.description)||void 0===n?void 0:n.call(r))||void 0:g,m=d.imageStyle,b=d.class,y=void 0===b?"":b,w=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(d,["prefixCls","image","description","imageStyle","class"]);return l(kt,{componentName:"Empty",children:function(e){var t,n=c("empty",h),i=void 0!==v?v:e.description,o=null;return o="string"==typeof p?l("img",{alt:"string"==typeof i?i:"empty",src:p},null):p,l("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({class:Ee(n,y,(t={},Ot(t,"".concat(n,"-normal"),p===At),Ot(t,"".concat(n,"-rtl"),"rtl"===u),t))},w),[l("div",{class:"".concat(n,"-image"),style:m},[o]),i&&l("p",{class:"".concat(n,"-description")},[i]),r.default&&l("div",{class:"".concat(n,"-footer")},[ct(r.default())])])}},null)};It.displayName="AEmpty",It.PRESENTED_IMAGE_DEFAULT=Tt,It.PRESENTED_IMAGE_SIMPLE=At,It.inheritAttrs=!1,It.props={prefixCls:de.string,image:de.any,description:de.any,imageStyle:de.object};var Dt,_t,jt=St(It),Lt=function(e){var t=s("configProvider",Qo);return function(e){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return l(jt,{image:jt.PRESENTED_IMAGE_SIMPLE},null);case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return l(jt,{image:jt.PRESENTED_IMAGE_SIMPLE,class:"".concat(n,"-small")},null);default:return l(jt,null,null)}}(e.componentName)};function Rt(e){return l(Lt,{componentName:e},null)}
//! moment.js
//! version : 2.29.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function Pt(){return Dt.apply(null,arguments)}function zt(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function Bt(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function Ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ht(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(Ft(e,t))return!1;return!0}function Ut(e){return void 0===e}function Yt(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function Vt(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function Wt(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function $t(e,t){for(var n in t)Ft(t,n)&&(e[n]=t[n]);return Ft(t,"toString")&&(e.toString=t.toString),Ft(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Gt(e,t,n,i){return or(e,t,n,i,!0).utc()}function Zt(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function qt(e){if(null==e._isValid){var t=Zt(e),n=_t.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function Qt(e){var t=Gt(NaN);return null!=e?$t(Zt(t),e):Zt(t).userInvalidated=!0,t}_t=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var Kt=Pt.momentProperties=[],Xt=!1;function Jt(e,t){var n,i,r;if(Ut(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Ut(t._i)||(e._i=t._i),Ut(t._f)||(e._f=t._f),Ut(t._l)||(e._l=t._l),Ut(t._strict)||(e._strict=t._strict),Ut(t._tzm)||(e._tzm=t._tzm),Ut(t._isUTC)||(e._isUTC=t._isUTC),Ut(t._offset)||(e._offset=t._offset),Ut(t._pf)||(e._pf=Zt(t)),Ut(t._locale)||(e._locale=t._locale),Kt.length>0)for(n=0;n<Kt.length;n++)Ut(r=t[i=Kt[n]])||(e[i]=r);return e}function en(e){Jt(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Xt&&(Xt=!0,Pt.updateOffset(this),Xt=!1)}function tn(e){return e instanceof en||null!=e&&null!=e._isAMomentObject}function nn(e){!1===Pt.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function rn(e,t){var n=!0;return $t((function(){if(null!=Pt.deprecationHandler&&Pt.deprecationHandler(null,e),n){var i,r,o,a=[];for(r=0;r<arguments.length;r++){if(i="","object"==typeof arguments[r]){for(o in i+="\n["+r+"] ",arguments[0])Ft(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[r];a.push(i)}nn(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var on,an={};function sn(e,t){null!=Pt.deprecationHandler&&Pt.deprecationHandler(e,t),an[e]||(nn(t),an[e]=!0)}function ln(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function cn(e,t){var n,i=$t({},e);for(n in t)Ft(t,n)&&(Bt(e[n])&&Bt(t[n])?(i[n]={},$t(i[n],e[n]),$t(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)Ft(e,n)&&!Ft(t,n)&&Bt(e[n])&&(i[n]=$t({},i[n]));return i}function un(e){null!=e&&this.set(e)}Pt.suppressDeprecationWarnings=!1,Pt.deprecationHandler=null,on=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)Ft(e,t)&&n.push(t);return n};function dn(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var hn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,fn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,pn={},gn={};function vn(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(gn[e]=r),t&&(gn[t[0]]=function(){return dn(r.apply(this,arguments),t[1],t[2])}),n&&(gn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function mn(e,t){return e.isValid()?(t=bn(t,e.localeData()),pn[t]=pn[t]||function(e){var t,n,i,r=e.match(hn);for(t=0,n=r.length;t<n;t++)gn[r[t]]?r[t]=gn[r[t]]:r[t]=(i=r[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,o="";for(i=0;i<n;i++)o+=ln(r[i])?r[i].call(t,e):r[i];return o}}(t),pn[t](e)):e.localeData().invalidDate()}function bn(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(fn.lastIndex=0;n>=0&&fn.test(e);)e=e.replace(fn,i),fn.lastIndex=0,n-=1;return e}var yn={};function wn(e,t){var n=e.toLowerCase();yn[n]=yn[n+"s"]=yn[t]=e}function kn(e){return"string"==typeof e?yn[e]||yn[e.toLowerCase()]:void 0}function xn(e){var t,n,i={};for(n in e)Ft(e,n)&&(t=kn(n))&&(i[t]=e[n]);return i}var Cn={};function Mn(e,t){Cn[e]=t}function Sn(e){return e%4==0&&e%100!=0||e%400==0}function En(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function On(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=En(t)),n}function Nn(e,t){return function(n){return null!=n?(An(this,e,n),Pt.updateOffset(this,t),this):Tn(this,e)}}function Tn(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function An(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&Sn(e.year())&&1===e.month()&&29===e.date()?(n=On(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ni(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var In,Dn=/\d/,_n=/\d\d/,jn=/\d{3}/,Ln=/\d{4}/,Rn=/[+-]?\d{6}/,Pn=/\d\d?/,zn=/\d\d\d\d?/,Bn=/\d\d\d\d\d\d?/,Fn=/\d{1,3}/,Hn=/\d{1,4}/,Un=/[+-]?\d{1,6}/,Yn=/\d+/,Vn=/[+-]?\d+/,Wn=/Z|[+-]\d\d:?\d\d/gi,$n=/Z|[+-]\d\d(?::?\d\d)?/gi,Gn=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Zn(e,t,n){In[e]=ln(t)?t:function(e,i){return e&&n?n:t}}function qn(e,t){return Ft(In,e)?In[e](t._strict,t._locale):new RegExp(Qn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,r){return t||n||i||r}))))}function Qn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}In={};var Kn={};function Xn(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),Yt(t)&&(i=function(e,n){n[t]=On(e)}),n=0;n<e.length;n++)Kn[e[n]]=i}function Jn(e,t){Xn(e,(function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)}))}function ei(e,t,n){null!=t&&Ft(Kn,e)&&Kn[e](t,n._a,n,e)}var ti;function ni(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?Sn(e)?29:28:31-i%7%2}ti=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},vn("M",["MM",2],"Mo",(function(){return this.month()+1})),vn("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),vn("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),wn("month","M"),Mn("month",8),Zn("M",Pn),Zn("MM",Pn,_n),Zn("MMM",(function(e,t){return t.monthsShortRegex(e)})),Zn("MMMM",(function(e,t){return t.monthsRegex(e)})),Xn(["M","MM"],(function(e,t){t[1]=On(e)-1})),Xn(["MMM","MMMM"],(function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[1]=r:Zt(n).invalidMonth=e}));var ii="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ri="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),oi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ai=Gn,si=Gn;function li(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=Gt([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=ti.call(this._shortMonthsParse,a))?r:null:-1!==(r=ti.call(this._longMonthsParse,a))?r:null:"MMM"===t?-1!==(r=ti.call(this._shortMonthsParse,a))||-1!==(r=ti.call(this._longMonthsParse,a))?r:null:-1!==(r=ti.call(this._longMonthsParse,a))||-1!==(r=ti.call(this._shortMonthsParse,a))?r:null}function ci(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=On(t);else if(!Yt(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),ni(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ui(e){return null!=e?(ci(this,e),Pt.updateOffset(this,!0),this):Tn(this,"Month")}function di(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],o=[];for(t=0;t<12;t++)n=Gt([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),o.sort(e),t=0;t<12;t++)i[t]=Qn(i[t]),r[t]=Qn(r[t]);for(t=0;t<24;t++)o[t]=Qn(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function hi(e){return Sn(e)?366:365}vn("Y",0,0,(function(){var e=this.year();return e<=9999?dn(e,4):"+"+e})),vn(0,["YY",2],0,(function(){return this.year()%100})),vn(0,["YYYY",4],0,"year"),vn(0,["YYYYY",5],0,"year"),vn(0,["YYYYYY",6,!0],0,"year"),wn("year","y"),Mn("year",1),Zn("Y",Vn),Zn("YY",Pn,_n),Zn("YYYY",Hn,Ln),Zn("YYYYY",Un,Rn),Zn("YYYYYY",Un,Rn),Xn(["YYYYY","YYYYYY"],0),Xn("YYYY",(function(e,t){t[0]=2===e.length?Pt.parseTwoDigitYear(e):On(e)})),Xn("YY",(function(e,t){t[0]=Pt.parseTwoDigitYear(e)})),Xn("Y",(function(e,t){t[0]=parseInt(e,10)})),Pt.parseTwoDigitYear=function(e){return On(e)+(On(e)>68?1900:2e3)};var fi=Nn("FullYear",!0);function pi(e,t,n,i,r,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,r,o,a),s}function gi(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function vi(e,t,n){var i=7+t-n;return-((7+gi(e,0,i).getUTCDay()-t)%7)+i-1}function mi(e,t,n,i,r){var o,a,s=1+7*(t-1)+(7+n-i)%7+vi(e,i,r);return s<=0?a=hi(o=e-1)+s:s>hi(e)?(o=e+1,a=s-hi(e)):(o=e,a=s),{year:o,dayOfYear:a}}function bi(e,t,n){var i,r,o=vi(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?i=a+yi(r=e.year()-1,t,n):a>yi(e.year(),t,n)?(i=a-yi(e.year(),t,n),r=e.year()+1):(r=e.year(),i=a),{week:i,year:r}}function yi(e,t,n){var i=vi(e,t,n),r=vi(e+1,t,n);return(hi(e)-i+r)/7}vn("w",["ww",2],"wo","week"),vn("W",["WW",2],"Wo","isoWeek"),wn("week","w"),wn("isoWeek","W"),Mn("week",5),Mn("isoWeek",5),Zn("w",Pn),Zn("ww",Pn,_n),Zn("W",Pn),Zn("WW",Pn,_n),Jn(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=On(e)}));function wi(e,t){return e.slice(t,7).concat(e.slice(0,t))}vn("d",0,"do","day"),vn("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),vn("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),vn("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),vn("e",0,0,"weekday"),vn("E",0,0,"isoWeekday"),wn("day","d"),wn("weekday","e"),wn("isoWeekday","E"),Mn("day",11),Mn("weekday",11),Mn("isoWeekday",11),Zn("d",Pn),Zn("e",Pn),Zn("E",Pn),Zn("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Zn("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Zn("dddd",(function(e,t){return t.weekdaysRegex(e)})),Jn(["dd","ddd","dddd"],(function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:Zt(n).invalidWeekday=e})),Jn(["d","e","E"],(function(e,t,n,i){t[i]=On(e)}));var ki="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),xi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ci="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mi=Gn,Si=Gn,Ei=Gn;function Oi(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=Gt([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=ti.call(this._weekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ti.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=ti.call(this._minWeekdaysParse,a))?r:null:"dddd"===t?-1!==(r=ti.call(this._weekdaysParse,a))||-1!==(r=ti.call(this._shortWeekdaysParse,a))||-1!==(r=ti.call(this._minWeekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ti.call(this._shortWeekdaysParse,a))||-1!==(r=ti.call(this._weekdaysParse,a))||-1!==(r=ti.call(this._minWeekdaysParse,a))?r:null:-1!==(r=ti.call(this._minWeekdaysParse,a))||-1!==(r=ti.call(this._weekdaysParse,a))||-1!==(r=ti.call(this._shortWeekdaysParse,a))?r:null}function Ni(){function e(e,t){return t.length-e.length}var t,n,i,r,o,a=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=Gt([2e3,1]).day(t),i=Qn(this.weekdaysMin(n,"")),r=Qn(this.weekdaysShort(n,"")),o=Qn(this.weekdays(n,"")),a.push(i),s.push(r),l.push(o),c.push(i),c.push(r),c.push(o);a.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ti(){return this.hours()%12||12}function Ai(e,t){vn(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Ii(e,t){return t._meridiemParse}vn("H",["HH",2],0,"hour"),vn("h",["hh",2],0,Ti),vn("k",["kk",2],0,(function(){return this.hours()||24})),vn("hmm",0,0,(function(){return""+Ti.apply(this)+dn(this.minutes(),2)})),vn("hmmss",0,0,(function(){return""+Ti.apply(this)+dn(this.minutes(),2)+dn(this.seconds(),2)})),vn("Hmm",0,0,(function(){return""+this.hours()+dn(this.minutes(),2)})),vn("Hmmss",0,0,(function(){return""+this.hours()+dn(this.minutes(),2)+dn(this.seconds(),2)})),Ai("a",!0),Ai("A",!1),wn("hour","h"),Mn("hour",13),Zn("a",Ii),Zn("A",Ii),Zn("H",Pn),Zn("h",Pn),Zn("k",Pn),Zn("HH",Pn,_n),Zn("hh",Pn,_n),Zn("kk",Pn,_n),Zn("hmm",zn),Zn("hmmss",Bn),Zn("Hmm",zn),Zn("Hmmss",Bn),Xn(["H","HH"],3),Xn(["k","kk"],(function(e,t,n){var i=On(e);t[3]=24===i?0:i})),Xn(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Xn(["h","hh"],(function(e,t,n){t[3]=On(e),Zt(n).bigHour=!0})),Xn("hmm",(function(e,t,n){var i=e.length-2;t[3]=On(e.substr(0,i)),t[4]=On(e.substr(i)),Zt(n).bigHour=!0})),Xn("hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[3]=On(e.substr(0,i)),t[4]=On(e.substr(i,2)),t[5]=On(e.substr(r)),Zt(n).bigHour=!0})),Xn("Hmm",(function(e,t,n){var i=e.length-2;t[3]=On(e.substr(0,i)),t[4]=On(e.substr(i))})),Xn("Hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[3]=On(e.substr(0,i)),t[4]=On(e.substr(i,2)),t[5]=On(e.substr(r))}));var Di=Nn("Hours",!0);var _i,ji={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:ii,monthsShort:ri,week:{dow:0,doy:6},weekdays:ki,weekdaysMin:Ci,weekdaysShort:xi,meridiemParse:/[ap]\.?m?\.?/i},Li={},Ri={};function Pi(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function zi(e){return e?e.toLowerCase().replace("_","-"):e}function Bi(e){var t=null;if(void 0===Li[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=_i._abbr,require("./locale/"+e),Fi(t)}catch(n){Li[e]=null}return Li[e]}function Fi(e,t){var n;return e&&((n=Ut(t)?Ui(e):Hi(e,t))?_i=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),_i._abbr}function Hi(e,t){if(null!==t){var n,i=ji;if(t.abbr=e,null!=Li[e])sn("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Li[e]._config;else if(null!=t.parentLocale)if(null!=Li[t.parentLocale])i=Li[t.parentLocale]._config;else{if(null==(n=Bi(t.parentLocale)))return Ri[t.parentLocale]||(Ri[t.parentLocale]=[]),Ri[t.parentLocale].push({name:e,config:t}),null;i=n._config}return Li[e]=new un(cn(i,t)),Ri[e]&&Ri[e].forEach((function(e){Hi(e.name,e.config)})),Fi(e),Li[e]}return delete Li[e],null}function Ui(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return _i;if(!zt(e)){if(t=Bi(e))return t;e=[e]}return function(e){for(var t,n,i,r,o=0;o<e.length;){for(t=(r=zi(e[o]).split("-")).length,n=(n=zi(e[o+1]))?n.split("-"):null;t>0;){if(i=Bi(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&Pi(r,n)>=t-1)break;t--}o++}return _i}(e)}function Yi(e){var t,n=e._a;return n&&-2===Zt(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>ni(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,Zt(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),Zt(e)._overflowWeeks&&-1===t&&(t=7),Zt(e)._overflowWeekday&&-1===t&&(t=8),Zt(e).overflow=t),e}var Vi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$i=/Z|[+-]\d\d(?::?\d\d)?/,Gi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Zi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qi=/^\/?Date\((-?\d+)/i,Qi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ki={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Xi(e){var t,n,i,r,o,a,s=e._i,l=Vi.exec(s)||Wi.exec(s);if(l){for(Zt(e).iso=!0,t=0,n=Gi.length;t<n;t++)if(Gi[t][1].exec(l[1])){r=Gi[t][0],i=!1!==Gi[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=Zi.length;t<n;t++)if(Zi[t][1].exec(l[3])){o=(l[2]||" ")+Zi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(l[4]){if(!$i.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=r+(o||"")+(a||""),ir(e)}else e._isValid=!1}function Ji(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function er(e){var t,n,i,r,o,a,s,l,c=Qi.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],i=c[3],r=c[2],o=c[5],a=c[6],s=c[7],l=[Ji(n),ri.indexOf(i),parseInt(r,10),parseInt(o,10),parseInt(a,10)],s&&l.push(parseInt(s,10)),t=l,!function(e,t,n){return!e||xi.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(Zt(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return Ki[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(c[8],c[9],c[10]),e._d=gi.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Zt(e).rfc2822=!0}else e._isValid=!1}function tr(e,t,n){return null!=e?e:null!=t?t:n}function nr(e){var t,n,i,r,o,a=[];if(!e._d){for(i=function(e){var t=new Date(Pt.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,i,r,o,a,s,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=tr(t.GG,e._a[0],bi(ar(),1,4).year),i=tr(t.W,1),((r=tr(t.E,1))<1||r>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,c=bi(ar(),o,a),n=tr(t.gg,e._a[0],c.year),i=tr(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(l=!0)):r=o);i<1||i>yi(n,o,a)?Zt(e)._overflowWeeks=!0:null!=l?Zt(e)._overflowWeekday=!0:(s=mi(n,i,r,o,a),e._a[0]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(o=tr(e._a[0],i[0]),(e._dayOfYear>hi(o)||0===e._dayOfYear)&&(Zt(e)._overflowDayOfYear=!0),n=gi(o,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?gi:pi).apply(null,a),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(Zt(e).weekdayMismatch=!0)}}function ir(e){if(e._f!==Pt.ISO_8601)if(e._f!==Pt.RFC_2822){e._a=[],Zt(e).empty=!0;var t,n,i,r,o,a,s=""+e._i,l=s.length,c=0;for(i=bn(e._f,e._locale).match(hn)||[],t=0;t<i.length;t++)r=i[t],(n=(s.match(qn(r,e))||[])[0])&&((o=s.substr(0,s.indexOf(n))).length>0&&Zt(e).unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),c+=n.length),gn[r]?(n?Zt(e).empty=!1:Zt(e).unusedTokens.push(r),ei(r,n,e)):e._strict&&!n&&Zt(e).unusedTokens.push(r);Zt(e).charsLeftOver=l-c,s.length>0&&Zt(e).unusedInput.push(s),e._a[3]<=12&&!0===Zt(e).bigHour&&e._a[3]>0&&(Zt(e).bigHour=void 0),Zt(e).parsedDateParts=e._a.slice(0),Zt(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var i;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(a=Zt(e).era)&&(e._a[0]=e._locale.erasConvertYear(a,e._a[0])),nr(e),Yi(e)}else er(e);else Xi(e)}function rr(e){var t=e._i,n=e._f;return e._locale=e._locale||Ui(e._l),null===t||void 0===n&&""===t?Qt({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),tn(t)?new en(Yi(t)):(Vt(t)?e._d=t:zt(n)?function(e){var t,n,i,r,o,a,s=!1;if(0===e._f.length)return Zt(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,a=!1,t=Jt({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],ir(t),qt(t)&&(a=!0),o+=Zt(t).charsLeftOver,o+=10*Zt(t).unusedTokens.length,Zt(t).score=o,s?o<i&&(i=o,n=t):(null==i||o<i||a)&&(i=o,n=t,a&&(s=!0));$t(e,n||t)}(e):n?ir(e):function(e){var t=e._i;Ut(t)?e._d=new Date(Pt.now()):Vt(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=qi.exec(e._i);null===t?(Xi(e),!1===e._isValid&&(delete e._isValid,er(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:Pt.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):zt(t)?(e._a=Wt(t.slice(0),(function(e){return parseInt(e,10)})),nr(e)):Bt(t)?function(e){if(!e._d){var t=xn(e._i),n=void 0===t.day?t.date:t.day;e._a=Wt([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),nr(e)}}(e):Yt(t)?e._d=new Date(t):Pt.createFromInputFallback(e)}(e),qt(e)||(e._d=null),e))}function or(e,t,n,i,r){var o,a={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(Bt(e)&&Ht(e)||zt(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=r,a._l=n,a._i=e,a._f=t,a._strict=i,(o=new en(Yi(rr(a))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function ar(e,t,n,i){return or(e,t,n,i,!1)}Pt.createFromInputFallback=rn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),Pt.ISO_8601=function(){},Pt.RFC_2822=function(){};var sr=rn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=ar.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Qt()})),lr=rn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=ar.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Qt()}));function cr(e,t){var n,i;if(1===t.length&&zt(t[0])&&(t=t[0]),!t.length)return ar();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var ur=["year","quarter","month","week","day","hour","minute","second","millisecond"];function dr(e){var t=xn(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=function(e){var t,n,i=!1;for(t in e)if(Ft(e,t)&&(-1===ti.call(ur,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<ur.length;++n)if(e[ur[n]]){if(i)return!1;parseFloat(e[ur[n]])!==On(e[ur[n]])&&(i=!0)}return!0}(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=Ui(),this._bubble()}function hr(e){return e instanceof dr}function fr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function pr(e,t){vn(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+dn(~~(e/60),2)+t+dn(~~e%60,2)}))}pr("Z",":"),pr("ZZ",""),Zn("Z",$n),Zn("ZZ",$n),Xn(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=vr($n,e)}));var gr=/([\+\-]|\d\d)/gi;function vr(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(gr)||["-",0,0])[1]+On(n[2]))?0:"+"===n[0]?i:-i}function mr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(tn(e)||Vt(e)?e.valueOf():ar(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),Pt.updateOffset(n,!1),n):ar(e).local()}function br(e){return-Math.round(e._d.getTimezoneOffset())}function yr(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}Pt.updateOffset=function(){};var wr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function xr(e,t){var n,i,r,o=e,a=null;return hr(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:Yt(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(a=wr.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:On(a[2])*n,h:On(a[3])*n,m:On(a[4])*n,s:On(a[5])*n,ms:On(fr(1e3*a[6]))*n}):(a=kr.exec(e))?(n="-"===a[1]?-1:1,o={y:Cr(a[2],n),M:Cr(a[3],n),w:Cr(a[4],n),d:Cr(a[5],n),h:Cr(a[6],n),m:Cr(a[7],n),s:Cr(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=mr(t,e),e.isBefore(t)?n=Mr(e,t):((n=Mr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(ar(o.from),ar(o.to)),(o={}).ms=r.milliseconds,o.M=r.months),i=new dr(o),hr(e)&&Ft(e,"_locale")&&(i._locale=e._locale),hr(e)&&Ft(e,"_isValid")&&(i._isValid=e._isValid),i}function Cr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Mr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Sr(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(sn(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Er(this,xr(n,i),e),this}}function Er(e,t,n,i){var r=t._milliseconds,o=fr(t._days),a=fr(t._months);e.isValid()&&(i=null==i||i,a&&ci(e,Tn(e,"Month")+a*n),o&&An(e,"Date",Tn(e,"Date")+o*n),r&&e._d.setTime(e._d.valueOf()+r*n),i&&Pt.updateOffset(e,o||a))}xr.fn=dr.prototype,xr.invalid=function(){return xr(NaN)};var Or=Sr(1,"add"),Nr=Sr(-1,"subtract");function Tr(e){return"string"==typeof e||e instanceof String}function Ar(e){return tn(e)||Vt(e)||Tr(e)||Yt(e)||function(e){var t=zt(e),n=!1;t&&(n=0===e.filter((function(t){return!Yt(t)&&Tr(e)})).length);return t&&n}(e)||function(e){var t,n,i=Bt(e)&&!Ht(e),r=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<o.length;t+=1)n=o[t],r=r||Ft(e,n);return i&&r}(e)||null==e}function Ir(e){var t,n=Bt(e)&&!Ht(e),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)i=i||Ft(e,r[t]);return n&&i}function Dr(e,t){if(e.date()<t.date())return-Dr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function _r(e){var t;return void 0===e?this._locale._abbr:(null!=(t=Ui(e))&&(this._locale=t),this)}Pt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",Pt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var jr=rn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function Lr(){return this._locale}function Rr(e,t){return(e%t+t)%t}function Pr(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function zr(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function Br(e,t){return t.erasAbbrRegex(e)}function Fr(){var e,t,n=[],i=[],r=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)i.push(Qn(a[e].name)),n.push(Qn(a[e].abbr)),r.push(Qn(a[e].narrow)),o.push(Qn(a[e].name)),o.push(Qn(a[e].abbr)),o.push(Qn(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function Hr(e,t){vn(0,[e,e.length],0,t)}function Ur(e,t,n,i,r){var o;return null==e?bi(this,i,r).year:(t>(o=yi(e,i,r))&&(t=o),Yr.call(this,e,t,n,i,r))}function Yr(e,t,n,i,r){var o=mi(e,t,n,i,r),a=gi(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}vn("N",0,0,"eraAbbr"),vn("NN",0,0,"eraAbbr"),vn("NNN",0,0,"eraAbbr"),vn("NNNN",0,0,"eraName"),vn("NNNNN",0,0,"eraNarrow"),vn("y",["y",1],"yo","eraYear"),vn("y",["yy",2],0,"eraYear"),vn("y",["yyy",3],0,"eraYear"),vn("y",["yyyy",4],0,"eraYear"),Zn("N",Br),Zn("NN",Br),Zn("NNN",Br),Zn("NNNN",(function(e,t){return t.erasNameRegex(e)})),Zn("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),Xn(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?Zt(n).era=r:Zt(n).invalidEra=e})),Zn("y",Yn),Zn("yy",Yn),Zn("yyy",Yn),Zn("yyyy",Yn),Zn("yo",(function(e,t){return t._eraYearOrdinalRegex||Yn})),Xn(["y","yy","yyy","yyyy"],0),Xn(["yo"],(function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,r):t[0]=parseInt(e,10)})),vn(0,["gg",2],0,(function(){return this.weekYear()%100})),vn(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Hr("gggg","weekYear"),Hr("ggggg","weekYear"),Hr("GGGG","isoWeekYear"),Hr("GGGGG","isoWeekYear"),wn("weekYear","gg"),wn("isoWeekYear","GG"),Mn("weekYear",1),Mn("isoWeekYear",1),Zn("G",Vn),Zn("g",Vn),Zn("GG",Pn,_n),Zn("gg",Pn,_n),Zn("GGGG",Hn,Ln),Zn("gggg",Hn,Ln),Zn("GGGGG",Un,Rn),Zn("ggggg",Un,Rn),Jn(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=On(e)})),Jn(["gg","GG"],(function(e,t,n,i){t[i]=Pt.parseTwoDigitYear(e)})),vn("Q",0,"Qo","quarter"),wn("quarter","Q"),Mn("quarter",7),Zn("Q",Dn),Xn("Q",(function(e,t){t[1]=3*(On(e)-1)})),vn("D",["DD",2],"Do","date"),wn("date","D"),Mn("date",9),Zn("D",Pn),Zn("DD",Pn,_n),Zn("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Xn(["D","DD"],2),Xn("Do",(function(e,t){t[2]=On(e.match(Pn)[0])}));var Vr=Nn("Date",!0);vn("DDD",["DDDD",3],"DDDo","dayOfYear"),wn("dayOfYear","DDD"),Mn("dayOfYear",4),Zn("DDD",Fn),Zn("DDDD",jn),Xn(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=On(e)})),vn("m",["mm",2],0,"minute"),wn("minute","m"),Mn("minute",14),Zn("m",Pn),Zn("mm",Pn,_n),Xn(["m","mm"],4);var Wr=Nn("Minutes",!1);vn("s",["ss",2],0,"second"),wn("second","s"),Mn("second",15),Zn("s",Pn),Zn("ss",Pn,_n),Xn(["s","ss"],5);var $r,Gr,Zr=Nn("Seconds",!1);for(vn("S",0,0,(function(){return~~(this.millisecond()/100)})),vn(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),vn(0,["SSS",3],0,"millisecond"),vn(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),vn(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),vn(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),vn(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),vn(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),vn(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),wn("millisecond","ms"),Mn("millisecond",16),Zn("S",Fn,Dn),Zn("SS",Fn,_n),Zn("SSS",Fn,jn),$r="SSSS";$r.length<=9;$r+="S")Zn($r,Yn);function qr(e,t){t[6]=On(1e3*("0."+e))}for($r="S";$r.length<=9;$r+="S")Xn($r,qr);Gr=Nn("Milliseconds",!1),vn("z",0,0,"zoneAbbr"),vn("zz",0,0,"zoneName");var Qr=en.prototype;function Kr(e){return e}Qr.add=Or,Qr.calendar=function(e,t){1===arguments.length&&(arguments[0]?Ar(arguments[0])?(e=arguments[0],t=void 0):Ir(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||ar(),i=mr(n,this).startOf("day"),r=Pt.calendarFormat(this,i)||"sameElse",o=t&&(ln(t[r])?t[r].call(this,n):t[r]);return this.format(o||this.localeData().calendar(r,this,ar(n)))},Qr.clone=function(){return new en(this)},Qr.diff=function(e,t,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=mr(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=kn(t)){case"year":o=Dr(this,i)/12;break;case"month":o=Dr(this,i);break;case"quarter":o=Dr(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:En(o)},Qr.endOf=function(e){var t,n;if(void 0===(e=kn(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?zr:Pr,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Rr(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Rr(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Rr(t,1e3)-1}return this._d.setTime(t),Pt.updateOffset(this,!0),this},Qr.format=function(e){e||(e=this.isUtc()?Pt.defaultFormatUtc:Pt.defaultFormat);var t=mn(this,e);return this.localeData().postformat(t)},Qr.from=function(e,t){return this.isValid()&&(tn(e)&&e.isValid()||ar(e).isValid())?xr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Qr.fromNow=function(e){return this.from(ar(),e)},Qr.to=function(e,t){return this.isValid()&&(tn(e)&&e.isValid()||ar(e).isValid())?xr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Qr.toNow=function(e){return this.to(ar(),e)},Qr.get=function(e){return ln(this[e=kn(e)])?this[e]():this},Qr.invalidAt=function(){return Zt(this).overflow},Qr.isAfter=function(e,t){var n=tn(e)?e:ar(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=kn(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Qr.isBefore=function(e,t){var n=tn(e)?e:ar(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=kn(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Qr.isBetween=function(e,t,n,i){var r=tn(e)?e:ar(e),o=tn(t)?t:ar(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n)))},Qr.isSame=function(e,t){var n,i=tn(e)?e:ar(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=kn(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Qr.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Qr.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Qr.isValid=function(){return qt(this)},Qr.lang=jr,Qr.locale=_r,Qr.localeData=Lr,Qr.max=lr,Qr.min=sr,Qr.parsingFlags=function(){return $t({},Zt(this))},Qr.set=function(e,t){if("object"==typeof e){var n,i=function(e){var t,n=[];for(t in e)Ft(e,t)&&n.push({unit:t,priority:Cn[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=xn(e));for(n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit])}else if(ln(this[e=kn(e)]))return this[e](t);return this},Qr.startOf=function(e){var t,n;if(void 0===(e=kn(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?zr:Pr,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Rr(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Rr(t,6e4);break;case"second":t=this._d.valueOf(),t-=Rr(t,1e3)}return this._d.setTime(t),Pt.updateOffset(this,!0),this},Qr.subtract=Nr,Qr.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Qr.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Qr.toDate=function(){return new Date(this.valueOf())},Qr.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?mn(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ln(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",mn(n,"Z")):mn(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Qr.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY","-MM-DD[T]HH:mm:ss.SSS",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Qr[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Qr.toJSON=function(){return this.isValid()?this.toISOString():null},Qr.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Qr.unix=function(){return Math.floor(this.valueOf()/1e3)},Qr.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Qr.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Qr.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},Qr.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},Qr.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},Qr.eraYear=function(){var e,t,n,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,i=this.clone().startOf("day").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since)return(this.year()-Pt(r[e].since).year())*n+r[e].offset;return this.year()},Qr.year=fi,Qr.isLeapYear=function(){return Sn(this.year())},Qr.weekYear=function(e){return Ur.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Qr.isoWeekYear=function(e){return Ur.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Qr.quarter=Qr.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Qr.month=ui,Qr.daysInMonth=function(){return ni(this.year(),this.month())},Qr.week=Qr.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Qr.isoWeek=Qr.isoWeeks=function(e){var t=bi(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Qr.weeksInYear=function(){var e=this.localeData()._week;return yi(this.year(),e.dow,e.doy)},Qr.weeksInWeekYear=function(){var e=this.localeData()._week;return yi(this.weekYear(),e.dow,e.doy)},Qr.isoWeeksInYear=function(){return yi(this.year(),1,4)},Qr.isoWeeksInISOWeekYear=function(){return yi(this.isoWeekYear(),1,4)},Qr.date=Vr,Qr.day=Qr.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Qr.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Qr.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Qr.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Qr.hour=Qr.hours=Di,Qr.minute=Qr.minutes=Wr,Qr.second=Qr.seconds=Zr,Qr.millisecond=Qr.milliseconds=Gr,Qr.utcOffset=function(e,t,n){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=vr($n,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=br(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Er(this,xr(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Pt.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:br(this)},Qr.utc=function(e){return this.utcOffset(0,e)},Qr.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(br(this),"m")),this},Qr.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=vr(Wn,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Qr.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?ar(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Qr.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Qr.isLocal=function(){return!!this.isValid()&&!this._isUTC},Qr.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Qr.isUtc=yr,Qr.isUTC=yr,Qr.zoneAbbr=function(){return this._isUTC?"UTC":""},Qr.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Qr.dates=rn("dates accessor is deprecated. Use date instead.",Vr),Qr.months=rn("months accessor is deprecated. Use month instead",ui),Qr.years=rn("years accessor is deprecated. Use year instead",fi),Qr.zone=rn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),Qr.isDSTShifted=rn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!Ut(this._isDSTShifted))return this._isDSTShifted;var e,t={};return Jt(t,this),(t=rr(t))._a?(e=t._isUTC?Gt(t._a):ar(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&On(e[i])!==On(t[i]))&&a++;return a+o}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var Xr=un.prototype;function Jr(e,t,n,i){var r=Ui(),o=Gt().set(i,t);return r[n](o,e)}function eo(e,t,n){if(Yt(e)&&(t=e,e=void 0),e=e||"",null!=t)return Jr(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=Jr(e,i,n,"month");return r}function to(e,t,n,i){"boolean"==typeof e?(Yt(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,Yt(t)&&(n=t,t=void 0),t=t||"");var r,o=Ui(),a=e?o._week.dow:0,s=[];if(null!=n)return Jr(t,(n+a)%7,i,"day");for(r=0;r<7;r++)s[r]=Jr(t,(r+a)%7,i,"day");return s}Xr.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return ln(i)?i.call(t,n):i},Xr.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(hn).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},Xr.invalidDate=function(){return this._invalidDate},Xr.ordinal=function(e){return this._ordinal.replace("%d",e)},Xr.preparse=Kr,Xr.postformat=Kr,Xr.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return ln(r)?r(e,t,n,i):r.replace(/%d/i,e)},Xr.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return ln(n)?n(t):n.replace(/%s/i,t)},Xr.set=function(e){var t,n;for(n in e)Ft(e,n)&&(ln(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Xr.eras=function(e,t){var n,i,r,o=this._eras||Ui("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":r=Pt(o[n].since).startOf("day"),o[n].since=r.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=Pt(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf()}}return o},Xr.erasParse=function(e,t,n){var i,r,o,a,s,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(o=l[i].name.toUpperCase(),a=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[i];break;case"NNNN":if(o===e)return l[i];break;case"NNNNN":if(s===e)return l[i]}else if([o,a,s].indexOf(e)>=0)return l[i]},Xr.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?Pt(e.since).year():Pt(e.since).year()+(t-e.offset)*n},Xr.erasAbbrRegex=function(e){return Ft(this,"_erasAbbrRegex")||Fr.call(this),e?this._erasAbbrRegex:this._erasRegex},Xr.erasNameRegex=function(e){return Ft(this,"_erasNameRegex")||Fr.call(this),e?this._erasNameRegex:this._erasRegex},Xr.erasNarrowRegex=function(e){return Ft(this,"_erasNarrowRegex")||Fr.call(this),e?this._erasNarrowRegex:this._erasRegex},Xr.months=function(e,t){return e?zt(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||oi).test(t)?"format":"standalone"][e.month()]:zt(this._months)?this._months:this._months.standalone},Xr.monthsShort=function(e,t){return e?zt(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[oi.test(t)?"format":"standalone"][e.month()]:zt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Xr.monthsParse=function(e,t,n){var i,r,o;if(this._monthsParseExact)return li.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=Gt([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},Xr.monthsRegex=function(e){return this._monthsParseExact?(Ft(this,"_monthsRegex")||di.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Ft(this,"_monthsRegex")||(this._monthsRegex=si),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Xr.monthsShortRegex=function(e){return this._monthsParseExact?(Ft(this,"_monthsRegex")||di.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Ft(this,"_monthsShortRegex")||(this._monthsShortRegex=ai),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Xr.week=function(e){return bi(e,this._week.dow,this._week.doy).week},Xr.firstDayOfYear=function(){return this._week.doy},Xr.firstDayOfWeek=function(){return this._week.dow},Xr.weekdays=function(e,t){var n=zt(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?wi(n,this._week.dow):e?n[e.day()]:n},Xr.weekdaysMin=function(e){return!0===e?wi(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Xr.weekdaysShort=function(e){return!0===e?wi(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Xr.weekdaysParse=function(e,t,n){var i,r,o;if(this._weekdaysParseExact)return Oi.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=Gt([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},Xr.weekdaysRegex=function(e){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||Ni.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Ft(this,"_weekdaysRegex")||(this._weekdaysRegex=Mi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Xr.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||Ni.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ft(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Si),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Xr.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||Ni.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ft(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ei),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Xr.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Xr.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},Fi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===On(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),Pt.lang=rn("moment.lang is deprecated. Use moment.locale instead.",Fi),Pt.langData=rn("moment.langData is deprecated. Use moment.localeData instead.",Ui);var no=Math.abs;function io(e,t,n,i){var r=xr(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function ro(e){return e<0?Math.floor(e):Math.ceil(e)}function oo(e){return 4800*e/146097}function ao(e){return 146097*e/4800}function so(e){return function(){return this.as(e)}}var lo=so("ms"),co=so("s"),uo=so("m"),ho=so("h"),fo=so("d"),po=so("w"),go=so("M"),vo=so("Q"),mo=so("y");function bo(e){return function(){return this.isValid()?this._data[e]:NaN}}var yo=bo("milliseconds"),wo=bo("seconds"),ko=bo("minutes"),xo=bo("hours"),Co=bo("days"),Mo=bo("months"),So=bo("years");var Eo=Math.round,Oo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function No(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}var To=Math.abs;function Ao(e){return(e>0)-(e<0)||+e}function Io(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,o,a,s,l=To(this._milliseconds)/1e3,c=To(this._days),u=To(this._months),d=this.asSeconds();return d?(e=En(l/60),t=En(e/60),l%=60,e%=60,n=En(u/12),u%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=d<0?"-":"",o=Ao(this._months)!==Ao(d)?"-":"",a=Ao(this._days)!==Ao(d)?"-":"",s=Ao(this._milliseconds)!==Ao(d)?"-":"",r+"P"+(n?o+n+"Y":"")+(u?o+u+"M":"")+(c?a+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+i+"S":"")):"P0D"}var Do=dr.prototype;function _o(e){return e.default||e}function jo(){return(jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Do.isValid=function(){return this._isValid},Do.abs=function(){var e=this._data;return this._milliseconds=no(this._milliseconds),this._days=no(this._days),this._months=no(this._months),e.milliseconds=no(e.milliseconds),e.seconds=no(e.seconds),e.minutes=no(e.minutes),e.hours=no(e.hours),e.months=no(e.months),e.years=no(e.years),this},Do.add=function(e,t){return io(this,e,t,1)},Do.subtract=function(e,t){return io(this,e,t,-1)},Do.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=kn(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+oo(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(ao(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Do.asMilliseconds=lo,Do.asSeconds=co,Do.asMinutes=uo,Do.asHours=ho,Do.asDays=fo,Do.asWeeks=po,Do.asMonths=go,Do.asQuarters=vo,Do.asYears=mo,Do.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*On(this._months/12):NaN},Do._bubble=function(){var e,t,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*ro(ao(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=En(o/1e3),l.seconds=e%60,t=En(e/60),l.minutes=t%60,n=En(t/60),l.hours=n%24,a+=En(n/24),s+=r=En(oo(a)),a-=ro(ao(r)),i=En(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},Do.clone=function(){return xr(this)},Do.get=function(e){return e=kn(e),this.isValid()?this[e+"s"]():NaN},Do.milliseconds=yo,Do.seconds=wo,Do.minutes=ko,Do.hours=xo,Do.days=Co,Do.weeks=function(){return En(this.days()/7)},Do.months=Mo,Do.years=So,Do.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=Oo;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},Oo,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),i=function(e,t,n,i){var r=xr(e).abs(),o=Eo(r.as("s")),a=Eo(r.as("m")),s=Eo(r.as("h")),l=Eo(r.as("d")),c=Eo(r.as("M")),u=Eo(r.as("w")),d=Eo(r.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||u<=1&&["w"]||u<n.w&&["ww",u]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=i,No.apply(null,h)}(this,!r,o,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},Do.toISOString=Io,Do.toString=Io,Do.toJSON=Io,Do.locale=_r,Do.localeData=Lr,Do.toIsoString=rn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Io),Do.lang=jr,vn("X",0,0,"unix"),vn("x",0,0,"valueOf"),Zn("x",Vn),Zn("X",/[+-]?\d+(\.\d{1,3})?/),Xn("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Xn("x",(function(e,t,n){n._d=new Date(On(e))})),
//! moment.js
Pt.version="2.29.1",Dt=ar,Pt.fn=Qr,Pt.min=function(){var e=[].slice.call(arguments,0);return cr("isBefore",e)},Pt.max=function(){var e=[].slice.call(arguments,0);return cr("isAfter",e)},Pt.now=function(){return Date.now?Date.now():+new Date},Pt.utc=Gt,Pt.unix=function(e){return ar(1e3*e)},Pt.months=function(e,t){return eo(e,t,"months")},Pt.isDate=Vt,Pt.locale=Fi,Pt.invalid=Qt,Pt.duration=xr,Pt.isMoment=tn,Pt.weekdays=function(e,t,n){return to(e,t,n,"weekdays")},Pt.parseZone=function(){return ar.apply(null,arguments).parseZone()},Pt.localeData=Ui,Pt.isDuration=hr,Pt.monthsShort=function(e,t){return eo(e,t,"monthsShort")},Pt.weekdaysMin=function(e,t,n){return to(e,t,n,"weekdaysMin")},Pt.defineLocale=Hi,Pt.updateLocale=function(e,t){if(null!=t){var n,i,r=ji;null!=Li[e]&&null!=Li[e].parentLocale?Li[e].set(cn(Li[e]._config,t)):(null!=(i=Bi(e))&&(r=i._config),t=cn(r,t),null==i&&(t.abbr=e),(n=new un(t)).parentLocale=Li[e],Li[e]=n),Fi(e)}else null!=Li[e]&&(null!=Li[e].parentLocale?(Li[e]=Li[e].parentLocale,e===Fi()&&Fi(e)):null!=Li[e]&&delete Li[e]);return Li[e]},Pt.locales=function(){return on(Li)},Pt.weekdaysShort=function(e,t,n){return to(e,t,n,"weekdaysShort")},Pt.normalizeUnits=kn,Pt.relativeTimeRounding=function(e){return void 0===e?Eo:"function"==typeof e&&(Eo=e,!0)},Pt.relativeTimeThreshold=function(e,t){return void 0!==Oo[e]&&(void 0===t?Oo[e]:(Oo[e]=t,"s"===e&&(Oo.ss=t-1),!0))},Pt.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},Pt.prototype=Qr,Pt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var Lo=jo({},yt.Modal);function Ro(e){Lo=e?jo(jo({},Lo),e):jo({},yt.Modal)}var Po={};function zo(e,t){}function Bo(e,t){}function Fo(e,t,n){t||Po[n]||(e(!1,n),Po[n]=!0)}function Ho(e,t){Fo(zo,e,t)}function Uo(e,t){Fo(Bo,e,t)}var Yo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Ho(e,"[antdv: ".concat(t,"] ").concat(n))};function Vo(){return(Vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Wo(e){e&&e.locale?_o(Pt).locale(e.locale):_o(Pt).locale("en")}var $o=o({name:"ALocaleProvider",props:{locale:{type:Object},ANT_MARK__:de.string},setup:function(e){Yo("internalMark"===e.ANT_MARK__,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead");var t=c({antLocale:Vo(Vo({},e.locale),{exist:!0}),ANT_MARK__:"internalMark"});return u("localeData",t),{state:t}},watch:{locale:function(e){this.state.antLocale=Vo(Vo({},e),{exist:!0}),Wo(e),Ro(e&&e.Modal)}},created:function(){var e=this.locale;Wo(e),Ro(e&&e.Modal)},beforeUnmount:function(){Ro()},render:function(){return nt(this)}});$o.install=function(e){return e.component($o.name,$o),e};var Go=St($o);function Zo(){return(Zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var qo=o({name:"AConfigProvider",props:{getTargetContainer:{type:Function},getPopupContainer:{type:Function},prefixCls:String,getPrefixCls:{type:Function},renderEmpty:{type:Function},transformCellText:{type:Function},csp:{type:Object},autoInsertSpaceInButton:de.looseBool,locale:{type:Object},pageHeader:{type:Object},componentSize:{type:Object},direction:{type:String},space:{type:[String,Number]},virtual:de.looseBool,dropdownMatchSelectWidth:de.looseBool},setup:function(e,t){var n=t.slots,i=c(Zo(Zo({},e),{getPrefixCls:function(t,n){var i=e.prefixCls;if(n)return n;var r=i||function(t,n){var i=e.prefixCls,r=void 0===i?"ant":i;return n||(t?"".concat(r,"-").concat(t):r)}("");return t?"".concat(r,"-").concat(t):r},renderEmpty:function(t){return(e.renderEmpty||n.renderEmpty||Rt)(t)}}));d(e,(function(){Zo(i,e)})),u("configProvider",i);return function(){return l(kt,{children:function(t,i,r){return function(t){var i;return l(Go,{locale:e.locale||t,ANT_MARK__:"internalMark"},{default:function(){return[null===(i=n.default)||void 0===i?void 0:i.call(n)]}})}(r)}},null)}}}),Qo={getPrefixCls:function(e,t){return t||"ant-".concat(e)},renderEmpty:Rt},Ko=St(qo),Xo=!1;try{var Jo=Object.defineProperty({},"passive",{get:function(){Xo=!0}});window.addEventListener("testPassive",null,Jo),window.removeEventListener("testPassive",null,Jo)}catch(YM){}var ea=Xo;function ta(e,t,n,i){if(e.addEventListener){var r=i;void 0!==r||!ea||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r={passive:!1}),e.addEventListener(t,n,r)}return{remove:function(){e.removeEventListener&&e.removeEventListener(t,n)}}}var na=function(e,t){var n,i,r=t.slots,o=e.class,a=e.customizeIcon,s=e.customizeIconProps,c=e.onMousedown,u=e.onClick;return i="function"==typeof a?a(s):a,l("span",{class:o,onMousedown:function(e){e.preventDefault(),c&&c(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:u,"aria-hidden":!0},[void 0!==i?i:l("span",{class:o.split(/\s+/).map((function(e){return"".concat(e,"-icon")}))},[null===(n=r.default)||void 0===n?void 0:n.call(r)])])};na.inheritAttrs=!1,na.displayName="TransBtn",na.props={class:de.string,customizeIcon:de.any,customizeIconProps:de.any,onMousedown:de.func,onClick:de.func};var ia={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=ia.F1&&t<=ia.F12)return!1;switch(t){case ia.ALT:case ia.CAPS_LOCK:case ia.CONTEXT_MENU:case ia.CTRL:case ia.DOWN:case ia.END:case ia.ESC:case ia.HOME:case ia.INSERT:case ia.LEFT:case ia.MAC_FF_META:case ia.META:case ia.NUMLOCK:case ia.NUM_CENTER:case ia.PAGE_DOWN:case ia.PAGE_UP:case ia.PAUSE:case ia.PRINT_SCREEN:case ia.RIGHT:case ia.SHIFT:case ia.UP:case ia.WIN_KEY:case ia.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=ia.ZERO&&e<=ia.NINE)return!0;if(e>=ia.NUM_ZERO&&e<=ia.NUM_MULTIPLY)return!0;if(e>=ia.A&&e<=ia.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case ia.SPACE:case ia.QUESTION_MARK:case ia.NUM_PLUS:case ia.NUM_MINUS:case ia.NUM_PERIOD:case ia.NUM_DIVISION:case ia.SEMICOLON:case ia.DASH:case ia.EQUALS:case ia.COMMA:case ia.PERIOD:case ia.SLASH:case ia.APOSTROPHE:case ia.SINGLE_QUOTE:case ia.OPEN_SQUARE_BRACKET:case ia.BACKSLASH:case ia.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function ra(){return(ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var oa="".concat("accept acceptcharset accesskey action allowfullscreen allowtransparency\nalt async autocomplete autofocus autoplay capture cellpadding cellspacing challenge\ncharset checked classid classname colspan cols content contenteditable contextmenu\ncontrols coords crossorigin data datetime default defer dir disabled download draggable\nenctype form formaction formenctype formmethod formnovalidate formtarget frameborder\nheaders height hidden high href hreflang htmlfor httpequiv icon id inputmode integrity\nis keyparams keytype kind label lang list loop low manifest marginheight marginwidth max maxlength media\nmediagroup method min minlength multiple muted name novalidate nonce open\noptimum pattern placeholder poster preload radiogroup readonly rel required\nreversed role rowspan rows sandbox scope scoped scrolling seamless selected\nshape size sizes span spellcheck src srcdoc srclang srcset start step style\nsummary tabindex target title type usemap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionend onCompositionstart onCompositionupdate onKeydown\n    onKeypress onKeyup onFocus onBlur onChange onInput onSubmit onClick onContextmenu onDoubleclick onDblclick\n    onDrag onDragend onDragenter onDragexit onDragleave onDragover onDragstart onDrop onMousedown\n    onMouseenter onMouseleave onMousemove onMouseout onMouseover onMouseup onSelect onTouchcancel\n    onTouchend onTouchmove onTouchstart onScroll onWheel onAbort onCanplay onCanplaythrough\n    onDurationchange onEmptied onEncrypted onEnded onError onLoadeddata onLoadedmetadata\n    onLoadstart onPause onPlay onPlaying onProgress onRatechange onSeeked onSeeking onStalled onSuspend onTimeupdate onVolumechange onWaiting onLoad onError").split(/[\s\n]+/);function aa(e,t){return 0===e.indexOf(t)}function sa(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:ra({},n);var i={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||aa(n,"aria-"))||t.data&&aa(n,"data-")||t.attr&&(oa.includes(n)||oa.includes(n.toLowerCase())))&&(i[n]=e[n])})),i}function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var ca=function(e,t){var n,i=e.height,r=e.offset,o=e.prefixCls,a=e.onInnerResize,s=t.slots,c={},u={display:"flex",flexDirection:"column"};return void 0!==r&&(c={height:"".concat(i,"px"),position:"relative",overflow:"hidden"},u=la(la({},u),{transform:"translateY(".concat(r,"px)"),position:"absolute",left:0,right:0,top:0})),l("div",{style:c},[l(gt,{onResize:function(e){e.offsetHeight&&a&&a()}},{default:function(){return[l("div",{style:u,class:Ee((e={},t="".concat(o,"-holder-inner"),i=o,t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e))},[null===(n=s.default)||void 0===n?void 0:n.call(s)])];var e,t,i}})])};ca.displayName="Filter",ca.inheritAttrs=!1,ca.props={prefixCls:String,height:Number,offset:Number,onInnerResize:Function};var ua=function(e,t){var n,i=e.setRef,r=t.slots,o=null===(n=r.default)||void 0===n?void 0:n.call(r);return o&&o.length?h(o[0],{ref:i}):o};ua.props={setRef:{type:Function,default:function(){}}};var da=0,ha={};function fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=da++,i=t;function r(){(i-=1)<=0?(e(),delete ha[n]):ha[n]=requestAnimationFrame(r)}return ha[n]=requestAnimationFrame(r),n}function pa(){return(pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}fa.cancel=function(e){void 0!==e&&(cancelAnimationFrame(ha[e]),delete ha[e])},fa.ids=ha;function ga(e){return"touches"in e?e.touches[0].pageY:e.pageY}var va=o({name:"ScrollBar",inheritAttrs:!1,props:{prefixCls:de.string,scrollTop:de.number,scrollHeight:de.number,height:de.number,count:de.number,onScroll:{type:Function},onStartMove:{type:Function},onStopMove:{type:Function}},setup:function(){return{moveRaf:null,scrollbarRef:function e(t){e.current=t},thumbRef:function e(t){e.current=t},visibleTimeout:null,state:c({dragging:!1,pageY:null,startTop:null,visible:!1})}},watch:{scrollTop:{handler:function(){this.delayHidden()},flush:"post"}},mounted:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart,!!ea&&{passive:!1}),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown,!!ea&&{passive:!1})},beforeUnmount:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)},methods:{delayHidden:function(){var e=this;clearTimeout(this.visibleTimeout),this.state.visible=!0,this.visibleTimeout=setTimeout((function(){e.state.visible=!1}),2e3)},onScrollbarTouchStart:function(e){e.preventDefault()},onContainerMouseDown:function(e){e.stopPropagation(),e.preventDefault()},patchEvents:function(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),this.thumbRef.current.addEventListener("touchmove",this.onMouseMove,!!ea&&{passive:!1}),this.thumbRef.current.addEventListener("touchend",this.onMouseUp)},removeEvents:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.scrollbarRef.current.removeEventListener("touchstart",this.onScrollbarTouchStart,!!ea&&{passive:!1}),this.thumbRef.current.removeEventListener("touchstart",this.onMouseDown,!!ea&&{passive:!1}),this.thumbRef.current.removeEventListener("touchmove",this.onMouseMove,!!ea&&{passive:!1}),this.thumbRef.current.removeEventListener("touchend",this.onMouseUp),fa.cancel(this.moveRaf)},onMouseDown:function(e){var t=this.$props.onStartMove;pa(this.state,{dragging:!0,pageY:ga(e),startTop:this.getTop()}),t(),this.patchEvents(),e.stopPropagation(),e.preventDefault()},onMouseMove:function(e){var t=this.state,n=t.dragging,i=t.pageY,r=t.startTop,o=this.$props.onScroll;if(fa.cancel(this.moveRaf),n){var a=r+(ga(e)-i),s=this.getEnableScrollRange(),l=this.getEnableHeightRange(),c=l?a/l:0,u=Math.ceil(c*s);this.moveRaf=fa((function(){o(u)}))}},onMouseUp:function(){var e=this.$props.onStopMove;this.state.dragging=!1,e(),this.removeEvents()},getSpinHeight:function(){var e=this.$props,t=e.height,n=t/e.count*10;return n=Math.max(n,20),n=Math.min(n,t/2),Math.floor(n)},getEnableScrollRange:function(){var e=this.$props;return e.scrollHeight-e.height||0},getEnableHeightRange:function(){return this.$props.height-this.getSpinHeight()||0},getTop:function(){var e=this.$props.scrollTop,t=this.getEnableScrollRange(),n=this.getEnableHeightRange();return 0===e||0===t?0:e/t*n},getVisible:function(){var e=this.state.visible,t=this.$props;return!(t.height>=t.scrollHeight)&&e}},render:function(){var e,t,n,i=this.state.dragging,r=this.$props.prefixCls,o=this.getSpinHeight()+"px",a=this.getTop()+"px",s=this.getVisible();return l("div",{ref:this.scrollbarRef,class:"".concat(r,"-scrollbar"),style:{width:"8px",top:0,bottom:0,right:0,position:"absolute",display:s?void 0:"none"},onMousedown:this.onContainerMouseDown,onMousemove:this.delayHidden},[l("div",{ref:this.thumbRef,class:Ee("".concat(r,"-scrollbar-thumb"),(e={},t="".concat(r,"-scrollbar-thumb-moving"),n=i,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),style:{width:"100%",height:o,top:a,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:"99px",cursor:"pointer",userSelect:"none"},onMousedown:this.onMouseDown},null)])}});function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ya="object"===("undefined"==typeof navigator?"undefined":ba(navigator))&&/Firefox/i.test(navigator.userAgent),wa=function(e,t){var n=!1,i=null;function r(){clearTimeout(i),n=!0,i=setTimeout((function(){n=!1}),50)}return function(o){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=o<0&&e.value||o>0&&t.value;return a&&s?(clearTimeout(i),n=!1):s&&!n||r(),!n&&s}};function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ca(){return(Ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ea=[],Oa={overflowY:"auto",overflowAnchor:"none"};var Na=o({name:"List",inheritAttrs:!1,props:{prefixCls:de.string,data:de.array,height:de.number,itemHeight:de.number,fullHeight:de.looseBool,itemKey:{type:[String,Number,Function],required:!0},component:{type:[String,Object]},virtual:de.looseBool,children:de.func,onScroll:de.func,onMousedown:de.func,onMouseenter:de.func},setup:function(e){var t=p((function(){var t=e.height,n=e.itemHeight;return!(!1===e.virtual||!t||!n)})),n=p((function(){var n=e.height,i=e.itemHeight,r=e.data;return t.value&&r&&i*r.length>n})),i=c({scrollTop:0,scrollMoving:!1,mergedData:p((function(){return e.data||Ea}))}),o=g(),a=g(),s=g(),l=function(t){return"function"==typeof e.itemKey?e.itemKey(t):t[e.itemKey]},u={getKey:l};function h(e){var t=function(e){var t=Math.max(e,0);Number.isNaN(C.value)||(t=Math.min(t,C.value));return t}("function"==typeof e?e(i.scrollTop):e);o.value&&(o.value.scrollTop=t),i.scrollTop=t}var b=Ma(function(e,t,n){var i=new Map,r=c({}),o=0;function a(){var e=o+=1;Promise.resolve().then((function(){e===o&&i.forEach((function(e,t){if(e&&e.offsetParent){var n=e.offsetHeight;r[t]!==n&&(r[t]=e.offsetHeight)}}))}))}return[function(r,o){var s=e(r),l=i.get(s);o?(i.set(s,o),a()):i.delete(s),!l!=!o&&(o?null==t||t(r):null==n||n(r))},a,r]}(l,null,null),3),y=b[0],w=b[1],k=b[2],x=g();v((function(){var r;t.value||(x.value={scrollHeight:void 0,start:0,end:i.mergedData.length-1,offset:void 0}),n.value||(x.value={scrollHeight:(null===(r=a.value)||void 0===r?void 0:r.offsetHeight)||0,start:0,end:i.mergedData.length-1,offset:void 0});for(var o,s,c,u=0,d=i.mergedData.length,h=0;h<d;h+=1){var f=i.mergedData[h],p=l(f),g=k[p],v=u+(void 0===g?e.itemHeight:g);v>=i.scrollTop&&void 0===o&&(o=h,s=u),v>i.scrollTop+e.height&&void 0===c&&(c=h),u=v}void 0===o&&(o=0,s=0),void 0===c&&(c=i.mergedData.length-1),c=Math.min(c+1,i.mergedData.length),x.value={scrollHeight:u,start:o,end:c,offset:s}}));var C=p((function(){return x.value.scrollHeight-e.height}));var M=p((function(){return i.scrollTop<=0})),S=p((function(){return i.scrollTop>=C.value})),E=wa(M,S);var O=Ma(function(e,t,n,i){var r=0,o=null,a=null,s=!1,l=wa(t,n);return[function(t){if(e.value){fa.cancel(o);var n=t.deltaY;r+=n,a=n,l(n)||(ya||t.preventDefault(),o=fa((function(){i(r*(s?10:1)),r=0})))}},function(t){e.value&&(s=t.detail===a)}]}(t,M,S,(function(e){h((function(t){return t+e}))})),2),N=O[0],T=O[1];function A(e){t.value&&e.preventDefault()}!function(e,t,n){var i=!1,r=0,o=null,a=null,s=function(){o&&(o.removeEventListener("touchmove",l,!!ea&&{passive:!1}),o.removeEventListener("touchend",c))},l=function(e){if(i){var t=Math.ceil(e.touches[0].pageY),o=r-t;r=t,n(o)&&e.preventDefault(),clearInterval(a),a=setInterval((function(){(!n(o*=.9333333333333333,!0)||Math.abs(o)<=.1)&&clearInterval(a)}),16)}},c=function(){i=!1,s()},u=function(e){s(),1!==e.touches.length||i||(i=!0,r=Math.ceil(e.touches[0].pageY),(o=e.target).addEventListener("touchmove",l,!!ea&&{passive:!1}),o.addEventListener("touchend",c))};f((function(){d(e,(function(e){t.value.removeEventListener("touchstart",u,!!ea&&{passive:!1}),s(),clearInterval(a),e&&t.value.addEventListener("touchstart",u,!!ea&&{passive:!1})}),{immediate:!0})}))}(t,o,(function(e,t){return!E(e,t)&&(N({preventDefault:function(){},deltaY:e}),!0)}));var I=function(){o.value&&(o.value.removeEventListener("wheel",N,!!ea&&{passive:!1}),o.value.removeEventListener("DOMMouseScroll",T),o.value.removeEventListener("MozMousePixelScroll",A))};v((function(){r((function(){o.value&&(I(),o.value.addEventListener("wheel",N,!!ea&&{passive:!1}),o.value.addEventListener("DOMMouseScroll",T),o.value.addEventListener("MozMousePixelScroll",A))}))})),m((function(){I()}));var D=function(e,t,n,i,r,o,a,s){var l=null;return function(c){if(null!=c){fa.cancel(l);var u=t.mergedData,d=i.itemHeight;if("number"==typeof c)a(c);else if(c&&"object"===ma(c)){var h,f=c.align;h="index"in c?c.index:u.findIndex((function(e){return r(e)===c.key}));var p=c.offset,g=void 0===p?0:p;!function t(i,s){if(!(i<0)&&e.value){var c=e.value.clientHeight,p=!1,v=s;if(c){for(var m=s||f,b=0,y=0,w=0,k=0;k<=h;k+=1){var x=r(u[k]);y=b;var C=n[x];b=w=y+(void 0===C?d:C),k===h&&void 0===C&&(p=!0)}var M=null;switch(m){case"top":M=y-g;break;case"bottom":M=w-c+g;break;default:var S=e.value.scrollTop;y<S?v="top":w>S+c&&(v="bottom")}null!==M&&M!==e.value.scrollTop&&a(M)}l=fa((function(){p&&o(),t(i-1,v)}))}}(3)}}else s()}}(o,i,k,e,l,w,h,(function(){var e;null===(e=s.value)||void 0===e||e.delayHidden()})),_=p((function(){var n=null;return e.height&&(n=Ca(xa({},e.fullHeight?"height":"maxHeight",e.height+"px"),Oa),t.value&&(n.overflowY="hidden",i.scrollMoving&&(n.pointerEvents="none"))),n}));return{state:i,componentStyle:_,scrollTo:D,onFallbackScroll:function(t){var n,r=t.currentTarget.scrollTop;Math.abs(r-i.scrollTop)>=1&&h(r),null===(n=e.onScroll)||void 0===n||n.call(e,t)},onScrollBar:function(e){h(e)},componentRef:o,useVirtual:t,calRes:x,collectHeight:w,setInstance:y,sharedConfig:u,scrollBarRef:s,fillerInnerRef:a}},render:function(){var e=this,t=Ca(Ca({},this.$props),this.$attrs),n=t.prefixCls,i=void 0===n?"rc-virtual-list":n,r=t.height;t.itemHeight,t.fullHeight,t.data,t.itemKey,t.virtual;var o=t.component,a=void 0===o?"div":o;t.onScroll;var s,c,u,d,h,f,p=t.children,g=t.style,v=t.class,m=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["prefixCls","height","itemHeight","fullHeight","data","itemKey","virtual","component","onScroll","children","style","class"]),b=Ee(i,v),y=this.state,w=y.scrollTop,k=y.mergedData,x=this.calRes,C=x.scrollHeight,M=x.offset,S=x.start,E=x.end,O=this.componentStyle,N=this.onFallbackScroll,T=this.onScrollBar,A=this.useVirtual,I=this.collectHeight,D=this.sharedConfig,_=this.setInstance,j=(s=k,c=S,u=E,d=_,h=p,f=D.getKey,s.slice(c,u+1).map((function(e,t){var n=h(e,c+t,{}),i=f(e);return l(ua,{key:i,setRef:function(t){return d(e,t)}},{default:function(){return[n]}})})));return l("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({style:Ca(Ca({},g),{position:"relative"}),class:b},m),[l(a,{class:"".concat(i,"-holder"),style:O,ref:"componentRef",onScroll:N},{default:function(){return[l(ca,{prefixCls:i,height:C,offset:M,onInnerResize:I,ref:"fillerInnerRef"},{default:function(){return[j]}})]}}),A&&l(va,{ref:"scrollBarRef",prefixCls:i,scrollTop:w,height:r,scrollHeight:C,count:k.length,onScroll:T,onStartMove:function(){e.state.scrollMoving=!0},onStopMove:function(){e.state.scrollMoving=!1}},null)])}});function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach((function(t){Ia(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Da={prefixCls:de.string,id:de.string,options:de.array,flattenOptions:de.array,height:de.number,itemHeight:de.number,values:de.any,multiple:de.looseBool,open:de.looseBool,defaultActiveFirstOption:de.looseBool,notFoundContent:de.any,menuItemSelectedIcon:de.any,childrenAsData:de.looseBool,searchValue:de.string,virtual:de.looseBool,onSelect:de.func,onToggleOpen:de.func,onActiveValue:de.func,onScroll:de.func,onMouseenter:de.func},_a=o({name:"OptionList",inheritAttrs:!1,setup:function(e){var t=p((function(){return"".concat(e.prefixCls,"-item")})),n=function e(t){e.current=t},i=function(e){n.current&&n.current.scrollTo({index:e})},o=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.flattenOptions.length,r=0;r<i;r+=1){var o=(t+r*n+i)%i,a=e.flattenOptions[o],s=a.group,l=a.data;if(!s&&!l.disabled)return o}return-1},a=c({activeIndex:o(0)}),s=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.activeIndex=t;var i={source:n?"keyboard":"mouse"},r=e.flattenOptions[t];r?e.onActiveValue(r.data.value,t,i):e.onActiveValue(null,-1,i)};d(p((function(){return[e.flattenOptions.length,e.searchValue]})),(function(){s(!1!==e.defaultActiveFirstOption?o(0):-1)}),{immediate:!0}),d(p((function(){return e.open})),(function(){if(!e.multiple&&e.open&&1===e.values.size){var t=Array.from(e.values)[0],o=e.flattenOptions.findIndex((function(e){return e.data.value===t}));s(o),i(o)}e.open&&r((function(){var e;null===(e=n.current)||void 0===e||e.scrollTo(void 0)}))}),{immediate:!0,flush:"post"});var u=function(t){void 0!==t&&e.onSelect(t,{selected:!e.values.has(t)}),e.multiple||e.onToggleOpen(!1)};return{renderItem:function(t){var n=e.flattenOptions[t];if(!n)return null;var i=n.data||{},r=i.value,o=i.label,a=i.children,s=sa(i,!0),c=e.childrenAsData?a:o;return n?l("div",Aa(Aa({"aria-label":"string"==typeof c?c:void 0},s),{},{key:t,role:"option",id:"".concat(e.id,"_list_").concat(t),"aria-selected":e.values.has(r)}),[r]):null},listRef:n,state:a,onListMouseDown:function(e){e.preventDefault()},itemPrefixCls:t,setActive:s,onSelectValue:u,onKeydown:function(t){var n=t.which;switch(n){case ia.UP:case ia.DOWN:var r=0;if(n===ia.UP?r=-1:n===ia.DOWN&&(r=1),0!==r){var l=o(a.activeIndex+r,r);i(l),s(l,!0)}break;case ia.ENTER:var c=e.flattenOptions[a.activeIndex];c&&!c.data.disabled?u(c.data.value):u(void 0),e.open&&t.preventDefault();break;case ia.ESC:e.onToggleOpen(!1)}},onKeyup:function(){},scrollTo:function(e){i(e)}}},render:function(){var e=this.renderItem,n=this.listRef,i=this.onListMouseDown,r=this.itemPrefixCls,o=this.setActive,a=this.onSelectValue,s=this.$props,c=s.id,u=s.childrenAsData,d=s.values,h=s.height,f=s.itemHeight,p=s.flattenOptions,g=s.menuItemSelectedIcon,v=s.notFoundContent,m=s.virtual,b=s.onScroll,y=s.onMouseenter,w=this.state.activeIndex;return 0===p.length?l("div",{role:"listbox",id:"".concat(c,"_list"),class:"".concat(r,"-empty"),onMousedown:i},[v]):l(t,null,[l("div",{role:"listbox",id:"".concat(c,"_list"),style:{height:0,width:0,overflow:"hidden"}},[e(w-1),e(w),e(w+1)]),l(Na,{itemKey:"key",ref:n,data:p,height:h,itemHeight:f,fullHeight:!1,onMousedown:i,onScroll:b,virtual:m,onMouseenter:y,children:function(e,t){var n,i=e.group,s=e.groupOption,c=e.data,h=c.label,f=c.key;if(i)return l("div",{class:Ee(r,"".concat(r,"-group"))},[void 0!==h?h:f]);var p=c.disabled,v=c.value,m=c.title,b=c.children,y=c.style,k=c.class,x=c.className,C=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(c,["disabled","value","title","children","style","class","className"]),M=d.has(v),S="".concat(r,"-option"),E=Ee(r,S,k,x,(Ia(n={},"".concat(S,"-grouped"),s),Ia(n,"".concat(S,"-active"),w===t&&!p),Ia(n,"".concat(S,"-disabled"),p),Ia(n,"".concat(S,"-selected"),M),n)),O=!g||"function"==typeof g||M,N=(u?b:h)||v,T="string"==typeof N||"number"==typeof N?N.toString():void 0;return void 0!==m&&(T=m),l("div",Aa(Aa({},C),{},{"aria-selected":M,class:E,title:T,onMousemove:function(e){C.onMousemove&&C.onMousemove(e),w===t||p||o(t)},onClick:function(e){p||a(v),C.onClick&&C.onClick(e)},style:y}),[l("div",{class:"".concat(S,"-content")},[N]),ut(g)||M,O&&l(na,{class:"".concat(r,"-option-state"),customizeIcon:g,customizeIconProps:{isSelected:M}},{default:function(){return[M?"✓":null]}})])}},null)])}});_a.props=Da;var ja=function(){return null};ja.isSelectOption=!0,ja.displayName="ASelectOption";var La=function(){return null};function Ra(){return(Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}La.isSelectOptGroup=!0,La.displayName="ASelectOptGroup";function Pa(e){var t=e,n=t.key,i=t.children,r=t.props,o=r.value,a=r.disabled,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(r,["value","disabled"]);return Ra({key:n,value:void 0!==o?o:n,children:i&&i.default?i.default():void 0,disabled:a||""===a},s)}function za(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=tt(e).map((function(e,n){var i;if(!ut(e)||!e.type)return null;var r=e.type.isSelectOptGroup,o=e.key,a=e.children,s=e.props;if(t||!r)return Pa(e);var l=a&&a.default?a.default():void 0,c=(null==s?void 0:s.label)||(null===(i=a.label)||void 0===i?void 0:i.call(a))||o;return Ra(Ra({key:"__RC_SELECT_GRP__".concat(null===o?n:o,"__")},s),{label:c,options:za(l||[])})})).filter((function(e){return e}));return n}function Ba(e){return function(e){if(Array.isArray(e))return Fa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ha(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}var Ua="undefined"!=typeof window&&window.document&&window.document.documentElement,Ya=0;function Va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wa(e){return function(e){if(Array.isArray(e))return Za(e)}(e)||qa(e)||Ga(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(e){return function(e){if(Array.isArray(e))return e}(e)||qa(e)||Ga(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ga(e,t){if(e){if("string"==typeof e)return Za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Za(e,t):void 0}}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function qa(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Qa(e){return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ka(){return(Ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Xa(e,t){var n,i=e.key;return"value"in e&&(n=e.value),null!=i?i:void 0!==n?n:"rc-index-key-".concat(t)}function Ja(e){var t=Ka({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return t}}),t}function es(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.prevValueOptions,r=void 0===i?[]:i,o=new Map;return t.forEach((function(e){if(!e.group){var t=e.data;o.set(t.value,t)}})),e.map((function(e){var t=o.get(e);return t||(t=Ka({},r.find((function(t){return t._INTERNAL_OPTION_VALUE_===e})))),Ja(t)}))}function ts(e){return Ha(e).map((function(e){var t,n;return i(e)?(null===(t=null==e?void 0:e.el)||void 0===t?void 0:t.innerText)||(null===(n=null==e?void 0:e.el)||void 0===n?void 0:n.wholeText):e})).join("")}function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function is(){return(is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function rs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e;if(Array.isArray(e)&&(r=ct(e)[0]),!r)return null;var o=h(r,t,i);return o.props=n?is(is({},o.props),t):o.props,Yo("object"!==ns(o.props.class),"class must be string"),o}function os(e){e.target.composing=!0}function as(e){e.target.composing&&(e.target.composing=!1,function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}(e.target,"input"))}function ss(e,t,n,i){e.addEventListener(t,n,i)}var ls={created:function(e,t){t.modifiers&&t.modifiers.lazy||(ss(e,"compositionstart",os),ss(e,"compositionend",as),ss(e,"change",as))}};function cs(){return(cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var us=o({name:"Input",inheritAttrs:!1,setup:function(e){return{blurTimeout:null,VCSelectContainerEvent:s("VCSelectContainerEvent")}},render:function(){var e=this,t=this.$props,n=t.prefixCls,i=t.id,r=t.inputElement,o=t.disabled,a=t.tabindex,s=t.autofocus,c=t.autocomplete,u=t.editable,d=t.accessibilityIndex,h=t.value,f=t.onKeydown,p=t.onMousedown,g=t.onChange,v=t.onPaste,m=t.onCompositionstart,y=t.onCompositionend,w=t.open,k=t.inputRef,x=t.attrs,C=b(r||l("input",null,null),[[ls]]),M=C.props||{},S=M.onKeydown,E=M.onInput,O=M.onMousedown,N=M.onCompositionstart,T=M.onCompositionend,A=M.style;return C=rs(C,cs(cs(cs({id:i,ref:k,disabled:o,tabindex:a,autocomplete:c||"off",autofocus:s,class:"".concat(n,"-selection-search-input"),style:cs(cs({},A),{opacity:u?null:0}),role:"combobox","aria-expanded":w,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":"".concat(i,"_list_").concat(d)},x),{value:u?h:"",readonly:!u,unselectable:u?null:"on",onKeydown:function(e){f(e),S&&S(e)},onMousedown:function(e){p(e),O&&O(e)},onInput:function(e){g(e),E&&E(e)},onCompositionstart:function(e){m(e),N&&N(e)},onCompositionend:function(e){y(e),T&&T(e)},onPaste:v,onFocus:function(){var t;clearTimeout(e.blurTimeout),null===(t=e.VCSelectContainerEvent)||void 0===t||t.focus(arguments.length<=0?void 0:arguments[0])},onBlur:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.blurTimeout=setTimeout((function(){var t;null===(t=e.VCSelectContainerEvent)||void 0===t||t.blur(n[0])}),200)}}),"textarea"===C.type?{}:{type:"search"}),!0,!0)}});function ds(){return(ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}us.props={inputRef:de.any,prefixCls:de.string,id:de.string,inputElement:de.any,disabled:de.looseBool,autofocus:de.looseBool,autocomplete:de.string,editable:de.looseBool,accessibilityIndex:de.number,value:de.string,open:de.looseBool,tabindex:de.number,attrs:de.object,onKeydown:de.func,onMousedown:de.func,onChange:de.func,onPaste:de.func,onCompositionstart:de.func,onCompositionend:de.func};var hs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ds(e?{appear:!0,appearFromClass:"".concat(e,"-appear ").concat(e,"-appear-prepare"),appearActiveClass:"".concat(e),appearToClass:"".concat(e,"-appear ").concat(e,"-appear-active"),enterFromClass:"".concat(e,"-appear ").concat(e,"-enter ").concat(e,"-appear-prepare ").concat(e,"-enter-prepare"),enterActiveClass:"".concat(e),enterToClass:"".concat(e,"-enter ").concat(e,"-appear ").concat(e,"-appear-active ").concat(e,"-enter-active"),leaveActiveClass:"".concat(e," ").concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-active")}:{css:!1},t);return n},fs=y,ps=w;function gs(e){return function(e){if(Array.isArray(e))return vs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vs(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bs(){return(bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var ys={id:de.string,prefixCls:de.string,values:de.array,open:de.looseBool,searchValue:de.string,inputRef:de.any,placeholder:de.any,disabled:de.looseBool,mode:de.string,showSearch:de.looseBool,autofocus:de.looseBool,autocomplete:de.string,accessibilityIndex:de.number,tabindex:de.number,removeIcon:de.VNodeChild,choiceTransitionName:de.string,maxTagCount:de.number,maxTagTextLength:de.number,maxTagPlaceholder:de.any.def((function(){return function(e){return"+ ".concat(e.length," ...")}})),tagRender:de.func,onSelect:de.func,onInputChange:de.func,onInputPaste:de.func,onInputKeyDown:de.func,onInputMouseDown:de.func,onInputCompositionStart:de.func,onInputCompositionEnd:de.func},ws=o({name:"MultipleSelectSelector",setup:function(e){var n=!1,i=g(),r=g(0);f((function(){n=!0}));var o=p((function(){return e.open||"tags"===e.mode?e.searchValue:""})),a=p((function(){return"tags"===e.mode||e.open&&e.showSearch}));f((function(){d(o,(function(){r.value=i.value.scrollWidth}),{flush:"post"})}));var s=g();return v((function(){var t,i=e.values,r=e.prefixCls,o=e.removeIcon,a=e.choiceTransitionName,c=e.maxTagCount,u=e.maxTagTextLength,d=e.maxTagPlaceholder,h=void 0===d?function(e){return"+ ".concat(e.length," ...")}:d,f=e.tagRender,p=e.onSelect,g=i;"number"==typeof c&&(t=i.length-c,g=i.slice(0,c)),"number"==typeof u&&(g=g.map((function(e){var t=e.label,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["label"]),i=t;if("string"==typeof t||"number"==typeof t){var r=String(i);r.length>u&&(i="".concat(r.slice(0,u),"..."))}return bs(bs({},n),{label:i})}))),t>0&&g.push({key:"__RC_SELECT_MAX_REST_COUNT__",label:"function"==typeof h?h(i.slice(c)):h});var v=hs(a,{appear:n});s.value=l(ps,v,{default:function(){return gs(g.map((function(e){var t=e.key,n=e.label,i=e.value,a=e.disabled,s=e.class,c=e.style,u=t||i,d="__RC_SELECT_MAX_REST_COUNT__"!==t&&!a,h=function(e){e.preventDefault(),e.stopPropagation()},g=function(e){e&&e.stopPropagation(),p(i,{selected:!1})};return"function"==typeof f?l("span",{key:u,onMousedown:h,class:Ee(s),style:c},[f({label:n,value:i,disabled:a,closable:d,onClose:g})]):l("span",{key:u,class:Ee(s,"".concat(r,"-selection-item"),ms({},"".concat(r,"-selection-item-disabled"),a)),style:c},[l("span",{class:"".concat(r,"-selection-item-content")},[n]),d&&l(na,{class:"".concat(r,"-selection-item-remove"),onMousedown:h,onClick:g,customizeIcon:o},{default:function(){return[k("×")]}})])})))}})})),function(){var n=e.id,c=e.prefixCls,u=e.values,d=e.open,h=e.inputRef,f=e.placeholder,p=e.disabled,g=e.autofocus,v=e.autocomplete,m=e.accessibilityIndex,b=e.tabindex,y=e.onInputChange,w=e.onInputPaste,x=e.onInputKeyDown,C=e.onInputMouseDown,M=e.onInputCompositionStart,S=e.onInputCompositionEnd;return l(t,null,[s.value,l("span",{class:"".concat(c,"-selection-search"),style:{width:r.value+"px"}},[l(us,{inputRef:h,open:d,prefixCls:c,id:n,inputElement:null,disabled:p,autofocus:g,autocomplete:v,editable:a.value,accessibilityIndex:m,value:o.value,onKeydown:x,onMousedown:C,onChange:y,onPaste:w,onCompositionstart:M,onCompositionend:S,tabindex:b,attrs:sa(e,!0)},null),l("span",{ref:i,class:"".concat(c,"-selection-search-mirror"),"aria-hidden":!0},[o.value,k(" ")])]),!u.length&&!o.value&&l("span",{class:"".concat(c,"-selection-placeholder")},[f])])}}});ws.inheritAttrs=!1,ws.props=ys;var ks={inputElement:de.any,id:de.string,prefixCls:de.string,values:de.array,open:de.looseBool,searchValue:de.string,inputRef:de.any,placeholder:de.any,disabled:de.looseBool,mode:de.string,showSearch:de.looseBool,autofocus:de.looseBool,autocomplete:de.string,accessibilityIndex:de.number,tabindex:de.number,activeValue:de.string,backfill:de.looseBool,onInputChange:de.func,onInputPaste:de.func,onInputKeyDown:de.func,onInputMouseDown:de.func,onInputCompositionStart:de.func,onInputCompositionEnd:de.func},xs=o({name:"SingleSelector",setup:function(e){var n=g(!1),i=p((function(){return"combobox"===e.mode})),r=p((function(){return i.value||e.showSearch})),o=p((function(){var t=e.searchValue||"";return i.value&&e.activeValue&&!n.value&&(t=e.activeValue),t}));d(p((function(){return[i.value,e.activeValue]})),(function(){i.value&&(n.value=!1)}),{immediate:!0});var a=p((function(){return!("combobox"!==e.mode&&!e.open)&&!!o.value})),s=p((function(){var t=e.values[0];return!t||"string"!=typeof t.label&&"number"!=typeof t.label?void 0:t.label.toString()}));return function(){var c=e.inputElement,u=e.prefixCls,d=e.id,h=e.values,f=e.inputRef,p=e.disabled,g=e.autofocus,v=e.autocomplete,m=e.accessibilityIndex,b=e.open,y=e.placeholder,w=e.tabindex,k=e.onInputKeyDown,x=e.onInputMouseDown,C=e.onInputChange,M=e.onInputPaste,S=e.onInputCompositionStart,E=e.onInputCompositionEnd,O=h[0];return l(t,null,[l("span",{class:"".concat(u,"-selection-search")},[l(us,{inputRef:f,prefixCls:u,id:d,open:b,inputElement:c,disabled:p,autofocus:g,autocomplete:v,editable:r.value,accessibilityIndex:m,value:o.value,onKeydown:k,onMousedown:x,onChange:function(e){n.value=!0,C(e)},onPaste:M,onCompositionstart:S,onCompositionend:E,tabindex:w,attrs:sa(e,!0)},null)]),!i.value&&O&&!a.value&&l("span",{class:"".concat(u,"-selection-item"),title:s.value},[l(t,{key:O.key||O.value},[O.label])]),!O&&!a.value&&l("span",{class:"".concat(u,"-selection-placeholder")},[y])])}}});function Cs(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,n=null;function i(i){(i||null===n)&&(n=i),window.clearTimeout(e),e=window.setTimeout((function(){n=null}),t)}return x((function(){window.clearTimeout(e)})),[function(){return n},i]}function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){Es(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ns(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}xs.props=ks,xs.inheritAttrs=!1;var Ts=o({name:"Selector",setup:function(e){var t=function e(t){e.current=t},n=!1,i=Os(Cs(0),2),r=i[0],o=i[1],a=null;return{focus:function(){t.current.focus()},blur:function(){t.current.blur()},onMousedown:function(n){var i=r();n.target===t.current||i||n.preventDefault(),("combobox"===e.mode||e.showSearch&&i)&&e.open||(e.open&&e.onSearch("",!0,!1),e.onToggleOpen())},onClick:function(e){e.target!==t.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){t.current.focus()})):t.current.focus())},onInputPaste:function(e){var t=e.clipboardData.getData("text");a=t},inputRef:t,onInternalInputKeyDown:function(t){var i=t.which;i!==ia.UP&&i!==ia.DOWN||t.preventDefault(),e.onInputKeyDown&&e.onInputKeyDown(t),i!==ia.ENTER||"tags"!==e.mode||n||e.open||e.onSearchSubmit(t.target.value),[ia.SHIFT,ia.TAB,ia.BACKSPACE,ia.ESC].includes(i)||e.onToggleOpen(!0)},onInternalInputMouseDown:function(){o(!0)},onInputChange:function(t){var i=t.target.value;if(e.tokenWithEnter&&a&&/[\r\n]/.test(a)){var r=a.replace(/\r\n/g," ").replace(/[\r\n]/g," ");i=i.replace(r,a)}a=null,function(t){!1!==e.onSearch(t,!0,n)&&e.onToggleOpen(!0)}(i)},onInputCompositionEnd:function(){n=!1},onInputCompositionStart:function(){n=!0}}},render:function(){var e=this.$props,t=e.prefixCls,n=e.domRef,i=e.multiple,r=this.onMousedown,o=this.onClick,a=this.inputRef,s=this.onInputPaste,c={inputRef:a,onInputKeyDown:this.onInternalInputKeyDown,onInputMouseDown:this.onInternalInputMouseDown,onInputChange:this.onInputChange,onInputPaste:s,onInputCompositionStart:this.onInputCompositionStart,onInputCompositionEnd:this.onInputCompositionEnd},u=l(i?ws:xs,Ss(Ss({},this.$props),c),null);return l("div",{ref:n,class:"".concat(t,"-selector"),onClick:o,onMousedown:r},[u])}});function As(e,t){return!!e&&e.contains(t)}Ts.inheritAttrs=!1,Ts.props={id:de.string,prefixCls:de.string,showSearch:de.looseBool,open:de.looseBool,values:de.array,multiple:de.looseBool,mode:de.string,searchValue:de.string,activeValue:de.string,inputElement:de.any,autofocus:de.looseBool,accessibilityIndex:de.number,tabindex:de.number,disabled:de.looseBool,placeholder:de.any,removeIcon:de.any,maxTagCount:de.number,maxTagTextLength:de.number,maxTagPlaceholder:de.any,tagRender:de.func,tokenWithEnter:de.looseBool,choiceTransitionName:de.string,onToggleOpen:de.func,onSearch:de.func,onSearchSubmit:de.func,onSelect:de.func,onInputKeyDown:de.func,domRef:de.func};var Is=["moz","ms","webkit"];var Ds,_s=function(){if("undefined"==typeof window)return function(){};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);var e,t=Is.filter((function(e){return"".concat(e,"RequestAnimationFrame")in window}))[0];return t?window["".concat(t,"RequestAnimationFrame")]:(e=0,function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=window.setTimeout((function(){t(n+i)}),i);return e=n+i,r})}(),js=function(e){return function(e){if("undefined"==typeof window)return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(e);var t=Is.filter((function(e){return"".concat(e,"CancelAnimationFrame")in window||"".concat(e,"CancelRequestAnimationFrame")in window}))[0];return t?(window["".concat(t,"CancelAnimationFrame")]||window["".concat(t,"CancelRequestAnimationFrame")]).call(this,e):clearTimeout(e)}(e.id)};function Ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(n),!0).forEach((function(t){zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ps(e){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bs={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Fs(){if(void 0!==Ds)return Ds;Ds="";var e=document.createElement("p").style;for(var t in Bs)t+"Transform"in e&&(Ds=t);return Ds}function Hs(){return Fs()?"".concat(Fs(),"TransitionProperty"):"transitionProperty"}function Us(){return Fs()?"".concat(Fs(),"Transform"):"transform"}function Ys(e,t){var n=Hs();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function Vs(e,t){var n=Us();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var Ws,$s=/matrix\((.*)\)/,Gs=/matrix3d\((.*)\)/;function Zs(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function qs(e,t,n){var i=n;if("object"!==Ps(t))return void 0!==i?("number"==typeof i&&(i="".concat(i,"px")),void(e.style[t]=i)):Ws(e,t);for(var r in t)t.hasOwnProperty(r)&&qs(e,r,t[r])}function Qs(e,t){var n=e["page".concat(t?"Y":"X","Offset")],i="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var r=e.document;"number"!=typeof(n=r.documentElement[i])&&(n=r.body[i])}return n}function Ks(e){return Qs(e)}function Xs(e){return Qs(e,!0)}function Js(e){var t=function(e){var t,n,i,r=e.ownerDocument,o=r.body,a=r&&r.documentElement;return n=(t=e.getBoundingClientRect()).left,i=t.top,{left:n-=a.clientLeft||o.clientLeft||0,top:i-=a.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,i=n.defaultView||n.parentWindow;return t.left+=Ks(i),t.top+=Xs(i),t}function el(e){return null!=e&&e==e.window}function tl(e){return el(e)?e.document:9===e.nodeType?e:e.ownerDocument}var nl=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),il=/^(top|right|bottom|left)$/;function rl(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function ol(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function al(e,t,n){"static"===qs(e,"position")&&(e.style.position="relative");var i=-999,r=-999,o=rl("left",n),a=rl("top",n),s=ol(o),l=ol(a);"left"!==o&&(i=999),"top"!==a&&(r=999);var c,u="",d=Js(e);("left"in t||"top"in t)&&(u=(c=e).style.transitionProperty||c.style[Hs()]||"",Ys(e,"none")),"left"in t&&(e.style[s]="",e.style[o]="".concat(i,"px")),"top"in t&&(e.style[l]="",e.style[a]="".concat(r,"px")),Zs(e);var h=Js(e),f={};for(var p in t)if(t.hasOwnProperty(p)){var g=rl(p,n),v="left"===p?i:r,m=d[p]-h[p];f[g]=g===p?v+m:v-m}qs(e,f),Zs(e),("left"in t||"top"in t)&&Ys(e,u);var b={};for(var y in t)if(t.hasOwnProperty(y)){var w=rl(y,n),k=t[y]-d[y];b[w]=y===w?f[w]+k:f[w]-k}qs(e,b)}function sl(e,t){var n=Js(e),i=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(Us());if(n&&"none"!==n){var i=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(i[12]||i[4],0),y:parseFloat(i[13]||i[5],0)}}return{x:0,y:0}}(e),r={x:i.x,y:i.y};"left"in t&&(r.x=i.x+t.left-n.left),"top"in t&&(r.y=i.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),i=n.getPropertyValue("transform")||n.getPropertyValue(Us());if(i&&"none"!==i){var r,o=i.match($s);o?((r=(o=o[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,r[5]=t.y,Vs(e,"matrix(".concat(r.join(","),")"))):((r=i.match(Gs)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,r[13]=t.y,Vs(e,"matrix3d(".concat(r.join(","),")")))}else Vs(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,r)}function ll(e,t){for(var n=0;n<e.length;n++)t(e[n])}function cl(e){return"border-box"===Ws(e,"boxSizing")}"undefined"!=typeof window&&(Ws=window.getComputedStyle?function(e,t,n){var i=n,r="",o=tl(e);return(i=i||o.defaultView.getComputedStyle(e,null))&&(r=i.getPropertyValue(t)||i[t]),r}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(nl.test(n)&&!il.test(t)){var i=e.style,r=i.left,o=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,i.left="fontSize"===t?"1em":n||0,n=i.pixelLeft+"px",i.left=r,e.runtimeStyle.left=o}return""===n?"auto":n});var ul=["margin","border","padding"];function dl(e,t,n){var i,r={},o=e.style;for(i in t)t.hasOwnProperty(i)&&(r[i]=o[i],o[i]=t[i]);for(i in n.call(e),t)t.hasOwnProperty(i)&&(o[i]=r[i])}function hl(e,t,n){var i,r,o,a=0;for(r=0;r<t.length;r++)if(i=t[r])for(o=0;o<n.length;o++){var s=void 0;s="border"===i?"".concat(i).concat(n[o],"Width"):i+n[o],a+=parseFloat(Ws(e,s))||0}return a}var fl={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function pl(e,t,n){var i=n;if(el(e))return"width"===t?fl.viewportWidth(e):fl.viewportHeight(e);if(9===e.nodeType)return"width"===t?fl.docWidth(e):fl.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.getBoundingClientRect().width:e.getBoundingClientRect().height,a=cl(e),s=0;(null==o||o<=0)&&(o=void 0,(null==(s=Ws(e,t))||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===i&&(i=a?1:-1);var l=void 0!==o||a,c=o||s;return-1===i?l?c-hl(e,["border","padding"],r):s:l?1===i?c:c+(2===i?-hl(e,["border"],r):hl(e,["margin"],r)):s+hl(e,ul.slice(i),r)}ll(["Width","Height"],(function(e){fl["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],fl["viewport".concat(e)](n))},fl["viewport".concat(e)]=function(t){var n="client".concat(e),i=t.document,r=i.body,o=i.documentElement[n];return"CSS1Compat"===i.compatMode&&o||r&&r[n]||o}}));var gl={position:"absolute",visibility:"hidden",display:"block"};function vl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=t[0];return 0!==r.offsetWidth?i=pl.apply(void 0,t):dl(r,gl,(function(){i=pl.apply(void 0,t)})),i}function ml(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}ll(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);fl["outer".concat(t)]=function(t,n){return t&&vl(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];fl[e]=function(t,i){var r=i;return void 0!==r?t?(cl(t)&&(r+=hl(t,["padding","border"],n)),qs(t,e,r)):void 0:t&&vl(t,e,-1)}}));var bl={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:tl,offset:function(e,t,n){if(void 0===t)return Js(e);!function(e,t,n){if(n.ignoreShake){var i=Js(e),r=i.left.toFixed(0),o=i.top.toFixed(0),a=t.left.toFixed(0),s=t.top.toFixed(0);if(r===a&&o===s)return}n.useCssRight||n.useCssBottom?al(e,t,n):n.useCssTransform&&Us()in document.body.style?sl(e,t):al(e,t,n)}(e,t,n||{})},isWindow:el,each:ll,css:qs,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:ml,getWindowScrollLeft:function(e){return Ks(e)},getWindowScrollTop:function(e){return Xs(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)bl.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};ml(bl,fl);var yl=bl.getParent;function wl(e){if(bl.isWindow(e)||9===e.nodeType)return null;var t,n=bl.getDocument(e).body,i=bl.css(e,"position");if(!("fixed"===i||"absolute"===i))return"html"===e.nodeName.toLowerCase()?null:yl(e);for(t=yl(e);t&&t!==n&&9!==t.nodeType;t=yl(t))if("static"!==(i=bl.css(t,"position")))return t;return null}var kl=bl.getParent;function xl(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},i=wl(e),r=bl.getDocument(e),o=r.defaultView||r.parentWindow,a=r.body,s=r.documentElement;i;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===i.clientWidth||i===a||i===s||"visible"===bl.css(i,"overflow")){if(i===a||i===s)break}else{var l=bl.offset(i);l.left+=i.clientLeft,l.top+=i.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+i.clientWidth),n.bottom=Math.min(n.bottom,l.top+i.clientHeight),n.left=Math.max(n.left,l.left)}i=wl(i)}var c=null;bl.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===bl.css(e,"position")&&(e.style.position="fixed"));var u=bl.getWindowScrollLeft(o),d=bl.getWindowScrollTop(o),h=bl.viewportWidth(o),f=bl.viewportHeight(o),p=s.scrollWidth,g=s.scrollHeight,v=window.getComputedStyle(a);if("hidden"===v.overflowX&&(p=o.innerWidth),"hidden"===v.overflowY&&(g=o.innerHeight),e.style&&(e.style.position=c),t||function(e){if(bl.isWindow(e)||9===e.nodeType)return!1;var t=bl.getDocument(e),n=t.body,i=null;for(i=kl(e);i&&i!==n&&i!==t;i=kl(i))if("fixed"===bl.css(i,"position"))return!0;return!1}(e))n.left=Math.max(n.left,u),n.top=Math.max(n.top,d),n.right=Math.min(n.right,u+h),n.bottom=Math.min(n.bottom,d+f);else{var m=Math.max(p,u+h);n.right=Math.min(n.right,m);var b=Math.max(g,d+f);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Cl(e){var t,n,i;if(bl.isWindow(e)||9===e.nodeType){var r=bl.getWindow(e);t={left:bl.getWindowScrollLeft(r),top:bl.getWindowScrollTop(r)},n=bl.viewportWidth(r),i=bl.viewportHeight(r)}else t=bl.offset(e),n=bl.outerWidth(e),i=bl.outerHeight(e);return t.width=n,t.height=i,t}function Ml(e,t){var n=t.charAt(0),i=t.charAt(1),r=e.width,o=e.height,a=e.left,s=e.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===i?a+=r/2:"r"===i&&(a+=r),{left:a,top:s}}function Sl(e,t,n,i,r){var o=Ml(t,n[1]),a=Ml(e,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(e.left-s[0]+i[0]-r[0]),top:Math.round(e.top-s[1]+i[1]-r[1])}}function El(e,t,n){return e.left<n.left||e.left+t.width>n.right}function Ol(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function Nl(e,t,n){var i=[];return bl.each(e,(function(e){i.push(e.replace(t,(function(e){return n[e]})))})),i}function Tl(e,t){return e[t]=-e[t],e}function Al(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function Il(e,t){e[0]=Al(e[0],t.width),e[1]=Al(e[1],t.height)}function Dl(e,t,n,i){var r=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,l=n.source||e;o=[].concat(o),a=[].concat(a);var c={},u=0,d=xl(l,!(!(s=s||{})||!s.alwaysByViewport)),h=Cl(l);Il(o,h),Il(a,t);var f=Sl(h,t,r,o,a),p=bl.merge(h,f);if(d&&(s.adjustX||s.adjustY)&&i){if(s.adjustX&&El(f,h,d)){var g=Nl(r,/[lr]/gi,{l:"r",r:"l"}),v=Tl(o,0),m=Tl(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(Sl(h,t,g,v,m),h,d)||(u=1,r=g,o=v,a=m)}if(s.adjustY&&Ol(f,h,d)){var b=Nl(r,/[tb]/gi,{t:"b",b:"t"}),y=Tl(o,1),w=Tl(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(Sl(h,t,b,y,w),h,d)||(u=1,r=b,o=y,a=w)}u&&(f=Sl(h,t,r,o,a),bl.mix(p,f));var k=El(f,h,d),x=Ol(f,h,d);if(k||x){var C=r;k&&(C=Nl(r,/[lr]/gi,{l:"r",r:"l"})),x&&(C=Nl(r,/[tb]/gi,{t:"b",b:"t"})),r=C,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&k,c.adjustY=s.adjustY&&x,(c.adjustX||c.adjustY)&&(p=function(e,t,n,i){var r=bl.clone(e),o={width:t.width,height:t.height};return i.adjustX&&r.left<n.left&&(r.left=n.left),i.resizeWidth&&r.left>=n.left&&r.left+o.width>n.right&&(o.width-=r.left+o.width-n.right),i.adjustX&&r.left+o.width>n.right&&(r.left=Math.max(n.right-o.width,n.left)),i.adjustY&&r.top<n.top&&(r.top=n.top),i.resizeHeight&&r.top>=n.top&&r.top+o.height>n.bottom&&(o.height-=r.top+o.height-n.bottom),i.adjustY&&r.top+o.height>n.bottom&&(r.top=Math.max(n.bottom-o.height,n.top)),bl.mix(r,o)}(f,h,d,c))}return p.width!==h.width&&bl.css(l,"width",bl.width(l)+p.width-h.width),p.height!==h.height&&bl.css(l,"height",bl.height(l)+p.height-h.height),bl.offset(l,{left:p.left,top:p.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:r,offset:o,targetOffset:a,overflow:c}}function _l(e,t,n){var i=n.target||t;return Dl(e,Cl(i),n,!function(e,t){var n=xl(e,t),i=Cl(e);return!n||i.left+i.width<=n.left||i.top+i.height<=n.top||i.left>=n.right||i.top>=n.bottom}(i,n.overflow&&n.overflow.alwaysByViewport))}function jl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ll(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ll(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Rl(e){return(Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pl(e){return e&&"object"===Rl(e)&&e.window===e}function zl(e,t){var n=null,i=null;var r=new a((function(e){var r=jl(e,1)[0].target;if(document.documentElement.contains(r)){var o=r.getBoundingClientRect(),a=o.width,s=o.height,l=Math.floor(a),c=Math.floor(s);n===l&&i===c||Promise.resolve().then((function(){t({width:l,height:c})})),n=l,i=c}}));return e&&r.observe(e),function(){r.disconnect()}}_l.__getOffsetParent=wl,_l.__getVisibleRectForElement=xl;function Bl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Hl(){return(Hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Ul(e){return(Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yl(e){return"function"==typeof e&&e?e():null}function Vl(e){return"object"===Ul(e)&&e?e:null}var Wl=o({props:{childrenProps:de.object,align:de.object.isRequired,target:de.oneOfType([de.func,de.object]).def((function(){return window})),monitorBufferTime:de.number.def(50),monitorWindowResize:de.looseBool.def(!1),disabled:de.looseBool.def(!1)},setup:function(){return{aligned:!1,sourceResizeMonitor:{cancel:function(){}},resizeMonitor:{cancel:function(){}},cacheInfo:{}}},data:function(){this.prevProps=Hl({},this.$props);var e=Bl(function(e,t){var n=!1,i=null;function r(){window.clearTimeout(i)}return[function o(a){if(n&&!0!==a)r(),i=window.setTimeout((function(){n=!1,o()}),t);else{if(!1===e())return;n=!0,r(),i=window.setTimeout((function(){n=!1}),t)}},function(){n=!1,r()}]}(this.goAlign,0),2);return{forceAlign:e[0],cancelForceAlign:e[1]}},mounted:function(){var e=this;r((function(){var t=e.$props;!e.aligned&&e.forceAlign(),!t.disabled&&t.monitorWindowResize&&e.startMonitorWindowResize(),e.startMonitorElementResize(),e.updateCache()}))},updated:function(){var e=this;r((function(){var t=e.prevProps,n=e.$props,i=!1;if(!n.disabled)if(t.disabled)i=!0;else{var r=e.cacheInfo,o=r.element,a=r.point,s=Yl(n.target),l=Vl(n.target);Pl(o)&&Pl(s)?i=!1:(o&&!s&&l||a&&l&&s)&&(i=!0)}i?e.forceAlign():e.startMonitorElementResize(),n.monitorWindowResize&&!n.disabled?e.startMonitorWindowResize():e.stopMonitorWindowResize(),e.prevProps=Hl({},e.$props),e.updateCache()}))},beforeUnmount:function(){var e,t;this.stopMonitorWindowResize(),null===(e=this.resizeMonitor)||void 0===e||e.cancel(),null===(t=this.sourceResizeMonitor)||void 0===t||t.cancel(),this.cancelForceAlign()},methods:{updateCache:function(){var e=Yl(this.$props.target),t=Vl(this.$props.target);this.cacheInfo={element:e,point:t}},startMonitorElementResize:function(){var e,t,n=this.$props,i=this.cacheInfo,r=i.element,o=i.point,a=Yl(n.target),s=Vl(n.target),l=it(this),c=this.sourceResizeMonitor,u=this.resizeMonitor;l!==c.element&&(null==c||c.cancel(),c.element=l,c.cancel=zl(l,this.forceAlign)),r===a&&((e=o)===(t=s)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))||(this.forceAlign(),u.element!==a&&(null==u||u.cancel(),u.element=a,u.cancel=zl(a,this.forceAlign)))},startMonitorWindowResize:function(){this.resizeHandler||(this.bufferMonitor=function(e,t){var n;function i(){n&&(clearTimeout(n),n=null)}function r(){i(),n=setTimeout(e,t)}return r.clear=i,r}(this.forceAlign,this.$props.monitorBufferTime),this.resizeHandler=ta(window,"resize",this.bufferMonitor))},stopMonitorWindowResize:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)},goAlign:function(){var e=this.$props,t=e.disabled,n=e.target,i=e.align;if(!t&&n){var r,o=it(this),a=Yl(n),s=Vl(n),l=document.activeElement;return a&&function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1}(a)?r=_l(o,a,i):s&&(r=function(e,t,n){var i,r,o=bl.getDocument(e),a=o.defaultView||o.parentWindow,s=bl.getWindowScrollLeft(a),l=bl.getWindowScrollTop(a),c=bl.viewportWidth(a),u=bl.viewportHeight(a),d={left:i="pageX"in t?t.pageX:s+t.clientX,top:r="pageY"in t?t.pageY:l+t.clientY,width:0,height:0},h=i>=0&&i<=s+c&&r>=0&&r<=l+u,f=[n.points[0],"cc"];return Dl(e,d,Rs(Rs({},n),{},{points:f}),h)}(o,s,i)),function(e,t){e!==document.activeElement&&As(t,e)&&e.focus()}(l,o),this.aligned=!0,this.$attrs.onAlign&&r&&this.$attrs.onAlign(o,r),!0}return!1}},render:function(){var e=this.$props.childrenProps,t=nt(this);return t&&e?rs(t[0],e):t&&t[0]}}),$l={name:"LazyRenderBox",props:{visible:de.looseBool,hiddenClassName:de.string},render:function(){var e=this.$props.hiddenClassName,t=nt(this);return e||t&&t.length>1||t&&t[0]&&t[0].type===n?l("div",null,[t]):t&&t[0]}},Gl={props:{hiddenClassName:de.string.def(""),prefixCls:de.string,visible:de.looseBool},render:function(){var e,t,n=this,i=this.$props,r=i.prefixCls,o=i.visible,a=i.hiddenClassName;return l("div",{class:o?"":a},[l($l,{class:"".concat(r,"-content"),visible:o},{default:function(){return[null===(t=(e=n.$slots).default)||void 0===t?void 0:t.call(e)]}})])}};function Zl(){return(Zl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ql(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Ql(){}function Kl(e,t){this[e]=t}function Xl(e){return(Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jl(){return(Jl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ec(e){return function(e){if(Array.isArray(e))return tc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return tc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var nc={name:"VCTriggerPopup",mixins:[pt],inheritAttrs:!1,props:{visible:de.looseBool,getClassNameFromAlign:de.func,getRootDomNode:de.func,align:de.any,destroyPopupOnHide:de.looseBool,prefixCls:de.string,getContainer:de.func,transitionName:de.string,animation:de.any,maskAnimation:de.string,maskTransitionName:de.string,mask:de.looseBool,zIndex:de.number,popupClassName:de.any,popupStyle:de.object.def((function(){return{}})),stretch:de.string,point:de.shape({pageX:de.number,pageY:de.number}).loose},data:function(){return this.domEl=null,this.currentAlignClassName=void 0,this.transitionProps={},this.savePopupRef=Kl.bind(this,"popupInstance"),this.saveAlignRef=Kl.bind(this,"alignInstance"),{stretchChecked:!1,targetWidth:void 0,targetHeight:void 0}},mounted:function(){var e=this;this.$nextTick((function(){e.rootNode=e.getPopupDomNode(),e.setStretchSize()}))},updated:function(){var e=this;this.$nextTick((function(){e.setStretchSize()}))},methods:{onAlign:function(e,t){var n=this.$props.getClassNameFromAlign(t);this.currentAlignClassName!==n&&(this.currentAlignClassName=n,e.className=this.getClassName(n,e.className));var i=this.$attrs.onaAlign;i&&i(e,t)},setStretchSize:function(){var e=this.$props,t=e.stretch,n=e.getRootDomNode,i=e.visible,r=this.$data,o=r.stretchChecked,a=r.targetHeight,s=r.targetWidth;if(t&&i){var l=n();if(l){var c=l.offsetHeight,u=l.offsetWidth;a===c&&s===u&&o||this.setState({stretchChecked:!0,targetHeight:c,targetWidth:u})}}else o&&this.setState({stretchChecked:!1})},getPopupDomNode:function(){return it(this.popupInstance)},getTargetElement:function(){return this.$props.getRootDomNode()},getAlignTarget:function(){var e=this.$props.point;return e||this.getTargetElement},getMaskTransitionName:function(){var e=this.$props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t="".concat(e.prefixCls,"-").concat(n)),t},getTransitionName:function(){var e=this.$props,t=e.transitionName,n=e.animation;return t||("string"==typeof n?t="".concat(n):n&&n.props&&n.props.name&&(t=n.props.name)),t},getClassName:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];this.transitionProps&&Object.keys(this.transitionProps).forEach((function(e){"string"==typeof t.transitionProps[e]&&i.push.apply(i,ec(t.transitionProps[e].split(" ")))}));var r=n.split(" ").filter((function(e){return-1!==i.indexOf(e)})).join(" ");return"".concat(this.$props.prefixCls," ").concat(this.$attrs.class||""," ").concat(this.$props.popupClassName," ").concat(e," ").concat(r)},getPopupElement:function(){var e,t,n=this,i=this.savePopupRef,r=this.$props,o=this.$attrs,a=this.$slots,s=this.getTransitionName,c=this.$data,u=c.stretchChecked,d=c.targetHeight,h=c.targetWidth,f=o.style,p=void 0===f?{}:f,g=Je(o).onEvents,v=r.align,m=r.visible,y=r.prefixCls,w=r.animation,k=r.popupStyle,x=r.getClassNameFromAlign,M=r.destroyPopupOnHide,S=r.stretch,E=this.getClassName(this.currentAlignClassName||x(v));m||(this.currentAlignClassName=null);var O={};S&&(-1!==S.indexOf("height")?O.height="number"==typeof d?"".concat(d,"px"):d:-1!==S.indexOf("minHeight")&&(O.minHeight="number"==typeof d?"".concat(d,"px"):d),-1!==S.indexOf("width")?O.width="number"==typeof h?"".concat(h,"px"):h:-1!==S.indexOf("minWidth")&&(O.minWidth="number"==typeof h?"".concat(h,"px"):h),u||setTimeout((function(){n.alignInstance&&n.alignInstance.forceAlign()}),0));var N=Jl(Jl({prefixCls:y,visible:m,class:E},g),{ref:i,style:Jl(Jl(Jl(Jl({},O),k),p),this.getZIndexStyle())}),T=s(),A=!!T,I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ds(e?{appear:!0,appearFromClass:"".concat(e,"-appear ").concat(e,"-appear-prepare"),appearToClass:"".concat(e,"-appear ").concat(e,"-appear-active"),enterFromClass:"".concat(e,"-enter ").concat(e,"-enter-prepare"),enterToClass:"".concat(e,"-enter ").concat(e,"-enter-active"),leaveFromClass:" ".concat(e,"-leave"),leaveActiveClass:"".concat(e,"-leave ").concat(e,"-leave-active"),leaveToClass:"".concat(e,"-leave ").concat(e,"-leave-active")}:{css:!1},t)}(T);return"object"===Xl(w)&&(A=!0,I=Jl(Jl({},I),w)),A||(I={}),this.transitionProps=I,l(fs,I,M?{default:function(){return[m?l(Wl,{target:n.getAlignTarget(),key:"popup",ref:n.saveAlignRef,monitorWindowResize:!0,align:v,onAlign:n.onAlign},{default:function(){return[l(Gl,N,{default:function(){return[null===(e=a.default)||void 0===e?void 0:e.call(a)]}})]}}):null]}}:{default:function(){return[b(l(Wl,{target:n.getAlignTarget(),key:"popup",ref:n.saveAlignRef,monitorWindowResize:!0,disabled:!m,align:v,onAlign:n.onAlign},{default:function(){return[l(Gl,N,{default:function(){return[null===(t=a.default)||void 0===t?void 0:t.call(a)]}})]}}),[[C,m]])]}})},getZIndexStyle:function(){var e={},t=this.$props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},getMaskElement:function(){var e=this.$props,t=null;if(e.mask){var n=this.getMaskTransitionName();if(t=b(l($l,{style:this.getZIndexStyle(),key:"mask",class:"".concat(e.prefixCls,"-mask"),visible:e.visible},null),[[C,e.visible]]),n){var i=t;t=l(fs,{appear:!0,name:n},{default:function(){return[i]}})}}return t}},render:function(){var e=this.getMaskElement,t=this.getPopupElement;return l("div",null,[e(),t()])}},ic=o({name:"Portal",props:{getContainer:de.func.isRequired,children:de.any.isRequired,didUpdate:de.func},data:function(){return this._container=null,{}},mounted:function(){this.createContainer()},updated:function(){var e=this,t=this.$props.didUpdate;t&&r((function(){t(e.$props)}))},beforeUnmount:function(){this.removeContainer()},methods:{createContainer:function(){this._container=this.$props.getContainer(),this.$forceUpdate()},removeContainer:function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container)}},render:function(){var e=this;return this._container?l(M,{to:this._container},{default:function(){return[e.$props.children]}}):null}});function rc(){return(rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var oc=["onClick","onMousedown","onTouchstart","onMouseenter","onMouseleave","onFocus","onBlur","onContextmenu"],ac=o({name:"Trigger",mixins:[pt],inheritAttrs:!1,props:{action:de.oneOfType([de.string,de.arrayOf(de.string)]).def([]),showAction:de.any.def([]),hideAction:de.any.def([]),getPopupClassNameFromAlign:de.any.def((function(){return""})),afterPopupVisibleChange:de.func.def(Ql),popup:de.any,popupStyle:de.object.def((function(){return{}})),prefixCls:de.string.def("rc-trigger-popup"),popupClassName:de.string.def(""),popupPlacement:de.string,builtinPlacements:de.object,popupTransitionName:de.oneOfType([de.string,de.object]),popupAnimation:de.any,mouseEnterDelay:de.number.def(0),mouseLeaveDelay:de.number.def(.1),zIndex:de.number,focusDelay:de.number.def(0),blurDelay:de.number.def(.15),getPopupContainer:de.func,getDocument:de.func.def((function(){return window.document})),forceRender:de.looseBool,destroyPopupOnHide:de.looseBool.def(!1),mask:de.looseBool.def(!1),maskClosable:de.looseBool.def(!0),popupAlign:de.object.def((function(){return{}})),popupVisible:de.looseBool,defaultPopupVisible:de.looseBool.def(!1),maskTransitionName:de.oneOfType([de.string,de.object]),maskAnimation:de.string,stretch:de.string,alignPoint:de.looseBool},setup:function(){return{vcTriggerContext:s("vcTriggerContext",{}),savePopupRef:s("savePopupRef",Ql),dialogContext:s("dialogContext",null)}},data:function(){var e,t=this,n=this.$props;return e=et(this,"popupVisible")?!!n.popupVisible:!!n.defaultPopupVisible,oc.forEach((function(e){t["fire".concat(e)]=function(n){t.fireEvents(e,n)}})),this._component=null,this.focusTime=null,this.clickOutsideHandler=null,this.contextmenuOutsideHandler1=null,this.contextmenuOutsideHandler2=null,this.touchOutsideHandler=null,{prevPopupVisible:e,sPopupVisible:e,point:null}},watch:{popupVisible:function(e){void 0!==e&&(this.prevPopupVisible=this.sPopupVisible,this.sPopupVisible=e)}},created:function(){u("vcTriggerContext",this)},deactivated:function(){this.setPopupVisible(!1)},mounted:function(){var e=this;this.$nextTick((function(){e.updatedCal()}))},updated:function(){var e=this;this.$nextTick((function(){e.updatedCal()}))},beforeUnmount:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},methods:{updatedCal:function(){var e,t=this.$props;this.$data.sPopupVisible?(this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextmenuToShow()||(e=t.getDocument(),this.clickOutsideHandler=ta(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(),this.touchOutsideHandler=ta(e,"touchstart",this.onDocumentClick,!!ea&&{passive:!1})),!this.contextmenuOutsideHandler1&&this.isContextmenuToShow()&&(e=e||t.getDocument(),this.contextmenuOutsideHandler1=ta(e,"scroll",this.onContextmenuClose)),!this.contextmenuOutsideHandler2&&this.isContextmenuToShow()&&(this.contextmenuOutsideHandler2=ta(window,"blur",this.onContextmenuClose))):this.clearOutsideHandler()},onMouseenter:function(e){var t=this.$props.mouseEnterDelay;this.fireEvents("onMouseenter",e),this.delaySetPopupVisible(!0,t,t?null:e)},onMouseMove:function(e){this.fireEvents("onMousemove",e),this.setPoint(e)},onMouseleave:function(e){this.fireEvents("onMouseleave",e),this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay)},onPopupMouseenter:function(){this.clearDelayTimer()},onPopupMouseleave:function(e){e&&e.relatedTarget&&!e.relatedTarget.setTimeout&&this._component&&this._component.getPopupDomNode&&As(this._component.getPopupDomNode(),e.relatedTarget)||this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay)},onFocus:function(e){this.fireEvents("onFocus",e),this.clearDelayTimer(),this.isFocusToShow()&&(this.focusTime=Date.now(),this.delaySetPopupVisible(!0,this.$props.focusDelay))},onMousedown:function(e){this.fireEvents("onMousedown",e),this.preClickTime=Date.now()},onTouchstart:function(e){this.fireEvents("onTouchstart",e),this.preTouchTime=Date.now()},onBlur:function(e){As(e.target,e.relatedTarget||document.activeElement)||(this.fireEvents("onBlur",e),this.clearDelayTimer(),this.isBlurToHide()&&this.delaySetPopupVisible(!1,this.$props.blurDelay))},onContextmenu:function(e){e.preventDefault(),this.fireEvents("onContextmenu",e),this.setPopupVisible(!0,e)},onContextmenuClose:function(){this.isContextmenuToShow()&&this.close()},onClick:function(e){if(this.fireEvents("onClick",e),this.focusTime){var t;if(this.preClickTime&&this.preTouchTime?t=Math.min(this.preClickTime,this.preTouchTime):this.preClickTime?t=this.preClickTime:this.preTouchTime&&(t=this.preTouchTime),Math.abs(t-this.focusTime)<20)return;this.focusTime=0}this.preClickTime=0,this.preTouchTime=0,this.isClickToShow()&&(this.isClickToHide()||this.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault(),e&&e.domEvent&&e.domEvent.preventDefault();var n=!this.$data.sPopupVisible;(this.isClickToHide()&&!n||n&&this.isClickToShow())&&this.setPopupVisible(!this.$data.sPopupVisible,e)},onPopupMouseDown:function(){var e=this,t=this.vcTriggerContext,n=void 0===t?{}:t;this.hasPopupMouseDown=!0,clearTimeout(this.mouseDownTimeout),this.mouseDownTimeout=setTimeout((function(){e.hasPopupMouseDown=!1}),0),n.onPopupMouseDown&&n.onPopupMouseDown.apply(n,arguments)},onDocumentClick:function(e){if(!this.$props.mask||this.$props.maskClosable){var t=e.target;As(it(this),t)||this.hasPopupMouseDown||this.close()}},getPopupDomNode:function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},getRootDomNode:function(){return it(this)},handleGetPopupClassFromAlign:function(e){var t=[],n=this.$props,i=n.popupPlacement,r=n.builtinPlacements,o=n.prefixCls,a=n.alignPoint,s=n.getPopupClassNameFromAlign;return i&&r&&t.push(function(e,t,n,i){var r=n.points;for(var o in e)if(e.hasOwnProperty(o)&&ql(e[o].points,r,i))return"".concat(t,"-placement-").concat(o);return""}(r,o,e,a)),s&&t.push(s(e)),t.join(" ")},getPopupAlign:function(){var e=this.$props,t=e.popupPlacement,n=e.popupAlign,i=e.builtinPlacements;return t&&i?function(e,t,n){return Zl(Zl({},e[t]||{}),n)}(i,t,n):n},savePopup:function(e){this._component=e,this.savePopupRef(e)},getComponent:function(){var e=this,t={};this.isMouseEnterToShow()&&(t.onMouseenter=e.onPopupMouseenter),this.isMouseLeaveToHide()&&(t.onMouseleave=e.onPopupMouseleave),t.onMousedown=this.onPopupMouseDown,t[ea?"onTouchstartPassive":"onTouchstart"]=this.onPopupMouseDown;var n=e.handleGetPopupClassFromAlign,i=e.getRootDomNode,r=e.getContainer,o=e.$attrs,a=e.$props,s=a.prefixCls,c=a.destroyPopupOnHide,u=a.popupClassName,d=a.action,h=a.popupAnimation,f=a.popupTransitionName,p=a.popupStyle,g=a.mask,v=a.maskAnimation,m=a.maskTransitionName,b=a.zIndex,y=a.stretch,w=a.alignPoint,k=this.$data,x=k.sPopupVisible,C=k.point,M=rc(rc({prefixCls:s,destroyPopupOnHide:c,visible:x,point:w?C:null,action:d,align:this.getPopupAlign(),animation:h,getClassNameFromAlign:n,stretch:y,getRootDomNode:i,mask:g,zIndex:b,transitionName:f,maskAnimation:v,maskTransitionName:m,getContainer:r,popupClassName:u,popupStyle:p,onAlign:o.onPopupAlign||Ql},t),{ref:this.savePopup});return l(nc,M,{default:function(){return[ot(e,"popup")]}})},getContainer:function(){var e=this.$props,t=this.dialogContext,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(e.getPopupContainer?e.getPopupContainer(it(this),t):e.getDocument().body).appendChild(n),this.popupContainer=n,n},setPopupVisible:function(e,t){var n=this.alignPoint,i=this.sPopupVisible,r=this.$attrs;this.clearDelayTimer(),i!==e&&(et(this,"popupVisible")||this.setState({sPopupVisible:e,prevPopupVisible:i}),r.onPopupVisibleChange&&r.onPopupVisibleChange(e)),n&&t&&this.setPoint(t)},setPoint:function(e){this.$props.alignPoint&&e&&this.setState({point:{pageX:e.pageX,pageY:e.pageY}})},handlePortalUpdate:function(){this.prevPopupVisible!==this.sPopupVisible&&this.afterPopupVisibleChange(this.sPopupVisible)},delaySetPopupVisible:function(e,t,n){var i=this,r=1e3*t;if(this.clearDelayTimer(),r){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=function(e,t){var n=Date.now(),i={id:_s((function r(){Date.now()-n>=t?e.call():i.id=_s(r)}))};return i}((function(){i.setPopupVisible(e,o),i.clearDelayTimer()}),r)}else this.setPopupVisible(e,n)},clearDelayTimer:function(){this.delayTimer&&(js(this.delayTimer),this.delayTimer=null)},clearOutsideHandler:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextmenuOutsideHandler1&&(this.contextmenuOutsideHandler1.remove(),this.contextmenuOutsideHandler1=null),this.contextmenuOutsideHandler2&&(this.contextmenuOutsideHandler2.remove(),this.contextmenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},createTwoChains:function(e){var t=function(){},n=at(this);return this.childOriginEvents[e]&&n[e]?this["fire".concat(e)]:t=this.childOriginEvents[e]||n[e]||t},isClickToShow:function(){var e=this.$props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},isContextmenuToShow:function(){var e=this.$props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextmenu")||-1!==n.indexOf("contextmenu")},isClickToHide:function(){var e=this.$props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},isMouseEnterToShow:function(){var e=this.$props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseenter")},isMouseLeaveToHide:function(){var e=this.$props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseleave")},isFocusToShow:function(){var e=this.$props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")},isBlurToHide:function(){var e=this.$props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")},forcePopupAlign:function(){this.$data.sPopupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},fireEvents:function(e,t){this.childOriginEvents[e]&&this.childOriginEvents[e](t);var n=this.$props[e]||this.$attrs[e];n&&n(t)},close:function(){this.setPopupVisible(!1)}},render:function(){var e=this,t=this.sPopupVisible,n=this.$attrs,i=ct(nt(this)),r=this.$props,o=r.forceRender,a=r.alignPoint;i.length>1&&Yo(!1,"Trigger children just support only one default",!0);var s=i[0];this.childOriginEvents=at(s);var c={key:"trigger"};this.isContextmenuToShow()?c.onContextmenu=this.onContextmenu:c.onContextmenu=this.createTwoChains("onContextmenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMousedown=this.onMousedown,c[ea?"onTouchstartPassive":"onTouchstart"]=this.onTouchstart):(c.onClick=this.createTwoChains("onClick"),c.onMousedown=this.createTwoChains("onMousedown"),c[ea?"onTouchstartPassive":"onTouchstart"]=this.createTwoChains("onTouchstart")),this.isMouseEnterToShow()?(c.onMouseenter=this.onMouseenter,a&&(c.onMousemove=this.onMouseMove)):c.onMouseenter=this.createTwoChains("onMouseenter"),this.isMouseLeaveToHide()?c.onMouseleave=this.onMouseleave:c.onMouseleave=this.createTwoChains("onMouseleave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=function(t){!t||t.relatedTarget&&As(t.target,t.relatedTarget)||e.createTwoChains("onBlur")(t)});var u=Ee(s&&s.props&&s.props.class,n.class);u&&(c.class=u);var d,h=rs(s,c);return(t||this._component||o)&&(d=l(ic,{key:"portal",children:this.getComponent(),getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},null)),[d,h]}});function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uc(){return(uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var dc=o({name:"SelectTrigger",inheritAttrs:!1,created:function(){this.popupRef=function e(t){e.current=t}},methods:{getPopupElement:function(){return this.popupRef.current}},render:function(){var e=this,t=uc(uc({},this.$props),this.$attrs),n=t.empty,i=void 0!==n&&n,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["empty"]),o=r.visible,a=r.dropdownAlign,s=r.prefixCls,c=r.popupElement,u=r.dropdownClassName,d=r.dropdownStyle,h=r.dropdownMatchSelectWidth,f=r.containerWidth,p=r.dropdownRender,g=r.animation,v=r.transitionName,m=r.direction,b=r.getPopupContainer,y="".concat(s,"-dropdown"),w=c;p&&(w=p({menuNode:c,props:r}));var k=function(e){var t="number"!=typeof e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}}(h),x=g?"".concat(y,"-").concat(g):v,C=uc({minWidth:"".concat(f,"px")},d);return"number"==typeof h?C.width="".concat(h,"px"):h&&(C.width="".concat(f,"px")),l(ac,lc(lc({},r),{},{showAction:[],hideAction:[],popupPlacement:"rtl"===m?"bottomRight":"bottomLeft",builtinPlacements:k,prefixCls:y,popupTransitionName:x,popup:l("div",{ref:this.popupRef},[w]),popupAlign:a,popupVisible:o,getPopupContainer:b,popupClassName:Ee(u,cc({},"".concat(y,"-empty"),i)),popupStyle:C}),{default:function(){return[nt(e)[0]]}})}});dc.props={dropdownAlign:de.object,visible:de.looseBool,disabled:de.looseBool,dropdownClassName:de.string,dropdownStyle:de.object,empty:de.looseBool,prefixCls:de.string,popupClassName:de.string,animation:de.string,transitionName:de.string,getPopupContainer:de.func,dropdownRender:de.func,containerWidth:de.number,dropdownMatchSelectWidth:de.oneOfType([Number,Boolean]).def(!0),popupElement:de.any,direction:de.string,getTriggerDOMNode:de.func};function hc(){return(hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function fc(e){return function(e){if(Array.isArray(e))return pc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function gc(){return(gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vc(Object(n),!0).forEach((function(t){bc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yc(){return(yc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function wc(e){return function(e){if(Array.isArray(e))return Cc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||xc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xc(e,t){if(e){if("string"==typeof e)return Cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cc(e,t):void 0}}function Cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Mc=["children","removeIcon","placeholder","autofocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown"],Sc=function(){return{prefixCls:de.string,id:de.string,class:de.string,style:de.any,options:de.array,mode:de.string,value:de.any,defaultValue:de.any,labelInValue:de.looseBool,inputValue:de.string,searchValue:de.string,optionFilterProp:de.string,filterOption:de.any,showSearch:de.looseBool,autoClearSearchValue:de.looseBool,onSearch:de.func,onClear:de.func,allowClear:de.looseBool,clearIcon:de.VNodeChild,showArrow:de.looseBool,inputIcon:de.VNodeChild,removeIcon:de.VNodeChild,menuItemSelectedIcon:de.VNodeChild,open:de.looseBool,defaultOpen:de.looseBool,listHeight:de.number,listItemHeight:de.number,dropdownStyle:de.object,dropdownClassName:de.string,dropdownMatchSelectWidth:he(de.oneOfType([Boolean,Number])),virtual:de.looseBool,dropdownRender:de.func,dropdownAlign:de.any,animation:de.string,transitionName:de.string,getPopupContainer:de.func,direction:de.string,disabled:de.looseBool,loading:de.looseBool,autofocus:de.looseBool,defaultActiveFirstOption:de.looseBool,notFoundContent:de.VNodeChild,placeholder:de.VNodeChild,backfill:de.looseBool,getInputElement:de.func,optionLabelProp:de.string,maxTagTextLength:de.number,maxTagCount:de.number,maxTagPlaceholder:de.any,tokenSeparators:de.array,tagRender:de.func,showAction:de.array,tabindex:de.number,onKeyup:de.func,onKeydown:de.func,onPopupScroll:de.func,onDropdownVisibleChange:de.func,onSelect:de.func,onDeselect:de.func,onInputKeyDown:de.func,onClick:de.func,onChange:de.func,onBlur:de.func,onFocus:de.func,onMousedown:de.func,onMouseenter:de.func,onMouseleave:de.func,choiceTransitionName:de.string,internalProps:de.object,children:de.array}};function Ec(e){return(Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oc(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function Nc(e,t){return e===t||e!=e&&t!=t}function Tc(e,t){for(var n=e.length;n--;)if(Nc(e[n][0],t))return n;return-1}var Ac=Array.prototype.splice;function Ic(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Dc(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}Ic.prototype.clear=function(){this.__data__=[],this.size=0},Ic.prototype.delete=function(e){var t=this.__data__,n=Tc(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ac.call(t,n,1),--this.size,!0)},Ic.prototype.get=function(e){var t=this.__data__,n=Tc(t,e);return n<0?void 0:t[n][1]},Ic.prototype.has=function(e){return Tc(this.__data__,e)>-1},Ic.prototype.set=function(e,t){var n=this.__data__,i=Tc(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function _c(e){if(!Dc(e))return!1;var t=ze(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var jc,Lc=Ae["__core-js_shared__"],Rc=(jc=/[^.]+$/.exec(Lc&&Lc.keys&&Lc.keys.IE_PROTO||""))?"Symbol(src)_1."+jc:"";var Pc=Function.prototype.toString;function zc(e){if(null!=e){try{return Pc.call(e)}catch(YM){}try{return e+""}catch(YM){}}return""}var Bc=/^\[object .+?Constructor\]$/,Fc=Function.prototype,Hc=Object.prototype,Uc=Fc.toString,Yc=Hc.hasOwnProperty,Vc=RegExp("^"+Uc.call(Yc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wc(e){return!(!Dc(e)||(t=e,Rc&&Rc in t))&&(_c(e)?Vc:Bc).test(zc(e));var t}function $c(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Wc(n)?n:void 0}var Gc=$c(Ae,"Map"),Zc=$c(Object,"create");var qc=Object.prototype.hasOwnProperty;var Qc=Object.prototype.hasOwnProperty;function Kc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Xc(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Jc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Kc.prototype.clear=function(){this.__data__=Zc?Zc(null):{},this.size=0},Kc.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Kc.prototype.get=function(e){var t=this.__data__;if(Zc){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return qc.call(t,e)?t[e]:void 0},Kc.prototype.has=function(e){var t=this.__data__;return Zc?void 0!==t[e]:Qc.call(t,e)},Kc.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Zc&&void 0===t?"__lodash_hash_undefined__":t,this},Jc.prototype.clear=function(){this.size=0,this.__data__={hash:new Kc,map:new(Gc||Ic),string:new Kc}},Jc.prototype.delete=function(e){var t=Xc(this,e).delete(e);return this.size-=t?1:0,t},Jc.prototype.get=function(e){return Xc(this,e).get(e)},Jc.prototype.has=function(e){return Xc(this,e).has(e)},Jc.prototype.set=function(e,t){var n=Xc(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function eu(e){var t=this.__data__=new Ic(e);this.size=t.size}eu.prototype.clear=function(){this.__data__=new Ic,this.size=0},eu.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},eu.prototype.get=function(e){return this.__data__.get(e)},eu.prototype.has=function(e){return this.__data__.has(e)},eu.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ic){var i=n.__data__;if(!Gc||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Jc(i)}return n.set(e,t),this.size=n.size,this};var tu=function(){try{var e=$c(Object,"defineProperty");return e({},"",{}),e}catch(YM){}}();function nu(e,t,n){"__proto__"==t&&tu?tu(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var iu=Object.prototype.hasOwnProperty;function ru(e,t,n){var i=e[t];iu.call(e,t)&&Nc(i,n)&&(void 0!==n||t in e)||nu(e,t,n)}function ou(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?nu(n,s,l):ru(n,s,l)}return n}function au(e){return He(e)&&"[object Arguments]"==ze(e)}var su=Object.prototype,lu=su.hasOwnProperty,cu=su.propertyIsEnumerable,uu=au(function(){return arguments}())?au:function(e){return He(e)&&lu.call(e,"callee")&&!cu.call(e,"callee")},du=Array.isArray;var hu="object"==typeof exports&&exports&&!exports.nodeType&&exports,fu=hu&&"object"==typeof module&&module&&!module.nodeType&&module,pu=fu&&fu.exports===hu?Ae.Buffer:void 0,gu=(pu?pu.isBuffer:void 0)||function(){return!1},vu=/^(?:0|[1-9]\d*)$/;function mu(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&vu.test(e))&&e>-1&&e%1==0&&e<t}function bu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var yu={};function wu(e){return function(t){return e(t)}}yu["[object Float32Array]"]=yu["[object Float64Array]"]=yu["[object Int8Array]"]=yu["[object Int16Array]"]=yu["[object Int32Array]"]=yu["[object Uint8Array]"]=yu["[object Uint8ClampedArray]"]=yu["[object Uint16Array]"]=yu["[object Uint32Array]"]=!0,yu["[object Arguments]"]=yu["[object Array]"]=yu["[object ArrayBuffer]"]=yu["[object Boolean]"]=yu["[object DataView]"]=yu["[object Date]"]=yu["[object Error]"]=yu["[object Function]"]=yu["[object Map]"]=yu["[object Number]"]=yu["[object Object]"]=yu["[object RegExp]"]=yu["[object Set]"]=yu["[object String]"]=yu["[object WeakMap]"]=!1;var ku="object"==typeof exports&&exports&&!exports.nodeType&&exports,xu=ku&&"object"==typeof module&&module&&!module.nodeType&&module,Cu=xu&&xu.exports===ku&&Ne.process,Mu=function(){try{var e=xu&&xu.require&&xu.require("util").types;return e||Cu&&Cu.binding&&Cu.binding("util")}catch(YM){}}(),Su=Mu&&Mu.isTypedArray,Eu=Su?wu(Su):function(e){return He(e)&&bu(e.length)&&!!yu[ze(e)]},Ou=Object.prototype.hasOwnProperty;function Nu(e,t){var n=du(e),i=!n&&uu(e),r=!n&&!i&&gu(e),o=!n&&!i&&!r&&Eu(e),a=n||i||r||o,s=a?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=s.length;for(var c in e)!t&&!Ou.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mu(c,l))||s.push(c);return s}var Tu=Object.prototype;function Au(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Tu)}var Iu=Be(Object.keys,Object),Du=Object.prototype.hasOwnProperty;function _u(e){return null!=e&&bu(e.length)&&!_c(e)}function ju(e){return _u(e)?Nu(e):function(e){if(!Au(e))return Iu(e);var t=[];for(var n in Object(e))Du.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var Lu=Object.prototype.hasOwnProperty;function Ru(e){if(!Dc(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Au(e),n=[];for(var i in e)("constructor"!=i||!t&&Lu.call(e,i))&&n.push(i);return n}function Pu(e){return _u(e)?Nu(e,!0):Ru(e)}var zu="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bu=zu&&"object"==typeof module&&module&&!module.nodeType&&module,Fu=Bu&&Bu.exports===zu?Ae.Buffer:void 0,Hu=Fu?Fu.allocUnsafe:void 0;function Uu(e,t){if(t)return e.slice();var n=e.length,i=Hu?Hu(n):new e.constructor(n);return e.copy(i),i}function Yu(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function Vu(){return[]}var Wu=Object.prototype.propertyIsEnumerable,$u=Object.getOwnPropertySymbols,Gu=$u?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}($u(e),(function(t){return Wu.call(e,t)})))}:Vu;function Zu(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}var qu=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Zu(t,Gu(e)),e=Fe(e);return t}:Vu;function Qu(e,t,n){var i=t(e);return du(e)?i:Zu(i,n(e))}function Ku(e){return Qu(e,ju,Gu)}function Xu(e){return Qu(e,Pu,qu)}var Ju=$c(Ae,"DataView"),ed=$c(Ae,"Promise"),td=$c(Ae,"Set"),nd=$c(Ae,"WeakMap"),id=zc(Ju),rd=zc(Gc),od=zc(ed),ad=zc(td),sd=zc(nd),ld=ze;(Ju&&"[object DataView]"!=ld(new Ju(new ArrayBuffer(1)))||Gc&&"[object Map]"!=ld(new Gc)||ed&&"[object Promise]"!=ld(ed.resolve())||td&&"[object Set]"!=ld(new td)||nd&&"[object WeakMap]"!=ld(new nd))&&(ld=function(e){var t=ze(e),n="[object Object]"==t?e.constructor:void 0,i=n?zc(n):"";if(i)switch(i){case id:return"[object DataView]";case rd:return"[object Map]";case od:return"[object Promise]";case ad:return"[object Set]";case sd:return"[object WeakMap]"}return t});var cd=ld,ud=Object.prototype.hasOwnProperty;var dd=Ae.Uint8Array;function hd(e){var t=new e.constructor(e.byteLength);return new dd(t).set(new dd(e)),t}var fd=/\w*$/;var pd=Ie?Ie.prototype:void 0,gd=pd?pd.valueOf:void 0;function vd(e,t){var n=t?hd(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function md(e,t,n){var i,r,o,a=e.constructor;switch(t){case"[object ArrayBuffer]":return hd(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var n=t?hd(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vd(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(o=new(r=e).constructor(r.source,fd.exec(r))).lastIndex=r.lastIndex,o;case"[object Set]":return new a;case"[object Symbol]":return i=e,gd?Object(gd.call(i)):{}}}var bd=Object.create,yd=function(){function e(){}return function(t){if(!Dc(t))return{};if(bd)return bd(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function wd(e){return"function"!=typeof e.constructor||Au(e)?{}:yd(Fe(e))}var kd=Mu&&Mu.isMap,xd=kd?wu(kd):function(e){return He(e)&&"[object Map]"==cd(e)};var Cd=Mu&&Mu.isSet,Md=Cd?wu(Cd):function(e){return He(e)&&"[object Set]"==cd(e)},Sd={};function Ed(e,t,n,i,r,o){var a,s=1&t,l=2&t,c=4&t;if(n&&(a=r?n(e,i,r,o):n(e)),void 0!==a)return a;if(!Dc(e))return e;var u=du(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ud.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Yu(e,a)}else{var d=cd(e),h="[object Function]"==d||"[object GeneratorFunction]"==d;if(gu(e))return Uu(e,s);if("[object Object]"==d||"[object Arguments]"==d||h&&!r){if(a=l||h?{}:wd(e),!s)return l?function(e,t){return ou(e,qu(e),t)}(e,function(e,t){return e&&ou(t,Pu(t),e)}(a,e)):function(e,t){return ou(e,Gu(e),t)}(e,function(e,t){return e&&ou(t,ju(t),e)}(a,e))}else{if(!Sd[d])return r?e:{};a=md(e,d,s)}}o||(o=new eu);var f=o.get(e);if(f)return f;o.set(e,a),Md(e)?e.forEach((function(i){a.add(Ed(i,t,n,i,e,o))})):xd(e)&&e.forEach((function(i,r){a.set(r,Ed(i,t,n,r,e,o))}));var p=u?void 0:(c?l?Xu:Ku:l?Pu:ju)(e);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););}(p||e,(function(i,r){p&&(i=e[r=i]),ru(a,r,Ed(i,t,n,r,e,o))})),a}Sd["[object Arguments]"]=Sd["[object Array]"]=Sd["[object ArrayBuffer]"]=Sd["[object DataView]"]=Sd["[object Boolean]"]=Sd["[object Date]"]=Sd["[object Float32Array]"]=Sd["[object Float64Array]"]=Sd["[object Int8Array]"]=Sd["[object Int16Array]"]=Sd["[object Int32Array]"]=Sd["[object Map]"]=Sd["[object Number]"]=Sd["[object Object]"]=Sd["[object RegExp]"]=Sd["[object Set]"]=Sd["[object String]"]=Sd["[object Symbol]"]=Sd["[object Uint8Array]"]=Sd["[object Uint8ClampedArray]"]=Sd["[object Uint16Array]"]=Sd["[object Uint32Array]"]=!0,Sd["[object Error]"]=Sd["[object Function]"]=Sd["[object WeakMap]"]=!1;function Od(e){return"symbol"==typeof e||He(e)&&"[object Symbol]"==ze(e)}var Nd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Td=/^\w*$/;function Ad(e,t){if(du(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Od(e))||(Td.test(e)||!Nd.test(e)||null!=t&&e in Object(t))}function Id(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Id.Cache||Jc),n}Id.Cache=Jc;var Dd,_d,jd,Ld=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rd=/\\(\\)?/g,Pd=(Dd=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ld,(function(e,n,i,r){t.push(i?r.replace(Rd,"$1"):n||e)})),t},_d=Id(Dd,(function(e){return 500===jd.size&&jd.clear(),e})),jd=_d.cache,_d),zd=Ie?Ie.prototype:void 0,Bd=zd?zd.toString:void 0;function Fd(e){if("string"==typeof e)return e;if(du(e))return Oc(e,Fd)+"";if(Od(e))return Bd?Bd.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function Hd(e){return null==e?"":Fd(e)}function Ud(e,t){return du(e)?e:Ad(e,t)?[e]:Pd(Hd(e))}function Yd(e){if("string"==typeof e||Od(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function Vd(e,t){for(var n=0,i=(t=Ud(t,e)).length;null!=e&&n<i;)e=e[Yd(t[n++])];return n&&n==i?e:void 0}function Wd(e,t){return t.length<2?e:Vd(e,function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}(t,0,-1))}function $d(e,t){return null==(e=Wd(e,t=Ud(t,e)))||delete e[Yd((n=t,i=null==n?0:n.length,i?n[i-1]:void 0))];var n,i}function Gd(e){return Ge(e)?void 0:e}var Zd=Ie?Ie.isConcatSpreadable:void 0;function qd(e){return du(e)||uu(e)||!!(Zd&&e&&e[Zd])}function Qd(e,t,n,i,r){var o=-1,a=e.length;for(n||(n=qd),r||(r=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Qd(s,t-1,n,i,r):Zu(r,s):i||(r[r.length]=s)}return r}function Kd(e){return(null==e?0:e.length)?Qd(e,1):[]}function Xd(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Jd=Math.max;function eh(e,t,n){return t=Jd(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=Jd(i.length-t,0),a=Array(o);++r<o;)a[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(a),Xd(e,this,s)}}function th(e){return e}var nh=tu?function(e,t){return tu(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:th,ih=Date.now;var rh=function(e){var t=0,n=0;return function(){var i=ih(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(nh);var oh=function(e){return rh(eh(e,void 0,Kd),e+"")}((function(e,t){var n={};if(null==e)return n;var i=!1;t=Oc(t,(function(t){return t=Ud(t,e),i||(i=t.length>1),t})),ou(e,Xu(e),n),i&&(n=Ed(n,7,Gd));for(var r=t.length;r--;)$d(n,t[r]);return n}));function ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ah(Object(n),!0).forEach((function(t){lh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ah(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ch=function(e){var t=e.prefixCls,n=e.components.optionList,i=e.convertChildrenToData,r=e.flattenOptions,a=e.getLabeledValue,s=e.filterOptions,c=e.isValueDisabled,h=e.findValueOption;e.warningProps;var b,y,w,x=e.fillOptionsWithMissingValue,C=e.omitDOMProps,M=o({name:"Select",setup:function(e){var t=p((function(){return e.internalProps&&"RC_SELECT_INTERNAL_PROPS_MARK"===e.internalProps.mark}));Yo("children"!==e.optionFilterProp,"Select","optionFilterProp not support children, please use label instead");var n=g(null),o=g(null),l=g(null),b=g(null),y=p((function(){return(e.tokenSeparators||[]).some((function(e){return["\n","\r\n"].includes(e)}))})),w=kc(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=g(!1),i=function(){window.clearTimeout(e)};f((function(){i()}));var r=function(r,o){i(),e=window.setTimeout((function(){n.value=r,o&&o()}),t)};return[n,r,i]}(),3),k=w[0],C=w[1],M=w[2],S=p((function(){return e.id||"rc_select_".concat((Ua?(t=Ya,Ya+=1):t="TEST_OR_SSR",t));var t})),E=p((function(){var t=e.optionLabelProp;return void 0===t&&(t=e.options?"label":"children"),t})),O=p((function(){return"combobox"!==e.mode&&e.labelInValue})),N=p((function(){return"tags"===e.mode||"multiple"===e.mode})),T=p((function(){return void 0!==e.showSearch?e.showSearch:N.value||"combobox"===e.mode})),A=function e(t){e.current=t},I=g(void 0);d(p((function(){return[e.value,e.defaultValue]})),(function(){I.value=void 0!==e.value?e.value:e.defaultValue}),{immediate:!0});var D,_,j=p((function(){return function(e,t){var n=t.labelInValue,i=t.combobox;if(void 0===e||""===e&&i)return[];var r=Array.isArray(e)?e:[e];return n?r.map((function(e){var t=e.key,n=e.value;return void 0!==n?n:t})):r}(I.value,{labelInValue:O.value,combobox:"combobox"===e.mode})})),L=p((function(){return new Set(j.value)})),R=g(null),P=function(e){R.value=e},z=g(""),B=function(e){z.value=e},F=p((function(){var t=z.value;return"combobox"===e.mode&&void 0!==I.value?t=I.value:void 0!==e.searchValue?t=e.searchValue:e.inputValue&&(t=e.inputValue),t})),H=p((function(){var t=e.options;return void 0===t&&(t=i(e.children)),"tags"===e.mode&&x&&(t=x(t,I.value,E.value,e.labelInValue)),t||[]})),U=p((function(){return r(H.value,e)})),Y=(j.value,D=U,_=p((function(){var e=new Map;return D.value.forEach((function(t){var n=t.data.value;e.set(n,t)})),e})),function(e){return e.map((function(e){return _.value.get(e)})).filter(Boolean)}),V=p((function(){if(!F.value||!T.value)return wc(H.value);var t=e.optionFilterProp,n=void 0===t?"value":t,i=e.mode,r=e.filterOption,o=s(F.value,H.value,{optionFilterProp:n,filterOption:"combobox"===i&&void 0===r?function(){return!0}:r});return"tags"===i&&o.every((function(e){return e[n]!==F.value}))&&o.unshift({value:F.value,label:F.value,key:"__RC_SELECT_TAG_PLACEHOLDER__"}),o})),W=p((function(){return r(V.value,e)}));f((function(){d(F,(function(){b.value&&b.value.scrollTo&&b.value.scrollTo(0)}),{flush:"post",immediate:!0})}));var $,G,Z=p((function(){var t=j.value.map((function(e){var t=Y([e]);return yc(yc({},a(e,{options:t,prevValue:I.value,labelInValue:O.value,optionLabelProp:E.value})),{disabled:c(e,t)})}));return e.mode||1!==t.length||null!==t[0].value||null!==t[0].label?t:[]}));G=fc(($=Z).value),Z=p((function(){var e=new Map;G.forEach((function(t){var n=t.value,i=t.label;n!==i&&e.set(n,i)}));var t=$.value.map((function(t){var n=e.get(t.value);return t.value===t.label&&n?hc(hc({},t),{label:n}):t}));return G=t,t}));var q=function(n,i,r){var o=Y([n]),s=h([n],o)[0],l=e.internalProps,c=void 0===l?{}:l;if(!c.skipTriggerSelect){var u=O.value?a(n,{options:o,prevValue:I.value,labelInValue:O.value,optionLabelProp:E.value}):n;i&&e.onSelect?e.onSelect(u,s):!i&&e.onDeselect&&e.onDeselect(u,s)}t.value&&(i&&c.onRawSelect?c.onRawSelect(n,s,r):!i&&c.onRawDeselect&&c.onRawDeselect(n,s,r))},Q=g([]),K=function(n){if(!(t.value&&e.internalProps&&e.internalProps.skipTriggerChange)){var i,r=Y(n),o=function(e,t){var n=t.optionLabelProp,i=t.labelInValue,r=t.prevValue,o=t.options,a=t.getLabeledValue,s=e;return i&&(s=s.map((function(e){return a(e,{options:o,prevValue:r,labelInValue:i,optionLabelProp:n})}))),s}(Array.from(n),{labelInValue:O.value,options:r,getLabeledValue:a,prevValue:I.value,optionLabelProp:E.value}),s=N.value?o:o[0];if(e.onChange&&(0!==j.value.length||0!==o.length)){var l=h(n,r,{prevValueOptions:Q.value});i=l.map((function(e,t){var i=yc({},e);return Object.defineProperty(i,"_INTERNAL_OPTION_VALUE_",{get:function(){return n[t]}}),i})),Q.value=i,e.onChange(s,N.value?l:l[0])}I.value=s}},X=function(t,n){var i,r=n.selected,o=n.source,a=e.autoClearSearchValue,s=void 0===a||a;e.disabled||(N.value?(i=new Set(j.value),r?i.add(t):i.delete(t)):(i=new Set).add(t),(N.value||!N.value&&Array.from(j.value)[0]!==t)&&K(Array.from(i)),q(t,!N.value||r,o),"combobox"===e.mode?(B(String(t)),P("")):N.value&&!s||(B(""),P("")))},J=void 0!==e.open?e.open:e.defaultOpen,ee=g(J),te=g(J),ne=function(t){ee.value=void 0!==e.open?e.open:t,te.value=ee.value};d((function(){return e.open}),(function(){ne(e.open)}));var ie=p((function(){return!e.notFoundContent&&!V.value.length}));v((function(){te.value=ee.value,(e.disabled||ie.value&&te.value&&"combobox"===e.mode)&&(te.value=!1)}));var re=p((function(){return!ie.value&&te.value})),oe=function(t){var n=void 0!==t?t:!te.value;ee.value===n||e.disabled||(ne(n),e.onDropdownVisibleChange&&e.onDropdownVisibleChange(n))};!function(e,t,n){function i(i){var r,o,a,s=i.target,l=[null===(r=e[0])||void 0===r?void 0:r.value,null===(a=null===(o=e[1])||void 0===o?void 0:o.value)||void 0===a?void 0:a.getPopupElement()];t.value&&l.every((function(e){return e&&!e.contains(s)&&e!==s}))&&n(!1)}f((function(){window.addEventListener("mousedown",i)})),m((function(){window.removeEventListener("mousedown",i)}))}([n,o],re,oe);var ae=function(t,n,i){var r=!0,o=t,a=F.value;P(null);var s=i?null:function(e,t){if(!t||!t.length)return null;var n=!1,i=function e(t,i){var r=$a(i),o=r[0],a=r.slice(1);if(!o)return[t];var s=t.split(o);return n=n||s.length>1,s.reduce((function(t,n){return[].concat(Wa(t),Wa(e(n,a)))}),[]).filter((function(e){return e}))}(e,t);return n?i:null}(t,e.tokenSeparators),l=s;if("combobox"===e.mode)n&&K([o]);else if(s){o="","tags"!==e.mode&&(l=s.map((function(e){var t=U.value.find((function(t){return t.data[E.value]===e}));return t?t.data.value:null})).filter((function(e){return null!==e})));var c=Array.from(new Set([].concat(wc(j.value),wc(l))));K(c),c.forEach((function(e){q(e,!0,"input")})),oe(!1),r=!1}return B(o),e.onSearch&&a!==o&&e.onSearch(o),r};d(p((function(){return e.disabled})),(function(){ee.value&&e.disabled&&ne(!1)}),{immediate:!0}),d(te,(function(){te.value||N.value||"combobox"===e.mode||ae("",!1,!1)}),{immediate:!0});var se=kc(Cs(),2),le=se[0],ce=se[1],ue=g(!1),de=function(){C(!0),e.disabled||(e.onFocus&&!ue.value&&e.onFocus(arguments.length<=0?void 0:arguments[0]),e.showAction&&e.showAction.includes("focus")&&oe(!0)),ue.value=!0},he=function(){if(C(!1,(function(){ue.value=!1,oe(!1)})),!e.disabled){var t=F.value;t&&("tags"===e.mode?(ae("",!1,!1),K(Array.from(new Set([].concat(wc(j.value),[t]))))):"multiple"===e.mode&&B("")),e.onBlur&&e.onBlur(arguments.length<=0?void 0:arguments[0])}};u("VCSelectContainerEvent",{focus:de,blur:he});var fe=[];f((function(){fe.forEach((function(e){return window.clearTimeout(e)})),fe.splice(0,fe.length)})),m((function(){fe.forEach((function(e){return window.clearTimeout(e)})),fe.splice(0,fe.length)}));var pe=g(0),ge=p((function(){return void 0!==e.defaultActiveFirstOption?e.defaultActiveFirstOption:"combobox"!==e.mode})),ve=g(null);f((function(){d(re,(function(){if(re.value){var e=Math.ceil(n.value.offsetWidth);ve.value!==e&&(ve.value=e)}}),{immediate:!0})}));return{focus:function(){l.value.focus()},blur:function(){l.value.blur()},tokenWithEnter:y,mockFocused:k,mergedId:S,containerWidth:ve,onActiveValue:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.source,o=void 0===r?"keyboard":r;pe.value=n,e.backfill&&"combobox"===e.mode&&null!==t&&"keyboard"===o&&P(String(t))},accessibilityIndex:pe,mergedDefaultActiveFirstOption:ge,onInternalMouseDown:function(t){var n=t.target,i=o.value&&o.value.getPopupElement();if(i&&i.contains(n)){var r=window.setTimeout((function(){var e=fe.indexOf(r);-1!==e&&fe.splice(e,1),M(),i.contains(document.activeElement)||l.value.focus()}));fe.push(r)}e.onMousedown&&e.onMousedown(t)},onContainerFocus:de,onContainerBlur:he,onInternalKeyDown:function(t){var n=le(),i=t.which;if(te.value||i!==ia.ENTER||oe(!0),ce(!!F.value),i===ia.BACKSPACE&&!n&&N.value&&!F.value&&j.value.length){var r=function(e,t){var n,i=Ba(t);for(n=e.length-1;n>=0&&e[n].disabled;n-=1);var r=null;return-1!==n&&(r=i[n],i.splice(n,1)),{values:i,removedValue:r}}(Z.value,j.value);null!==r.removedValue&&(K(r.values),q(r.removedValue,!1,"input"))}te.value&&b.value&&b.value.onKeydown(t),e.onKeydown&&e.onKeydown(t)},isMultiple:N,mergedOpen:te,displayOptions:V,displayFlattenOptions:W,rawValues:L,onInternalOptionSelect:function(e,t){X(e,yc(yc({},t),{source:"option"}))},onToggleOpen:oe,mergedSearchValue:F,useInternalProps:t,triggerChange:K,triggerSearch:ae,mergedRawValue:j,mergedShowSearch:T,onInternalKeyUp:function(t){te.value&&b.value&&b.value.onKeyup(t),e.onKeyup&&e.onKeyup(t)},triggerOpen:re,mergedOptions:H,onInternalSelectionSelect:function(e,t){X(e,yc(yc({},t),{source:"selection"}))},selectorDomRef:A,displayValues:Z,activeValue:R,onSearchSubmit:function(e){var t=Array.from(new Set([].concat(wc(j.value),[e])));K(t),t.forEach((function(e){q(e,!0,"input")})),B("")},containerRef:n,listRef:b,triggerRef:o,selectorRef:l}},methods:{onPopupMouseEnter:function(){this.$forceUpdate()}},render:function(){var e,i=this,r=this.tokenWithEnter,o=this.mockFocused,a=this.mergedId,s=this.containerWidth,c=this.onActiveValue,u=this.accessibilityIndex,d=this.mergedDefaultActiveFirstOption,h=this.onInternalMouseDown,f=this.onInternalKeyDown,p=this.isMultiple,g=this.mergedOpen,v=this.displayOptions,m=this.displayFlattenOptions,b=this.rawValues,y=this.onInternalOptionSelect,w=this.onToggleOpen,x=this.mergedSearchValue,M=this.onPopupMouseEnter,S=this.useInternalProps,E=this.triggerChange,O=this.triggerSearch,N=this.mergedRawValue,T=this.mergedShowSearch,A=this.onInternalKeyUp,I=this.triggerOpen,D=this.mergedOptions,_=this.onInternalSelectionSelect,j=this.selectorDomRef,L=this.displayValues,R=this.activeValue,P=this.onSearchSubmit,z=this.$props,B=z.prefixCls,F=void 0===B?t:B,H=z.class;z.id,z.open,z.defaultOpen;var U=z.options;z.children;var Y=z.mode;z.value,z.defaultValue,z.labelInValue,z.showSearch,z.inputValue,z.searchValue,z.filterOption,z.optionFilterProp,z.autoClearSearchValue,z.onSearch;var V=z.allowClear,W=z.clearIcon,$=z.showArrow,G=z.inputIcon,Z=z.menuItemSelectedIcon,q=z.disabled,Q=z.loading;z.defaultActiveFirstOption;var K=z.notFoundContent,X=void 0===K?"Not Found":K;z.optionLabelProp,z.backfill;var J=z.getInputElement,ee=z.getPopupContainer,te=z.listHeight,ne=void 0===te?200:te,ie=z.listItemHeight,re=void 0===ie?20:ie,oe=z.animation,ae=z.transitionName,se=z.virtual,le=z.dropdownStyle,ce=z.dropdownClassName,ue=z.dropdownMatchSelectWidth,de=z.dropdownRender,he=z.dropdownAlign;z.showAction;var fe=z.direction;z.tokenSeparators;var pe=z.tagRender,ge=z.onPopupScroll;z.onDropdownVisibleChange,z.onFocus,z.onBlur,z.onKeyup,z.onKeydown,z.onMousedown,z.onChange,z.onSelect,z.onDeselect;var ve=z.onClear,me=z.internalProps,be=void 0===me?{}:me,ye=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(z,["prefixCls","class","id","open","defaultOpen","options","children","mode","value","defaultValue","labelInValue","showSearch","inputValue","searchValue","filterOption","optionFilterProp","autoClearSearchValue","onSearch","allowClear","clearIcon","showArrow","inputIcon","menuItemSelectedIcon","disabled","loading","defaultActiveFirstOption","notFoundContent","optionLabelProp","backfill","getInputElement","getPopupContainer","listHeight","listItemHeight","animation","transitionName","virtual","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","showAction","direction","tokenSeparators","tagRender","onPopupScroll","onDropdownVisibleChange","onFocus","onBlur","onKeyup","onKeydown","onMousedown","onChange","onSelect","onDeselect","onClear","internalProps"]),we="combobox"===Y&&J&&J()||null,ke=C?C(ye):ye;Mc.forEach((function(e){delete ke[e]}));var xe,Ce=l(n,{ref:"listRef",prefixCls:F,id:a,open:g,childrenAsData:!U,options:v,flattenOptions:m,multiple:p,values:b,height:ne,itemHeight:re,onSelect:y,onToggleOpen:w,onActiveValue:c,defaultActiveFirstOption:d,notFoundContent:X,onScroll:ge,searchValue:x,menuItemSelectedIcon:Z,virtual:!1!==se&&!1!==ue,onMouseenter:M},null);!q&&V&&(N.length||x)&&(xe=l(na,{class:"".concat(F,"-clear"),onMousedown:function(){S&&be.onClear&&be.onClear(),ve&&ve(),E([]),O("",!1,!1)},customizeIcon:W},{default:function(){return[k("×")]}}));var Me,Se=void 0!==$?$:Q||!p&&"combobox"!==Y;Se&&(Me=l(na,{class:Ee("".concat(F,"-arrow"),bc({},"".concat(F,"-arrow-loading"),Q)),customizeIcon:G,customizeIconProps:{loading:Q,searchValue:x,open:g,focused:o,showSearch:T}},null));var Oe=Ee(F,H,(bc(e={},"".concat(F,"-focused"),o),bc(e,"".concat(F,"-multiple"),p),bc(e,"".concat(F,"-single"),!p),bc(e,"".concat(F,"-allow-clear"),V),bc(e,"".concat(F,"-show-arrow"),Se),bc(e,"".concat(F,"-disabled"),q),bc(e,"".concat(F,"-loading"),Q),bc(e,"".concat(F,"-open"),g),bc(e,"".concat(F,"-customize-input"),we),bc(e,"".concat(F,"-show-search"),T),e));return l("div",mc(mc({class:Oe},ke),{},{ref:"containerRef",onMousedown:h,onKeydown:f,onKeyup:A}),[o&&!g&&l("span",{style:{width:0,height:0,display:"flex",overflow:"hidden",opacity:0},"aria-live":"polite"},["".concat(N.join(", "))]),l(dc,{ref:"triggerRef",disabled:q,prefixCls:F,visible:I,popupElement:Ce,containerWidth:s,animation:oe,transitionName:ae,dropdownStyle:le,dropdownClassName:ce,direction:fe,dropdownMatchSelectWidth:ue,dropdownRender:de,dropdownAlign:he,getPopupContainer:ee,empty:!D.length,getTriggerDOMNode:function(){return j.current}},{default:function(){return[l(Ts,mc(mc({},i.$props),{},{domRef:j,prefixCls:F,inputElement:we,ref:"selectorRef",id:a,showSearch:T,mode:Y,accessibilityIndex:u,multiple:p,tagRender:pe,values:L,open:g,onToggleOpen:w,searchValue:x,activeValue:R,onSearch:O,onSearchSubmit:P,onSelect:_,tokenWithEnter:r}),null)]}}),Me,xe])}});return M.inheritAttrs=!1,M.props=(b=Sc(),y={},w=gc({},b),Object.keys(y).forEach((function(e){var t=w[e];if(!t)throw new Error("not have ".concat(e," prop"));t.default=y[e]})),w),M}({prefixCls:"rc-select",components:{optionList:_a},convertChildrenToData:za,flattenOptions:function(e){var t=[];return function e(n,i){n.forEach((function(n){i||!("options"in n)?t.push({key:Xa(n,t.length),groupOption:i,data:n}):(t.push({key:Xa(n,t.length),group:!0,data:n}),e(n.options,!0))}))}(e,!1),t},getLabeledValue:function(e,t){var n,r=t.options,o=t.prevValue,a=t.labelInValue,s=t.optionLabelProp,l=es([e],r)[0],c={value:e},u=Ha(o);return a&&(n=u.find((function(t){return"object"===Qa(t)&&"value"in t?t.value===e:t.key===e}))),n&&"object"===Qa(n)&&"label"in n?(c.label=n.label,l&&"string"==typeof n.label&&"string"==typeof l[s]&&(n.label.trim(),l[s].trim())):l&&s in l?Array.isArray(l[s])?c.label=i(l[s][0])?h(l[s][0]):l[s]:c.label=l[s]:c.label=e,c.key=c.value,c},filterOptions:function(e,t,n){var i,r=n.optionFilterProp,o=n.filterOption,a=[];return!1===o?t:(i="function"==typeof o?o:function(e){return function(t,n){var i=t.toLowerCase();return"options"in n?ts(n.label).toLowerCase().includes(i):ts(n[e]).toLowerCase().includes(i)}}(r),t.forEach((function(t){if("options"in t)if(i(e,t))a.push(t);else{var n=t.options.filter((function(t){return i(e,t)}));n.length&&a.push(Ka(Ka({},t),{options:n}))}else i(e,Ja(t))&&a.push(t)})),a)},isValueDisabled:function(e,t){return es([e],t)[0].disabled},findValueOption:es,warningProps:function(e){var t=e.mode,n=e.options,i=e.children,r=e.backfill,o=e.allowClear,a=e.placeholder,s=e.getInputElement,l=e.showSearch,c=e.onSearch,u=e.defaultOpen,d=e.autofocus,h=e.labelInValue,f=e.value,p=e.inputValue,g=e.optionLabelProp,v="multiple"===t||"tags"===t,m=void 0!==l?l:v||"combobox"===t,b=n||za(i);if(Ho("tags"!==t||b.every((function(e){return!e.disabled})),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),("tags"===t||"combobox"===t)&&Ho(!b.some((function(e){return e.options?e.options.some((function(e){return"number"==typeof("value"in e?e.value:e.key)})):"number"==typeof("value"in e?e.value:e.key)})),"`value` of Option should not use number type when `mode` is `tags` or `combobox`."),Ho("combobox"!==t||!g,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),Ho("combobox"===t||!r,"`backfill` only works with `combobox` mode."),Ho("combobox"===t||!s,"`getInputElement` only work with `combobox` mode."),Uo("combobox"!==t||!s||!o||!a,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),c&&!m&&"combobox"!==t&&"tags"!==t&&Ho(!1,"`onSearch` should work with `showSearch` instead of use alone."),Uo(!u||d,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autofocus` if needed."),null!=f){var y=Ha(f);Ho(!h||y.every((function(e){return"object"===Ec(e)&&("key"in e||"value"in e)})),"`value` should in shape of `{ value: string | number, label?: any }` when you set `labelInValue` to `true`"),Ho(!v||Array.isArray(f),"`value` should be array when `mode` is `multiple` or `tags`")}if(i){var w=null;i.some((function(e){var t;if(!ut(e)||!e.type)return!1;var n=e.type;return!n.isSelectOption&&(n.isSelectOptGroup?!((null===(t=e.children)||void 0===t?void 0:t.default())||[]).every((function(t){return!(ut(t)&&e.type&&!t.type.isSelectOption)||(w=t.type,!1)})):(w=n,!0))})),w&&Ho(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(w.displayName||w.name||w,"`.")),Ho(void 0===p,"`inputValue` is deprecated, please use `searchValue` instead.")}},fillOptionsWithMissingValue:function(e,t,n,i){var r=Ha(t).slice().sort(),o=Wa(e),a=new Set;return e.forEach((function(e){e.options?e.options.forEach((function(e){a.add(e.value)})):a.add(e.value)})),r.forEach((function(e){var t,r=i?e.value:e;a.has(r)||o.push(i?(Va(t={},n,e.label),Va(t,"value",r),t):{value:r})})),o}}),uh=o({setup:function(){var e=g(null);return{selectRef:e,focus:function(){var t;null===(t=e.value)||void 0===t||t.focus()},blur:function(){var t;null===(t=e.value)||void 0===t||t.blur()}}},render:function(){return l(ch,sh(sh(sh({ref:"selectRef"},this.$props),this.$attrs),{},{children:nt(this)}),null)}});uh.inheritAttrs=!1,uh.props=oh(ch.props,["children"]),uh.Option=ja,uh.OptGroup=La;var dh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};function hh(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function fh(e){return Math.min(1,Math.max(0,e))}function ph(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function gh(e){return e<=1?100*Number(e)+"%":e}function vh(e){return 1===e.length?"0"+e:String(e)}function mh(e,t,n){e=hh(e,255),t=hh(t,255),n=hh(n,255);var i=Math.max(e,t,n),r=Math.min(e,t,n),o=0,a=0,s=(i+r)/2;if(i===r)a=0,o=0;else{var l=i-r;switch(a=s>.5?l/(2-i-r):l/(i+r),i){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:a,l:s}}function bh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function yh(e,t,n){e=hh(e,255),t=hh(t,255),n=hh(n,255);var i=Math.max(e,t,n),r=Math.min(e,t,n),o=0,a=i,s=i-r,l=0===i?0:s/i;if(i===r)o=0;else{switch(i){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:l,v:a}}function wh(e,t,n,i){var r=[vh(Math.round(e).toString(16)),vh(Math.round(t).toString(16)),vh(Math.round(n).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function kh(e){return xh(e)/255}function xh(e){return parseInt(e,16)}var Ch={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Mh(e){var t,n,i,r={r:0,g:0,b:0},o=1,a=null,s=null,l=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(Ch[e])e=Ch[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=Nh.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=Nh.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=Nh.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=Nh.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=Nh.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=Nh.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=Nh.hex8.exec(e))return{r:xh(n[1]),g:xh(n[2]),b:xh(n[3]),a:kh(n[4]),format:t?"name":"hex8"};if(n=Nh.hex6.exec(e))return{r:xh(n[1]),g:xh(n[2]),b:xh(n[3]),format:t?"name":"hex"};if(n=Nh.hex4.exec(e))return{r:xh(n[1]+n[1]),g:xh(n[2]+n[2]),b:xh(n[3]+n[3]),a:kh(n[4]+n[4]),format:t?"name":"hex8"};if(n=Nh.hex3.exec(e))return{r:xh(n[1]+n[1]),g:xh(n[2]+n[2]),b:xh(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"==typeof e&&(Th(e.r)&&Th(e.g)&&Th(e.b)?(t=e.r,n=e.g,i=e.b,r={r:255*hh(t,255),g:255*hh(n,255),b:255*hh(i,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):Th(e.h)&&Th(e.s)&&Th(e.v)?(a=gh(e.s),s=gh(e.v),r=function(e,t,n){e=6*hh(e,360),t=hh(t,100),n=hh(n,100);var i=Math.floor(e),r=e-i,o=n*(1-t),a=n*(1-r*t),s=n*(1-(1-r)*t),l=i%6;return{r:255*[n,a,o,o,s,n][l],g:255*[s,n,n,a,o,o][l],b:255*[o,o,s,n,n,a][l]}}(e.h,a,s),c=!0,u="hsv"):Th(e.h)&&Th(e.s)&&Th(e.l)&&(a=gh(e.s),l=gh(e.l),r=function(e,t,n){var i,r,o;if(e=hh(e,360),t=hh(t,100),n=hh(n,100),0===t)r=n,o=n,i=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;i=bh(s,a,e+1/3),r=bh(s,a,e),o=bh(s,a,e-1/3)}return{r:255*i,g:255*r,b:255*o}}(e.h,a,l),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=ph(o),{ok:c,format:e.format||u,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:o}}var Sh="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",Eh="[\\s|\\(]+("+Sh+")[,|\\s]+("+Sh+")[,|\\s]+("+Sh+")\\s*\\)?",Oh="[\\s|\\(]+("+Sh+")[,|\\s]+("+Sh+")[,|\\s]+("+Sh+")[,|\\s]+("+Sh+")\\s*\\)?",Nh={CSS_UNIT:new RegExp(Sh),rgb:new RegExp("rgb"+Eh),rgba:new RegExp("rgba"+Oh),hsl:new RegExp("hsl"+Eh),hsla:new RegExp("hsla"+Oh),hsv:new RegExp("hsv"+Eh),hsva:new RegExp("hsva"+Oh),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Th(e){return Boolean(Nh.CSS_UNIT.exec(String(e)))}var Ah=function(){function e(t,n){var i;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"==typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var r=Mh(t);this.originalInput=t,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(i=n.format)&&void 0!==i?i:r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,i=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=ph(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=yh(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=yh(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.v);return 1===this.a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var e=mh(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=mh(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.l);return 1===this.a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this.roundA+")"},e.prototype.toHex=function(e){return void 0===e&&(e=!1),wh(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,i,r){var o,a=[vh(Math.round(e).toString(16)),vh(Math.round(t).toString(16)),vh(Math.round(n).toString(16)),vh((o=i,Math.round(255*parseFloat(o)).toString(16)))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb("+e+", "+t+", "+n+")":"rgba("+e+", "+t+", "+n+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var e=function(e){return Math.round(100*hh(e,255))+"%"};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*hh(e,255))};return 1===this.a?"rgb("+e(this.r)+"%, "+e(this.g)+"%, "+e(this.b)+"%)":"rgba("+e(this.r)+"%, "+e(this.g)+"%, "+e(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+wh(this.r,this.g,this.b,!1),t=0,n=Object.entries(Ch);t<n.length;t++){var i=n[t],r=i[0];if(e===i[1])return r}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var n=!1,i=this.a<1&&this.a>=0;return t||!i||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=fh(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=fh(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=fh(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=fh(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var i=this.toRgb(),r=new e(t).toRgb(),o=n/100;return new e({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var i=this.toHsl(),r=360/n,o=[this];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push(new e(i));return o},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/t;t--;)a.push(new e({h:i,s:r,v:o})),o=(o+s)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),i=new e(t).toRgb();return new e({r:i.r+(n.r-i.r)*n.a,g:i.g+(n.g-i.g)*n.a,b:i.b+(n.b-i.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),i=n.h,r=[this],o=360/t,a=1;a<t;a++)r.push(new e({h:(i+a*o)%360,s:n.s,l:n.l}));return r},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Ih=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Dh(e,t,n){var i;return(i=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?i+=360:i>=360&&(i-=360),i}function _h(e,t,n){return 0===e.h&&0===e.s?e.s:((i=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(i=1),n&&5===t&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2)));var i}function jh(e,t,n){var i;return(i=n?e.v+.05*t:e.v-.15*t)>1&&(i=1),Number(i.toFixed(2))}function Lh(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=new Ah(e),r=5;r>0;r-=1){var o=i.toHsv(),a=new Ah({h:Dh(o,r,!0),s:_h(o,r,!0),v:jh(o,r,!0)}).toHexString();n.push(a)}n.push(i.toHexString());for(var s=1;s<=4;s+=1){var l=i.toHsv(),c=new Ah({h:Dh(l,s),s:_h(l,s),v:jh(l,s)}).toHexString();n.push(c)}return"dark"===t.theme?Ih.map((function(e){var i=e.index,r=e.opacity;return new Ah(t.backgroundColor||"#141414").mix(n[i],100*r).toHexString()})):n}var Rh={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ph={},zh={};Object.keys(Rh).forEach((function(e){Ph[e]=Lh(Rh[e]),Ph[e].primary=Ph[e][5],zh[e]=Lh(Rh[e],{theme:"dark",backgroundColor:"#141414"}),zh[e].primary=zh[e][5]}));var Bh=[],Fh=[];function Hh(e,t){if(t=t||{},void 0===e)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var n,i=!0===t.prepend?"prepend":"append",r=void 0!==t.container?t.container:document.querySelector("head"),o=Bh.indexOf(r);return-1===o&&(o=Bh.push(r)-1,Fh[o]={}),void 0!==Fh[o]&&void 0!==Fh[o][i]?n=Fh[o][i]:(n=Fh[o][i]=function(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}(),"prepend"===i?r.insertBefore(n,r.childNodes[0]):r.appendChild(n)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),n.styleSheet?n.styleSheet.cssText+=e:n.textContent+=e,n}function Uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Yh(e,t,n[t])}))}return e}function Yh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vh(e){return"object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"==typeof e.icon||"function"==typeof e.icon)}function Wh(e,t,n){return S(e.tag,n?Uh({key:t},n,e.attrs):Uh({key:t},e.attrs),(e.children||[]).map((function(n,i){return Wh(n,"".concat(t,"-").concat(e.tag,"-").concat(i))})))}function $h(e){return Lh(e)[0]}function Gh(e){return e?Array.isArray(e)?e:[e]:[]}var Zh="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",qh=!1;function Qh(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Xh(e,t,n[t])}))}return e}function Xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jh={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var ef=function(e,t){var n=Kh({},e,t.attrs),i=n.icon,o=n.primaryColor,a=n.secondaryColor,s=Qh(n,["icon","primaryColor","secondaryColor"]),l=Jh;if(o&&(l={primaryColor:o,secondaryColor:a||$h(o)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zh;r((function(){qh||("undefined"!=typeof window&&window.document&&window.document.documentElement&&Hh(e,{prepend:!0}),qh=!0)}))}(),Vh(i),!Vh(i))return null;var c=i;return c&&"function"==typeof c.icon&&(c=Kh({},c,{icon:c.icon(l.primaryColor,l.secondaryColor)})),Wh(c.icon,"svg-".concat(c.name),Kh({},s,{"data-icon":c.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};function tf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function rf(e){var t=tf(Gh(e),2),n=t[0],i=t[1];return ef.setTwoToneColors({primaryColor:n,secondaryColor:i})}function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return af(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function sf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lf(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}ef.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String},ef.inheritAttrs=!1,ef.displayName="IconBase",ef.getTwoToneColors=function(){return Kh({},Jh)},ef.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Jh.primaryColor=t,Jh.secondaryColor=n||$h(t),Jh.calculated=!!n},rf("#1890ff");var cf=function(e,t){var n,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){sf(e,t,n[t])}))}return e}({},e,t.attrs),r=i.class,o=i.icon,a=i.spin,s=i.rotate,c=i.tabindex,u=i.twoToneColor,d=i.onClick,h=lf(i,["class","icon","spin","rotate","tabindex","twoToneColor","onClick"]),f=(sf(n={anticon:!0},"anticon-".concat(o.name),Boolean(o.name)),sf(n,r,r),n),p=""===a||a||"loading"===o.name?"anticon-spin":"",g=c;void 0===g&&d&&(g=-1,h.tabindex=g);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,m=of(Gh(u),2),b=m[0],y=m[1];return l("span",E(h,{role:"img","aria-label":o.name,onClick:d,class:f}),[l(ef,{class:p,icon:o,primaryColor:b,secondaryColor:y,style:v},null)])};function uf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cf.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:String},cf.displayName="AntdIcon",cf.inheritAttrs=!1,cf.getTwoToneColor=function(){var e=ef.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},cf.setTwoToneColor=rf;var df=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){uf(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:dh}),null)};df.displayName="DownOutlined",df.inheritAttrs=!1;var hf={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};function ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pf=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){ff(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:hf}),null)};pf.displayName="LoadingOutlined",pf.inheritAttrs=!1;var gf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mf=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){vf(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:gf}),null)};mf.displayName="CheckOutlined",mf.inheritAttrs=!1;var bf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"};function yf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wf=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){yf(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:bf}),null)};wf.displayName="CloseOutlined",wf.inheritAttrs=!1;var kf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};function xf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cf=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){xf(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:kf}),null)};Cf.displayName="CloseCircleFilled",Cf.inheritAttrs=!1;var Mf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function Sf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ef=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Sf(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:Mf}),null)};function Of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(n),!0).forEach((function(t){Tf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Of(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Af(){return(Af=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Ef.displayName="SearchOutlined",Ef.inheritAttrs=!1;var If=o({name:"ASelect",Option:ja,OptGroup:La,inheritAttrs:!1,props:Af(Af({},Oe(Sc(),["inputIcon","mode","getInputElement","backfill","class","style"])),{value:{type:[Array,Object,String,Number]},defaultValue:{type:[Array,Object,String,Number]},notFoundContent:de.VNodeChild,suffixIcon:de.VNodeChild,itemIcon:de.VNodeChild,size:de.oneOf(Mt("small","middle","large","default")),mode:de.oneOf(Mt("multiple","tags","SECRET_COMBOBOX_MODE_DO_NOT_USE")),bordered:de.looseBool.def(!0),transitionName:de.string.def("slide-up"),choiceTransitionName:de.string.def("")}),SECRET_COMBOBOX_MODE_DO_NOT_USE:"SECRET_COMBOBOX_MODE_DO_NOT_USE",emits:["change","update:value"],setup:function(e,t){var n=t.attrs,i=t.emit,r=g(null),o=s("configProvider",Qo),a=p((function(){var t=e.mode;if("combobox"!==t)return t===If.SECRET_COMBOBOX_MODE_DO_NOT_USE?"combobox":t})),l=p((function(){return o.getPrefixCls("select",e.prefixCls)})),c=p((function(){var t;return Ee((Tf(t={},"".concat(l.value,"-lg"),"large"===e.size),Tf(t,"".concat(l.value,"-sm"),"small"===e.size),Tf(t,"".concat(l.value,"-rtl"),"rtl"===e.direction),Tf(t,"".concat(l.value,"-borderless"),!e.bordered),t),n.class)}));return{selectRef:r,mergedClassName:c,mode:a,focus:function(){r.value&&r.value.focus()},blur:function(){r.value&&r.value.blur()},configProvider:o,triggerChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i("update:value",t[0]),i.apply(void 0,["change"].concat(t))},prefixCls:l}},render:function(){var e,t,n=this.configProvider,i=this.mode,r=this.mergedClassName,o=this.triggerChange,a=this.prefixCls,s=this.$slots,c=this.$props,u=c.notFoundContent,d=c.listHeight,h=void 0===d?256:d,f=c.listItemHeight,p=void 0===f?24:f,g=c.getPopupContainer,v=c.dropdownClassName,m=c.direction,b=c.virtual,y=c.dropdownMatchSelectWidth,w=n.renderEmpty,k=n.getPopupContainer,x="multiple"===i||"tags"===i;t=void 0!==u?u:s.notFoundContent?s.notFoundContent():"combobox"===i?null:w("Select");var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.loading,i=e.multiple,r=e.prefixCls,o=e.suffixIcon||t.suffixIcon&&t.suffixIcon(),a=e.clearIcon||t.clearIcon&&t.clearIcon(),s=e.menuItemSelectedIcon||t.menuItemSelectedIcon&&t.menuItemSelectedIcon(),c=e.removeIcon||t.removeIcon&&t.removeIcon(),u=a;a||(u=l(Cf,null,null));var d=null;if(void 0!==o)d=o;else if(n)d=l(pf,{spin:!0},null);else{var h="".concat(r,"-suffix");d=function(e){var t=e.open,n=e.showSearch;return l(t&&n?Ef:df,{class:h},null)}}return{clearIcon:u,suffixIcon:d,itemIcon:void 0!==s?s:i?l(mf,null,null):null,removeIcon:void 0!==c?c:l(wf,null,null)}}(Af(Af({},this.$props),{multiple:x,prefixCls:a}),s),M=C.suffixIcon,S=C.itemIcon,E=C.removeIcon,O=C.clearIcon,N=Oe(c,["prefixCls","suffixIcon","itemIcon","removeIcon","clearIcon","size","bordered"]),T=Ee(v,Tf({},"".concat(a,"-dropdown-").concat(m),"rtl"===m));return l(uh,Nf(Nf(Nf({ref:"selectRef",virtual:b,dropdownMatchSelectWidth:y},N),this.$attrs),{},{listHeight:h,listItemHeight:p,mode:i,prefixCls:a,direction:m,inputIcon:M,menuItemSelectedIcon:S,removeIcon:E,clearIcon:O,notFoundContent:t,class:r,getPopupContainer:g||k,dropdownClassName:T,onChange:o,dropdownRender:N.dropdownRender||this.$slots.dropdownRender}),{default:function(){return[null===(e=s.default)||void 0===e?void 0:e.call(s)]}})}});If.install=function(e){return e.component(If.name,If),e.component(If.Option.displayName,If.Option),e.component(If.OptGroup.displayName,If.OptGroup),e};var Df={prefixCls:de.string,inputPrefixCls:de.string,defaultValue:de.oneOfType([de.string,de.number]),value:de.oneOfType([de.string,de.number]),placeholder:{type:[String,Number]},type:de.string.def("text"),name:de.string,size:de.oneOf(Mt("small","large","default")),disabled:de.looseBool,readonly:de.looseBool,addonBefore:de.VNodeChild,addonAfter:de.VNodeChild,prefix:de.VNodeChild,suffix:de.VNodeChild,autofocus:de.looseBool,allowClear:de.looseBool,lazy:de.looseBool.def(!0),maxlength:de.number,loading:de.looseBool,onPressEnter:de.func,onKeydown:de.func,onKeyup:de.func,onFocus:de.func,onBlur:de.func,onChange:de.func,onInput:de.func,"onUpdate:value":de.func};function _f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jf=["text","input"],Lf=o({name:"ClearableLabeledInput",inheritAttrs:!1,props:{prefixCls:de.string,inputType:de.oneOf(Mt("text","input")),value:de.any,defaultValue:de.any,allowClear:de.looseBool,element:de.VNodeChild,handleReset:de.func,disabled:de.looseBool,size:de.oneOf(Mt("small","large","default")),suffix:de.VNodeChild,prefix:de.VNodeChild,addonBefore:de.VNodeChild,addonAfter:de.VNodeChild,readonly:de.looseBool,isFocused:de.looseBool},methods:{renderClearIcon:function(e){var t=this.$props,n=t.allowClear,i=t.value,r=t.disabled,o=t.readonly,a=t.inputType,s=t.handleReset;if(!n)return null;var c=!r&&!o&&null!=i&&""!==i,u="".concat(e,a===jf[0]?"-textarea-clear-icon":"-clear-icon");return l(Cf,{onClick:s,class:Ee(u,_f({},"".concat(u,"-hidden"),!c)),role:"button"},null)},renderSuffix:function(e){var t=this.$props,n=t.suffix,i=t.allowClear;return n||i?l("span",{class:"".concat(e,"-suffix")},[this.renderClearIcon(e),n]):null},renderLabeledIcon:function(e,t){var n,i,r,o=this.$props,a=this.$attrs.style,s=this.renderSuffix(e);if(!(ot(r=this,"prefix")||ot(r,"suffix")||r.$props.allowClear))return rs(t,{value:o.value});var c=o.prefix?l("span",{class:"".concat(e,"-prefix")},[o.prefix]):null,u=Ee(null===(i=this.$attrs)||void 0===i?void 0:i.class,"".concat(e,"-affix-wrapper"),(_f(n={},"".concat(e,"-affix-wrapper-focused"),o.isFocused),_f(n,"".concat(e,"-affix-wrapper-disabled"),o.disabled),_f(n,"".concat(e,"-affix-wrapper-sm"),"small"===o.size),_f(n,"".concat(e,"-affix-wrapper-lg"),"large"===o.size),_f(n,"".concat(e,"-affix-wrapper-input-with-clear-btn"),o.suffix&&o.allowClear&&this.$props.value),n));return l("span",{class:u,style:a},[c,rs(t,{style:null,value:o.value,class:Uf(e,o.size,o.disabled)}),s])},renderInputWithLabel:function(e,t){var n,i=this.$props,r=i.addonBefore,o=i.addonAfter,a=i.size,s=this.$attrs,c=s.style,u=s.class;if(!r&&!o)return t;var d="".concat(e,"-group"),h="".concat(d,"-addon"),f=r?l("span",{class:h},[r]):null,p=o?l("span",{class:h},[o]):null,g=Ee("".concat(e,"-wrapper"),_f({},d,r||o)),v=Ee(u,"".concat(e,"-group-wrapper"),(_f(n={},"".concat(e,"-group-wrapper-sm"),"small"===a),_f(n,"".concat(e,"-group-wrapper-lg"),"large"===a),n));return l("span",{class:v,style:c},[l("span",{class:g},[f,rs(t,{style:null}),p])])},renderTextAreaWithClearIcon:function(e,t){var n=this.$props,i=n.value,r=n.allowClear,o=this.$attrs,a=o.style,s=o.class;if(!r)return rs(t,{value:i});var c=Ee(s,"".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"));return l("span",{class:c,style:a},[rs(t,{style:null,value:i}),this.renderClearIcon(e)])},renderClearableLabeledInput:function(){var e=this.$props,t=e.prefixCls,n=e.inputType,i=e.element;return n===jf[0]?this.renderTextAreaWithClearIcon(t,i):this.renderInputWithLabel(t,this.renderLabeledIcon(t,i))}},render:function(){return this.renderClearableLabeledInput()}});function Rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rf(Object(n),!0).forEach((function(t){Bf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zf(){return(zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Bf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ff(e){return null==e?"":e}function Hf(e,t,n){if(n){var i=t;if("click"===t.type){Object.defineProperty(i,"target",{writable:!0}),Object.defineProperty(i,"currentTarget",{writable:!0}),i.target=e,i.currentTarget=e;var r=e.value;return e.value="",n(i),void(e.value=r)}n(i)}}function Uf(e,t,n){var i;return Ee(e,(Bf(i={},"".concat(e,"-sm"),"small"===t),Bf(i,"".concat(e,"-lg"),"large"===t),Bf(i,"".concat(e,"-disabled"),n),i))}var Yf=o({name:"AInput",inheritAttrs:!1,props:zf({},Df),setup:function(){return{configProvider:s("configProvider",Qo),removePasswordTimeout:void 0,input:null,clearableInput:null}},data:function(){var e=this.$props,t=void 0===e.value?e.defaultValue:e.value;return{stateValue:void 0===t?"":t,isFocused:!1}},watch:{value:function(e){this.stateValue=e}},mounted:function(){var e=this;r((function(){e.clearPasswordValueAttribute()}))},beforeUnmount:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)},methods:{handleInputFocus:function(e){this.isFocused=!0,this.onFocus&&this.onFocus(e)},handleInputBlur:function(e){this.isFocused=!1,this.onBlur&&this.onBlur(e)},focus:function(){this.input.focus()},blur:function(){this.input.blur()},select:function(){this.input.select()},saveClearableInput:function(e){this.clearableInput=e},saveInput:function(e){this.input=e},setValue:function(e,t){this.stateValue!==e&&(et(this,"value")?this.$forceUpdate():this.stateValue=e,r((function(){t&&t()})))},triggerChange:function(e){this.$emit("update:value",e.target.value),this.$emit("change",e),this.$emit("input",e)},handleReset:function(e){var t=this;this.setValue("",(function(){t.focus()})),Hf(this.input,e,this.triggerChange)},renderInput:function(e,t){var n=t.addonBefore,i=t.addonAfter,r=Oe(this.$props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","lazy","size","inputPrefixCls","loading"]),o=this.handleKeyDown,a=this.handleChange,s=this.handleInputFocus,c=this.handleInputBlur,u=this.size,d=this.disabled,h=this.$attrs,f=zf(zf(zf({},r),h),{onKeydown:o,class:Ee(Uf(e,u,d),Bf({},h.class,h.class&&!n&&!i)),ref:this.saveInput,key:"ant-input",onInput:a,onChange:a,onFocus:s,onBlur:c});f.autofocus||delete f.autofocus;var p=l("input",f,null);return b(p,[[ls]])},clearPasswordValueAttribute:function(){var e=this;this.removePasswordTimeout=setTimeout((function(){e.input&&e.input.getAttribute&&"password"===e.input.getAttribute("type")&&e.input.hasAttribute("value")&&e.input.removeAttribute("value")}))},handleChange:function(e){var t=e.target,n=t.value,i=t.composing;(t.isComposing||i)&&this.lazy||this.stateValue===n||(this.setValue(n,this.clearPasswordValueAttribute),Hf(this.input,e,this.triggerChange))},handleKeyDown:function(e){13===e.keyCode&&this.$emit("pressEnter",e),this.$emit("keydown",e)}},render:function(){var e=this.$props.prefixCls,t=this.$data,n=t.stateValue,i=t.isFocused,r=(0,this.configProvider.getPrefixCls)("input",e),o=ot(this,"addonAfter"),a=ot(this,"addonBefore"),s=ot(this,"suffix"),c=ot(this,"prefix"),u=zf(zf(zf({},this.$attrs),rt(this)),{prefixCls:r,inputType:"input",value:Ff(n),element:this.renderInput(r,{addonAfter:o,addonBefore:a}),handleReset:this.handleReset,addonAfter:o,addonBefore:a,suffix:s,prefix:c,isFocused:i});return l(Lf,Pf(Pf({},u),{},{ref:this.saveClearableInput}),null)}});function Vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wf=o({name:"AInputGroup",props:{prefixCls:de.string,size:de.oneOf(Mt("small","large","default")),compact:de.looseBool},setup:function(){return{configProvider:s("configProvider",Qo)}},computed:{classes:function(){var e,t=this.prefixCls,n=this.size,i=this.compact,r=void 0!==i&&i,o=(0,this.configProvider.getPrefixCls)("input-group",t);return Vf(e={},"".concat(o),!0),Vf(e,"".concat(o,"-lg"),"large"===n),Vf(e,"".concat(o,"-sm"),"small"===n),Vf(e,"".concat(o,"-compact"),r),e}},render:function(){return l("span",{class:this.classes},[nt(this)])}});function $f(){return($f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Gf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var qf=/iPhone/i,Qf=/iPod/i,Kf=/iPad/i,Xf=/\bAndroid(?:.+)Mobile\b/i,Jf=/Android/i,ep=/\bAndroid(?:.+)SD4930UR\b/i,tp=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,np=/Windows Phone/i,ip=/\bWindows(?:.+)ARM\b/i,rp=/BlackBerry/i,op=/BB10/i,ap=/Opera Mini/i,sp=/\b(CriOS|Chrome)(?:.+)Mobile/i,lp=/Mobile(?:.+)Firefox\b/i;function cp(e,t){return e.test(t)}function up(e){var t=e||("undefined"!=typeof navigator?navigator.userAgent:""),n=t.split("[FBAN");void 0!==n[1]&&(t=Gf(n,1)[0]);void 0!==(n=t.split("Twitter"))[1]&&(t=Gf(n,1)[0]);var i={apple:{phone:cp(qf,t)&&!cp(np,t),ipod:cp(Qf,t),tablet:!cp(qf,t)&&cp(Kf,t)&&!cp(np,t),device:(cp(qf,t)||cp(Qf,t)||cp(Kf,t))&&!cp(np,t)},amazon:{phone:cp(ep,t),tablet:!cp(ep,t)&&cp(tp,t),device:cp(ep,t)||cp(tp,t)},android:{phone:!cp(np,t)&&cp(ep,t)||!cp(np,t)&&cp(Xf,t),tablet:!cp(np,t)&&!cp(ep,t)&&!cp(Xf,t)&&(cp(tp,t)||cp(Jf,t)),device:!cp(np,t)&&(cp(ep,t)||cp(tp,t)||cp(Xf,t)||cp(Jf,t))||cp(/\bokhttp\b/i,t)},windows:{phone:cp(np,t),tablet:cp(ip,t),device:cp(np,t)||cp(ip,t)},other:{blackberry:cp(rp,t),blackberry10:cp(op,t),opera:cp(ap,t),firefox:cp(lp,t),chrome:cp(sp,t),device:cp(rp,t)||cp(op,t)||cp(ap,t)||cp(lp,t)||cp(sp,t)},any:null,phone:null,tablet:null};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}var dp=$f($f({},up()),{isMobile:up}),hp={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},fp={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},pp=[],gp=[];function vp(e,t,n){e.addEventListener(t,n,!1)}function mp(e,t,n){e.removeEventListener(t,n,!1)}"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var e=document.createElement("div").style;function t(t,n){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];for(var o in r)if(o in e){n.push(r[o]);break}}}"AnimationEvent"in window||(delete hp.animationstart.animation,delete fp.animationend.animation),"TransitionEvent"in window||(delete hp.transitionstart.transition,delete fp.transitionend.transition),t(hp,pp),t(fp,gp)}();var bp,yp=function(e,t){0!==pp.length?pp.forEach((function(n){vp(e,n,t)})):window.setTimeout(t,0)},wp=function(e,t){0!==pp.length&&pp.forEach((function(n){mp(e,n,t)}))},kp=function(e,t){0!==gp.length?gp.forEach((function(n){vp(e,n,t)})):window.setTimeout(t,0)},xp=function(e,t){0!==gp.length&&gp.forEach((function(n){mp(e,n,t)}))};function Cp(e){return!e||null===e.offsetParent}var Mp=o({name:"Wave",props:["insertExtraNode"],setup:function(){return{configProvider:s("configProvider",Qo)}},mounted:function(){var e=this;r((function(){var t=it(e);1===t.nodeType&&(e.instance=e.bindAnimationEvent(t))}))},beforeUnmount:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId)},methods:{onClick:function(e,t){if(!(!e||Cp(e)||e.className.indexOf("-leave")>=0)){var n=this.$props.insertExtraNode;this.extraNode=document.createElement("div");var i=this.extraNode;i.className="ant-click-animating-node";var r,o=this.getAttributeName();e.removeAttribute(o),e.setAttribute(o,"true"),bp=bp||document.createElement("style"),!t||"#ffffff"===t||"rgb(255, 255, 255)"===t||(r=(t||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/))&&r[1]&&r[2]&&r[3]&&r[1]===r[2]&&r[2]===r[3]||/rgba\(\d*, \d*, \d*, 0\)/.test(t)||"transparent"===t||(this.csp&&this.csp.nonce&&(bp.nonce=this.csp.nonce),i.style.borderColor=t,bp.innerHTML="\n        [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n          --antd-wave-shadow-color: ".concat(t,";\n        }"),document.body.contains(bp)||document.body.appendChild(bp)),n&&e.appendChild(i),yp(e,this.onTransitionStart),kp(e,this.onTransitionEnd)}},onTransitionStart:function(e){if(!this._.isUnmounted){var t=it(this);e&&e.target===t&&(this.animationStart||this.resetEffect(t))}},onTransitionEnd:function(e){e&&"fadeEffect"===e.animationName&&this.resetEffect(e.target)},getAttributeName:function(){return this.$props.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"},bindAnimationEvent:function(e){var t=this;if(e&&e.getAttribute&&!e.getAttribute("disabled")&&!(e.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!Cp(n.target)){t.resetEffect(e);var i=getComputedStyle(e).getPropertyValue("border-top-color")||getComputedStyle(e).getPropertyValue("border-color")||getComputedStyle(e).getPropertyValue("background-color");t.clickWaveTimeoutId=window.setTimeout((function(){return t.onClick(e,i)}),0),fa.cancel(t.animationStartId),t.animationStart=!0,t.animationStartId=fa((function(){t.animationStart=!1}),10)}};return e.addEventListener("click",n,!0),{cancel:function(){e.removeEventListener("click",n,!0)}}}},resetEffect:function(e){if(e&&e!==this.extraNode&&e instanceof Element){var t=this.$props.insertExtraNode,n=this.getAttributeName();e.setAttribute(n,"false"),bp&&(bp.innerHTML=""),t&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),wp(e,this.onTransitionStart),xp(e,this.onTransitionEnd)}}},render:function(){var e,t,n=this.configProvider.csp;return n&&(this.csp=n),null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)[0]}}),Sp=Mt("default","primary","ghost","dashed","danger","link"),Ep=Mt("circle","circle-outline","round"),Op=Mt("large","default","small"),Np=Mt("submit","button","reset");function Tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tp(Object(n),!0).forEach((function(t){Dp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ip(){return(Ip=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Dp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _p=/^[\u4e00-\u9fa5]{2}$/,jp=_p.test.bind(_p),Lp={prefixCls:de.string,type:de.oneOf(Sp),htmlType:de.oneOf(Np).def("button"),shape:de.oneOf(Ep),size:de.oneOf(Op).def("default"),loading:he(de.oneOfType([de.looseBool,de.object])),disabled:de.looseBool,ghost:de.looseBool,block:de.looseBool,icon:de.VNodeChild,href:de.string,title:de.string,onClick:de.func},Rp=o({name:"AButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:Lp,setup:function(){return{configProvider:s("configProvider",Qo),children:[],iconCom:void 0,delayTimeout:void 0}},data:function(){return{sizeMap:{large:"lg",small:"sm"},sLoading:!1,hasTwoCNChar:!1}},watch:{loading:{handler:function(e,t){var n=this;t&&"boolean"!=typeof t&&clearTimeout(this.delayTimeout),e&&"boolean"!=typeof e&&e.delay?this.delayTimeout=setTimeout((function(){n.sLoading=!!e}),e.delay):this.sLoading=!!e},immediate:!0}},mounted:function(){this.fixTwoCNChar()},updated:function(){this.fixTwoCNChar()},beforeUnmount:function(){this.delayTimeout&&clearTimeout(this.delayTimeout)},methods:{getClasses:function(){var e,t=this.prefixCls,n=this.type,i=this.shape,r=this.size,o=this.hasTwoCNChar,a=this.sLoading,s=this.ghost,l=this.block,c=this.$attrs,u=(0,this.configProvider.getPrefixCls)("btn",t),d=!1!==this.configProvider.autoInsertSpaceInButton,h="";switch(r){case"large":h="lg";break;case"small":h="sm"}var f=a?"loading":this.iconCom;return Dp(e={},c.class,c.class),Dp(e,"".concat(u),!0),Dp(e,"".concat(u,"-").concat(n),n),Dp(e,"".concat(u,"-").concat(i),i),Dp(e,"".concat(u,"-").concat(h),h),Dp(e,"".concat(u,"-icon-only"),0===this.children.length&&f),Dp(e,"".concat(u,"-loading"),a),Dp(e,"".concat(u,"-background-ghost"),s||"ghost"===n),Dp(e,"".concat(u,"-two-chinese-chars"),o&&d),Dp(e,"".concat(u,"-block"),l),e},fixTwoCNChar:function(){var e=this.$refs.buttonNode;if(e){var t=e.textContent;this.isNeedInserted()&&jp(t)?this.hasTwoCNChar||(this.hasTwoCNChar=!0):this.hasTwoCNChar&&(this.hasTwoCNChar=!1)}},handleClick:function(e){this.$data.sLoading||this.$emit("click",e)},insertSpace:function(e,t){var i=t?" ":"";if(e.type===n){var r=e.children.trim();return jp(r)&&(r=r.split("").join(i)),l("span",null,[r])}return e},isNeedInserted:function(){var e=this.iconCom,t=this.type;return 1===this.children.length&&!e&&"link"!==t}},render:function(){var e=this;this.iconCom=ot(this,"icon");var t=this.type,n=this.htmlType,i=this.iconCom,r=this.disabled,o=this.handleClick,a=this.sLoading,s=this.href,c=this.title,u=this.$attrs,d=nt(this);this.children=d;var h=this.getClasses(),f=Ip(Ip({},u),{title:c,disabled:r,class:h,onClick:o}),p=a?l(pf,null,null):i,g=!1!==this.configProvider.autoInsertSpaceInButton,v=d.map((function(t){return e.insertSpace(t,e.isNeedInserted()&&g)}));if(void 0!==s)return l("a",Ap(Ap({},f),{},{href:s,ref:"buttonNode"}),[p,v]);var m=l("button",Ap(Ap({},f),{},{ref:"buttonNode",type:n||"button"}),[p,v]);return"link"===t?m:l(Mp,{ref:"wave"},{default:function(){return[m]}})}});function Pp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zp={prefixCls:de.string,size:de.oneOf(Mt("small","large","default"))},Bp=o({name:"AButtonGroup",props:zp,setup:function(){return{configProvider:s("configProvider",Qo)}},data:function(){return{sizeMap:{large:"lg",small:"sm"}}},render:function(){var e,t=this.prefixCls,n=this.size,i=(0,this.configProvider.getPrefixCls)("btn-group",t),r="";switch(n){case"large":r="lg";break;case"small":r="sm"}var o=(Pp(e={},"".concat(i),!0),Pp(e,"".concat(i,"-").concat(r),r),e);return l("div",{class:o},[ct(nt(this))])}});function Fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fp(Object(n),!0).forEach((function(t){Up(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Up(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yp(){return(Yp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Rp.Group=Bp,Rp.install=function(e){return e.component(Rp.name,Rp),e.component(Bp.name,Bp),e};var Vp,Wp=o({name:"AInputSearch",inheritAttrs:!1,props:Yp(Yp({},Df),{enterButton:de.VNodeChild,onSearch:de.func}),setup:function(){return{configProvider:s("configProvider",Qo),input:null}},methods:{saveInput:function(e){this.input=e},handleChange:function(e){this.$emit("update:value",e.target.value),e&&e.target&&"click"===e.type&&this.$emit("search",e.target.value,e),this.$emit("change",e)},handleSearch:function(e){this.loading||this.disabled||(this.$emit("search",this.input.stateValue,e),dp.tablet||this.input.focus())},focus:function(){this.input.focus()},blur:function(){this.input.blur()},renderLoading:function(e){var t=this.$props.size,n=ot(this,"enterButton");return(n=n||""===n)?l(Rp,{class:"".concat(e,"-button"),type:"primary",size:t,key:"enterButton"},{default:function(){return[l(pf,null,null)]}}):l(pf,{class:"".concat(e,"-icon"),key:"loadingIcon"},null)},renderSuffix:function(e){var t=this.loading,n=ot(this,"suffix"),i=ot(this,"enterButton");if(i=i||""===i,t&&!i)return[n,this.renderLoading(e)];if(i)return n;var r=l(Ef,{class:"".concat(e,"-icon"),key:"searchIcon",onClick:this.handleSearch},null);return n?[n,r]:r},renderAddonAfter:function(e){var t=this.size,n=this.disabled,i=this.loading,r="".concat(e,"-button"),o=ot(this,"enterButton");o=o||""===o;var a=ot(this,"addonAfter");if(i&&o)return[this.renderLoading(e),a];if(!o)return a;var s,c=Array.isArray(o)?o[0]:o,u=c.type&&Ge(c.type)&&c.type.__ANT_BUTTON;return s="button"===c.tagName||u?rs(c,Yp(Yp({key:"enterButton",class:u?r:""},u?{size:t}:{}),{onClick:this.handleSearch})):l(Rp,{class:r,type:"primary",size:t,disabled:n,key:"enterButton",onClick:this.handleSearch},{default:function(){return[!0===o||""===o?l(Ef,null,null):o]}}),a?[s,a]:s}},render:function(){var e=Yp(Yp({},rt(this)),this.$attrs),t=e.prefixCls,n=e.inputPrefixCls,i=e.size,r=e.class,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["prefixCls","inputPrefixCls","size","class"]);delete o.onSearch,delete o.loading,delete o.enterButton,delete o.addonBefore,delete o["onUpdate:value"];var a,s,c=this.configProvider.getPrefixCls,u=c("input-search",t),d=c("input",n),h=ot(this,"enterButton"),f=ot(this,"addonBefore");(h=h||""===h)?a=Ee(u,r,(Up(s={},"".concat(u,"-enter-button"),!!h),Up(s,"".concat(u,"-").concat(i),!!i),s)):a=Ee(u,r);var p=Yp(Yp({},o),{prefixCls:d,size:i,suffix:this.renderSuffix(u),prefix:ot(this,"prefix"),addonAfter:this.renderAddonAfter(u),addonBefore:f,class:a,onPressEnter:this.handleSearch,onChange:this.handleChange});return l(Yf,Hp(Hp({},p),{},{ref:this.saveInput}),null)}}),$p="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",Gp=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],Zp={};function qp(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Zp[n])return Zp[n];var i=window.getComputedStyle(e),r=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),o=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),a=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),s=Gp.map((function(e){return"".concat(e,":").concat(i.getPropertyValue(e))})).join(";"),l={sizingStyle:s,paddingSize:o,borderSize:a,boxSizing:r};return t&&n&&(Zp[n]=l),l}function Qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(n),!0).forEach((function(t){Xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jp(){return(Jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var eg=Jp(Jp({},Df),{autosize:{type:[Boolean,Object],default:void 0},autoSize:{type:[Boolean,Object],default:void 0},onResize:de.func}),tg=o({name:"ResizableTextArea",mixins:[pt],inheritAttrs:!1,props:eg,setup:function(){return{nextFrameActionId:void 0,textArea:null,resizeFrameId:void 0}},data:function(){return{textareaStyles:{},resizeStatus:0}},watch:{value:function(){var e=this;r((function(){e.resizeTextarea()}))}},mounted:function(){this.resizeTextarea()},beforeUnmount:function(){fa.cancel(this.nextFrameActionId),fa.cancel(this.resizeFrameId)},methods:{saveTextArea:function(e){this.textArea=e},handleResize:function(e){0===this.$data.resizeStatus&&this.$emit("resize",e)},resizeOnNextFrame:function(){fa.cancel(this.nextFrameActionId),this.nextFrameActionId=fa(this.resizeTextarea)},resizeTextarea:function(){var e=this,t=this.$props.autoSize||this.$props.autosize;if(t&&this.textArea){var n=t.minRows,i=t.maxRows,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Vp||(Vp=document.createElement("textarea"),document.body.appendChild(Vp)),e.getAttribute("wrap")?Vp.setAttribute("wrap",e.getAttribute("wrap")):Vp.removeAttribute("wrap");var r=qp(e,t),o=r.paddingSize,a=r.borderSize,s=r.boxSizing,l=r.sizingStyle;Vp.setAttribute("style","".concat(l,";").concat($p)),Vp.value=e.value||e.placeholder||"";var c,u=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,h=Vp.scrollHeight;if("border-box"===s?h+=a:"content-box"===s&&(h-=o),null!==n||null!==i){Vp.value=" ";var f=Vp.scrollHeight-o;null!==n&&(u=f*n,"border-box"===s&&(u=u+o+a),h=Math.max(u,h)),null!==i&&(d=f*i,"border-box"===s&&(d=d+o+a),c=h>d?"":"hidden",h=Math.min(d,h))}return{height:"".concat(h,"px"),minHeight:"".concat(u,"px"),maxHeight:"".concat(d,"px"),overflowY:c,resize:"none"}}(this.textArea,!1,n,i);this.setState({textareaStyles:r,resizeStatus:1},(function(){fa.cancel(e.resizeFrameId),e.resizeFrameId=fa((function(){e.setState({resizeStatus:2},(function(){e.resizeFrameId=fa((function(){e.setState({resizeStatus:0}),e.fixFirefoxAutoScroll()}))}))}))}))}},fixFirefoxAutoScroll:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(YM){}},renderTextArea:function(){var e=this,t=Jp(Jp({},rt(this)),this.$attrs),n=t.prefixCls,i=t.autoSize,r=t.autosize,o=t.disabled,a=t.class,s=this.$data,c=s.textareaStyles,u=s.resizeStatus;Yo(void 0===r,"Input.TextArea","autosize is deprecated, please use autoSize instead.");var d=Oe(t,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","lazy"]),h=Ee(n,a,Xp({},"".concat(n,"-disabled"),o));"value"in d&&(d.value=d.value||"");var f=Jp(Jp(Jp({},t.style),c),1===u?{overflowX:"hidden",overflowY:"hidden"}:null),p=Jp(Jp({},d),{style:f,class:h});return p.autofocus||delete p.autofocus,l(gt,{onResize:this.handleResize,disabled:!(i||r)},{default:function(){return[b(l("textarea",Kp(Kp({},p),{},{ref:e.saveTextArea}),null),[[ls]])]}})}},render:function(){return this.renderTextArea()}});function ng(e){return function(e){if(Array.isArray(e))return ig(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ig(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ig(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function og(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rg(Object(n),!0).forEach((function(t){ag(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ag(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sg(){return(sg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var lg=sg(sg({},Df),{autosize:he(de.oneOfType([Object,Boolean])),autoSize:he(de.oneOfType([Object,Boolean])),showCount:de.looseBool,onCompositionstart:de.func,onCompositionend:de.func}),cg=o({name:"ATextarea",inheritAttrs:!1,props:sg({},lg),setup:function(){return{configProvider:s("configProvider",Qo),resizableTextArea:null,clearableInput:null}},data:function(){var e=void 0===this.value?this.defaultValue:this.value;return{stateValue:void 0===e?"":e}},watch:{value:function(e){this.stateValue=e}},mounted:function(){r((function(){}))},methods:{setValue:function(e,t){et(this,"value")?this.$forceUpdate():this.stateValue=e,r((function(){t&&t()}))},handleKeyDown:function(e){13===e.keyCode&&this.$emit("pressEnter",e),this.$emit("keydown",e)},triggerChange:function(e){this.$emit("update:value",e.target.value),this.$emit("change",e),this.$emit("input",e)},handleChange:function(e){var t=this,n=e.target,i=n.value,r=n.composing;(n.isComposing||r)&&this.lazy||this.stateValue===i||(this.setValue(e.target.value,(function(){t.resizableTextArea.resizeTextarea()})),Hf(this.resizableTextArea.textArea,e,this.triggerChange))},focus:function(){this.resizableTextArea.textArea.focus()},blur:function(){this.resizableTextArea.textArea.blur()},saveTextArea:function(e){this.resizableTextArea=e},saveClearableInput:function(e){this.clearableInput=e},handleReset:function(e){var t=this;this.setValue("",(function(){t.resizableTextArea.renderTextArea(),t.focus()})),Hf(this.resizableTextArea.textArea,e,this.triggerChange)},renderTextArea:function(e){var t=rt(this),n=this.$attrs,i=n.style,r=n.class,o=sg(sg(sg({},t),this.$attrs),{style:!t.showCount&&i,class:!t.showCount&&r,showCount:null,prefixCls:e,onInput:this.handleChange,onChange:this.handleChange,onKeydown:this.handleKeyDown});return l(tg,og(og({},o),{},{ref:this.saveTextArea}),null)}},render:function(){var e=this.stateValue,t=this.prefixCls,n=this.maxlength,i=this.showCount,r=this.$attrs,o=r.style,a=r.class,s=(0,this.configProvider.getPrefixCls)("input",t),c=Ff(e),u=Number(n)>0;c=u?c.slice(0,n):c;var d=sg(sg(sg({},rt(this)),this.$attrs),{prefixCls:s,inputType:"text",element:this.renderTextArea(s),handleReset:this.handleReset}),h=l(Lf,og(og({},d),{},{value:c,ref:this.saveClearableInput}),null);if(i){var f=ng(c).length,p="".concat(f).concat(u?" / ".concat(n):"");h=l("div",{class:Ee("".concat(s,"-textarea"),"".concat(s,"-textarea-show-count"),a),style:o,"data-count":p},[h])}return h}}),ug={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};function dg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hg=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){dg(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:ug}),null)};hg.displayName="EyeOutlined",hg.inheritAttrs=!1;var fg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};function pg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gg=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){pg(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:fg}),null)};function vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vg(Object(n),!0).forEach((function(t){bg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yg(){return(yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}gg.displayName="EyeInvisibleOutlined",gg.inheritAttrs=!1;var wg={click:"onClick",hover:"onMouseover"},kg=o({name:"AInputPassword",mixins:[pt],inheritAttrs:!1,props:yg(yg({},Df),{prefixCls:de.string.def("ant-input-password"),inputPrefixCls:de.string.def("ant-input"),action:de.string.def("click"),visibilityToggle:de.looseBool.def(!0),iconRender:de.func.def((function(e){return l(e?hg:gg,null,null)}))}),setup:function(){return{input:null}},data:function(){return{visible:!1}},methods:{saveInput:function(e){this.input=e},focus:function(){this.input.focus()},blur:function(){this.input.blur()},onVisibleChange:function(){this.disabled||this.setState({visible:!this.visible})},getIcon:function(){var e,t=this.$props,n=t.prefixCls,i=t.action,r=wg[i]||"";return rs((this.$slots.iconRender||this.$props.iconRender)(this.visible),(bg(e={},r,this.onVisibleChange),bg(e,"onMousedown",(function(e){e.preventDefault()})),bg(e,"onMouseup",(function(e){e.preventDefault()})),bg(e,"class","".concat(n,"-icon")),bg(e,"key","passwordIcon"),e))}},render:function(){var e=rt(this),t=e.prefixCls,n=e.inputPrefixCls,i=e.size,r=e.visibilityToggle,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["prefixCls","inputPrefixCls","size","suffix","action","visibilityToggle","iconRender"]),a=this.$attrs.class,s=r&&this.getIcon(),c=Ee(t,a,bg({},"".concat(t,"-").concat(i),!!i)),u=yg(yg(yg(yg({},o),{prefixCls:n,size:i,suffix:s,prefix:ot(this,"prefix"),addonAfter:ot(this,"addonAfter"),addonBefore:ot(this,"addonBefore")}),this.$attrs),{type:this.visible?"text":"password",class:c,ref:"input"});return l(Yf,mg(mg({},u),{},{ref:this.saveInput}),null)}});Yf.Group=Wf,Yf.Search=Wp,Yf.TextArea=cg,Yf.Password=kg,Yf.install=function(e){return e.component(Yf.name,Yf),e.component(Yf.Group.name,Yf.Group),e.component(Yf.Search.name,Yf.Search),e.component(Yf.TextArea.name,Yf.TextArea),e.component(Yf.Password.name,Yf.Password),e};var xg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function Cg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mg=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Cg(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:xg}),null)};Mg.displayName="CheckCircleFilled",Mg.inheritAttrs=!1;var Sg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};function Eg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Og=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Eg(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:Sg}),null)};Og.displayName="ExclamationCircleFilled",Og.inheritAttrs=!1;var Ng={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};function Tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ag=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Tg(e,t,n[t])}))}return e}({},e,t.attrs);return l(cf,E(n,{icon:Ng}),null)};function Ig(){return(Ig=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Dg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ag.displayName="InfoCircleFilled",Ag.inheritAttrs=!1;var _g=St(o({name:"AAvatar",props:{prefixCls:de.string,shape:de.oneOf(Mt("circle","square")),size:{type:[Number,String],default:"default"},src:de.string,srcset:de.string,srcSet:de.string,icon:de.VNodeChild,alt:de.string,loadError:{type:Function}},setup:function(){return{configProvider:s("configProvider",Qo)}},data:function(){return{isImgExist:!0,isMounted:!1,scale:1,lastChildrenWidth:void 0,lastNodeWidth:void 0}},watch:{src:function(){var e=this;r((function(){e.isImgExist=!0,e.scale=1,e.$forceUpdate()}))}},mounted:function(){var e=this;r((function(){e.setScale(),e.isMounted=!0}))},updated:function(){var e=this;r((function(){e.setScale()}))},methods:{setScale:function(){if(this.$refs.avatarChildren&&this.$refs.avatarNode){var e=this.$refs.avatarChildren.offsetWidth,t=this.$refs.avatarNode.offsetWidth;0===e||0===t||this.lastChildrenWidth===e&&this.lastNodeWidth===t||(this.lastChildrenWidth=e,this.lastNodeWidth=t,this.scale=t-8<e?(t-8)/e:1)}},handleImgLoadError:function(){var e=this.$props.loadError;!1!==(e?e():void 0)&&(this.isImgExist=!1)}},render:function(){var e,t,n,i,r=this.$props,o=r.prefixCls,a=r.shape,s=r.size,c=r.src,u=r.alt,d=r.srcset,h=r.srcSet,f=ot(this,"icon"),p=(0,this.configProvider.getPrefixCls)("avatar",o),g=this.$data,v=g.isImgExist,m=g.scale,b=(g.isMounted,Dg(e={},"".concat(p,"-lg"),"large"===s),Dg(e,"".concat(p,"-sm"),"small"===s),e),y=Ig(Ig(Dg({},p,!0),b),(Dg(t={},"".concat(p,"-").concat(a),a),Dg(t,"".concat(p,"-image"),c&&v),Dg(t,"".concat(p,"-icon"),f),t)),w="number"==typeof s?{width:"".concat(s,"px"),height:"".concat(s,"px"),lineHeight:"".concat(s,"px"),fontSize:f?"".concat(s/2,"px"):"18px"}:{},k=null===(i=(n=this.$slots).default)||void 0===i?void 0:i.call(n);if(c&&v)k=l("img",{src:c,srcset:d||h,onError:this.handleImgLoadError,alt:u},null);else if(f)k=f;else{if(this.$refs.avatarChildren||1!==m){var x="scale(".concat(m,") translateX(-50%)"),C={msTransform:x,WebkitTransform:x,transform:x},M="number"==typeof s?{lineHeight:"".concat(s,"px")}:{};k=l("span",{class:"".concat(p,"-string"),ref:"avatarChildren",style:Ig(Ig({},M),C)},[k])}else{k=l("span",{class:"".concat(p,"-string"),ref:"avatarChildren",style:{opacity:0}},[k])}}return l("span",{ref:"avatarNode",class:y,style:w},[k])}}));Mt("success","processing","error","default","warning");var jg=Mt("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime");function Lg(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Jc;++t<n;)this.add(e[t])}function Rg(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function Pg(e,t){return e.has(t)}Lg.prototype.add=Lg.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Lg.prototype.has=function(e){return this.__data__.has(e)};function zg(e,t,n,i,r,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,f=2&n?new Lg:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],g=t[d];if(i)var v=a?i(g,p,d,t,e,o):i(p,g,d,e,t,o);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!Rg(t,(function(e,t){if(!Pg(f,t)&&(p===e||r(p,e,n,i,o)))return f.push(t)}))){h=!1;break}}else if(p!==g&&!r(p,g,n,i,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Bg(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function Fg(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Hg=Ie?Ie.prototype:void 0,Ug=Hg?Hg.valueOf:void 0;var Yg=Object.prototype.hasOwnProperty;var Vg="[object Object]",Wg=Object.prototype.hasOwnProperty;function $g(e,t,n,i,r,o){var a=du(e),s=du(t),l=a?"[object Array]":cd(e),c=s?"[object Array]":cd(t),u=(l="[object Arguments]"==l?Vg:l)==Vg,d=(c="[object Arguments]"==c?Vg:c)==Vg,h=l==c;if(h&&gu(e)){if(!gu(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new eu),a||Eu(e)?zg(e,t,n,i,r,o):function(e,t,n,i,r,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new dd(e),new dd(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Nc(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Bg;case"[object Set]":var l=1&i;if(s||(s=Fg),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;i|=2,a.set(e,t);var u=zg(s(e),s(t),i,r,o,a);return a.delete(e),u;case"[object Symbol]":if(Ug)return Ug.call(e)==Ug.call(t)}return!1}(e,t,l,n,i,r,o);if(!(1&n)){var f=u&&Wg.call(e,"__wrapped__"),p=d&&Wg.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,v=p?t.value():t;return o||(o=new eu),r(g,v,n,i,o)}}return!!h&&(o||(o=new eu),function(e,t,n,i,r,o){var a=1&n,s=Ku(e),l=s.length;if(l!=Ku(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:Yg.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],v=t[u];if(i)var m=a?i(v,g,u,t,e,o):i(g,v,u,e,t,o);if(!(void 0===m?g===v||r(g,v,n,i,o):m)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,i,r,o))}function Gg(e,t,n,i,r){return e===t||(null==e||null==t||!He(e)&&!He(t)?e!=e&&t!=t:$g(e,t,n,i,Gg,r))}function Zg(e,t){return Gg(e,t)}var qg=/\s/;var Qg=/^\s+/;function Kg(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&qg.test(e.charAt(t)););return t}(e)+1).replace(Qg,""):e}var Xg=/^[-+]0x[0-9a-f]+$/i,Jg=/^0b[01]+$/i,ev=/^0o[0-7]+$/i,tv=parseInt;function nv(e){if("number"==typeof e)return e;if(Od(e))return NaN;if(Dc(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Dc(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kg(e);var n=Jg.test(e);return n||ev.test(e)?tv(e.slice(2),n?2:8):Xg.test(e)?NaN:+e}function iv(e){var t=function(e){return e?1/0===(e=nv(e))||-1/0===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}var rv={adjustX:1,adjustY:1},ov=[0,0],av={left:{points:["cr","cl"],overflow:rv,offset:[-4,0],targetOffset:ov},right:{points:["cl","cr"],overflow:rv,offset:[4,0],targetOffset:ov},top:{points:["bc","tc"],overflow:rv,offset:[0,-4],targetOffset:ov},bottom:{points:["tc","bc"],overflow:rv,offset:[0,4],targetOffset:ov},topLeft:{points:["bl","tl"],overflow:rv,offset:[0,-4],targetOffset:ov},leftTop:{points:["tr","tl"],overflow:rv,offset:[-4,0],targetOffset:ov},topRight:{points:["br","tr"],overflow:rv,offset:[0,-4],targetOffset:ov},rightTop:{points:["tl","tr"],overflow:rv,offset:[4,0],targetOffset:ov},bottomRight:{points:["tr","br"],overflow:rv,offset:[0,4],targetOffset:ov},rightBottom:{points:["bl","br"],overflow:rv,offset:[4,0],targetOffset:ov},bottomLeft:{points:["tl","bl"],overflow:rv,offset:[0,4],targetOffset:ov},leftBottom:{points:["br","bl"],overflow:rv,offset:[-4,0],targetOffset:ov}},sv={name:"Content",props:{prefixCls:de.string,overlay:de.any,trigger:de.any,overlayInnerStyle:de.any},updated:function(){var e=this.trigger;e&&e.forcePopupAlign()},render:function(){var e=this.overlay,t=this.prefixCls,n=this.overlayInnerStyle;return l("div",{class:"".concat(t,"-inner"),role:"tooltip",style:n},["function"==typeof e?e():e])}};function lv(){return(lv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function cv(){}var uv=o({name:"Tooltip",inheritAttrs:!1,props:{trigger:de.any.def(["hover"]),defaultVisible:de.looseBool,visible:de.looseBool,placement:de.string.def("right"),transitionName:de.oneOfType([de.string,de.object]),animation:de.any,afterVisibleChange:de.func.def((function(){})),overlay:de.any,overlayStyle:de.object,overlayClassName:de.string,prefixCls:de.string.def("rc-tooltip"),mouseEnterDelay:de.number.def(0),mouseLeaveDelay:de.number.def(.1),getTooltipContainer:de.func,destroyTooltipOnHide:de.looseBool.def(!1),align:de.object.def((function(){return{}})),arrowContent:de.any.def(null),tipId:de.string,builtinPlacements:de.object,overlayInnerStyle:de.style},methods:{getPopupElement:function(){var e=this.$props,t=e.prefixCls,n=e.tipId,i=e.overlayInnerStyle;return[l("div",{class:"".concat(t,"-arrow"),key:"arrow"},[ot(this,"arrowContent")]),l(sv,{key:"content",trigger:this.$refs.trigger,prefixCls:t,id:n,overlay:ot(this,"overlay"),overlayInnerStyle:i},null)]},getPopupDomNode:function(){return this.$refs.trigger.getPopupDomNode()}},render:function(e){var t=this,n=rt(this),i=n.overlayClassName,r=n.trigger,o=n.mouseEnterDelay,a=n.mouseLeaveDelay,s=n.overlayStyle,c=n.prefixCls,u=n.afterVisibleChange,d=n.transitionName,h=n.animation,f=n.placement,p=n.align,g=n.destroyTooltipOnHide,v=n.defaultVisible,m=n.getTooltipContainer,b=lv({},function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(n,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]));et(this,"visible")&&(b.popupVisible=this.$props.visible);var y=this.$attrs,w=lv(lv(lv({popupClassName:i,prefixCls:c,action:r,builtinPlacements:av,popupPlacement:f,popupAlign:p,getPopupContainer:m,afterPopupVisibleChange:u,popupTransitionName:d,popupAnimation:h,defaultPopupVisible:v,destroyPopupOnHide:g,mouseLeaveDelay:a,popupStyle:s,mouseEnterDelay:o},b),y),{onPopupVisibleChange:y.onVisibleChange||cv,onPopupAlign:y.onPopupAlign||cv,ref:"trigger",popup:this.getPopupElement()});return l(ac,w,{default:function(){return[nt(t)[0]]}})}});function dv(){return(dv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var hv={adjustX:1,adjustY:1},fv={adjustX:0,adjustY:0},pv=[0,0];function gv(e){return"boolean"==typeof e?e?hv:fv:dv(dv({},fv),e)}var vv=de.oneOf(Mt("hover","focus","click","contextmenu")),mv=function(){return{trigger:de.oneOfType([vv,de.arrayOf(vv)]).def("hover"),visible:de.looseBool,defaultVisible:de.looseBool,placement:de.oneOf(Mt("top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom")).def("top"),color:de.string,transitionName:de.string.def("zoom-big-fast"),overlayStyle:de.object.def((function(){return{}})),overlayClassName:de.string,openClassName:de.string,prefixCls:de.string,mouseEnterDelay:de.number.def(.1),mouseLeaveDelay:de.number.def(.1),getPopupContainer:de.func,arrowPointAtCenter:de.looseBool.def(!1),autoAdjustOverflow:de.oneOfType([de.looseBool,de.object]).def(!0),destroyTooltipOnHide:de.looseBool.def(!1),align:de.object.def((function(){return{}})),builtinPlacements:de.object,children:de.array,onVisibleChange:de.func,"onUpdate:visible":de.func}};function bv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yv(e){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wv(){return(wv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var kv=mv(),xv=new RegExp("^(".concat(jg.join("|"),")(-inverse)?$")),Cv=wv(wv({},kv),{title:de.VNodeChild}),Mv=St(o({name:"ATooltip",inheritAttrs:!1,props:Cv,emits:["update:visible","visibleChange"],setup:function(){return{configProvider:s("configProvider",Qo)}},data:function(){return{sVisible:!!this.$props.visible||!!this.$props.defaultVisible}},watch:{visible:function(e){this.sVisible=e}},methods:{handleVisibleChange:function(e){et(this,"visible")||(this.sVisible=!this.isNoTitle()&&e),this.isNoTitle()||(this.$emit("update:visible",e),this.$emit("visibleChange",e))},getPopupDomNode:function(){return this.$refs.tooltip.getPopupDomNode()},getPlacements:function(){var e=this.$props,t=e.builtinPlacements,n=e.arrowPointAtCenter,i=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,n=void 0===t?5:t,i=e.horizontalArrowShift,r=void 0===i?16:i,o=e.verticalArrowShift,a=void 0===o?12:o,s=e.autoAdjustOverflow,l=void 0===s||s,c={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(r+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(a+n)]},topRight:{points:["br","tc"],offset:[r+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(a+n)]},bottomRight:{points:["tr","bc"],offset:[r+n,4]},rightBottom:{points:["bl","cr"],offset:[4,a+n]},bottomLeft:{points:["tl","bc"],offset:[-(r+n),4]},leftBottom:{points:["br","cl"],offset:[-4,a+n]}};return Object.keys(c).forEach((function(t){c[t]=e.arrowPointAtCenter?dv(dv({},c[t]),{overflow:gv(l),targetOffset:pv}):dv(dv({},av[t]),{overflow:gv(l)}),c[t].ignoreShake=!0})),c}({arrowPointAtCenter:n,verticalArrowShift:8,autoAdjustOverflow:i})},getDisabledCompatibleChildren:function(e){if(("object"===yv(e.type)&&(!0===e.type.__ANT_BUTTON||!0===e.type.__ANT_SWITCH||!0===e.type.__ANT_CHECKBOX)||"button"===e.type)&&e.props&&(e.props.disabled||""===e.props.disabled)){var t=function(e,t){var n={},i=wv({},e);return t.forEach((function(t){e&&t in e&&(n[t]=e[t],delete i[t])})),{picked:n,omitted:i}}(st(e),["position","left","right","top","bottom","float","display","zIndex"]),n=t.picked,i=t.omitted,r=wv(wv({display:"inline-block"},n),{cursor:"not-allowed",width:e.props&&e.props.block?"100%":null}),o=rs(e,{style:wv(wv({},i),{pointerEvents:"none"})},!0);return l("span",{style:r},[o])}return e},isNoTitle:function(){var e=ot(this,"title");return!e&&0!==e},getOverlay:function(){var e=ot(this,"title");return 0===e?e:e||""},onPopupAlign:function(e,t){var n=this.getPlacements(),i=Object.keys(n).filter((function(e){return n[e].points[0]===t.points[0]&&n[e].points[1]===t.points[1]}))[0];if(i){var r=e.getBoundingClientRect(),o={top:"50%",left:"50%"};i.indexOf("top")>=0||i.indexOf("Bottom")>=0?o.top="".concat(r.height-t.offset[1],"px"):(i.indexOf("Top")>=0||i.indexOf("bottom")>=0)&&(o.top="".concat(-t.offset[1],"px")),i.indexOf("left")>=0||i.indexOf("Right")>=0?o.left="".concat(r.width-t.offset[0],"px"):(i.indexOf("right")>=0||i.indexOf("Left")>=0)&&(o.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(o.left," ").concat(o.top)}}},render:function(){var e,t=this.$props,n=this.$data,i=this.$attrs,r=t.prefixCls,o=t.openClassName,a=t.getPopupContainer,s=t.color,c=t.overlayClassName,u=this.configProvider.getPopupContainer,d=(0,this.configProvider.getPrefixCls)("tooltip",r),h=this.children||ct(nt(this));h=1===h.length?h[0]:h;var f=n.sVisible;if(!et(this,"visible")&&this.isNoTitle()&&(f=!1),!h)return null;var p,g,v=this.getDisabledCompatibleChildren(ut(h)?h:l("span",null,[h])),m=Ee((bv(e={},o||"".concat(d,"-open"),f),bv(e,v.props&&v.props.class,v.props&&v.props.class),e)),b=Ee(c,bv({},"".concat(d,"-").concat(s),s&&xv.test(s)));s&&!xv.test(s)&&(p={backgroundColor:s},g={backgroundColor:s});var y=wv(wv(wv({},i),t),{prefixCls:d,getTooltipContainer:a||u,builtinPlacements:this.getPlacements(),overlay:this.getOverlay(),visible:f,ref:"tooltip",overlayClassName:b,overlayInnerStyle:p,arrowContent:l("span",{class:"".concat(d,"-arrow-content"),style:g},null),onVisibleChange:this.handleVisibleChange,onPopupAlign:this.onPopupAlign});return l(uv,y,{default:function(){return[f?rs(v,{class:m}):v]}})}})),Sv=function(){return Ae.Date.now()},Ev=Math.max,Ov=Math.min;function Nv(e,t,n){var i,r,o,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=i,o=r;return i=r=void 0,c=t,a=e.apply(o,n)}function p(e){return c=e,s=setTimeout(v,t),u?f(e):a}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function v(){var e=Sv();if(g(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?Ov(n,o-(e-c)):n}(e))}function m(e){return s=void 0,h&&i?f(e):(i=r=void 0,a)}function b(){var e=Sv(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return p(l);if(d)return clearTimeout(s),s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),a}return t=nv(t)||0,Dc(n)&&(u=!!n.leading,o=(d="maxWait"in n)?Ev(nv(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=l=r=s=void 0},b.flush=function(){return void 0===s?a:m(Sv())},b}function Tv(e){return Ed(e,5)}var Av={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,o=Object.create(r.prototype),a=new N(i||[]);return o._invoke=function(e,t,n){var i=d;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw o;return A()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=u(e,t,n);if("normal"===l.type){if(i=n.done?p:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",g={};function v(){}function m(){}function b(){}var y={};y[o]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(T([])));k&&k!==n&&i.call(k,o)&&(y=k);var x=b.prototype=v.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(r,o,a,s){var l=u(e[r],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function S(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=x.constructor=b,b.constructor=m,m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},C(M.prototype),M.prototype[a]=function(){return this},e.AsyncIterator=M,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new M(c(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(x),l(x,s,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:T(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}(Av.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}();var Iv=Av.exports;function Dv(e){return e==e&&!Dc(e)}function _v(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function jv(e){var t=function(e){for(var t=ju(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Dv(r)]}return t}(e);return 1==t.length&&t[0][2]?_v(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=Object(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var l=(s=n[r])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new eu;if(i)var h=i(c,u,l,e,t,d);if(!(void 0===h?Gg(u,c,3,i,d):h))return!1}}return!0}(n,e,t)}}function Lv(e,t){return null!=e&&t in Object(e)}function Rv(e,t){return null!=e&&function(e,t,n){for(var i=-1,r=(t=Ud(t,e)).length,o=!1;++i<r;){var a=Yd(t[i]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&bu(r)&&mu(a,r)&&(du(e)||uu(e))}(e,t,Lv)}function Pv(e,t){return Ad(e)&&Dv(t)?_v(Yd(e),t):function(n){var i=function(e,t,n){var i=null==e?void 0:Vd(e,t);return void 0===i?n:i}(n,e);return void 0===i&&i===t?Rv(n,e):Gg(t,i,3)}}function zv(e){return Ad(e)?(t=Yd(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Vd(t,e)}}(e);var t}function Bv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fv={mixins:[pt],props:{duration:de.number.def(1.5),closable:de.looseBool,prefixCls:de.string,update:de.looseBool,closeIcon:de.any,onClose:de.func},watch:{duration:function(){this.restartCloseTimer()}},mounted:function(){this.startCloseTimer()},updated:function(){this.update&&this.restartCloseTimer()},beforeUnmount:function(){this.clearCloseTimer(),this.willDestroy=!0},methods:{close:function(e){e&&e.stopPropagation(),this.clearCloseTimer(),this.__emit("close")},startCloseTimer:function(){var e=this;this.clearCloseTimer(),!this.willDestroy&&this.duration&&(this.closeTimer=setTimeout((function(){e.close()}),1e3*this.duration))},clearCloseTimer:function(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},restartCloseTimer:function(){this.clearCloseTimer(),this.startCloseTimer()}},render:function(){var e,t=this.prefixCls,n=this.closable,i=this.clearCloseTimer,r=this.startCloseTimer,o=this.close,a=this.$attrs,s="".concat(t,"-notice"),c=(Bv(e={},"".concat(s),1),Bv(e,"".concat(s,"-closable"),n),e),u=ot(this,"closeIcon");return l("div",{class:c,style:a.style||{right:"50%"},onMouseenter:i,onMouseleave:r},[l("div",{class:"".concat(s,"-content")},[nt(this)]),n?l("a",{tabindex:"0",onClick:o,class:"".concat(s,"-close")},[u||l("span",{class:"".concat(s,"-close-x")},null)]):null])}};function Hv(){return(Hv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Uv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uv(Object(n),!0).forEach((function(t){Vv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wv(){}var $v=0,Gv=Date.now();var Zv=o({mixins:[pt],props:{prefixCls:de.string.def("rc-notification"),transitionName:de.string,animation:de.oneOfType([de.string,de.object]).def("fade"),maxCount:de.number,closeIcon:de.any},data:function(){return{notices:[]}},methods:{getTransitionName:function(){var e=this.$props,t=e.transitionName;return!t&&e.animation&&(t="".concat(e.prefixCls,"-").concat(e.animation)),t},add:function(e){var t=e.key=e.key||"rcNotification_".concat(Gv,"_").concat($v++),n=this.$props.maxCount;this.setState((function(i){var r=i.notices,o=r.map((function(e){return e.key})).indexOf(t),a=r.concat();return-1!==o?a.splice(o,1,e):(n&&r.length>=n&&(e.updateKey=a[0].updateKey||a[0].key,a.shift()),a.push(e)),{notices:a}}))},remove:function(e){this.setState((function(t){return{notices:t.notices.filter((function(t){return t.key!==e}))}}))}},render:function(){var e=this,t=this.prefixCls,n=this.notices,i=this.remove,r=this.getTransitionName,o=this.$attrs,a=hs(r()),s=n.map((function(r,o){var a=Boolean(o===n.length-1&&r.updateKey),s=r.updateKey?r.updateKey:r.key,c=r.content,u=r.duration,d=r.closable,h=r.onClose,f=r.style,p=r.class,g=function(){var e=[].slice.call(arguments,0);return 1===e.length?e[0]:function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}(i.bind(e,r.key),h),v={prefixCls:t,duration:u,closable:d,update:a,closeIcon:ot(e,"closeIcon"),onClose:g,onClick:r.onClick||Wv,style:f,class:p,key:s};return l(Fv,v,{default:function(){return["function"==typeof c?c():c]}})})),c=Vv({},t,1);return l("div",{class:c,style:o.style||{top:"65px",left:"50%"}},[l(ps,Yv({tag:"span"},a),{default:function(){return[s]}})])}});function qv(){return(qv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Zv.newInstance=function(e,t){var n=e||{},i=n.getContainer,r=n.style,o=n.class,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(n,["getContainer","style","class"]),s=document.createElement("div");i?i().appendChild(s):document.body.appendChild(s);var c=O({mounted:function(){var e=this;this.$nextTick((function(){t({notice:function(t){e.$refs.notification.add(t)},removeNotice:function(t){e.$refs.notification.remove(t)},component:e,destroy:function(){c.unmount(s),s.parentNode&&s.parentNode.removeChild(s)}})}))},render:function(){var e=Hv(Hv({},a),{ref:"notification",style:r,class:o});return l(Zv,e,null)}});c.mount(s)};var Qv,Kv,Xv,Jv=3,em=1,tm="ant-message",nm="move-up",im=function(){return document.body};var rm={info:Ag,success:Mg,error:Cf,warning:Og,loading:pf};var om={open:function(e){var t=void 0!==e.duration?e.duration:Jv,n=rm[e.type],i=n?l(n,null,null):"",r=e.key||em++,o=new Promise((function(n){var o=function(){return"function"==typeof e.onClose&&e.onClose(),n(!0)};!function(e){Kv?e(Kv):Zv.newInstance({prefixCls:tm,transitionName:nm,style:{top:Qv},getContainer:im,maxCount:Xv},(function(t){Kv?e(Kv):(Kv=t,e(t))}))}((function(n){n.notice({key:r,duration:t,style:e.style||{},class:e.class,content:function(){return l("div",{class:"".concat(tm,"-custom-content").concat(e.type?" ".concat(tm,"-").concat(e.type):"")},[e.icon||i,l("span",null,[e.content])])},onClose:o})}))})),a=function(){Kv&&Kv.removeNotice(r)};return a.then=function(e,t){return o.then(e,t)},a.promise=o,a},config:function(e){void 0!==e.top&&(Qv=e.top,Kv=null),void 0!==e.duration&&(Jv=e.duration),void 0!==e.prefixCls&&(tm=e.prefixCls),void 0!==e.getContainer&&(im=e.getContainer),void 0!==e.transitionName&&(nm=e.transitionName,Kv=null),void 0!==e.maxCount&&(Xv=e.maxCount,Kv=null)},destroy:function(){Kv&&(Kv.destroy(),Kv=null)}};function am(){return(am=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}["success","info","warning","error","loading"].forEach((function(e){om[e]=function(t,n,i){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(t)?om.open(qv(qv({},t),{type:e})):("function"==typeof n&&(i=n,n=void 0),om.open({content:t,duration:n,type:e,onClose:i}))}})),om.warn=om.warning;var sm=mv(),lm=St(o({name:"APopover",props:am(am({},sm),{prefixCls:de.string,transitionName:de.string.def("zoom-big"),content:de.any,title:de.any}),setup:function(){return{configProvider:s("configProvider",Qo)}},methods:{getPopupDomNode:function(){return this.$refs.tooltip.getPopupDomNode()}},render:function(){var e=this,t=this.title,n=this.prefixCls,i=this.$slots,r=(0,this.configProvider.getPrefixCls)("popover",n),o=rt(this);delete o.title,delete o.content;var a=am(am({},o),{prefixCls:r,ref:"tooltip",title:l("div",null,[(t||i.title)&&l("div",{class:"".concat(r,"-title")},[ot(this,"title")]),l("div",{class:"".concat(r,"-inner-content")},[ot(this,"content")])])});return l(Mv,a,{default:function(){return[nt(e)]}})}}));function cm(e,t,n){(void 0!==n&&!Nc(e[t],n)||void 0===n&&!(t in e))&&nu(e,t,n)}var um,dm=function(e,t,n){for(var i=-1,r=Object(e),o=n(e),a=o.length;a--;){var s=o[um?a:++i];if(!1===t(r[s],s,r))break}return e};function hm(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function fm(e,t,n,i,r,o,a){var s=hm(e,n),l=hm(t,n),c=a.get(l);if(c)cm(e,n,c);else{var u,d=o?o(s,l,n+"",e,t,a):void 0,h=void 0===d;if(h){var f=du(l),p=!f&&gu(l),g=!f&&!p&&Eu(l);d=l,f||p||g?du(s)?d=s:He(u=s)&&_u(u)?d=Yu(s):p?(h=!1,d=Uu(l,!0)):g?(h=!1,d=vd(l,!0)):d=[]:Ge(l)||uu(l)?(d=s,uu(s)?d=function(e){return ou(e,Pu(e))}(s):Dc(s)&&!_c(s)||(d=wd(l))):h=!1}h&&(a.set(l,d),r(d,l,i,o,a),a.delete(l)),cm(e,n,d)}}function pm(e,t,n,i,r){e!==t&&dm(t,(function(o,a){if(r||(r=new eu),Dc(o))fm(e,t,a,n,pm,i,r);else{var s=i?i(hm(e,a),o,a+"",e,t,r):void 0;void 0===s&&(s=o),cm(e,a,s)}}),Pu)}var gm,vm=(gm=function(e,t,n){pm(e,t,n)},function(e,t){return rh(eh(e,t,th),e+"")}((function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(r=gm.length>3&&"function"==typeof r?(i--,r):void 0,o&&function(e,t,n){if(!Dc(n))return!1;var i=typeof t;return!!("number"==i?_u(n)&&mu(t,n.length):"string"==i&&t in n)&&Nc(n[t],e)}(t[0],t[1],o)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var a=t[n];a&&gm(e,a,n,r)}return e}))),mm={};Object.defineProperty(mm,"__esModule",{value:!0});for(var bm="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ym={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},wm={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:bm?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},km={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},xm=1;xm<20;xm++)km["f"+xm]=111+xm;function Cm(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var i=e.map((function(e){return Mm(e,t)})),r=function(e){return i.some((function(t){return Sm(t,e)}))};return null==n?r:r(n)}function Mm(e,t){var n=t&&t.byKey,i={},r=(e=e.replace("++","+add")).split("+"),o=r.length;for(var a in ym)i[ym[a]]=!1;var s=!0,l=!1,c=void 0;try{for(var u,d=r[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var h=u.value,f=h.endsWith("?")&&h.length>1;f&&(h=h.slice(0,-1));var p=Om(h),g=ym[p];if(h.length>1&&!g&&!wm[h]&&!km[p])throw new TypeError('Unknown modifier: "'+h+'"');1!==o&&g||(n?i.key=p:i.which=Em(h)),g&&(i[g]=!f||null)}}catch(v){l=!0,c=v}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}return i}function Sm(e,t){for(var n in e){var i=e[n],r=void 0;if(null!=i&&((null!=(r="key"===n&&null!=t.key?t.key.toLowerCase():"which"===n?91===i&&93===t.which?91:t.which:t[n])||!1!==i)&&r!==i))return!1}return!0}function Em(e){return e=Om(e),km[e]||e.toUpperCase().charCodeAt(0)}function Om(e){return e=e.toLowerCase(),e=wm[e]||e}var Nm=mm.default=Cm;function Tm(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function Am(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Tm(o,i,r,a,s,"next",e)}function s(e){Tm(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Im(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dm(Object(n),!0).forEach((function(t){Im(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rm(e,t,n){return t&&Lm(e.prototype,t),n&&Lm(e,n),e}function Pm(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zm(e){return(zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}mm.isHotkey=Cm,mm.isCodeHotkey=function(e,t){return Cm(e,t)},mm.isKeyHotkey=function(e,t){return Cm(e,{byKey:!0},t)},mm.parseHotkey=Mm,mm.compareHotkey=Sm,mm.toKeyCode=Em,mm.toKeyName=Om;var Bm,Fm={exports:{}};Bm=Fm,function(e){var t=/^\s+/,n=/\s+$/,i=0,r=e.round,o=e.min,a=e.max,s=e.random;function l(s,c){if(c=c||{},(s=s||"")instanceof l)return s;if(!(this instanceof l))return new l(s,c);var u=function(i){var r,s,l,c={r:0,g:0,b:0},u=1,d=null,h=null,f=null,p=!1,g=!1;return"string"==typeof i&&(i=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var i,r=!1;if(E[e])e=E[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(i=B.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=B.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=B.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=B.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=B.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=B.hsva.exec(e))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=B.hex8.exec(e))?{r:I(i[1]),g:I(i[2]),b:I(i[3]),a:L(i[4]),format:r?"name":"hex8"}:(i=B.hex6.exec(e))?{r:I(i[1]),g:I(i[2]),b:I(i[3]),format:r?"name":"hex"}:(i=B.hex4.exec(e))?{r:I(i[1]+""+i[1]),g:I(i[2]+""+i[2]),b:I(i[3]+""+i[3]),a:L(i[4]+""+i[4]),format:r?"name":"hex8"}:!!(i=B.hex3.exec(e))&&{r:I(i[1]+""+i[1]),g:I(i[2]+""+i[2]),b:I(i[3]+""+i[3]),format:r?"name":"hex"}}(i)),"object"==typeof i&&(F(i.r)&&F(i.g)&&F(i.b)?(r=i.r,s=i.g,l=i.b,c={r:255*T(r,255),g:255*T(s,255),b:255*T(l,255)},p=!0,g="%"===String(i.r).substr(-1)?"prgb":"rgb"):F(i.h)&&F(i.s)&&F(i.v)?(d=_(i.s),h=_(i.v),c=function(t,n,i){t=6*T(t,360),n=T(n,100),i=T(i,100);var r=e.floor(t),o=t-r,a=i*(1-n),s=i*(1-o*n),l=i*(1-(1-o)*n),c=r%6;return{r:255*[i,s,a,a,l,i][c],g:255*[l,i,i,s,a,a][c],b:255*[a,a,l,i,i,s][c]}}(i.h,d,h),p=!0,g="hsv"):F(i.h)&&F(i.s)&&F(i.l)&&(d=_(i.s),f=_(i.l),c=function(e,t,n){var i,r,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=T(e,360),t=T(t,100),n=T(n,100),0===t)i=r=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=a(l,s,e+1/3),r=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*i,g:255*r,b:255*o}}(i.h,d,f),p=!0,g="hsl"),i.hasOwnProperty("a")&&(u=i.a)),u=N(u),{ok:p,format:i.format||g,r:o(255,a(c.r,0)),g:o(255,a(c.g,0)),b:o(255,a(c.b,0)),a:u}}(s);this._originalInput=s,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=r(100*this._a)/100,this._format=c.format||u.format,this._gradientType=c.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=u.ok,this._tc_id=i++}function c(e,t,n){e=T(e,255),t=T(t,255),n=T(n,255);var i,r,s=a(e,t,n),l=o(e,t,n),c=(s+l)/2;if(s==l)i=r=0;else{var u=s-l;switch(r=c>.5?u/(2-s-l):u/(s+l),s){case e:i=(t-n)/u+(t<n?6:0);break;case t:i=(n-e)/u+2;break;case n:i=(e-t)/u+4}i/=6}return{h:i,s:r,l:c}}function u(e,t,n){e=T(e,255),t=T(t,255),n=T(n,255);var i,r,s=a(e,t,n),l=o(e,t,n),c=s,u=s-l;if(r=0===s?0:u/s,s==l)i=0;else{switch(s){case e:i=(t-n)/u+(t<n?6:0);break;case t:i=(n-e)/u+2;break;case n:i=(e-t)/u+4}i/=6}return{h:i,s:r,v:c}}function d(e,t,n,i){var o=[D(r(e).toString(16)),D(r(t).toString(16)),D(r(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function h(e,t,n,i){return[D(j(i)),D(r(e).toString(16)),D(r(t).toString(16)),D(r(n).toString(16))].join("")}function f(e,t){t=0===t?0:t||10;var n=l(e).toHsl();return n.s-=t/100,n.s=A(n.s),l(n)}function p(e,t){t=0===t?0:t||10;var n=l(e).toHsl();return n.s+=t/100,n.s=A(n.s),l(n)}function g(e){return l(e).desaturate(100)}function v(e,t){t=0===t?0:t||10;var n=l(e).toHsl();return n.l+=t/100,n.l=A(n.l),l(n)}function m(e,t){t=0===t?0:t||10;var n=l(e).toRgb();return n.r=a(0,o(255,n.r-r(-t/100*255))),n.g=a(0,o(255,n.g-r(-t/100*255))),n.b=a(0,o(255,n.b-r(-t/100*255))),l(n)}function b(e,t){t=0===t?0:t||10;var n=l(e).toHsl();return n.l-=t/100,n.l=A(n.l),l(n)}function y(e,t){var n=l(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,l(n)}function w(e){var t=l(e).toHsl();return t.h=(t.h+180)%360,l(t)}function k(e){var t=l(e).toHsl(),n=t.h;return[l(e),l({h:(n+120)%360,s:t.s,l:t.l}),l({h:(n+240)%360,s:t.s,l:t.l})]}function x(e){var t=l(e).toHsl(),n=t.h;return[l(e),l({h:(n+90)%360,s:t.s,l:t.l}),l({h:(n+180)%360,s:t.s,l:t.l}),l({h:(n+270)%360,s:t.s,l:t.l})]}function C(e){var t=l(e).toHsl(),n=t.h;return[l(e),l({h:(n+72)%360,s:t.s,l:t.l}),l({h:(n+216)%360,s:t.s,l:t.l})]}function M(e,t,n){t=t||6,n=n||30;var i=l(e).toHsl(),r=360/n,o=[l(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push(l(i));return o}function S(e,t){t=t||6;for(var n=l(e).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/t;t--;)a.push(l({h:i,s:r,v:o})),o=(o+s)%1;return a}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,i,r=this.toRgb();return t=r.r/255,n=r.g/255,i=r.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:e.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=N(e),this._roundA=r(100*this._a)/100,this},toHsv:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=u(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),i=r(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),i=r(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return d(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,i,o){var a=[D(r(e).toString(16)),D(r(t).toString(16)),D(r(n).toString(16)),D(j(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*T(this._r,255))+"%",g:r(100*T(this._g,255))+"%",b:r(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*T(this._r,255))+"%, "+r(100*T(this._g,255))+"%, "+r(100*T(this._b,255))+"%)":"rgba("+r(100*T(this._r,255))+"%, "+r(100*T(this._g,255))+"%, "+r(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=l(e);n="#"+h(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return l(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},l.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:_(e[i]));e=n}return l(e,t)},l.equals=function(e,t){return!(!e||!t)&&l(e).toRgbString()==l(t).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})},l.mix=function(e,t,n){n=0===n?0:n||50;var i=l(e).toRgb(),r=l(t).toRgb(),o=n/100;return l({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},l.readability=function(t,n){var i=l(t),r=l(n);return(e.max(i.getLuminance(),r.getLuminance())+.05)/(e.min(i.getLuminance(),r.getLuminance())+.05)},l.isReadable=function(e,t,n){var i,r,o,a,s,c=l.readability(e,t);switch(r=!1,(o=n,a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase(),s=(o.size||"small").toLowerCase(),"AA"!==a&&"AAA"!==a&&(a="AA"),"small"!==s&&"large"!==s&&(s="small"),i={level:a,size:s}).level+i.size){case"AAsmall":case"AAAlarge":r=c>=4.5;break;case"AAlarge":r=c>=3;break;case"AAAsmall":r=c>=7}return r},l.mostReadable=function(e,t,n){var i,r,o,a,s=null,c=0;r=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<t.length;u++)(i=l.readability(e,t[u]))>c&&(c=i,s=l(t[u]));return l.isReadable(e,s,{level:o,size:a})||!r?s:(n.includeFallbackColors=!1,l.mostReadable(e,["#fff","#000"],n))};var E=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=l.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(E);function N(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function T(t,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=o(n,a(0,parseFloat(t))),i&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function A(e){return o(1,a(0,e))}function I(e){return parseInt(e,16)}function D(e){return 1==e.length?"0"+e:""+e}function _(e){return e<=1&&(e=100*e+"%"),e}function j(t){return e.round(255*parseFloat(t)).toString(16)}function L(e){return I(e)/255}var R,P,z,B=(P="[\\s|\\(]+("+(R="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",z="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",{CSS_UNIT:new RegExp(R),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function F(e){return!!B.CSS_UNIT.exec(e)}Bm.exports?Bm.exports=l:window.tinycolor=l}(Math);var Hm=Fm.exports;function Um(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ym(e,t){if(e){if("string"==typeof e)return Um(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Um(e,t):void 0}}function Vm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||Ym(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wm(e){return function(e){if(Array.isArray(e))return Um(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ym(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $m=Math.max,Gm=Math.min;function Zm(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r,o=i-1;return void 0!==n&&(o=iv(n),o=n<0?$m(i+o,0):Gm(o,i-1)),function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}(e,"function"==typeof(r=t)?r:null==r?th:"object"==typeof r?du(r)?Pv(r[0],r[1]):jv(r):zv(r),o,!0)}function qm(e,t){return(qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qm(e,t)}function Km(e){return(Km=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jm(e,t){return!t||"object"!==zm(t)&&"function"!=typeof t?Xm(e):t}function eb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(YM){return!1}}();return function(){var n,i=Km(e);if(t){var r=Km(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Jm(this,n)}}var tb={exports:{}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(e,t){!function(t){var n=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r="object"==typeof process&&"function"==typeof process.nextTick,o="function"==typeof Symbol,a="object"==typeof Reflect,s="function"==typeof setImmediate?setImmediate:setTimeout,l=o?a&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function c(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==t&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function d(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,process.emitWarning(i)}else console.error(n),console.trace&&console.trace()}var h=function(e,t,n){var i=arguments.length;switch(i){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var r=new Array(i);i--;)r[i]=arguments[i];return r}};function f(e,n){for(var i={},r=e.length,o=n?value.length:0,a=0;a<r;a++)i[e[a]]=a<o?n[a]:t;return i}function p(e,t,n){var i,r;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(i=n.on,r=n.off),t.addEventListener?(i=t.addEventListener,r=t.removeEventListener):t.addListener?(i=t.addListener,r=t.removeListener):t.on&&(i=t.on,r=t.off),!i&&!r)throw Error("target does not implement any known event API");if("function"!=typeof i)throw TypeError("on method must be a function");if("function"!=typeof r)throw TypeError("off method must be a function");this._on=i,this._off=r;var o=e._observers;o?o.push(this):e._observers=[this]}function g(e,i,r,o){var a=Object.assign({},i);if(!e)return a;if("object"!=typeof e)throw TypeError("options must be an object");var s,l,c,u=Object.keys(e),d=u.length;function h(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var f=0;f<d;f++){if(s=u[f],!o&&!n.call(i,s))throw Error('Unknown "'+s+'" option');(l=e[s])!==t&&(c=r[s],a[s]=c?c(l,h):l)}return a}function v(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function m(e){var t="value must be type of "+e.join("|"),n=e.length,i=e[0],r=e[1];return 1===n?function(e,n){if(typeof e===i)return e;n(t)}:2===n?function(e,n){var o=typeof e;if(o===i||o===r)return e;n(t)}:function(i,r){for(var o=typeof i,a=n;a-- >0;)if(o===e[a])return i;r(t)}}Object.assign(p.prototype,{subscribe:function(e,t,n){var i=this,r=this._target,o=this._emitter,a=this._listeners,s=function(){var i=h.apply(null,arguments),a={data:i,name:t,original:e};if(n){var s=n.call(r,a);!1!==s&&o.emit.apply(o,[a.name].concat(i))}else o.emit.apply(o,[t].concat(i))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!i._onNewListener?(this._onNewListener=function(n){n===t&&null===a[e]&&(a[e]=s,i._on.call(r,e,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&a[e]&&(a[e]=null,i._off.call(r,e,s))},a[e]=null,o.on("removeListener",this._onRemoveListener)):(a[e]=s,i._on.call(r,e,s))},unsubscribe:function(e){var t,n,i,r=this,o=this._listeners,a=this._emitter,s=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function u(){r._onNewListener&&(a.off("newListener",r._onNewListener),a.off("removeListener",r._onRemoveListener),r._onNewListener=null,r._onRemoveListener=null);var e=k.call(a,r);a._observers.splice(e,1)}if(e){if(!(t=o[e]))return;s.call(c,e,t),delete o[e],--this._listenersCount||u()}else{for(i=(n=l(o)).length;i-- >0;)e=n[i],s.call(c,e,o[e]);this._listeners={},this._listenersCount=0,u()}}});var b=m(["function"]),y=m(["object","function"]);function w(e,t,n){var i,r,o,a=0,s=new e((function(l,c,u){function d(){r&&(r=null),a&&(clearTimeout(a),a=0)}n=g(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),i=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var h=function(e){d(),l(e)},f=function(e){d(),c(e)};i?t(h,f,u):(r=[function(e){f(e||Error("canceled"))}],t(h,f,(function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");r.push(e)})),o=!0),n.timeout>0&&(a=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),c(e)}),n.timeout))}));return i||(s.cancel=function(e){if(r){for(var t=r.length,n=1;n<t;n++)r[n](e);r[0](e),r=null}}),s}function k(e){var t=this._observers;if(!t)return-1;for(var n=t.length,i=0;i<n;i++)if(t[i]._target===e)return i;return-1}function x(e,t,n,i,r){if(!n)return null;if(0===i){var o=typeof t;if("string"===o){var a,s,c=0,u=0,d=this.delimiter,h=d.length;if(-1!==(s=t.indexOf(d))){a=new Array(5);do{a[c++]=t.slice(u,s),u=s+h}while(-1!==(s=t.indexOf(d,u)));a[c++]=t.slice(u),t=a,r=c}else t=[t],r=1}else"object"===o?r=t.length:(t=[t],r=1)}var f,p,g,v,m,b,y,w=null,k=t[i],C=t[i+1];if(i===r&&n._listeners)return"function"==typeof n._listeners?(e&&e.push(n._listeners),[n]):(e&&e.push.apply(e,n._listeners),[n]);if("*"===k){for(s=(b=l(n)).length;s-- >0;)"_listeners"!==(f=b[s])&&(y=x(e,t,n[f],i+1,r))&&(w?w.push.apply(w,y):w=y);return w}if("**"===k){for((m=i+1===r||i+2===r&&"*"===C)&&n._listeners&&(w=x(e,t,n,r,r)),s=(b=l(n)).length;s-- >0;)"_listeners"!==(f=b[s])&&("*"===f||"**"===f?(n[f]._listeners&&!m&&(y=x(e,t,n[f],r,r))&&(w?w.push.apply(w,y):w=y),y=x(e,t,n[f],i,r)):y=x(e,t,n[f],f===C?i+2:i,r),y&&(w?w.push.apply(w,y):w=y));return w}if(n[k]&&(w=x(e,t,n[k],i+1,r)),(p=n["*"])&&x(e,t,p,i+1,r),g=n["**"])if(i<r)for(g._listeners&&x(e,t,g,r,r),s=(b=l(g)).length;s-- >0;)"_listeners"!==(f=b[s])&&(f===C?x(e,t,g[f],i+2,r):f===k?x(e,t,g[f],i+1,r):((v={})[f]=g[f],x(e,t,{"**":v},i+1,r)));else g._listeners?x(e,t,g,r,r):g["*"]&&g["*"]._listeners&&x(e,t,g["*"],r,r);return w}function C(e,t,n){var i,r,o=0,a=0,s=this.delimiter,l=s.length;if("string"==typeof e)if(-1!==(i=e.indexOf(s))){r=new Array(5);do{r[o++]=e.slice(a,i),a=i+l}while(-1!==(i=e.indexOf(s,a)));r[o++]=e.slice(a)}else r=[e],o=1;else r=e,o=e.length;if(o>1)for(i=0;i+1<o;i++)if("**"===r[i]&&"**"===r[i+1])return;var c,u=this.listenerTree;for(i=0;i<o;i++)if(u=u[c=r[i]]||(u[c]={}),i===o-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,d.call(this,u._listeners.length,c))):u._listeners=t,!0;return!0}function M(e,t,n,i){for(var r,o,a,s,c=l(e),u=c.length,d=e._listeners;u-- >0;)r=e[o=c[u]],a="_listeners"===o?n:n?n.concat(o):[o],s=i||"symbol"==typeof o,d&&t.push(s?a:a.join(this.delimiter)),"object"==typeof r&&M.call(this,r,t,a,s);return t}function S(e){for(var t,n,i,r=l(e),o=r.length;o-- >0;)(t=e[n=r[o]])&&(i=!0,"_listeners"===n||S(t)||delete e[n]);return i}function E(e,t,n){this.emitter=e,this.event=t,this.listener=n}function O(e,n,i){if(!0===i)a=!0;else if(!1===i)o=!0;else{if(!i||"object"!=typeof i)throw TypeError("options should be an object or true");var o=i.async,a=i.promisify,l=i.nextTick,c=i.objectify}if(o||l||a){var u=n,d=n._origin||n;if(l&&!r)throw Error("process.nextTick is not supported");a===t&&(a="AsyncFunction"===n.constructor.name),(n=function(){var e=arguments,t=this,n=this.event;return a?l?Promise.resolve():new Promise((function(e){s(e)})).then((function(){return t.event=n,u.apply(t,e)})):(l?process.nextTick:s)((function(){t.event=n,u.apply(t,e)}))})._async=!0,n._origin=d}return[n,c?new E(this,e,n):this]}function N(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}E.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},N.EventEmitter2=N,N.prototype.listenTo=function(e,n,r){if("object"!=typeof e)throw TypeError("target musts be an object");var o=this;function a(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,i=r.reducers,a=k.call(o,e);n=-1===a?new p(o,e,r):o._observers[a];for(var s,c=l(t),u=c.length,d="function"==typeof i,h=0;h<u;h++)s=c[h],n.subscribe(s,t[s]||s,d?i:i&&i[s])}return r=g(r,{on:t,off:t,reducers:t},{on:b,off:b,reducers:y}),i(n)?a(f(n)):a("string"==typeof n?f(n.split(/\s+/)):n),this},N.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var i,r=n.length,o=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;r-- >0;)i=n[r],e&&i._target!==e||(i.unsubscribe(t),o=!0);return o},N.prototype.delimiter=".",N.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},N.prototype.getMaxListeners=function(){return this._maxListeners},N.prototype.event="",N.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},N.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},N.prototype._once=function(e,t,n,i){return this._many(e,1,t,n,i)},N.prototype.many=function(e,t,n,i){return this._many(e,t,n,!1,i)},N.prototype.prependMany=function(e,t,n,i){return this._many(e,t,n,!0,i)},N.prototype._many=function(e,t,n,i,r){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0==--t&&o.off(e,a),n.apply(this,arguments)}return a._origin=n,this._on(e,a,i,r)},N.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var e,t,n,i,r,a,s=arguments[0],l=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(l&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(n=s.length,o)for(i=0;i<n;i++)if("symbol"==typeof s[i]){a=!0;break}a||(s=s.join(this.delimiter))}var u,d=arguments.length;if(this._all&&this._all.length)for(i=0,n=(u=this._all.slice()).length;i<n;i++)switch(this.event=s,d){case 1:u[i].call(this,s);break;case 2:u[i].call(this,s,arguments[1]);break;case 3:u[i].call(this,s,arguments[1],arguments[2]);break;default:u[i].apply(this,arguments)}if(l)u=[],x.call(this,u,e,this.listenerTree,0,n);else{if("function"==typeof(u=this._events[s])){switch(this.event=s,d){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(d-1),r=1;r<d;r++)t[r-1]=arguments[r];u.apply(this,t)}return!0}u&&(u=u.slice())}if(u&&u.length){if(d>3)for(t=new Array(d-1),r=1;r<d;r++)t[r-1]=arguments[r];for(i=0,n=u.length;i<n;i++)switch(this.event=s,d){case 1:u[i].call(this);break;case 2:u[i].call(this,arguments[1]);break;case 3:u[i].call(this,arguments[1],arguments[2]);break;default:u[i].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},N.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var e,t,n,i,r,a,s=arguments[0],l=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(l&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(i=s.length,o)for(r=0;r<i;r++)if("symbol"==typeof s[r]){t=!0;break}t||(s=s.join(this.delimiter))}var u,d=[],h=arguments.length;if(this._all)for(r=0,i=this._all.length;r<i;r++)switch(this.event=s,h){case 1:d.push(this._all[r].call(this,s));break;case 2:d.push(this._all[r].call(this,s,arguments[1]));break;case 3:d.push(this._all[r].call(this,s,arguments[1],arguments[2]));break;default:d.push(this._all[r].apply(this,arguments))}if(l?(u=[],x.call(this,u,e,this.listenerTree,0)):u=this._events[s],"function"==typeof u)switch(this.event=s,h){case 1:d.push(u.call(this));break;case 2:d.push(u.call(this,arguments[1]));break;case 3:d.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(h-1),a=1;a<h;a++)n[a-1]=arguments[a];d.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),h>3)for(n=new Array(h-1),a=1;a<h;a++)n[a-1]=arguments[a];for(r=0,i=u.length;r<i;r++)switch(this.event=s,h){case 1:d.push(u[r].call(this));break;case 2:d.push(u[r].call(this,arguments[1]));break;case 3:d.push(u[r].call(this,arguments[1],arguments[2]));break;default:d.push(u[r].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(d)},N.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},N.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},N.prototype.onAny=function(e){return this._onAny(e,!1)},N.prototype.prependAny=function(e){return this._onAny(e,!0)},N.prototype.addListener=N.prototype.on,N.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},N.prototype._on=function(e,n,i,r){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");this._events||c.call(this);var o,a=this;return r!==t&&(n=(o=O.call(this,e,n,r))[0],a=o[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(C.call(this,e,n,i),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,d.call(this,this._events[e].length,e))):this._events[e]=n,a)},N.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(r=x.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var s=r[a];if(n=s._listeners,i(n)){for(var l=-1,c=0,u=n.length;c<u;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){l=c;break}if(l<0)continue;return this.wildcard?s._listeners.splice(l,1):this._events[e].splice(l,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&S(this.listenerTree),this},N.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},N.prototype.removeListener=N.prototype.off,N.prototype.removeAllListeners=function(e){if(e===t)return!this._events||c.call(this),this;if(this.wildcard){var n,i=x.call(this,null,e,this.listenerTree,0);if(!i)return this;for(n=0;n<i.length;n++)i[n]._listeners=null;this.listenerTree&&S(this.listenerTree)}else this._events&&(this._events[e]=null);return this},N.prototype.listeners=function(e){var n,i,r,o,a,s=this._events;if(e===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(o=(n=l(s)).length,r=[];o-- >0;)"function"==typeof(i=s[n[o]])?r.push(i):r.push.apply(r,i);return r}if(this.wildcard){if(!(a=this.listenerTree))return[];var c=[],u="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,c,u,a,0),c}return s&&(i=s[e])?"function"==typeof i?[i]:i:[]},N.prototype.eventNames=function(e){var t=this._events;return this.wildcard?M.call(this,this.listenerTree,[],null,e):t?l(t):[]},N.prototype.listenerCount=function(e){return this.listeners(e).length},N.prototype.hasListeners=function(e){if(this.wildcard){var n=[],i="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,n,i,this.listenerTree,0),n.length>0}var r=this._events,o=this._all;return!!(o&&o.length||r&&(e===t?l(r).length:r[e]))},N.prototype.listenersAny=function(){return this._all?this._all:[]},N.prototype.waitFor=function(e,n){var i=this,r=typeof n;return"number"===r?n={timeout:n}:"function"===r&&(n={filter:n}),w((n=g(n,{timeout:0,filter:t,handleError:!1,Promise:Promise,overload:!1},{filter:b,Promise:v})).Promise,(function(t,r,o){function a(){var o=n.filter;if(!o||o.apply(i,arguments))if(i.off(e,a),n.handleError){var s=arguments[0];s?r(s):t(h.apply(null,arguments).slice(1))}else t(h.apply(null,arguments))}o((function(){i.off(e,a)})),i._on(e,a,!1)}),{timeout:n.timeout,overload:n.overload})};var T=N.prototype;Object.defineProperties(N,{defaultMaxListeners:{get:function(){return T._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");T._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return w((n=g(n,{Promise:Promise,timeout:0,overload:!1},{Promise:v})).Promise,(function(n,i,r){var o;if("function"==typeof e.addEventListener)return o=function(){n(h.apply(null,arguments))},r((function(){e.removeEventListener(t,o)})),void e.addEventListener(t,o,{once:!0});var a,s=function(){a&&e.removeListener("error",a),n(h.apply(null,arguments))};"error"!==t&&(a=function(n){e.removeListener(t,s),i(n)},e.once("error",a)),r((function(){a&&e.removeListener("error",a),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(T,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),e.exports=N}()}(tb);var nb=function(e,t,n,i){var r=e.transformX=function(e,o){n(e),n(o);for(var a,s,l,c=[],u=0;u<o.length;u++){for(var d=o[u],h=[],f=0;f<e.length;){var p=[];if(a=e[f],l=p,t(h,a,s=d,"left"),t(l,s,a,"right"),f++,1!==p.length){if(0===p.length){for(var g=f;g<e.length;g++)i(h,e[g]);d=null;break}for(var v=r(e.slice(f),p),m=0;m<v[0].length;m++)i(h,v[0][m]);for(var b=0;b<v[1].length;b++)i(c,v[1][b]);d=null;break}d=p[0]}null!=d&&i(c,d),e=h}return[e,c]};e.transform=function(e,n,i){if("left"!==i&&"right"!==i)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],i):"left"===i?r(e,n)[0]:r(n,e)[1]}};var ib={exports:{}},rb=ib.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},ob=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},ab=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},sb=function(e){for(var t=0;t<e.length;t++)ab(e[t])};rb.apply=function(e,t){var n;sb(t);for(var i=0;i<t.length;i++){var r=t[i];if(null!=r.i)e=ob(e,r.p,r.i);else{if(n=e.slice(r.p,r.p+r.d.length),r.d!==n)throw new Error("Delete component '"+r.d+"' does not match deleted text '"+n+"'");e=e.slice(0,r.p)+e.slice(r.p+r.d.length)}}return e};var lb=rb._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:ob(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:ob(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};rb.compose=function(e,t){sb(e),sb(t);for(var n=e.slice(),i=0;i<t.length;i++)lb(n,t[i]);return n},rb.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];null==i.p&&(i.p=0),lb(t,i)}return t};var cb=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};rb.transformCursor=function(e,t,n){for(var i="right"===n,r=0;r<t.length;r++)e=cb(e,t[r],i);return e};var ub=rb._tc=function(e,t,n,i){if(ab(t),ab(n),null!=t.i)lb(e,{i:t.i,p:cb(t.p,n,"right"===i)});else if(null!=n.i){var r=t.d;t.p<n.p&&(lb(e,{d:r.slice(0,n.p-t.p),p:t.p}),r=r.slice(n.p-t.p)),""!==r&&lb(e,{d:r,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)lb(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)lb(e,t);else{var o={d:"",p:t.p};t.p<n.p&&(o.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(o.d+=t.d.slice(n.p+n.d.length-t.p));var a=Math.max(t.p,n.p),s=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(a-t.p,s-t.p)!==n.d.slice(a-n.p,s-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==o.d&&(o.p=cb(o.p,n),lb(e,o))}return e};rb.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},nb(rb,ub,sb,lb);var db=function(e){return"[object Array]"==Object.prototype.toString.call(e)},hb=function(e){return JSON.parse(JSON.stringify(e))},fb={name:"json0",uri:"http://sharejs.org/types/JSONv0"},pb={};function gb(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function vb(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}fb.registerSubtype=function(e){pb[e.name]=e},fb.create=function(e){return void 0===e?null:hb(e)},fb.invertComponent=function(e){var t={p:e.p};return e.t&&pb[e.t]&&(t.t=e.t,t.o=pb[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},fb.invert=function(e){for(var t=e.slice().reverse(),n=[],i=0;i<t.length;i++)n.push(fb.invertComponent(t[i]));return n},fb.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!db(e[t].p))throw new Error("Missing path")},fb.checkList=function(e){if(!db(e))throw new Error("Referenced element not a list")},fb.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},fb.apply=function(e,t){fb.checkValidOp(t),t=hb(t);for(var n={data:e},i=0;i<t.length;i++){var r=t[i];null==r.si&&null==r.sd||gb(r);for(var o=null,a=n,s="data",l=0;l<r.p.length;l++){var c=r.p[l];if(o=a,a=a[s],s=c,null==o)throw new Error("Path invalid")}if(r.t&&void 0!==r.o&&pb[r.t])a[s]=pb[r.t].apply(a[s],r.o);else if(void 0!==r.na){if("number"!=typeof a[s])throw new Error("Referenced element not a number");a[s]+=r.na}else if(void 0!==r.li&&void 0!==r.ld)fb.checkList(a),a[s]=r.li;else if(void 0!==r.li)fb.checkList(a),a.splice(s,0,r.li);else if(void 0!==r.ld)fb.checkList(a),a.splice(s,1);else if(void 0!==r.lm){if(fb.checkList(a),r.lm!=s){var u=a[s];a.splice(s,1),a.splice(r.lm,0,u)}}else if(void 0!==r.oi)fb.checkObj(a),a[s]=r.oi;else{if(void 0===r.od)throw new Error("invalid / missing instruction in op");fb.checkObj(a),delete a[s]}}return n.data},fb.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},fb.incrementalApply=function(e,t,n){for(var i=0;i<t.length;i++){var r=[t[i]];n(r,e=fb.apply(e,r))}return e};var mb=fb.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i]&&(!n||i!==e.length-1))return!1;return!0};fb.append=function(e,t){if(t=hb(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(gb(t),gb(n)),mb(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&pb[t.t]){if(n.o=pb[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var i=t.p,r=0;r<n.o.length-1;r++)t.o=[n.o.pop()],t.p=i.slice(),vb(t),e.push(t);vb(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(vb(t),vb(n)),e.push(t)}else e.push(t)},fb.compose=function(e,t){fb.checkValidOp(e),fb.checkValidOp(t);for(var n=hb(e),i=0;i<t.length;i++)fb.append(n,t[i]);return n},fb.normalize=function(e){var t=[];e=db(e)?e:[e];for(var n=0;n<e.length;n++){var i=e[n];null==i.p&&(i.p=[]),fb.append(t,i)}return t},fb.commonLengthForOps=function(e,t){var n=e.p.length,i=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&i++,0===n)return-1;if(0===i)return null;n--,i--;for(var r=0;r<n;r++){var o=e.p[r];if(r>=i||o!==t.p[r])return null}return n},fb.canOpAffectPath=function(e,t){return null!=fb.commonLengthForOps({p:t},e)},fb.transformComponent=function(e,t,n,i){t=hb(t);var r=fb.commonLengthForOps(n,t),o=fb.commonLengthForOps(t,n),a=t.p.length,s=n.p.length;if((null!=t.na||t.t)&&a++,(null!=n.na||n.t)&&s++,null!=o&&s>a&&t.p[o]==n.p[o])if(void 0!==t.ld)(c=hb(n)).p=c.p.slice(a),t.ld=fb.apply(hb(t.ld),[c]);else if(void 0!==t.od){(c=hb(n)).p=c.p.slice(a),t.od=fb.apply(hb(t.od),[c])}if(null!=r){var l=a==s,c=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(gb(t),gb(c=hb(n))),c.t&&pb[c.t]){if(t.t&&t.t===c.t){var u=pb[t.t].transform(t.o,c.o,i);if(null!=t.si||null!=t.sd)for(var d=t.p,h=0;h<u.length;h++)t.o=[u[h]],t.p=d.slice(),vb(t),fb.append(e,t);else(!db(u)||u.length>0)&&(t.o=u,fb.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[r]===t.p[r]){if(!l)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==i)return e;t.ld=hb(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&l&&t.p[r]===n.p[r]?"right"===i&&t.p[r]++:n.p[r]<=t.p[r]&&t.p[r]++,void 0!==t.lm&&l&&n.p[r]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&l){if(n.p[r]===t.p[r])return e;d=n.p[r];var f=t.p[r];(d<(p=t.lm)||d===p&&f<p)&&t.lm--}if(n.p[r]<t.p[r])t.p[r]--;else if(n.p[r]===t.p[r]){if(s<a)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&a===s){f=t.p[r];var p=t.lm,g=n.p[r],v=n.lm;if(g!==v)if(f===g){if("left"!==i)return e;t.p[r]=v,f===p&&(t.lm=v)}else f>g&&t.p[r]--,f>v?t.p[r]++:f===v&&g>v&&(t.p[r]++,f===p&&t.lm++),(p>g||p===g&&p>f)&&t.lm--,p>v?t.lm++:p===v&&(v>g&&p>f||v<g&&p<f?"right"===i&&t.lm++:p>f?t.lm++:p===g&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&l){f=n.p[r],p=n.lm;(d=t.p[r])>f&&t.p[r]--,d>p&&t.p[r]++}else{f=n.p[r],p=n.lm;(d=t.p[r])===f?t.p[r]=p:(d>f&&t.p[r]--,(d>p||d===p&&f>p)&&t.p[r]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[r]===n.p[r]){if(void 0===t.oi||!l)return e;if("right"===i)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[r]===n.p[r]){if("left"!==i)return e;fb.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[r]==n.p[r]){if(!l)return e;if(void 0===t.oi)return e;delete t.od}}return fb.append(e,t),e},nb(fb,fb.transformComponent,fb.checkValidOp,fb.append);var bb=ib.exports;fb.registerSubtype(bb);var yb={type:fb},wb={exports:{}};function kb(e,t,n){return(kb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Km(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}!function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,i,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];void 0===i&&(i=!0);var a=i,s=this.diff_commonPrefix(e,n),l=e.substring(0,s);e=e.substring(s),n=n.substring(s),s=this.diff_commonSuffix(e,n);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),n=n.substring(0,n.length-s);var u=this.diff_compute_(e,n,a,o);return l&&u.unshift(new t.Diff(0,l)),c&&u.push(new t.Diff(0,c)),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,i,r,o){var a;if(!e)return[new t.Diff(1,i)];if(!i)return[new t.Diff(n,e)];var s=e.length>i.length?e:i,l=e.length>i.length?i:e,c=s.indexOf(l);if(-1!=c)return a=[new t.Diff(1,s.substring(0,c)),new t.Diff(0,l),new t.Diff(1,s.substring(c+l.length))],e.length>i.length&&(a[0][0]=a[2][0]=n),a;if(1==l.length)return[new t.Diff(n,e),new t.Diff(1,i)];var u=this.diff_halfMatch_(e,i);if(u){var d=u[0],h=u[1],f=u[2],p=u[3],g=u[4],v=this.diff_main(d,f,r,o),m=this.diff_main(h,p,r,o);return v.concat([new t.Diff(0,g)],m)}return r&&e.length>100&&i.length>100?this.diff_lineMode_(e,i,o):this.diff_bisect_(e,i,o)},t.prototype.diff_lineMode_=function(e,i,r){var o=this.diff_linesToChars_(e,i);e=o.chars1,i=o.chars2;var a=o.lineArray,s=this.diff_main(e,i,!1,r);this.diff_charsToLines_(s,a),this.diff_cleanupSemantic(s),s.push(new t.Diff(0,""));for(var l=0,c=0,u=0,d="",h="";l<s.length;){switch(s[l][0]){case 1:u++,h+=s[l][1];break;case n:c++,d+=s[l][1];break;case 0:if(c>=1&&u>=1){s.splice(l-c-u,c+u),l=l-c-u;for(var f=this.diff_main(d,h,!1,r),p=f.length-1;p>=0;p--)s.splice(l,0,f[p]);l+=f.length}u=0,c=0,d="",h=""}l++}return s.pop(),s},t.prototype.diff_bisect_=function(e,i,r){for(var o=e.length,a=i.length,s=Math.ceil((o+a)/2),l=s,c=2*s,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var f=o-a,p=f%2!=0,g=0,v=0,m=0,b=0,y=0;y<s&&!((new Date).getTime()>r);y++){for(var w=-y+g;w<=y-v;w+=2){for(var k=l+w,x=(O=w==-y||w!=y&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1)-w;O<o&&x<a&&e.charAt(O)==i.charAt(x);)O++,x++;if(u[k]=O,O>o)v+=2;else if(x>a)g+=2;else if(p){if((S=l+f-w)>=0&&S<c&&-1!=d[S])if(O>=(M=o-d[S]))return this.diff_bisectSplit_(e,i,O,x,r)}}for(var C=-y+m;C<=y-b;C+=2){for(var M,S=l+C,E=(M=C==-y||C!=y&&d[S-1]<d[S+1]?d[S+1]:d[S-1]+1)-C;M<o&&E<a&&e.charAt(o-M-1)==i.charAt(a-E-1);)M++,E++;if(d[S]=M,M>o)b+=2;else if(E>a)m+=2;else if(!p){if((k=l+f-C)>=0&&k<c&&-1!=u[k]){var O;x=l+(O=u[k])-k;if(O>=(M=o-M))return this.diff_bisectSplit_(e,i,O,x,r)}}}}return[new t.Diff(n,e),new t.Diff(1,i)]},t.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),a=t.substring(0,i),s=e.substring(n),l=t.substring(i),c=this.diff_main(o,a,!1,r),u=this.diff_main(s,l,!1,r);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function r(e){for(var t="",r=0,a=-1,s=n.length;a<e.length-1;){-1==(a=e.indexOf("\n",r))&&(a=e.length-1);var l=e.substring(r,a+1);(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?t+=String.fromCharCode(i[l]):(s==o&&(l=e.substring(r),a=e.length),t+=String.fromCharCode(s),i[l]=s,n[s++]=l),r=a+1}return t}n[0]="";var o=4e4,a=r(e);return o=65535,{chars1:a,chars2:r(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)==t.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)==t.substring(t.length-r,t.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=Math.min(n,i);if(e==t)return r;for(var o=0,a=1;;){var s=e.substring(r-a),l=t.indexOf(s);if(-1==l)return o;a+=l,0!=l&&e.substring(r-a)!=t.substring(0,a)||(o=a,a++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var r=this;function o(e,t,n){for(var i,o,a,s,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=r.diff_commonPrefix(e.substring(n),t.substring(c)),h=r.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<h+d&&(u=t.substring(c-h,c)+t.substring(c,c+d),i=e.substring(0,n-h),o=e.substring(n+d),a=t.substring(0,c-h),s=t.substring(c+d))}return 2*u.length>=e.length?[i,o,a,s,u]:null}var a,s,l,c,u,d=o(n,i,Math.ceil(n.length/4)),h=o(n,i,Math.ceil(n.length/2));return d||h?(a=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(s=a[0],l=a[1],c=a[2],u=a[3]):(c=a[0],u=a[1],s=a[2],l=a[3]),[s,l,c,u,a[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var i=!1,r=[],o=0,a=null,s=0,l=0,c=0,u=0,d=0;s<e.length;)0==e[s][0]?(r[o++]=s,l=u,c=d,u=0,d=0,a=e[s][1]):(1==e[s][0]?u+=e[s][1].length:d+=e[s][1].length,a&&a.length<=Math.max(l,c)&&a.length<=Math.max(u,d)&&(e.splice(r[o-1],0,new t.Diff(n,a)),e[r[o-1]+1][0]=1,o--,s=--o>0?r[o-1]:-1,l=0,c=0,u=0,d=0,a=null,i=!0)),s++;for(i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]==n&&1==e[s][0]){var h=e[s-1][1],f=e[s][1],p=this.diff_commonOverlap_(h,f),g=this.diff_commonOverlap_(f,h);p>=g?(p>=h.length/2||p>=f.length/2)&&(e.splice(s,0,new t.Diff(0,f.substring(0,p))),e[s-1][1]=h.substring(0,h.length-p),e[s+1][1]=f.substring(p),s++):(g>=h.length/2||g>=f.length/2)&&(e.splice(s,0,new t.Diff(0,h.substring(0,g))),e[s-1][0]=1,e[s-1][1]=f.substring(0,f.length-g),e[s+1][0]=n,e[s+1][1]=h.substring(g),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),o=i.match(t.nonAlphaNumericRegex_),a=r.match(t.nonAlphaNumericRegex_),s=o&&i.match(t.whitespaceRegex_),l=a&&r.match(t.whitespaceRegex_),c=s&&i.match(t.linebreakRegex_),u=l&&r.match(t.linebreakRegex_),d=c&&e.match(t.blanklineEndRegex_),h=u&&n.match(t.blanklineStartRegex_);return d||h?5:c||u?4:o&&!s&&l?3:s||l?2:o||a?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var r=e[i-1][1],o=e[i][1],a=e[i+1][1],s=this.diff_commonSuffix(r,o);if(s){var l=o.substring(o.length-s);r=r.substring(0,r.length-s),o=l+o.substring(0,o.length-s),a=l+a}for(var c=r,u=o,d=a,h=n(r,o)+n(o,a);o.charAt(0)===a.charAt(0);){r+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var f=n(r,o)+n(o,a);f>=h&&(h=f,c=r,u=o,d=a)}e[i-1][1]!=c&&(c?e[i-1][1]=c:(e.splice(i-1,1),i--),e[i][1]=u,d?e[i+1][1]=d:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var i=!1,r=[],o=0,a=null,s=0,l=!1,c=!1,u=!1,d=!1;s<e.length;)0==e[s][0]?(e[s][1].length<this.Diff_EditCost&&(u||d)?(r[o++]=s,l=u,c=d,a=e[s][1]):(o=0,a=null),u=d=!1):(e[s][0]==n?d=!0:u=!0,a&&(l&&c&&u&&d||a.length<this.Diff_EditCost/2&&l+c+u+d==3)&&(e.splice(r[o-1],0,new t.Diff(n,a)),e[r[o-1]+1][0]=1,o--,a=null,l&&c?(u=d=!0,o=0):(s=--o>0?r[o-1]:-1,u=d=!1),i=!0)),s++;i&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var i,r=0,o=0,a=0,s="",l="";r<e.length;)switch(e[r][0]){case 1:a++,l+=e[r][1],r++;break;case n:o++,s+=e[r][1],r++;break;case 0:o+a>1?(0!==o&&0!==a&&(0!==(i=this.diff_commonPrefix(l,s))&&(r-o-a>0&&0==e[r-o-a-1][0]?e[r-o-a-1][1]+=l.substring(0,i):(e.splice(0,0,new t.Diff(0,l.substring(0,i))),r++),l=l.substring(i),s=s.substring(i)),0!==(i=this.diff_commonSuffix(l,s))&&(e[r][1]=l.substring(l.length-i)+e[r][1],l=l.substring(0,l.length-i),s=s.substring(0,s.length-i))),r-=o+a,e.splice(r,o+a),s.length&&(e.splice(r,0,new t.Diff(n,s)),r++),l.length&&(e.splice(r,0,new t.Diff(1,l)),r++),r++):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,a=0,o=0,s="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),c=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),c=!0)),r++;c&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var i,r=0,o=0,a=0,s=0;for(i=0;i<e.length&&(1!==e[i][0]&&(r+=e[i][1].length),e[i][0]!==n&&(o+=e[i][1].length),!(r>t));i++)a=r,s=o;return e.length!=i&&e[i][0]===n?s:s+(t-a)},t.prototype.diff_prettyHtml=function(e){for(var t=[],i=/&/g,r=/</g,o=/>/g,a=/\n/g,s=0;s<e.length;s++){var l=e[s][0],c=e[s][1].replace(i,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(l){case 1:t[s]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:t[s]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[s]="<span>"+c+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==n&&(t[i]=e[i][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,i=0,r=0,o=0;o<e.length;o++){var a=e[o][0],s=e[o][1];switch(a){case 1:i+=s.length;break;case n:r+=s.length;break;case 0:t+=Math.max(i,r),i=0,r=0}}return t+=Math.max(i,r)},t.prototype.diff_toDelta=function(e){for(var t=[],i=0;i<e.length;i++)switch(e[i][0]){case 1:t[i]="+"+encodeURI(e[i][1]);break;case n:t[i]="-"+e[i][1].length;break;case 0:t[i]="="+e[i][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,i){for(var r=[],o=0,a=0,s=i.split(/\t/g),l=0;l<s.length;l++){var c=s[l].substring(1);switch(s[l].charAt(0)){case"+":try{r[o++]=new t.Diff(1,decodeURI(c))}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var d=e.substring(a,a+=u);"="==s[l].charAt(0)?r[o++]=new t.Diff(0,d):r[o++]=new t.Diff(n,d);break;default:if(s[l])throw new Error("Invalid diff operation in diff_fromDelta: "+s[l])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return r},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),r=this;function o(e,i){var o=e/t.length,a=Math.abs(n-i);return r.Match_Distance?o+a/r.Match_Distance:a?1:o}var a=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=e.lastIndexOf(t,n+t.length))&&(a=Math.min(o(0,s),a)));var l,c,u=1<<t.length-1;s=-1;for(var d,h=t.length+e.length,f=0;f<t.length;f++){for(l=0,c=h;l<c;)o(f,n+c)<=a?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var p=Math.max(1,n-c+1),g=Math.min(n+c,e.length)+t.length,v=Array(g+2);v[g+1]=(1<<f)-1;for(var m=g;m>=p;m--){var b=i[e.charAt(m-1)];if(v[m]=0===f?(v[m+1]<<1|1)&b:(v[m+1]<<1|1)&b|(d[m+1]|d[m])<<1|1|d[m+1],v[m]&u){var y=o(f,m-1);if(y<=a){if(a=y,!((s=m-1)>n))break;p=Math.max(1,2*n-s)}}}if(o(f+1,n)>a)break;d=v}return s},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var i=n.substring(e.start2,e.start2+e.length1),r=0;n.indexOf(i)!=n.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,i=n.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var o=n.substring(e.start2-r,e.start2);o&&e.diffs.unshift(new t.Diff(0,o));var a=n.substring(e.start2+e.length1,e.start2+e.length1+r);a&&e.diffs.push(new t.Diff(0,a)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},t.prototype.patch_make=function(e,i,r){var o,a;if("string"==typeof e&&"string"==typeof i&&void 0===r)o=e,(a=this.diff_main(o,i,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&"object"==typeof e&&void 0===i&&void 0===r)a=e,o=this.diff_text1(a);else if("string"==typeof e&&i&&"object"==typeof i&&void 0===r)o=e,a=i;else{if("string"!=typeof e||"string"!=typeof i||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");o=e,a=r}if(0===a.length)return[];for(var s=[],l=new t.patch_obj,c=0,u=0,d=0,h=o,f=o,p=0;p<a.length;p++){var g=a[p][0],v=a[p][1];switch(c||0===g||(l.start1=u,l.start2=d),g){case 1:l.diffs[c++]=a[p],l.length2+=v.length,f=f.substring(0,d)+v+f.substring(d);break;case n:l.length1+=v.length,l.diffs[c++]=a[p],f=f.substring(0,d)+f.substring(d+v.length);break;case 0:v.length<=2*this.Patch_Margin&&c&&a.length!=p+1?(l.diffs[c++]=a[p],l.length1+=v.length,l.length2+=v.length):v.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,h),s.push(l),l=new t.patch_obj,c=0,h=f,u=d)}1!==g&&(u+=v.length),g!==n&&(d+=v.length)}return c&&(this.patch_addContext_(l,h),s.push(l)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=new t.patch_obj;o.diffs=[];for(var a=0;a<r.diffs.length;a++)o.diffs[a]=new t.Diff(r.diffs[a][0],r.diffs[a][1]);o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,n[i]=o}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);t=i+t+i,this.patch_splitMax(e);for(var r=0,o=[],a=0;a<e.length;a++){var s,l,c=e[a].start2+r,u=this.diff_text1(e[a].diffs),d=-1;if(u.length>this.Match_MaxBits?-1!=(s=this.match_main(t,u.substring(0,this.Match_MaxBits),c))&&(-1==(d=this.match_main(t,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||s>=d)&&(s=-1):s=this.match_main(t,u,c),-1==s)o[a]=!1,r-=e[a].length2-e[a].length1;else if(o[a]=!0,r=s-c,u==(l=-1==d?t.substring(s,s+u.length):t.substring(s,d+this.Match_MaxBits)))t=t.substring(0,s)+this.diff_text2(e[a].diffs)+t.substring(s+u.length);else{var h=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(h)/u.length>this.Patch_DeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var f,p=0,g=0;g<e[a].diffs.length;g++){var v=e[a].diffs[g];0!==v[0]&&(f=this.diff_xIndex(h,p)),1===v[0]?t=t.substring(0,s+f)+v[1]+t.substring(s+f):v[0]===n&&(t=t.substring(0,s+f)+t.substring(s+this.diff_xIndex(h,p+v[1].length))),v[0]!==n&&(p+=v[1].length)}}}}return[t=t.substring(i.length,t.length-i.length),o]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,i="",r=1;r<=n;r++)i+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=n,e[r].start2+=n;var o=e[0],a=o.diffs;if(0==a.length||0!=a[0][0])a.unshift(new t.Diff(0,i)),o.start1-=n,o.start2-=n,o.length1+=n,o.length2+=n;else if(n>a[0][1].length){var s=n-a[0][1].length;a[0][1]=i.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(0==(a=(o=e[e.length-1]).diffs).length||0!=a[a.length-1][0])a.push(new t.Diff(0,i)),o.length1+=n,o.length2+=n;else if(n>a[a.length-1][1].length){s=n-a[a.length-1][1].length;a[a.length-1][1]+=i.substring(0,s),o.length1+=s,o.length2+=s}return i},t.prototype.patch_splitMax=function(e){for(var i=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=i)){var o=e[r];e.splice(r--,1);for(var a=o.start1,s=o.start2,l="";0!==o.diffs.length;){var c=new t.patch_obj,u=!0;for(c.start1=a-l.length,c.start2=s-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new t.Diff(0,l)));0!==o.diffs.length&&c.length1<i-this.Patch_Margin;){var d=o.diffs[0][0],h=o.diffs[0][1];1===d?(c.length2+=h.length,s+=h.length,c.diffs.push(o.diffs.shift()),u=!1):d===n&&1==c.diffs.length&&0==c.diffs[0][0]&&h.length>2*i?(c.length1+=h.length,a+=h.length,u=!1,c.diffs.push(new t.Diff(d,h)),o.diffs.shift()):(h=h.substring(0,i-c.length1-this.Patch_Margin),c.length1+=h.length,a+=h.length,0===d?(c.length2+=h.length,s+=h.length):u=!1,c.diffs.push(new t.Diff(d,h)),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var f=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==f&&(c.length1+=f.length,c.length2+=f.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=f:c.diffs.push(new t.Diff(0,f))),u||e.splice(++r,0,c)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var i=[];if(!e)return i;for(var r=e.split("\n"),o=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<r.length;){var s=r[o].match(a);if(!s)throw new Error("Invalid patch string: "+r[o]);var l=new t.patch_obj;for(i.push(l),l.start1=parseInt(s[1],10),""===s[2]?(l.start1--,l.length1=1):"0"==s[2]?l.length1=0:(l.start1--,l.length1=parseInt(s[2],10)),l.start2=parseInt(s[3],10),""===s[4]?(l.start2--,l.length2=1):"0"==s[4]?l.length2=0:(l.start2--,l.length2=parseInt(s[4],10)),o++;o<r.length;){var c=r[o].charAt(0);try{var u=decodeURI(r[o].substring(1))}catch(d){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new t.Diff(n,u));else if("+"==c)l.diffs.push(new t.Diff(1,u));else if(" "==c)l.diffs.push(new t.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}o++}}return i},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[i+1]=e+encodeURI(this.diffs[i][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0}(wb);var xb=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],i=0;i<e.rangeCount;i++)n.push(e.getRangeAt(i));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}},Cb={"text/plain":"Text","text/html":"Url",default:"Text"};var Mb=function(e,t){var n,i,r,o,a,s,l=!1;t||(t={}),n=t.debug||!1;try{if(r=xb(),o=document.createRange(),a=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(i){if(i.stopPropagation(),t.format)if(i.preventDefault(),void 0===i.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=Cb[t.format]||Cb.default;window.clipboardData.setData(r,e)}else i.clipboardData.clearData(),i.clipboardData.setData(t.format,e);t.onCopy&&(i.preventDefault(),t.onCopy(i.clipboardData))})),document.body.appendChild(s),o.selectNodeContents(s),a.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(c){n&&console.error("unable to copy using execCommand: ",c),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(u){n&&console.error("unable to copy using clipboardData: ",u),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(o):a.removeAllRanges()),s&&document.body.removeChild(s),r()}return l},Sb={exports:{}};!function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,i,r,o,a){return n((s=n(n(t,e),n(r,a)))<<(l=o)|s>>>32-l,i);var s,l}function r(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function o(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}function l(e,t){var i,l,c,u,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,f=-271733879,p=-1732584194,g=271733878;for(i=0;i<e.length;i+=16)l=h,c=f,u=p,d=g,h=r(h,f,p,g,e[i],7,-680876936),g=r(g,h,f,p,e[i+1],12,-389564586),p=r(p,g,h,f,e[i+2],17,606105819),f=r(f,p,g,h,e[i+3],22,-1044525330),h=r(h,f,p,g,e[i+4],7,-176418897),g=r(g,h,f,p,e[i+5],12,1200080426),p=r(p,g,h,f,e[i+6],17,-1473231341),f=r(f,p,g,h,e[i+7],22,-45705983),h=r(h,f,p,g,e[i+8],7,1770035416),g=r(g,h,f,p,e[i+9],12,-1958414417),p=r(p,g,h,f,e[i+10],17,-42063),f=r(f,p,g,h,e[i+11],22,-1990404162),h=r(h,f,p,g,e[i+12],7,1804603682),g=r(g,h,f,p,e[i+13],12,-40341101),p=r(p,g,h,f,e[i+14],17,-1502002290),h=o(h,f=r(f,p,g,h,e[i+15],22,1236535329),p,g,e[i+1],5,-165796510),g=o(g,h,f,p,e[i+6],9,-1069501632),p=o(p,g,h,f,e[i+11],14,643717713),f=o(f,p,g,h,e[i],20,-373897302),h=o(h,f,p,g,e[i+5],5,-701558691),g=o(g,h,f,p,e[i+10],9,38016083),p=o(p,g,h,f,e[i+15],14,-660478335),f=o(f,p,g,h,e[i+4],20,-405537848),h=o(h,f,p,g,e[i+9],5,568446438),g=o(g,h,f,p,e[i+14],9,-1019803690),p=o(p,g,h,f,e[i+3],14,-187363961),f=o(f,p,g,h,e[i+8],20,1163531501),h=o(h,f,p,g,e[i+13],5,-1444681467),g=o(g,h,f,p,e[i+2],9,-51403784),p=o(p,g,h,f,e[i+7],14,1735328473),h=a(h,f=o(f,p,g,h,e[i+12],20,-1926607734),p,g,e[i+5],4,-378558),g=a(g,h,f,p,e[i+8],11,-2022574463),p=a(p,g,h,f,e[i+11],16,1839030562),f=a(f,p,g,h,e[i+14],23,-35309556),h=a(h,f,p,g,e[i+1],4,-1530992060),g=a(g,h,f,p,e[i+4],11,1272893353),p=a(p,g,h,f,e[i+7],16,-155497632),f=a(f,p,g,h,e[i+10],23,-1094730640),h=a(h,f,p,g,e[i+13],4,681279174),g=a(g,h,f,p,e[i],11,-358537222),p=a(p,g,h,f,e[i+3],16,-722521979),f=a(f,p,g,h,e[i+6],23,76029189),h=a(h,f,p,g,e[i+9],4,-640364487),g=a(g,h,f,p,e[i+12],11,-421815835),p=a(p,g,h,f,e[i+15],16,530742520),h=s(h,f=a(f,p,g,h,e[i+2],23,-995338651),p,g,e[i],6,-198630844),g=s(g,h,f,p,e[i+7],10,1126891415),p=s(p,g,h,f,e[i+14],15,-1416354905),f=s(f,p,g,h,e[i+5],21,-57434055),h=s(h,f,p,g,e[i+12],6,1700485571),g=s(g,h,f,p,e[i+3],10,-1894986606),p=s(p,g,h,f,e[i+10],15,-1051523),f=s(f,p,g,h,e[i+1],21,-2054922799),h=s(h,f,p,g,e[i+8],6,1873313359),g=s(g,h,f,p,e[i+15],10,-30611744),p=s(p,g,h,f,e[i+6],15,-1560198380),f=s(f,p,g,h,e[i+13],21,1309151649),h=s(h,f,p,g,e[i+4],6,-145523070),g=s(g,h,f,p,e[i+11],10,-1120210379),p=s(p,g,h,f,e[i+2],15,718787259),f=s(f,p,g,h,e[i+9],21,-343485551),h=n(h,l),f=n(f,c),p=n(p,u),g=n(g,d);return[h,f,p,g]}function c(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r}function h(e){return unescape(encodeURIComponent(e))}function f(e){return function(e){return c(l(u(e),8*e.length))}(h(e))}function p(e,t){return function(e,t){var n,i,r=u(e),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=l(r,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],a[n]=1549556828^r[n];return i=l(o.concat(u(t)),512+8*t.length),c(l(a.concat(i),640))}(h(e),h(t))}function g(e,t,n){return t?n?p(t,e):d(p(t,e)):n?f(e):d(f(e))}e.exports?e.exports=g:t.md5=g}(N)}(Sb);var Eb,Ob,Nb=Sb.exports,Tb="data-element",Ab="root",Ib="[".concat(Tb,"=").concat(Ab,"]"),Db="ui",_b="[".concat(Tb,"=").concat(Db,"]"),jb="editable",Lb="[".concat(Tb,"=").concat(jb,"]"),Rb="anchor",Pb="focus",zb="cursor",Bb="span[".concat(Tb,"=").concat(Rb,"]"),Fb="span[".concat(Tb,"=").concat(Pb,"]"),Hb="span[".concat(Tb,"=").concat(zb,"]"),Ub="data-card-key",Yb="data-ready-card",Vb="data-card-type",Wb="data-card-element",$b="div[".concat(Ub,"],span[").concat(Ub,"]"),Gb="div[".concat(Yb,"],span[").concat(Yb,"]"),Zb="span[".concat(Wb,"=left]"),qb="div[".concat(Wb,"=center],span[").concat(Wb,"=center]"),Qb="span[".concat(Wb,"=right]"),Kb=0,Xb=1,Jb=2,ey=[["b","strong"],[{span:{style:{"font-weight":["bold","700"]}}},"strong"],["i","em"],[{span:{style:{"font-style":"italic"}}},"em"],[{span:{style:{"text-decoration":"underline"}}},"u"],["s","del"],["strike","del"],[{span:{style:{"text-decoration":"line-through"}}},"del"],["th","td"]],ty=[{name:"p",type:"block"},{name:"br",type:"inline",isVoid:!0},{name:Rb,type:"inline",isVoid:!0},{name:Pb,type:"inline",isVoid:!0},{name:zb,type:"inline",isVoid:!0},{type:"block",attributes:{"data-id":"*"}},{name:"card",type:"inline",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"inline"},value:"*"}},{name:"span",type:"inline",attributes:(Eb={},Im(Eb,Ub,{required:!0,value:/\w+/}),Im(Eb,Vb,{required:!0,value:"inline"}),Im(Eb,"data-card-value","*"),Im(Eb,"class","*"),Im(Eb,"contenteditable","*"),Eb)},{name:"card",type:"block",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"block"},value:"*"}},{name:"div",type:"block",attributes:(Ob={},Im(Ob,Ub,{required:!0,value:/\w+/}),Im(Ob,Vb,{required:!0,value:"block"}),Im(Ob,"data-card-value","*"),Im(Ob,"class","*"),Im(Ob,"contenteditable","*"),Ob)}],ny=function(){function e(){jm(this,e),this.listeners={}}return Rm(e,[{key:"on",value:function(e,t,n){this.listeners[e]&&!n||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(n)for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}}},{key:"trigger",value:function(e){var t=this.listeners[e];if(t){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var a=0;a<t.length&&!1!==(n=t[a].apply(t,r));a++);return n}}}]),e}(),iy=function(e){return!!e&&void 0!==e.get},ry=function(e){return!!e&&void 0!==e.nodeType},oy=function(){function e(t){if(jm(this,e),this.options={limitHeight:5e3,canvasCache:[],canvasCount:0},!t.container)throw new Error("please set a dom cantainer!");this.options=_m(_m({},this.options),t),t.container.style["line-height"]="0px"}return Rm(e,[{key:"removeCanvas",value:function(){var e=this.options.canvasCache;null==e||e.forEach((function(e){var t;null==e||null===(t=e.parentElement)||void 0===t||t.removeChild(e)})),this.options.canvasCache=[]}},{key:"getCanvas",value:function(e){var t=this.options.canvasCache;return e=e>0?e-1:e,t?t[e]:void 0}},{key:"resize",value:function(e,t){var n=this.options,i=n.limitHeight,r=n.canvasCount,o=n.container,a=this.options.canvasCache,s=Math.ceil(t/(i||0));if(s!==r){this.removeCanvas(),a=[];for(var l=0;l<s;l++){var c=document.createElement("canvas");c.style["vertical-align"]="bottom",c.setAttribute("width",e.toString()),l===s-1?c.setAttribute("height",(t%(i||0)).toString()):c.setAttribute("height",(i||0).toString()),null==o||o.appendChild(c),a.push(c)}this.options.canvasCache=a}else{var u,d=this.getCanvas(s);null===(u=a)||void 0===u||u.forEach((function(t){t.setAttribute("width",e.toString())})),d&&d.setAttribute("height",(t%(i||0)).toString())}}},{key:"handleSingleRect",value:function(e){var t=e.x,n=e.y,i=e.index,r=e.width,o=e.height,a=e.callback,s=this.options.limitHeight,l=this.getCanvas(i);if(l){var c=l.getContext("2d");a(_m(_m({},new DOMRect(t,n-(s||0)*(i-1),r,o).toJSON()),{},{context:c}))}}},{key:"drawRect",value:function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=e.fill,a=e.stroke,s=new DOMRect(t,n,i,r);this.handleRect(_m(_m({},s.toJSON()),{},{callback:function(e){var t=e.context;t&&(t.fillStyle=void 0===o?"#FFEC3D":o,t.strokeStyle=void 0===a?"#FFEC3D":a,t.fillRect(e.x,e.y,e.width,e.height))}}))}},{key:"handleRect",value:function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=e.callback,a=this.options.limitHeight,s=n+r,l=Math.ceil(n/(a||0)),c=Math.ceil(s/(a||0)),u=new DOMRect(t,n,i,r);this.handleSingleRect(_m(_m({},u.toJSON()),{},{index:l,callback:o})),l!==c&&this.handleSingleRect(_m(_m({},u.toJSON()),{},{index:c,callback:o}))}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=this.options.limitHeight,a=Math.ceil(n/(o||0)),s=this.getCanvas(a),l=null==s?void 0:s.getContext("2d");return null==l?void 0:l.getImageData(t,n,i,r)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=new DOMRect(t,n,i,r);this.handleRect(_m(_m({},o.toJSON()),{},{callback:function(e){var t=e.context,n=e.x,i=e.y,r=e.width,o=e.height;null==t||t.clearRect(n,i,r,o)}}))}},{key:"clear",value:function(){var e=this.options.canvasCache;null==e||e.forEach((function(e){var t=e.getContext("2d"),n=Number(e.getAttribute("width")),i=Number(e.getAttribute("height"));null==t||t.clearRect(0,0,n,i)}))}},{key:"destroy",value:function(){this.removeCanvas()}}]),e}(),ay=function(e){if("undefined"==typeof document&&void 0===global.__amWindow)throw"document is not defined,If you are using ssr, you can assign a value to the `__amWindow` global variable.";return e?e.ownerDocument||e.document||e:"undefined"==typeof document?global.__amWindow.document:document},sy=function(e){if("undefined"==typeof window&&void 0===global.__amWindow)throw"window is not defined,If you are using ssr, you can assign a value to the `__amWindow` global variable.";var t="undefined"==typeof window?global.__amWindow:window;if(!e)return t;var n=ay(e);return n.parentWindow||n.defaultView||t},ly=("undefined"!=typeof navigator?navigator:sy().navigator).userAgent.toLowerCase(),cy="undefined"==typeof navigator,uy=/edge/i.test(ly),dy=!uy&&/chrome/i.test(ly),hy=/firefox/i.test(ly),fy=!uy&&!dy&&/safari/i.test(ly),py=/mobile/i.test(ly),gy=/os [\.\_\d]+ like mac os/i.test(ly),vy=/android/i.test(ly),my=!gy&&/mac os x/i.test(ly);/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(ly);var by,yy,wy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;e<5&&(e=5);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n};(yy=by||(by={})).UPPER="upper",yy.LOWER="lower";var ky,xy,Cy,My,Sy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:by.LOWER;return e.split("-").map((function(e,n){return"upper"===t||"lower"===t&&n>0?e.charAt(0).toUpperCase()+e.substr(1):"lower"===t&&0===n?e.charAt(0).toLowerCase()+e.substr(1):e})).join("")},Ey=function(e){var t=function(e){var t=parseInt(e,10).toString(16).toUpperCase();return t.length>1?t:"0"+t};return e.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,(function(e,n,i,r){return"#"+t(n)+t(i)+t(r)}))},Oy=function(e){for(var t,n={},i=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;t=i.exec(e);){var r=(t[1]||t[2]||t[4]||t[6]).toLowerCase(),o=(t[2]?t[3]:t[4]?t[5]:t[7])||"";n[r]=o}return n},Ny=function(e){e=e.replace(/&quot;/g,'"');for(var t,n={},i=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;t=i.exec(e);){var r=t[1].toLowerCase().trim(),o=Ey(t[2]).trim();n[r]=o}return n},Ty=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Ay=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},Iy=function(e){return e.replace(/\./g,"&dot;")},Dy=function(e){return e.replace(/&dot;/g,".")},_y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return e&&/^-?\d+(?:\.\d+)?$/.test(e.toString())?e+t:e},jy=function(e){var t;return e&&(t=/^(-?\d+)/.exec(e))?parseInt(t[1],10):0},Ly=function(e){try{e=encodeURIComponent(JSON.stringify(e||""))}catch(YM){e=""}return"data:".concat(e)},Ry=function(e){try{return e=e.substr(5),JSON.parse(decodeURIComponent(e))}catch(YM){return{}}},Py=function(e){return e.replace(/<anchor\s*\/>/gi,"<span ".concat(Tb,'="').concat(Rb,'"></span>')).replace(/<focus\s*\/>/gi,"<span ".concat(Tb,'="').concat(Pb,'"></span>')).replace(/<cursor\s*\/>/gi,"<span ".concat(Tb,'="').concat(zb,'"></span>')).replace(/(<card\s+[^>]+>).*?<\/card>/gi,(function(e,t){var n=Oy(t),i=n.type,r=n.name,o=n.value,a="inline"===i?"span":"div",s=["<".concat(a)];return s.push(" ".concat(Vb,'="').concat(i||"",'"')),s.push(" ".concat(Yb,'="').concat(r||"",'"')),Object.keys(n).forEach((function(e){0===e.indexOf("data-")&&0!==e.indexOf("data-card")&&s.push(" ".concat(e,'="').concat(n[e]||"",'"'))})),void 0!==o&&s.push(" ".concat("data-card-value",'="').concat(o,'"')),s.push("></".concat(a,">")),s.join("")}))},zy=function(e){return"string"==typeof e&&(!(e=e.toLowerCase()).startsWith("data:text/html")&&(!!e.match(/^\S*$/)&&(!!["http:","https:","data:","ftp:"].some((function(t){return e.startsWith(t)}))||(!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0))))},By=function(e){return zy(e)?e:""},Fy=function(e){if(!e)return e;var t=e.replace(/<(anchor|focus|cursor)[^>]*?\/>/gi,"");return/^<p(\s[^>]*?)><br \/><\/p>$/i.test(t)?e.replace(RegExp.$1,""):e},Hy=function(e){var t=e.toLowerCase().split("+");return(t=t.map((function(e){return"mod"===e?my?"⌘":"Ctrl":"opt"===e?my?"Option":"Alt":e.length>1?e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase():e.toUpperCase()}))).join("+")},Uy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t=+t))return"•";switch(null==e?void 0:e.toLowerCase()){case"disc":return"•";case"circle":return"◦";case"square":return"◼";case"lower-alpha":return String.fromCharCode("a".charCodeAt(0)+t);case"lower-roman":return String.fromCharCode(8559+t);case"decimal":default:return t}};function Yy(e,t,n){if(!t)return[];if("string"==typeof t){if(!n||/<.+>/.test(t)){var i=0===t.indexOf("<tr"),r=0===t.indexOf("<td");t=t.trim().replace(/<!--[^>]*-->/g,""),i&&(t="<table><tbody>".concat(t,"</tbody></table>")),r&&(t="<table><tbody><tr>".concat(t,"</tr></tbody></table>"));var o=ay().createElement("div");if(o.innerHTML=t,e.block.generateRandomIDForDescendant(o),i){var a=o.querySelector("tbody");return a?a.childNodes:[]}if(r){var s=o.querySelector("tr");return s?s.childNodes:[]}return o.childNodes}return n.querySelectorAll(t)}if(function(e){return!!e&&void 0!==e.entries}(t)||Array.isArray(t))return t;if(iy(t)){var l=[];return t.each((function(e){l.push(e)})),l}if(ry(t)&&t.nodeType===sy().Node.DOCUMENT_FRAGMENT_NODE){for(var c=[],u=t.firstChild;u;)c.push(u),u=u.nextSibling;return c}return[t]}(xy=ky||(ky={})).INLINE="inline",xy.BLOCK="block",(My=Cy||(Cy={})).UPDATE_CARD="update_card",My.INSERT_CARD="insert_card",My.CUSTOM_SELECT="custom_select",My.CLICK="click",My.MOUSE_DOWN="mouse_down",My.MANUAL="manual";var Vy=function(e){return"engine"===e.kind},Wy=function(e){return void 0!==e.getRangeAt},$y=function(e){return void 0!==e.collapsed},Gy=function(e){return!!e&&void 0!==e.base},Zy=function(e){return"mark"===e.kind},qy=function(e){return"block"===e.kind},Qy=function(){function e(t,n,i){jm(this,e),this.length=0,this.events=[],this.document=null,this.name="",this.window=null,this.isFragment=!1,this.editor=t,ry(n)&&(n.nodeType===sy().Node.DOCUMENT_FRAGMENT_NODE&&(this.isFragment=!0),n=[n]);for(var r=0;r<n.length;r++)this[r]=n[r],this.events[r]=new ny;this.length=n.length,this.length>0&&(this.document=ay(i),this.context=i,this.name=this[0].nodeName?this[0].nodeName.toLowerCase():"",this.type=this[0].nodeType,this.window=sy(this[0]))}return Rm(e,[{key:"isMatchesSelector",value:function(t,n){var i=this;if(t.nodeType!==sy().Node.ELEMENT_NODE)return!1;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.matchesSelector||function(t,n){for(var r,o=new e(i.editor,t),a=null===(r=o.document)||void 0===r?void 0:r.querySelectorAll(n),s=a?a.length:0;--s>=0&&(null==a?void 0:a.item(s))!==o.get(););return s>-1}).call(t,n)}},{key:"each",value:function(e){for(var t=0;t<this.length&&!1!==e(this[t],t);t++);return this}},{key:"toArray",value:function(){var t=this,n=[];return this.each((function(i){n.push(new e(t.editor,i))})),n}},{key:"isElement",value:function(){return this.type===sy().Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===sy().Node.TEXT_NODE}},{key:"isCard",value:function(){return"card"===this.name||!!this.attributes(Vb)}},{key:"isBlockCard",value:function(){return"block"===this.attributes(Vb)}},{key:"isInlineCard",value:function(){return"inline"===this.attributes(Vb)}},{key:"isEditableCard",value:function(){return this.find(Lb).length>0}},{key:"isPseudoBlockCard",value:function(){return"inline"===this.attributes(Vb)&&"block"===this.css("display")}},{key:"isRoot",value:function(){return this.attributes(Tb)===Ab}},{key:"isEditable",value:function(){return this.isRoot()||this.attributes(Tb)===jb}},{key:"inEditor",value:function(){return!this.isRoot()&&this.closest(Ib).length>0}},{key:"isCursor",value:function(){return[Rb,Pb,zb].indexOf(this.attributes(Tb))>-1}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===this.length?null:this[e]}},{key:"eq",value:function(t){return t>-1&&t<this.length?new e(this.editor,this[t]):void 0}},{key:"index",value:function(){for(var e,t=null===(e=this.get())||void 0===e?void 0:e.previousSibling,n=0;t&&t.nodeType===sy().Node.ELEMENT_NODE;)n++,t=t.previousSibling;return n}},{key:"parent",value:function(){var t,n=null===(t=this.get())||void 0===t?void 0:t.parentNode;return n?new e(this.editor,n):void 0}},{key:"children",value:function(t){if(0===this.length)return new e(this.editor,[]);var n=this.get().childNodes;if(t){for(var i=[],r=0;r<n.length;r++){var o=n[r];this.isMatchesSelector(o,t)&&i.push(o)}return new e(this.editor,i)}return new e(this.editor,n)}},{key:"first",value:function(){var t;if(this.isFragment)return this.eq(0)||null;var n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.firstChild;return n?new e(this.editor,n):null}},{key:"last",value:function(){var t;if(this.isFragment)return this.eq(this.length-1)||null;var n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.lastChild;return n?new e(this.editor,n):null}},{key:"prev",value:function(){var t,n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.previousSibling;return n?new e(this.editor,n):null}},{key:"next",value:function(){var t,n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.nextSibling;return n?new e(this.editor,n):null}},{key:"prevElement",value:function(){var t=0!==this.length&&this.isElement()?this.get().previousElementSibling:null;return t?new e(this.editor,t):null}},{key:"nextElement",value:function(){var t=0!==this.length&&this.isElement()?this.get().nextElementSibling:null;return t?new e(this.editor,t):null}},{key:"getPath",value:function(e){e=e||document.body;var t=[];this.length>0&&t.unshift(this.offset());for(var n=this.parent();n&&!n.equal(e);)t.unshift(n.offset()),n=n.parent();return t}},{key:"contains",value:function(e){var t,n=ry(e)?e:e.get();if(0===this.length)return!1;if(this.get().nodeType===sy().Node.DOCUMENT_NODE&&(null===(t=n)||void 0===t?void 0:t.nodeType)!==sy().Node.DOCUMENT_NODE)return!0;for(;n=(null===(i=n)||void 0===i?void 0:i.parentNode)||null;){var i;if(n===this[0])return!0}return!1}},{key:"find",value:function(t){if(this.length>0&&this.isElement()){var n,i=null===(n=this.get())||void 0===n?void 0:n.querySelectorAll(t);return new e(this.editor,i||[])}return new e(this.editor,[])}},{key:"closest",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.parentNode||void 0},i=[],r=this.get()||void 0;r;){if(this.isMatchesSelector(r,t))return i.push(r),new e(this.editor,i);r=n(r)}return new e(this.editor,i)}},{key:"on",value:function(e,t){var n=this;return this.each((function(i,r){i.addEventListener(e,t,!1),r<n.events.length&&n.events[r].on(e,t)})),this}},{key:"off",value:function(e,t){var n=this;return this.each((function(i,r){i.removeEventListener(e,t,!1),r<n.events.length&&n.events[r].off(e,t)})),this}},{key:"getBoundingClientRect",value:function(e){if(0!==this.length){try{var t=this.get().getBoundingClientRect(),n=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:t.top-n,bottom:t.bottom-n,left:t.left-i,right:t.right-i}}catch(r){console.error(r)}return e}}},{key:"removeAllEvents",value:function(){var e=this;return this.each((function(t,n){e.events[n]&&Object.keys(e.events[n].listeners).forEach((function(i){for(var r=e.events[n].listeners[i],o=0;o<r.length;o++)t.removeEventListener(i,r[o],!1)}))})),this.events=[],this}},{key:"offset",value:function(){if(0===this.length)return-1;var e=this.parent();if(!e)return-1;var t=e.get().childNodes;return Array.from(t).indexOf(this.get())}},{key:"attributes",value:function(e,t){var n=this;if(void 0===e){var i=this.clone(!1).get();return Oy((null==i?void 0:i.outerHTML)||"")}if("object"===zm(e))return Object.keys(e).forEach((function(t){var i=e[t];n.attributes(t,i)})),this;if(void 0===t){var r=this.get();return this.length>0&&this.isElement()&&(null==r?void 0:r.getAttribute(e))||""}return this.each((function(n){n.setAttribute(e,t.toString())})),this}},{key:"removeAttributes",value:function(e){return this.each((function(t){t.removeAttribute(e)})),this}},{key:"hasClass",value:function(e){if(0===this.length)return!1;var t=this.get();if(t.classList)for(var n=0;n<t.classList.length;n++)if(t.classList[n]===e)return!0;return!1}},{key:"addClass",value:function(e){return this.each((function(t){t.classList.add(e)})),this}},{key:"removeClass",value:function(e){return this.each((function(t){t.classList.remove(e)})),this}},{key:"css",value:function(e,t){var n=this;return void 0===e?Ny(this.attributes("style")||""):"object"===zm(e)?(Object.keys(e).forEach((function(t){var i=e[t];n.css(t,i)})),this):void 0===t?0===this.length||this.isText()?"":this.get().style[Sy(e)]||function(e,t){var n=sy(e),i=Sy(t),r=null==n?void 0:n.getComputedStyle(e,null);return r?r[i]:""}(this[0],e)||"":(this.each((function(n){n.style[Sy(e)]=t.toString()})),this)}},{key:"width",value:function(){var e=this.css("width");"auto"===e&&(e=this.get().offsetWidth.toString());return e&&parseFloat(e)||0}},{key:"height",value:function(){var e=this.css("height");"auto"===e&&(e=this.get().offsetHeight.toString());return e&&parseFloat(e)||0}},{key:"html",value:function(e){return e?(this.each((function(t){t.innerHTML=e})),this):this.length>0?this[0].innerHTML:""}},{key:"text",value:function(e){var t;return e?(this.each((function(t){t.textContent=e})),this):0===this.length?"":(null===(t=this.get())||void 0===t?void 0:t.textContent)||""}},{key:"show",value:function(e){return void 0===e&&(e=this.display||""),"none"===e&&(e=""),"none"!==this.css("display")?this:this.css("display",e)}},{key:"hide",value:function(){var e;return 0===this.length?this:(this.display=null===(e=this.get())||void 0===e?void 0:e.style.display,this.css("display","none"))}},{key:"remove",value:function(){var e=this;return this.each((function(t,n){t.parentNode&&(t.parentNode.removeChild(t),delete e[n])})),this.length=0,this}},{key:"empty",value:function(){return this.each((function(e){for(var t=e.firstChild;t;){var n;if(!e.parentNode)return;var i=t.nextSibling;null===(n=t.parentNode)||void 0===n||n.removeChild(t),t=i}})),this}},{key:"equal",value:function(e){return ry(e)?this.get()===e:!!iy(e)&&this.get()===e.get()}},{key:"clone",value:function(t){var n=[];return this.each((function(e){n.push(e.cloneNode(t))})),new e(this.editor,n)}},{key:"prepend",value:function(e){var t=this;return this.each((function(n){var i=Yy(t.editor,e,t.context);n.firstChild?n.insertBefore(i[0],n.firstChild):n.appendChild(i[0])})),this}},{key:"append",value:function(e){var t=this;return this.each((function(n){for(var i=Yy(t.editor,e,t.context),r=0;r<i.length;r++){var o=i[r];"string"==typeof e?n.appendChild(o.cloneNode(!0)):n.appendChild(o)}})),this}},{key:"before",value:function(e){var t=this;return this.each((function(n){var i,r=Yy(t.editor,e,t.context);null===(i=n.parentNode)||void 0===i||i.insertBefore(r[0],n)})),this}},{key:"after",value:function(e){var t=this;return this.each((function(n){var i,r,o=Yy(t.editor,e,t.context);n.nextSibling?null===(i=n.parentNode)||void 0===i||i.insertBefore(o[0],n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(o[0])})),this}},{key:"replaceWith",value:function(t){var n=this,i=[];return this.each((function(e){var r,o=Yy(n.editor,t,n.context)[0];null===(r=e.parentNode)||void 0===r||r.replaceChild(o,e),i.push(o)})),new e(this.editor,i)}},{key:"getRoot",value:function(){return this.closest(Ib)}},{key:"traverse",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function n(i){for(var r=t?i.first():i.last();r;){var o=t?r.next():r.prev(),a=e(r);if(!1===a)return;r.isCard()||!0===a||n(r),r=o}};e(this),n(this)}},{key:"getChildByPath",value:function(e,t){for(var n=this.get(),i=function(){return t?Array.from(n.childNodes).filter(t):Array.from(n.childNodes)},r=i(),o=0;void 0!==e[o]&&r[e[o]];)n=r[e[o]],r=i(),o++;return n}},{key:"inside",value:function(e){for(var t=this.parent();t;){if(t.equal(e))return!0;t=t.parent()}return!1}},{key:"getIndex",value:function(e){var t=this,n=0,i=this[0].parentNode;return i?(Array.from(i.childNodes).filter(e||function(){return!0}).forEach((function(e,i){e===t.get()&&(n=i)})),n):n}},{key:"findParent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.closest(Ib);if(ry(t)&&(t=new e(this.editor,t)),0===this.length||!this.parent())return null;for(var n=this;!(null===(i=n.parent())||void 0===i?void 0:i.equal(t));){var i;if(!n.parent())return null;n=n.parent()}return n}},{key:"allChildren",value:function(){var e=[];return this.traverse((function(t){e.push(t[0])})),e.shift(),e}},{key:"getViewport",value:function(e){var t,n,i,r,o=this.window||{innerHeight:0,innerWidth:0},a=o.innerHeight,s=o.innerWidth;if(e&&e.length>0){var l=e.get().getBoundingClientRect();t=l.top,n=l.left,i=l.bottom,r=l.right}else{var c=this.get().getBoundingClientRect();t=c.top,n=c.left,i=c.bottom,r=c.right}return{top:t,left:n,bottom:Math.min(i,a),right:Math.min(r,s)}}},{key:"inViewport",value:function(t,n){var i,r=null;if(n.type!==sy().Node.ELEMENT_NODE){if(!n.document)return!1;var o,a;if(r=n.document.createElement("span"),n.next())null===(o=n[0].parentNode)||void 0===o||o.insertBefore(r,n[0].nextSibling);else null===(a=n[0].parentNode)||void 0===a||a.appendChild(r);n=new e(this.editor,r)}var s=n[0].getBoundingClientRect(),l=s.top,c=s.left,u=s.right,d=s.bottom,h=this.getViewport(t);return r&&(null===(i=r.parentNode)||void 0===i||i.removeChild(r)),!(l<h.top||d>h.bottom||c<h.left||u>h.right)}},{key:"scrollIntoView",value:function(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest";if("function"==typeof(null===(i=n.document)||void 0===i?void 0:i.body.scrollIntoView)){var o,a,s,l=null;if(n.type!==sy().Node.ELEMENT_NODE||"br"===n.name.toLowerCase())(l=n.document.createElement("span")).innerHTML="&nbsp;",null===(a=n[0].parentNode)||void 0===a||a.insertBefore(l,n[0]),n=new e(this.editor,l);if(!this.inViewport(t,n))null===(s=n.get())||void 0===s||s.scrollIntoView({block:r,inline:r});l&&(null===(o=l.parentNode)||void 0===o||o.removeChild(l))}}},{key:"removeZeroWidthSpace",value:function(){var e=this.editor.node;this.traverse((function(t){var n=t[0];if(n.nodeType===sy().Node.TEXT_NODE){var i=n.nodeValue;if(2===(null==i?void 0:i.length)){var r=n.nextSibling,o=n.previousSibling;if(!(8203===i.charCodeAt(1)&&r&&r.nodeType===sy().Node.ELEMENT_NODE&&[Rb,Pb,zb].indexOf(r.getAttribute(Tb)||"")>=0)){var a=t.parent();if(!(8203===i.charCodeAt(1)&&(!r&&a&&e.isInline(a)||r&&e.isInline(r))||8203===i.charCodeAt(0)&&(!o&&a&&e.isInline(a)||o&&e.isInline(o))||8203!==i.charCodeAt(0))){var s,l=n.splitText(1);l.previousSibling&&(null===(s=l.parentNode)||void 0===s||s.removeChild(l.previousSibling))}}}}}))}}]),e}(),Ky=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"isVoid",value:function(e,t){t=t||this.editor.schema;var n="string"==typeof e?e:"";return ry(e)?n=e.nodeName.toLowerCase():iy(e)&&(n=e.name),t.find((function(e){return e.name===n})).some((function(e){return e.isVoid}))}},{key:"isMark",value:function(e,t){t=t||this.editor.schema;var n=this.editor.$;return ry(e)&&(e=n(e)),"mark"===t.getType(e)}},{key:"isInline",value:function(e,t){t=t||this.editor.schema;var n=this.editor.$;return ry(e)&&(e=n(e)),"inline"===t.getType(e)}},{key:"isBlock",value:function(e,t){t=t||this.editor.schema;var n=this.editor.$;return ry(e)&&(e=n(e)),"block"===t.getType(e)}},{key:"isSimpleBlock",value:function(e){if(!this.isBlock(e))return!1;for(var t=e.first();t;){if(this.isBlock(t))return!1;t=t.next()}return!0}},{key:"isRootBlock",value:function(e,t){var n;return!!(null===(n=e.parent())||void 0===n?void 0:n.isEditable())&&(!!this.isSimpleBlock(e)&&(t||this.editor.schema).find((function(t){return t.name===e.name})).every((function(e){if("block"!==e.type)return!1;var t=e.allowIn;return!t||t.indexOf("$root")>-1})))}},{key:"isEmpty",value:function(e,t){var n,i;if(e.isElement()){if(e.attributes(Ub)||e.find($b).length>0)return!1;if(e.attributes(Yb)||e.find(Gb).length>0)return!1;if("br"!==e.name&&this.isVoid(e))return!1;if(e.find("br").length>1)return!1}var r=e.isText()?e[0].nodeValue||"":e.text();return(r=null===(i=r=null===(n=r)||void 0===n?void 0:n.replace(/\u200B/g,""))||void 0===i?void 0:i.replace(/\r\n|\n/,""))&&t&&(r=r.trim()),""===r}},{key:"isEmptyWithTrim",value:function(e){return this.isEmpty(e,!0)}},{key:"isLikeEmpty",value:function(e){if(0===e.length)return!0;var t=e[0].childNodes;if(0===t.length)return!0;for(var n=0;n<t.length;n++){var i=t[n];if(i.nodeType===sy().Node.TEXT_NODE){if(""!==i.data.replace(/\u200b/g,""))return!1}else if(i.nodeType===sy().Node.ELEMENT_NODE){if(i.hasAttribute(Ub))return!1;if(!this.isLikeEmpty(this.editor.$(i)))return!1}}return!0}},{key:"isList",value:function(e){var t="string"==typeof e?e:"";return ry(e)?t=e.nodeName.toLowerCase():iy(e)&&(t=e.name),["ul","ol"].indexOf(t)>-1}},{key:"isCustomize",value:function(e){switch(e.name){case"li":return e.hasClass(this.editor.list.CUSTOMZIE_LI_CLASS);case"ul":return e.hasClass(this.editor.list.CUSTOMZIE_UL_CLASS);default:return!1}}},{key:"unwrap",value:function(e){for(var t=e.first();t;){var n=t.next();e.before(t),t=n}e.remove()}},{key:"wrap",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.editor,o=r.$,a=r.node,s=r.mark;if(ry(e)&&(e=o(e)),t=a.clone(t,!1),e.isText())return t.append(a.clone(e,!1)),e.replaceWith(t);if(i&&this.isMark(t)){var l=a.clone(t,!1);if(e.name===t.name){var c=e.attributes();delete c.style,Object.keys(c).forEach((function(e){if(t.attributes(e)){var n=t.attributes(e).split(",");n.indexOf(c[e])<0&&n.push(c[e]),t.attributes(e,n.join(","))}else t.attributes(e,c[e])}));var u=e.css();Object.keys(u).forEach((function(e){t.css(e)||t.css(e,u[e])})),t.append(a.clone(e,!0).children())}else t.append(a.clone(e,!0));var d=t.allChildren();return d.forEach((function(e){var t=o(e);!t.isText()&&n.isMark(t)&&s.compare(t,l)&&n.unwrap(t)})),e.replaceWith(t)}var h=a.clone(e,!1);return e.after(h),t.append(e),h.replaceWith(t)}},{key:"merge",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.isText())e.append(t);else{var i=this.editor,r=i.$,o=i.node,a=i.block,s=i.mark,l=t,c=["ul","ol"].includes(e.name),u=["ul","ol"].includes(t.name);if(c&&!u){var d=e.find("li");if(0===d.length)return;e=r(d[d.length-1])}if(!c&&u){var h=t.find("li");h.length>0&&(t=r(h[0])),h[1]&&(l=r(h[0]))}for(var f=e.last(),p=t.first(),g=a.findPlugin(e);p;){var v=p.next();g.forEach((function(e){var t=s.findPlugin(p);t&&e.disableMark&&e.disableMark.indexOf(t.constructor.pluginName)>-1&&o.unwrap(p)})),e.append(p),p=v}if(n&&l.remove(),f&&"br"===f.name)for(var m=f.next();m;){if([zb,Rb,Pb].indexOf(m.attributes(Tb))){f.remove();break}m=m.next()}}}},{key:"replace",value:function(e,t){for(var n=this.editor.node.clone(t,!1),i=e.first();i;){var r=i.next();n.append(i),i=r}return e.replaceWith(n)}},{key:"insertText",value:function(e,t){var n;if(Vy(this.editor)){var i=this.editor.change,r=t||i.getSafeRange(),o=ay(r.startContainer);r.collapsed||i.deleteContent(t);var a=o.createTextNode(e);return null===(n=this.insert(a,r))||void 0===n||n.addOrRemoveBr(),t||i.apply(r),r}}},{key:"insert",value:function(e,t){if(iy(e)){if(0===e.length)throw"Not found node";e=e[0]}if(Vy(this.editor)){var n=this.editor.change;t=t||n.getRange();var i=this.editor.node,r=t.cloneRange().shrinkToTextNode(),o=r.startNode,a=r.startOffset,s=o.prev(),l=o.parent(),c=o.text()||"",u=c.substr(0,a);return o.isText()&&/\u200b$/.test(u)&&(c.length>1||s&&!i.isInline(s)||!s&&l&&!i.isInline(l))&&o.get().splitText(c.length-1).remove(),t.insertNode(e),t.select(e,!0).shrinkToElementNode().collapse(!1)}}},{key:"setAttributes",value:function(e,t){var n=t.style,i=Pm(t,["style"]);return Object.keys(i).forEach((function(t){if("className"===t){var n=i[t];Array.isArray(n)?n.forEach((function(t){return e.addClass(t)})):e.addClass(n)}else e.attributes(t,i[t].toString())})),"number"==typeof n&&(n={}),"string"==typeof n&&(n=Ny(n)),Object.keys(n||{}).forEach((function(t){var i=n[t];/^0(px|em)?$/.test(i.toString())&&(i=""),e.css(t,i.toString())})),e}},{key:"removeMinusStyle",value:function(e,t){this.isBlock(e)&&((parseInt(e.css(t),10)||0)<0&&e.css(t,""))}},{key:"mergeAdjacent",value:function(e){for(var t=this.editor,n=t.schema,i=t.list,r=this.editor.node,o=n.getAllowInTags(),a=e.first();a;){for(var s=a.next();s&&a.name===s.name&&(o.indexOf(a.name)>-1&&!r.isList(a)||r.isList(a)&&i.isSame(a,s));){for(var l=s.next(),c=s.first();c;){var u=c.next();a.append(c),c=u}s.remove(),this.mergeAdjacent(a),s=l}a=s}}},{key:"removeSide",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"br",n=e.first();n&&n.name===t&&e.children().length>1&&n.remove();var i=e.last();i&&i.name===t&&e.children().length>1&&i.remove()}},{key:"flatten",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.editor,r=i.$,o=i.block,a=this.editor.node,s=e.first(),l=n.isFragment?null===(t=n.get())||void 0===t?void 0:t.parentNode:n.get(),c=e.isFragment?r("<p />"):a.clone(e,!1);s;){var u=s.next();if(s.isBlockCard()||this.isSimpleBlock(s))o.flatten(s,r(l||[]));else if(this.isBlock(s))this.flatten(s,r(l||[]));else{var d=a.clone(c,!1),h="li"===d.name;for(s.before(d);s;){u=s.next();var f="br"===s.name&&!h;if(d.append(s),f||!u||this.isBlock(u)||u.isBlockCard())break;s=u}this.removeSide(d),o.flatten(d,r(l||[]))}s=u}(s=e.first())||e.remove()}},{key:"normalize",value:function(e){this.flatten(e),this.mergeAdjacent(e)}},{key:"html",value:function(e,t){var n,i=this;return void 0===t?e.length>0&&(null===(n=e.get())||void 0===n?void 0:n.innerHTML)||"":(e.each((function(e){var n=e;n.innerHTML=t,i.editor.block.generateRandomIDForDescendant(n)})),e)}},{key:"clone",value:function(e,t){var n=this.editor,i=n.$,r=n.block,o=[];return e.each((function(e){var n=e.cloneNode(t);r.generateRandomIDForDescendant(n,!0),r.needMarkDataID(n.nodeName)&&r.generateRandomID(n,!0),o.push(n)})),i(o)}},{key:"getBatchAppendHTML",value:function(e,t){var n;if(0===e.length)return t;var i=this.editor.$(t);return e.forEach((function(e){(e=e.clone(!1)).append(i),i=e})),(null===(n=i.get())||void 0===n?void 0:n.outerHTML)||""}}]),e}(),Xy={en:{dnd:{title:"Drag to reposition"},copy:{title:"Copy",success:"Copied successfully",error:"Copy error"},delete:{title:"Delete"},copyAnchor:{title:"Copy anchor link"},link:{placeholder:"Please enter a link or anchor and press Enter to confirm",save:"Apply",edit:"Change",delete:"Remove link",open:"Open link",text:"link"},copyContent:{title:"copy content"},maximize:{title:"Maximize",back:"Back to document"},expand:{title:"Embedded preview"},collapse:{title:"Compact display"},card:{lockAlert:"Please wait for the other user to finish editing"},preferences:{title:"Preferences"},download:{title:"Download"},more:{title:"More"},checkMarkdown:{title:"It is detected that the paste content conforms to the Markdown syntax. Do you need to do style conversion?"}},"zh-cn":{dnd:{title:"拖动调整位置"},copy:{title:"复制",success:"复制成功",error:"复制失败"},delete:{title:"删除"},copyAnchor:{title:"复制锚点链接"},link:{placeholder:"请输入链接或锚点，回车确认",save:"保存",edit:"编辑",delete:"取消链接",open:"打开链接",text:"链接"},copyContent:{title:"复制内容"},maximize:{title:"最大化",back:"返回文档"},expand:{title:"嵌入预览"},collapse:{title:"紧凑展示"},card:{lockAlert:"请等待对方编辑完毕后，再进入编辑"},preferences:{title:"设置"},download:{title:"下载"},more:{title:"更多"},checkMarkdown:{title:"检测到粘贴内容符合 Markdown 语法，是否需要转换？"}}},Jy=function(){function e(t,n){jm(this,e),this.anchor=null,this.focus=null,this.editor=t,this.range=n}return Rm(e,[{key:"has",value:function(){return!!this.focus&&!!this.anchor}},{key:"create",value:function(){var e=this.range,t=e.commonAncestorNode,n=e.startNode,i=e.endNode;if(t.isEditable()||t.inEditor()){var r=t.document;if(r){var o=t.closest(Ib);o.find(Bb).remove(),o.find(Fb).remove(),o.find(Fb).remove();var a=n.closest($b);if(a.length>0&&!a.isPseudoBlockCard())n.closest(Zb).length>0&&this.range.setStartBefore(a),n.closest(Qb).length>0&&this.range.setStartAfter(a);if(!n.equal(i)){var s=i.closest($b);if(s.length>0&&!s.isPseudoBlockCard())i.closest(Zb).length>0&&this.range.setEndBefore(s),i.closest(Qb).length>0&&this.range.setEndAfter(s)}var l=this.editor.$;if(this.range.collapsed){var c=l(r.createElement("span"));return c.attributes(Tb,zb),this.range.insertNode(c),this.anchor=c,void(this.focus=c)}var u=this.range.cloneRange();u.collapse(!0);var d=l(r.createElement("span"));d.attributes(Tb,Rb),u.insertNode(d),this.range.setStartAfter(d);var h=this.range.cloneRange();h.collapse(!1);var f=l(r.createElement("span"));f.attributes(Tb,Pb),h.insertNode(f),this.anchor=d,this.focus=f}}}},{key:"move",value:function(){if(this.focus&&this.anchor){if(this.editor.node,this.anchor===this.focus){var e=this.anchor,t=e.parent();if(!t)return;t.removeZeroWidthSpace(),t[0].normalize();var n=!1,i=e.prev(),r=e.next();if(i&&i.isCard()&&!i.isPseudoBlockCard()){var o=i.find(Qb);o.length>0&&(this.range.select(o,!0),this.range.collapse(!1),n=!0)}else if(r&&r.isCard()&&!r.isPseudoBlockCard()){var a=r.find(Zb);a.length>0&&(this.range.select(a,!0),this.range.collapse(!1),n=!0)}return n||(this.range.setStartBefore(e[0]),this.range.collapse(!0)),void(uy?(t[0].normalize(),e.remove()):(e.remove(),t[0].normalize()))}var s=this.anchor.parent();if(s&&(s.removeZeroWidthSpace(),this.range.setStartBefore(this.anchor),this.anchor.remove(),s[0].normalize()),(s=this.focus.parent())&&(s.removeZeroWidthSpace(),this.range.setEndBefore(this.focus),this.focus.remove(),s[0].normalize(),fy)){var l=window.getSelection();null==l||l.removeAllRanges(),null==l||l.addRange(this.range.base)}}}},{key:"getNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=n?e.clone(!0):e;if(!this.focus||!this.anchor)return i;var r=this.editor.$;if("left"===t||"center"===t){var o="center"!==t?this.anchor:this.focus,a=r("[".concat(Tb,"=").concat(o.attributes(Tb),"]"),i.get()),s=!1;i.traverse((function(e){if(e.equal(a))return a.remove(),void(s=!0);s&&e.remove()}),!0)}if("right"===t||"center"===t){var l="center"!==t?this.focus:this.anchor,c=r("[".concat(Tb,"=").concat(l.attributes(Tb),"]"),i.get()),u=!1;i.traverse((function(e){if(e.equal(c))return c.remove(),void(u=!0);u&&e.remove()}),!1)}return i}}]),e}();Jy.removeTags=function(e){return e.replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")};var ew=function(){function e(t,n){var i=this;jm(this,e),this.toRange=function(){return i.base},this.collapse=function(e){return i.base.collapse(e),i},this.cloneRange=function(){return e.from(i.editor,i.base.cloneRange())},this.select=function(e,t){return t?i.base.selectNodeContents(iy(e)?e[0]:e):i.base.selectNode(iy(e)?e[0]:e),i},this.getText=function(){return i.cloneContents().textContent},this.getClientRect=function(){var e=i.getClientRects().item(0);return e||(e=i.getBoundingClientRect()),e},this.enlargeFromTextNode=function(){var e=function(e,t,n){var r;if(e.nodeType===sy().Node.TEXT_NODE)if(0===t)switch(n){case"start":i.setStartBefore(e);break;case"end":i.setEndBefore(e)}else if(t===(null===(r=e.nodeValue)||void 0===r?void 0:r.length))switch(n){case"start":i.setStartAfter(e);break;case"end":i.setEndAfter(e)}};return e(i.startContainer,i.startOffset,"start"),e(i.endContainer,i.endOffset,"end"),i},this.shrinkToTextNode=function(){var e=function(e,t,n){if(e.nodeType===sy().Node.ELEMENT_NODE){var r=e.childNodes;if(0!==r.length){var o,a,s,l;if(t>0&&(o=r[t-1]),t<r.length&&(a=r[t]),o&&o.nodeType===sy().Node.TEXT_NODE)t=(null===(l=(s=o).nodeValue)||void 0===l?void 0:l.length)||0;if(a&&a.nodeType===sy().Node.TEXT_NODE&&(s=a,t=0),s)switch(n){case"start":i.setStart(s,t);break;case"end":i.setEnd(s,t)}}}};return e(i.startContainer,i.startOffset,"start"),e(i.endContainer,i.endOffset,"end"),i},this.enlargeToElementNode=function(e){var t=i.enlargeFromTextNode(),n=i.editor.node,r=function(r,o,a){var s,l=i.editor.$(r);if(!(l.type===sy().Node.TEXT_NODE||!e&&n.isBlock(l)||l.isEditable()))if(0===o){for(;!l.prev()&&(s=l.parent())&&(e||!n.isBlock(s))&&s.inEditor();)l=s;a?t.setStartBefore(l[0]):t.setEndBefore(l[0])}else if(o===l.children().length){for(;!l.next()&&(s=l.parent())&&(e||!n.isBlock(s))&&s.inEditor();)l=s;a?t.setStartAfter(l[0]):t.setEndAfter(l[0])}};return r(t.startContainer,t.startOffset,!0),r(t.endContainer,t.endOffset,!1),i},this.shrinkToElementNode=function(){for(var e,t,n=i.editor,r=n.node,o=n.$;i.startContainer.nodeType===sy().Node.ELEMENT_NODE&&(e=i.startContainer.childNodes[i.startOffset])&&(t=o(e))&&e.nodeType===sy().Node.ELEMENT_NODE&&!t.isCursor()&&!r.isVoid(e)&&!t.isCard();)i.setStart(e,0);for(;i.endContainer.nodeType===sy().Node.ELEMENT_NODE&&i.endOffset>0&&(e=i.endContainer.childNodes[i.endOffset-1])&&(t=o(e))&&e.nodeType===sy().Node.ELEMENT_NODE&&!r.isVoid(e)&&!t.isCursor()&&!t.isCard();)i.setEnd(e,e.childNodes.length);return i},this.createSelection=function(){var e=new Jy(i.editor,i);return e.create(),e},this.getSubRanges=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[];return i.commonAncestorNode.traverse((function(r){if(r.isText()){var o,a=r.get(),s=(null===(o=a.nodeValue)||void 0===o?void 0:o.length)||0,l=i.comparePoint(a,0),c=i.comparePoint(a,s),u=e.create(i.editor);if(l<0){if(c<0)return;0===c?u.setOffset(a,i.startOffset,s):u.setOffset(a,i.startOffset,i.endOffset)}else{if(0!==l)return;if(c<0)return;0===c?u.setOffset(a,0,s):u.setOffset(a,0,i.endOffset)}n.push(u)}else if(t&&r.isCard()&&!r.isEditableCard()){var d,h=i.editor.card.find(r);if(!h||!1===h.constructor.singleSelectable)return;var f=h.getCenter(),p=null===(d=f.get())||void 0===d?void 0:d.parentNode;if(!p)return;var g=f.index(),v=r.get(),m=i.comparePoint(p,g),b=i.comparePoint(p,g+1),y=e.create(i.editor);if(m<0){if(b<0)return;0===b?y.setOffset(v,i.startOffset,g+1):y.setOffset(v,i.startOffset,i.endOffset)}else{if(0!==m)return;if(b<0)return;0===b?y.setOffset(p,g,g+1):y.setOffset(p,g,i.endOffset)}n.push(y)}})),n},this.setOffset=function(e,t,n){return iy(e)&&(e=e[0]),i.setStart(e,t),i.setEnd(e,n),i},this.findElementsInSimpleRange=function(){var e=i.startContainer,t=i.endContainer,n=i.startOffset,r=i.endOffset,o=i.collapsed,a=[];if(e!==t||!0===o||e.nodeType===sy().Node.TEXT_NODE)return a;for(var s=e.childNodes,l=n;l<r;l++)a.push(s[l]);return a},this.inCard=function(){var e=i.startNode.closest($b);return e&&e.length>0},this.getStartOffsetNode=function(){var e=i.startContainer,t=i.startOffset;return e.nodeType===sy().Node.ELEMENT_NODE&&(e.childNodes[t]||e.childNodes[t-1])||e},this.getEndOffsetNode=function(){var e=i.endContainer,t=i.endOffset;return e.nodeType===sy().Node.ELEMENT_NODE&&(e.childNodes[t]||e.childNodes[t-1])||e},this.scrollIntoView=function(){var e=i.endNode.get();py&&e&&e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},this.scrollRangeIntoView=function(){var e=i.getEndOffsetNode(),t=e.nodeType===sy().Node.TEXT_NODE?e.parentNode:e,n=i.collapsed?t.getBoundingClientRect():i.getClientRect(),r=window.innerHeight;(n.bottom>=r||n.bottom<=0)&&t.scrollIntoView({block:"center"})},this.scrollIntoViewIfNeeded=function(e,t){var n=i.editor.$;if(i.collapsed)e.scrollIntoView(t,n(i.getEndOffsetNode()));else{var r=i.getStartOffsetNode(),o=i.getEndOffsetNode();e.scrollIntoView(t,n(r)),e.inViewport(t,n(o))||e.scrollIntoView(t,n(o))}},this.containsCard=function(){var e=i.collapsed,t=i.commonAncestorNode;return!e&&(3!==t.type&&t.find($b).length>0||t.closest($b).length>0)},this.addOrRemoveBr=function(e){var t,n,r,o,a=i.editor.$,s=i.editor.block.closest(i.commonAncestorNode);if(s.find("br").each((function(t){var n,i,r,o,s=a(t);if((!s.prev()||(null===(n=s.parent())||void 0===n?void 0:n.hasClass("data-list-item"))&&(null===(i=s.parent())||void 0===i||null===(r=i.first())||void 0===r?void 0:r.equal(s.prev())))&&s.next()&&"br"!==s.next().name&&![zb,Rb,Pb].includes(s.next().attributes(Tb))||!s.next()&&s.prev()&&"br"!==(null===(o=s.prev())||void 0===o?void 0:o.name)){var l,c,u;if(e&&s.prev()&&(!(null===(l=s.parent())||void 0===l?void 0:l.hasClass("data-list-item"))||!(null===(c=s.parent())||void 0===c||null===(u=c.first())||void 0===u?void 0:u.equal(s.prev()))))return;s.remove()}})),!s.first()||1===s.children().length&&s.hasClass("data-list-item")&&(null===(t=s.first())||void 0===t?void 0:t.isCard()))return s.append(a("<br />")),i;2===s.children().length&&s.hasClass("data-list-item")&&(null===(n=s.first())||void 0===n?void 0:n.isCard())&&["cursor","anchor","focus"].includes((null===(r=s.last())||void 0===r?void 0:r.attributes(Tb))||"")&&(null===(o=s.first())||void 0===o||o.after("<br />"));return i},this.getPrevNode=function(){i.enlargeFromTextNode();var e=i.startNode,t=i.startOffset;if(!e.isText()){var n=e.children();if(0!==n.length)return n.eq(t-1)}},this.getNextNode=function(){i.enlargeFromTextNode();var e=i.endNode,t=i.endOffset;if(!e.isText()){var n=e.children();if(0!==n.length)return n.eq(t)}},this.editor=t,this.base=n}return Rm(e,[{key:"cloneContents",value:function(){return this.base.cloneContents()}},{key:"deleteContents",value:function(){return this.base.deleteContents()}},{key:"extractContents",value:function(){return this.base.extractContents()}},{key:"getBoundingClientRect",value:function(){return this.base.getBoundingClientRect()}},{key:"getClientRects",value:function(){return this.base.getClientRects()}},{key:"insertNode",value:function(e){return iy(e)&&(e=e[0]),this.base.insertNode(e)}},{key:"isPointInRange",value:function(e,t){return iy(e)&&(e=e[0]),this.base.isPointInRange(e,t)}},{key:"comparePoint",value:function(e,t){return iy(e)&&(e=e[0]),this.base.comparePoint(e,t)}},{key:"setEnd",value:function(e,t){return iy(e)&&(e=e[0]),this.base.setEnd(e,t)}},{key:"setEndAfter",value:function(e){return iy(e)&&(e=e[0]),this.base.setEndAfter(e)}},{key:"setEndBefore",value:function(e){return iy(e)&&(e=e[0]),this.base.setEndBefore(e)}},{key:"setStart",value:function(e,t){return iy(e)&&(e=e[0]),this.base.setStart(e,t)}},{key:"setStartAfter",value:function(e){return iy(e)&&(e=e[0]),this.base.setStartAfter(e)}},{key:"setStartBefore",value:function(e){return iy(e)&&(e=e[0]),this.base.setStartBefore(e)}},{key:"toString",value:function(){return this.base.toString()}},{key:"deepCut",value:function(){this.collapsed||this.extractContents();var e=this.startNode;if(!e.isEditable()){var t=e;if(t&&!t.isEditable()){for(var n=t.parent();n&&!n.isEditable();)t=n,n=n.parent();this.setEndAfter(t[0]);var i=this.extractContents();this.insertNode(i),this.collapse(!0)}}}},{key:"equal",value:function(e){return this.startContainer===e.startContainer&&this.startOffset===e.startOffset&&this.endContainer===e.endContainer&&this.endOffset===e.endOffset}},{key:"getRootBlock",value:function(){if(this.startNode.isEditable())return this.startNode.children().eq(this.startOffset);for(var e=this.startNode;(null===(t=e)||void 0===t?void 0:t.parent())&&!e.parent().isEditable();){var t;e=e.parent()}return e}},{key:"toPath",value:function(){var e=this.cloneRange(),t=e.commonAncestorNode;if(!t.isRoot()&&!t.inEditor())return[];e.shrinkToTextNode();var n=function(e,t){for(var n=e,i=[];n&&n.length>0&&!n.isRoot();){for(var r=n.prev(),o=0;r&&r.length>0;)r.attributes("data-transient-element")||r.attributes(Tb)===Db||o++,r=r.prev();i.unshift(o),n=n.parent()}return i.push(t),i};return[n(e.startNode,e.startOffset),n(e.endNode,e.endOffset)]}},{key:"collapsed",get:function(){return this.base.collapsed}},{key:"endOffset",get:function(){return this.base.endOffset}},{key:"startOffset",get:function(){return this.base.startOffset}},{key:"startContainer",get:function(){return this.base.startContainer}},{key:"endContainer",get:function(){return this.base.endContainer}},{key:"commonAncestorContainer",get:function(){return this.base.commonAncestorContainer}},{key:"startNode",get:function(){return this.editor.$(this.base.startContainer)}},{key:"endNode",get:function(){return this.editor.$(this.base.endContainer)}},{key:"commonAncestorNode",get:function(){return this.editor.$(this.base.commonAncestorContainer)}}]),e}();function tw(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}ew.create=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=arguments.length>2?arguments[2]:void 0;return t=i?n.caretRangeFromPoint(i.x,i.y):n.createRange(),ew.from(e,t)},ew.from=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!$y(t)){var n=Wy(t)?t:t.getSelection();if(!(n&&n.rangeCount>0))return null;t=n.getRangeAt(0)}return new ew(e,t)},ew.fromPath=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.container,i=t[0].slice(),r=t[1].slice(),o=i.pop(),a=r.pop(),s=function(e){for(var t=n,i=0;i<e.length;i++){var r=e[i];r<0&&(r=0);for(var o=void 0,a=t.first(),s=0;a&&a.length>0;)if(a.attributes("data-transient-element")||a.attributes(Tb)===Db)a=a.next();else{if(s===r||!a.next()){o=a;break}s++,a=a.next()}if(!o)break;t=o}return t},l=function(e,t,n,i){if(null!==n){var r,o;if(i<0&&(i=0),n.nodeType===sy().Node.ELEMENT_NODE&&i>n.childNodes.length&&(i=n.childNodes.length),n.nodeType===sy().Node.TEXT_NODE&&i>((null===(r=n.nodeValue)||void 0===r?void 0:r.length)||0))i=(null===(o=n.nodeValue)||void 0===o?void 0:o.length)||0;t[e](n,i)}},c=s(i),u=s(r),d=ew.create(e,document);return l("setStart",d,c.get(),o?parseInt(o.toString()):0),l("setEnd",d,u.get(),a?parseInt(a.toString()):0),d};tw(".data-drop-cursor {\n\tposition: absolute;\n\twidth: 2px;\n\tbackground-color: #347EFF;\n}\n\ndiv.data-drag-image {\n\tbackground-color: #f9f9f9;\n}");var nw=function(){function e(t,n){jm(this,e),this.x=0,this.y=0,this.doc=document,this.isCardLeftRange=!1,this.options={className:"data-drop-cursor"},this.engine=t,this.options=_m(_m({},this.options),n)}return Rm(e,[{key:"getCaretRange",value:function(){var e=this.doc,t=this.x,n=this.y;if(void 0!==e.caretRangeFromPoint){var i=ew.create(this.engine,e,{x:t,y:n});if(i)return i}if(event&&void 0!==event.rangeParent){var r=ew.create(this.engine,e);return r.setStart(event.rangeParent,event.rangeOffset),r.collapse(!0),r}}},{key:"getCard",value:function(){return this.targetCard||this.caretCard}},{key:"parseEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move");var t=this.engine.card;this.x=e.clientX,this.y=e.clientY;var n=this.engine.$(e.target||[]);this.doc=n.document||document,this.targetCard=t.find(n),this.caretRange=this.getCaretRange(),this.caretCard=this.caretRange?t.find(this.caretRange.commonAncestorContainer):void 0}},{key:"getRange",value:function(){var e,t=this.caretRange,n=this.doc,i=this.x,r=this.getCard();if(r&&r.root.length>0){e=ew.create(this.engine,n);var o=r.root.getBoundingClientRect()||{left:0,right:0},a=(o.left+o.right)/2;e.select(r.root.get()),a<i?(e.collapse(!1),this.isCardLeftRange=!1):(e.collapse(!0),this.isCardLeftRange=!0)}return this.range=e||t,this.range}},{key:"getRect",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,i=this.isCardLeftRange,r=this.range,o=this.getCard();if(o&&o.root.length>0&&r){if(i){r.setEnd(r.commonAncestorContainer,r.endOffset+1);var a=r.getBoundingClientRect(),s=a.left,l=a.bottom,c=a.top;return r.setEnd(r.commonAncestorContainer,r.endOffset-1),{x:s-n,y:c,height:l-c}}r.setStart(r.commonAncestorContainer,r.startOffset-1);var u=r.getBoundingClientRect(),d=u.right,h=u.top,f=u.bottom;return r.setStart(r.commonAncestorContainer,r.startOffset+1),{x:d-n,y:h,height:f-h}}var p=null===(e=this.range)||void 0===e?void 0:e.getBoundingClientRect();if(0===(null===(t=p)||void 0===t?void 0:t.height)){var g,v=null===(g=this.range)||void 0===g?void 0:g.startContainer;p=v.getBoundingClientRect()}var m=p||{},b=m.left,y=m.top,w=m.bottom;return{x:b,y:y,height:(w||0)-(y||0)}}},{key:"getCursor",value:function(){var e=this.options.className;return this.engine.$("body > div.".concat(e))}},{key:"removeCursor",value:function(){this.getCursor().remove()}},{key:"setCursor",value:function(){this.removeCursor();var e=this.engine.$,t=this.options.className,n=e('<div class="'.concat(t,'" />'));e(document.body).append(n)}}]),e}(),iw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jm(this,e),this.keydownRange=null,this.events=[],this.engine=t,this.isComposing=!1,this.isSelecting=!1,this.dragoverHelper=new nw(t),this.options=n}return Rm(e,[{key:"isCardInput",value:function(e){for(var t=e.target?this.engine.$(e.target):null;t;){if(t.isEditable())return!1;if("center"===t.attributes(Wb))return!0;if(t.attributes(Tb)===Db)return!0;var n=t.parent();if(!n)break;t=n}return!1}},{key:"onInput",value:function(e){var t=this,n=this.options.bindInput;n&&!n()||(this.onContainer("compositionstart",(function(){t.engine.readonly||(console.log(t.engine.change.getRange().base),t.isComposing=!0)})),this.onContainer("compositionend",(function(){t.engine.readonly||(t.isComposing=!1)})),this.onContainer("input",(function(n){t.engine.readonly||t.isCardInput(n)||window.setTimeout((function(){t.isComposing||e(n)}),10)})))}},{key:"onSelect",value:function(e){var t=this,n=this.options.bindSelect;n&&!n()||(this.onContainer("mousedown",(function(e){t.isCardInput(e)||(t.isSelecting=!0)})),this.onDocument("mouseup",(function(n){t.isSelecting&&(t.isSelecting=!1,window.setTimeout((function(){return e(n)}),10))})),this.onContainer("keydown",(function(){var e=ew.from(t.engine);t.keydownRange=e})),this.onContainer("keyup",(function(n){if(!t.engine.readonly&&!t.isCardInput(n)&&(Nm("left",n)||Nm("right",n)||Nm("up",n)||Nm("down",n)||"Meta"===n.key||Nm("shift+left",n)||Nm("shift+right",n)||Nm("shift+up",n)||Nm("shift+down",n)||Nm("ctrl+b",n)||Nm("ctrl+f",n)||Nm("ctrl+n",n)||Nm("ctrl+p",n)||Nm("ctrl+a",n)||Nm("ctrl+e",n)||Nm("home",n)||Nm("end",n))){var i=ew.from(t.engine);if(t.keydownRange&&i&&i.equal(t.keydownRange))return;t.isComposing||e(n)}})))}},{key:"onPaste",value:function(e){var t=this,n=this.options.bindPaste;if(!n||n()){var i=!1;this.onContainer("keydown",(function(e){t.engine.readonly||(Nm("mod",e)&&Nm("shift",e)&&Nm("v",e)||(i=!1),(Nm("mod+shift+v",e)||Nm("mod+alt+shift+v",e))&&(i=!0))})),this.onContainer("paste",(function(n){if(!t.engine.readonly&&!t.isCardInput(n)){n.preventDefault();var r=t.engine.clipboard.getData(n),o=i;i=!1,e(_m(_m({},r),{},{isPasteText:o}))}}))}}},{key:"onDrop",value:function(e){var t=this,n=this.options.bindDrop;if(!n||n()){var i,r,o,a=this.engine.$,s=function(e){if(e.target){e.stopPropagation(),t.dragoverHelper.setCursor();var n=a(e.target),o=n.attributes("drag-card-trigger");if(i=t.engine.card.find(o||n)){var s,l;if(null===(s=i.toolbarModel)||void 0===s||s.hideCardToolbar(),(r=i.find("img.data-drag-image")).length>0)r=t.engine.node.clone(r);else{r=a('<div class="data-drag-image" />');var c=i.root.get();c&&r.css({width:c.clientWidth+"px",height:c.clientHeight+"px"})}r.css({position:"absolute",top:"-10000px",right:"-10000px"}),a(document.body).append(r),null===(l=e.dataTransfer)||void 0===l||l.setDragImage(r[0],0,0)}}};this.onRoot("dragstart",s),this.onContainer("dragstart",s),this.onContainer("dragover",(function(e){var n=t.dragoverHelper,i=n.getCursor();if(0!==i.length){n.parseEvent(e),o=n.getRange();var r=n.getRect();i.css({height:r.height+"px",top:Math.round(window.pageYOffset+(r.y||0))+"px",left:Math.round(window.pageXOffset+(r.x||0))+"px"})}else t.dragoverHelper.setCursor()})),this.onContainer("dragleave",(function(){t.dragoverHelper.removeCursor()})),this.onContainer("dragend",(function(){t.dragoverHelper.removeCursor(),r&&(r.remove(),r=void 0)})),this.onContainer("drop",(function(n){n.preventDefault(),t.dragoverHelper.removeCursor(),r&&(r.remove(),r=void 0);var a=n.dataTransfer,s=[];try{a&&a.items&&a.items.length>0?Array.from(a.items).forEach((function(e){if("file"===e.kind){var t=e.getAsFile();t&&s.push(t)}})):a&&a.files&&a.files.length>0&&(s=Array.from(a.files))}catch(l){a&&a.files&&a.files.length>0&&(s=Array.from(a.files))}e({event:n,range:o,card:i,files:s}),i=void 0}))}}},{key:"onDocument",value:function(e,t,n){document.addEventListener(e,t,n),this.events.push({type:"document",eventType:e,listener:t,rewrite:n})}},{key:"onWindow",value:function(e,t,n){window.addEventListener(e,t,n),this.events.push({type:"window",eventType:e,listener:t,rewrite:n})}},{key:"onContainer",value:function(e,t){this.engine.container.on(e,t),this.events.push({type:"container",eventType:e,listener:t,rewrite:!1})}},{key:"onRoot",value:function(e,t){this.engine.root.on(e,t),this.events.push({type:"root",eventType:e,listener:t,rewrite:!1})}},{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){"window"===t.type?window.removeEventListener(t.eventType,t.listener,t.rewrite):"document"===t.type?document.removeEventListener(t.eventType,t.listener,t.rewrite):"container"===t.type?e.engine.container.off(t.eventType,t.listener):"root"===t.type&&e.engine.root.off(t.eventType,t.listener)}))}}]),e}(),rw=function(e,t,n,i,r){if("paragraph"===t&&(t="p"),!e)return t;if("card"===t||r)return t;for(var o=0;o<e.length;o++){var a=e[o],s=a[0],l=a[1];if("string"==typeof s&&t===s)return l;if("object"===zm(s)){var c=Object.keys(s)[0];if(t!==c)continue;for(var u=s[c],d=Object.keys(n),h=0;h<d.length;h++){var f=d[h];if(u[f]){if("string"==typeof u[f]&&u[f]===n[f])return delete n[f],l;if(Array.isArray(u[f])&&u[f].indexOf(n[f])>=0)return delete n[f],l}}for(var p=u.style||{},g=Object.keys(i),v=0;v<g.length;v++){var m=g[v];if(p[m]){if("string"==typeof p[m]&&p[m]===i[m])return delete i[m],l;if(Array.isArray(p[m])&&p[m].indexOf(i[m])>=0)return delete i[m],l}}}}return t},ow=function(){function e(t){jm(this,e),this.source=t}return Rm(e,[{key:"toHTML",value:function(){var e=Ty(this.source);return(e=e.replace(/\n/g,"</p><p>").replace(/<p><\/p>/g,"<p><br /></p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>=0&&(e="<p>".concat(e,"</p>")),e}}]),e}(),aw={"font-size":"14px",color:"#262626","line-height":"24px","letter-spacing":".05em","outline-style":"none","overflow-wrap":"break-word"},sw=function(e){var t="";return Object.keys(e).forEach((function(n){if("style"!==n){var i=e[n].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");t+=" ".concat(n,'="').concat(i,'"')}})),t.trim()},lw=function(e){var t="";return Object.keys(e).forEach((function(n){var i=Ty(e[n]);/^(padding|margin|text-indent)/.test(n)&&0===jy(i)||(/[^a-z]color$/.test(n)&&(i=Ey(i)),t+=" ".concat(n,": ").concat(i,";"))})),t.trim()},cw=function(){function e(t,n,i){jm(this,e),this.editor=n;var r=this.editor.$;if("string"==typeof t){t=(t=(t=t.replace(/<a\s{0,1000}\/>/gi,"<a></a>")).replace(/<a(\s[^>]+?)\/>/gi,(function(e,t){return"<a".concat(t,"></a>")}))).replace(/<p(>|\s+[^>]*>)/gi,"<paragraph$1").replace(/<\/p>/gi,"</paragraph>"),t=Py(t);var o=(new(sy().DOMParser)).parseFromString(t,"text/html");this.root=r(o.body)}else iy(t)?this.root=t:this.root=r(t);i&&i(this.root)}return Rm(e,[{key:"walkTree",value:function(e,t,n,i,r){for(var o=this,a=e.first(),s=this.editor.node;a;){if(a.isElement()){if("continue"===function(){var e=a.name,s=a.attributes(),l=a.css();if(delete s.style,a.isCursor()&&(e=s[Tb].toLowerCase(),s={},l={}),["left","right"].indexOf(s[Wb])>=0)return a=a.next(),"continue";if(s[Ub]||s[Yb]){e="card";var c=s["data-card-value"],u=_m({},s);s={type:s[Vb],name:(s[Ub]||s[Yb]).toLowerCase()},Object.keys(u).forEach((function(e){0===e.indexOf("data-")&&0!==e.indexOf("data-card")&&(s[e]=u[e])})),void 0!==c&&(s.value=c),l={}}if((e=rw(t,e,s,l,i),"center"!==s[Wb])&&(n.onOpen&&!1===n.onOpen(a,e,s,l)))return a=a.next(),"continue";("card"!==e||r)&&o.walkTree(a,t,n,i,r),"center"!==s[Wb]&&n.onClose&&n.onClose(a,e,s,l)}())continue}else if(a.isText()){var l=a[0].nodeValue?Ty(a[0].nodeValue):"";""===l&&s.isBlock(a.parent())&&(a.prev()||(l=l.replace(/^[ \n]+/,"")),a.next()||(l=l.replace(/[ \n]+$/,"")));var c=a.prev(),u=a.next();c&&s.isBlock(c)&&u&&s.isBlock(u)&&""===l.trim()&&(l=l.trim()),l=l.replace(/\u200B/g,""),n.onText&&n.onText(a,l)}a=a.next()}}},{key:"toValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],a=this.editor.$,s=this.editor.node;this.editor.trigger("paser:value-before",this.root),this.walkTree(this.root,n,{onOpen:function(n,i,r,l){if(t&&r[Tb]!==jb){var c=n;n.name!==i&&((c=a("<".concat(i," />"))).attributes(r),c.css(l));var u=t.getType(c);if(void 0===u)return;t.filterAttributes(i,r,u),t.filterStyles(i,l,u)}if(!1===e.editor.trigger("paser:value",n,r,l,o))return!1;if(o.push("<"),o.push(i),Object.keys(r).length>0&&o.push(" "+sw(r)),Object.keys(l).length>0){var d=lw(l);""!==d&&(o.push(' style="'),o.push(d),o.push('"'))}s.isVoid(i,t||void 0)?o.push(" />"):o.push(">")},onText:function(e,t){i&&t.length>1&&(t=t.replace(/[\u00a0 ]+/g,(function(e){var t=[];e=e.replace(/\u00a0/g," ");for(var n=0;n<e.length;n++)t[n]=n%2==0?e[n]:" ";return t.join("")}))),o.push(t)},onClose:function(e,n,i,r){if(!s.isVoid(n,t||void 0)){if(t){var l=e;e.name!==n&&((l=a("<".concat(n," />"))).attributes(i),l.css(r));var c=t.getType(l);if(void 0===c)return;t.filterAttributes(n,i,c),t.filterStyles(n,r,c)}o.push("</".concat(n,">"))}}}),this.editor.trigger("paser:value-after",o);var l=o.join("");return r?Py(l):l}},{key:"toHTML",value:function(t,n){var i=this.editor.$,r=i("<div />");return t&&n?(i(t).append(this.root).css(aw),r.append(n)):r.append(this.root),this.editor.trigger("paser:html-before",this.root),r.traverse((function(e){var t=e.get();t&&t.nodeType===sy().Node.ELEMENT_NODE&&"none"===t.style["user-select"]&&t.parentNode&&t.parentNode.removeChild(t)})),this.editor.trigger("paser:html",r),r.find("p").css(aw),this.editor.trigger("paser:html-after",r),{html:r.html(),text:new e(r,this.editor).toText(null,!0)}}},{key:"toDOM",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.toValue(e,t,!1,!0),i=(new DOMParser).parseFromString(n,"text/html"),r=i.createDocumentFragment(),o=i.body.childNodes;o.length>0;)r.appendChild(o[0]);return r}},{key:"toText",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,r=[];return this.walkTree(this.root,n,{onOpen:function(e,t){"br"===t&&r.push("\n");var n=e[0];if("li"===e.name){if(e.hasClass("data-list-item"))return;var i=e.parent(),o=null==i?void 0:i.css("listStyleType");if("ol"===(null==i?void 0:i.name))for(var a=i[0].start,s=a||1,l=i[0].childNodes,c=-1,u=0;u<l.length&&"LI"===l[u].nodeName&&c++&&l[u]!==n;u++)r.push("".concat(Uy(o,s+c).toString(),". "));else"ul"===(null==i?void 0:i.name)&&r.push(Uy(o)+" ")}},onText:function(e,t){t=(t=Ay(t)).replace(/\u00a0/g," "),r.push(t)},onClose:function(n,i){("p"===i||e.editor.node.isBlock(n,t||void 0))&&r.push("\n")}},!1,i),r.join("").replace(/\n{2,}/g,"\n").trim()}}]),e}(),uw=function(){function e(t,n){jm(this,e),this.source=t,this.engine=n,this.schema=this.engine.schema.clone()}return Rm(e,[{key:"parser",value:function(){var e=this,t=this.engine.conversion.clone();return this.schema.add([{name:"span",type:"mark",attributes:{"data-type":"*",style:{"font-size":"@length"}}},{name:"p",type:"block",attributes:{"data-type":"*"}},{type:"mark",attributes:{id:"*"}},{type:"block",attributes:{id:"*"}}]),this.engine.trigger("paste:schema",this.schema),new cw(this.source,this.engine,(function(t){e.engine.trigger("paste:origin",t)})).toDOM(this.schema,t.getValue())}},{key:"getDefaultStyle",value:function(){return[{color:Hm(this.engine.container.css("color")).toHex()},{"background-color":Hm("white").toHex()},{"font-size":this.engine.container.css("font-size")}]}},{key:"commonNormalize",value:function(e){var t=this,n=this.getDefaultStyle(),i=this.engine,r=i.$,o=i.inline,a=this.engine.node,s=r(e).allChildren();s.forEach((function(e){var i=r(e);i.isCard()||(i.isElement()&&n.forEach((function(e){var t,n=Object.keys(e)[0],r=e[n],o=null===(t=i.get())||void 0===t?void 0:t.style[n];o&&(/color$/.test(n)&&(o=Hm(o).toHex()),o===r&&i.css(n,""))})),a.removeMinusStyle(i,"text-indent"),["ol","ul"].includes(i.name)&&i.css("padding-left",""),i.isElement()&&(i.attributes("style")||i.removeAttributes("style")),"span"===i.name&&0===Object.keys(i.attributes()).length&&0===Object.keys(i.css()).length&&(""===i.text().trim()||i.first()&&(a.isMark(i.first(),t.schema)||a.isBlock(i.first(),t.schema)))?a.unwrap(i):a.isBlock(i,t.schema)&&t.engine.block.brToBlock(i))})),(s=r(e).allChildren()).forEach((function(e){var n,i,s,l,c,u=r(e);if(u.parent())if(/^docs-internal-guid-/.test(u.attributes("id")))a.unwrap(u);else if(!u.attributes(Yb))if(!a.isBlock(u,t.schema)||"p"===u.attributes("data-type")||a.isVoid(u,t.schema)||""!==a.html(u)){if("p"===u.attributes("data-type")&&u.removeAttributes("data-type"),"li"===u.name&&["ol","ul"].indexOf((null===(n=u.parent())||void 0===n?void 0:n.name)||"")<0){var d=r("<ul />");return u.before(d),void d.append(u)}if(["ol","ul"].indexOf(u.name)>=0&&["ol","ul"].indexOf((null===(i=u.parent())||void 0===i?void 0:i.name)||"")>=0){var h=r("<li />");return u.before(h),void h.append(u)}if(["ol","ul"].indexOf(u.name)>=0&&"li"===(null===(s=u.parent())||void 0===s?void 0:s.name)&&(u.prev()||u.next())){var f,p,g=u.parent(),v=null==g||null===(f=g.parent())||void 0===f?void 0:f.hasClass("data-list");return null==g||g.children().each((function(e){var t=r(e);if(!a.isEmptyWithTrim(t)){var n=["ol","ul"].indexOf(t.name)>=0;p&&!n||(p=r(v?'<li class="data-list-item" />':"<li />"),g.before(p)),p.append(e),n&&(p=null)}})),void(null==g||g.remove())}if("p"===u.name&&["ol","ul"].indexOf((null===(l=u.parent())||void 0===l?void 0:l.name)||"")>=0)a.replace(u,r("<li />"));else{var m;if(a.isBlock(u,t.schema)&&!a.isVoid(u,t.schema)&&""===a.html(u).trim()&&(a.isRootBlock(u,t.schema)||"li"===u.name)&&a.html(u,"<br />"),a.isRootBlock(u,t.schema)&&"li"===(null===(c=u.parent())||void 0===c?void 0:c.name))return 1===u.children().length&&"br"===(null===(m=u.first())||void 0===m?void 0:m.name)||u.after("<br />"),void a.unwrap(u);a.isInline(u)&&o.repairCursor(u),a.removeSide(u)}}else u.remove()}))}},{key:"normalize",value:function(){var e=this,t=this.engine.$,n=this.engine.node,i=this.parser();this.commonNormalize(i);var r=this.engine.change.getRange(),o=r.commonAncestorNode,a=this.engine.inline.closest(o);if(n.isInline(a))return this.removeElementNodes(t(i)),i;if(o.isText()&&r.startContainer===r.endContainer){var s=o[0].nodeValue,l=null==s?void 0:s.substr(0,r.startOffset),c=null==s?void 0:s.substr(r.endOffset);if(/\[.*?\]\($/.test(l||"")&&/^\)/.test(c||""))return this.removeElementNodes(t(i)),i}var u=t(i).allChildren();return u.forEach((function(n){var i=t(n);i.parent()&&e.engine.trigger("paste:each",i)})),(u=t(i).allChildren()).forEach((function(i){var r=t(i);e.engine.trigger("paste:each-after",r),"pre"===r.name&&r.find(Gb).length>0&&n.unwrap(r)})),n.normalize(t(i)),i.normalize(),(u=t(i).allChildren()).forEach((function(n){var i=t(n);["ol","ul"].includes(i.name)&&e.engine.list.addStart(i)})),this.engine.block.generateRandomIDForDescendant(i,!0),i}},{key:"removeElementNodes",value:function(e){var t=this,n=this.engine.$;e.allChildren().forEach((function(e){var i=n(e);i.isElement()&&t.engine.node.unwrap(i)}))}}]),e}(),dw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jm(this,e),this.changeTimer=null,this.valueCached=null,this.rangePathBeforeCommand=null,this.marks=[],this.blocks=[],this.inlines=[],this.options=n,this.engine=t,this.event=new iw(t,{}),this.onChange=this.options.onChange||function(){},this.onSelect=this.options.onSelect||function(){},this.onSetValue=this.options.onSetValue||function(){},this.initNativeEvents()}return Rm(e,[{key:"_change",value:function(){if(!this.isComposing()){this.engine.card.gc();var e=this.getValue({ignoreCursor:!0});this.valueCached&&e===this.valueCached||(this.onChange(e),this.valueCached=e)}}},{key:"change",value:function(){var e=this,t=this.getRange().startNode.closest(Lb);if(t.length>0){var n=this.engine.card.find(t,!0);(null==n?void 0:n.onChange)&&(null==n||n.onChange(t))}this.clearChangeTimer(),this.changeTimer=setTimeout((function(){e._change()}),200)}},{key:"clearChangeTimer",value:function(){this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"getRange",value:function(){var e=this.engine.container,t=e.window,n=ew.from(this.engine,t,!1);return n||(n=ew.create(this.engine,t.document).select(e,!0).shrinkToElementNode().collapse(!1)),n}},{key:"select",value:function(e){var t=this.engine,n=t.container,i=t.mark,r=t.block,o=t.inline,a=t.node,s=n.window,l=null==s?void 0:s.getSelection();if(e.collapsed){var c,u,d=e.startNode,h=e.startOffset;(d.isElement()&&1===h&&1===d.children().length||2===h&&2===d.children().length&&(null===(c=d.first())||void 0===c?void 0:c.isCard()))&&"br"===(null===(u=d.last())||void 0===u?void 0:u.name)&&(e.setStart(d,h-1),e.collapse(!0))}var f=e.cloneRange().shrinkToTextNode(),p=f.startNode,g=f.endNode,v=f.startOffset,m=f.endOffset,b=p.prev(),y=g.next();if(b&&!b.isCard()&&!a.isVoid(b)&&a.isInline(b)){var w=p.text();/^\u200B/g.test(w)&&0===v&&(e.setStart(g,v+1),e.collapsed&&e.collapse(!0))}if(y&&!y.isCard()&&!a.isVoid(y)&&a.isInline(y)){var k=g.text();/\u200B$/g.test(k)&&m===k.length&&(e.setEnd(g,m-1),e.collapsed&&e.collapse(!1))}var x,C,M=o.closest(p);M.isCard()||!a.isInline(M)||a.isVoid(M)||(p.isText()&&!p.prev()&&(null===(x=p.parent())||void 0===x?void 0:x.equal(M))&&0===v&&(e.setStart(p,v+1),e.collapsed&&e.collapse(!0)),g.isText()&&!g.next()&&(null===(C=g.parent())||void 0===C?void 0:C.equal(M))&&m===g.text().length&&(e.setEnd(g,m-1),e.collapsed&&e.collapse(!1)));return l&&(e.collapsed||l.rangeCount>0&&!e.equal(l.getRangeAt(0)))&&(l.removeAllRanges(),l.addRange(e.toRange())),this.marks=i.findMarks(e),this.blocks=r.findBlocks(e),this.inlines=o.findInlines(e),this}},{key:"focus",value:function(e){var t,n=this.getRange();return void 0!==e&&n.select(this.engine.container,!0).shrinkToElementNode().collapse(e),this.select(n),null===(t=this.engine.container.get())||void 0===t||t.focus(),this}},{key:"blur",value:function(){var e;return null===(e=this.engine.container.get())||void 0===e||e.blur(),this}},{key:"isComposing",value:function(){return this.event.isComposing}},{key:"isSelecting",value:function(){return this.event.isSelecting}},{key:"setValue",value:function(e,t){var n=this,i=this.getRange();if(""===e)i.setStart(this.engine.container[0],0),i.collapse(!0),this.select(i);else{var r=this.engine,o=r.schema,a=r.conversion,s=new cw(e,this.engine,(function(e){e.allChildren().forEach((function(i){n.engine.mark.removeEmptyMarks(e),n.engine.node.isInline(i)&&n.engine.inline.repairCursor(i),t&&t(i)}))})),l=this.engine,c=l.container,u=l.history;c.html(s.toValue(o,a.getValue(),!1,!0)),c.allChildren().forEach((function(e){n.engine.node.isInline(e)&&n.engine.inline.repairCursor(e)})),this.engine.block.generateDataIDForDescendant(c.get()),this.engine.card.render();var d=c.find(Hb),h=new Jy(this.engine,i);d.length>0&&(h.anchor=d,h.focus=d);var f=c.find(Bb),p=c.find(Fb);f.length>0&&p.length>0&&(h.anchor=f,h.focus=p),h.anchor&&h.focus&&(h.move(),this.select(i),this.onSelect()),this.onSetValue(),u&&u.clear()}}},{key:"getOriginValue",value:function(){return new cw(this.engine.container.clone(!0),this.engine).toValue(this.engine.schema)}},{key:"getValue",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.ignoreCursor||this.isComposing())e=this.getOriginValue();else{var n,i,r=this.getRange();r.inCard()||(i=r.createSelection()),e=this.getOriginValue(),null===(n=i)||void 0===n||n.move()}return Fy(e)}},{key:"cacheRangeBeforeCommand",value:function(){this.rangePathBeforeCommand=this.getRange().toPath()}},{key:"getRangePathBeforeCommand",value:function(){var e=this.rangePathBeforeCommand;return this.rangePathBeforeCommand=null,e}},{key:"isEmpty",value:function(){var e=this.engine,t=e.container;return e.node.isEmptyWithTrim(t)}},{key:"repairInput",value:function(e,t){var n=t.commonAncestorNode,i=this.engine.card.find(n),r=this.engine,o=r.node,a=r.mark,s=r.change;if(i&&i.constructor.cardType===ky.INLINE)if(i.isLeftCursor(n)){var l=n.closest(Zb),c=l.text().replace(/\u200B/g,"");c&&(c=escape(c),t.setStartBefore(i.root),t.collapse(!0),this.select(t),o.html(l,"&#8203;"),o.insertText(c))}else if(i.isRightCursor(n)){var u=n.closest(Qb),d=u.text().replace(/\u200B/g,"");d&&(d=escape(d),t.setEndAfter(i.root),t.collapse(!1),this.select(t),o.html(u,"&#8203;"),o.insertText(d))}else this.getSafeRange(t);var h=t.cloneRange().shrinkToTextNode(),f=h.startNode,p=h.startOffset,g=f.parent();if(f.isText()&&g&&o.isMark(g)){var v=f.get(),m=f.text();if(p===m.length&&e.data&&0===e.inputType.indexOf("insert")){for(var b=g,y=[];b&&o.isMark(b);){var w,k,x=a.findPlugin(b);x&&!x.followStyle&&y.push(b);var C=null===(w=b=b.parent())||void 0===w?void 0:w.parent();if((null===(k=b)||void 0===k?void 0:k.next())&&C&&o.isMark(C))break}var M=f.next();if(y.forEach((function(e,t){if(g.equal(e)&&M)y.splice(t,1);else{for(var n=e.next(),i=e;!n&&i;){var r=i.parent();if(r&&o.isBlock(r))break;n=(null==r?void 0:r.next())||null,i=r}for(var s=n;s&&!s.isText();){if(o.isMark(s)&&a.compare(s,e)){y.splice(t,1);break}s=s.first()}}})),y.length>0)v.splitText(m.length-e.data.length).remove(),o.isEmpty(g)&&g.remove(),a.unwrap(y.map((function(e){return e.clone()}))),o.insertText(m.substr(m.length-e.data.length)),a.merge(),f=(t=s.getRange().cloneRange().shrinkToTextNode()).startNode,p=t.startOffset,v=f.get(),m=f.text()}else if(e.data&&p===e.data.length&&0===e.inputType.indexOf("insert")){for(var S=g,E=[];S&&o.isMark(S);){var O,N,T=a.findPlugin(S);T&&!T.followStyle&&E.push(S);var A=null===(O=S=S.parent())||void 0===O?void 0:O.parent();if((null===(N=S)||void 0===N?void 0:N.prev())&&A&&o.isMark(A))break}var I=f.prev();E.forEach((function(e,t){if(g.equal(e)&&I)E.splice(t,1);else{for(var n=e.prev(),i=e;!n&&i;){var r=i.parent();if(r&&o.isBlock(r))break;n=(null==r?void 0:r.prev())||null,i=r}for(var s=n;s&&!s.isText();){if(o.isMark(s)&&a.compare(s,e)){E.splice(t,1);break}s=s.last()}}})),E.length>0&&(v.splitText(e.data.length),v.remove(),o.isEmpty(g)&&g.remove(),a.unwrap(E.map((function(e){return e.clone()}))),o.insertText(e.data),a.merge(),f=(t=s.getRange().cloneRange().shrinkToTextNode()).startNode,p=t.startOffset,v=f.get(),m=f.text())}m.length>0&&/^\u200B$/g.test(m.substr(0,1))&&(v.splitText(1),v.remove())}var D=f.prev();if(f.isText()&&D&&o.isMark(D)){var _=f.get(),j=f.text();j.length>0&&/^\u200B$/g.test(j.substr(0,1))&&(_.splitText(1),_.remove())}}},{key:"getSafeRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getRange(),t=e.commonAncestorNode;t.isEditable()||t.inEditor()||e.select(this.engine.container,!0).shrinkToElementNode().collapse(!1);var n=e.cloneRange();if(n.collapse(!0),this.focusCardRang(n),e.startNode.equal(n.startNode)&&e.startOffset===n.startOffset||e.setStart(n.startContainer,n.startOffset),(n=e.cloneRange()).collapse(!1),this.focusCardRang(n),e.endNode.equal(n.endNode)&&e.endOffset===n.endOffset||e.setEnd(n.endContainer,n.endOffset),e.collapsed){(n=e.cloneRange()).enlargeFromTextNode();var i=this.engine.$(n.startContainer),r=n.startOffset;this.engine.node.isInline(i)&&0===r&&e.setStartBefore(i[0]),this.engine.node.isInline(i)&&r===i[0].childNodes.length&&e.setStartAfter(i[0]),e.collapse(!0)}return e}},{key:"focusCardRang",value:function(e){var t=this,n=e.startNode,i=e.startOffset,r=this.engine.card.find(n);if(r&&!r.isEditable){var o=r.getCenter().get();if(o&&(!n.isElement()||n[0].parentNode!==r.root[0]||n.attributes(Wb))){var a=function(){var e=ew.create(t.engine);return e.select(o,!0),e.comparePoint(n,i)<0};if("inline"===r.constructor.cardType)return e.select(r.root),void e.collapse(a());a()?r.focusPrevBlock(e,!0):r.focusNextBlock(e,!0)}}}},{key:"initNativeEvents",value:function(){var e=this,t=this.engine,n=t.container,i=t.$,r=t.card,o=t.clipboard;this.event.onInput((function(t){var n=e.getRange();e.repairInput(t,n),e.select(n),e.onSelect(),e.change()})),this.event.onDocument("selectionchange",(function(){var t=n.window,i=null==t?void 0:t.getSelection();if(i&&i.anchorNode){var o=ew.from(e.engine,i);r.each((function(t){var n=t.getCenter();if(n&&n.length>0){var r=i.containsNode(n[0]);if(!r&&!o.collapsed&&i.focusNode){var a=e.engine.card.find(i.focusNode,!0);!a||!t.root.equal(a.root)||i.anchorNode&&a.root.contains(i.anchorNode)||(r=!0)}t.select(r)}}));var a=r.getSingleSelectedCard(o);a&&a.select(!0)}else r.each((function(e){return e.select(!1)}))})),this.event.onSelect((function(){var t=e.getRange();t.collapsed&&t.containsCard()&&e.getSafeRange(t),e.select(t),r.activate(t.commonAncestorNode,Cy.CUSTOM_SELECT),e.onSelect()})),this.event.onDocument("click",(function(e){if(e.target){var t=r.find(i(e.target));if(t){var n=t.constructor;n.cardType===ky.INLINE&&r.activate(t.root,Cy.CLICK,n.toolbarFollowMouse?e:void 0),t.onFocus&&t.onFocus()}}})),this.event.onDocument("mousedown",(function(t){if(t.target){var n=i(t.target),o=r.find(n);if(!(o&&o.constructor.cardType===ky.INLINE||0===n.closest("body").length||n.closest(".am-view").length>0)){for(var a=n;a;){var s=a.attributes(Tb);if(s&&[Ab,jb].indexOf(s)<0)return;a=a.parent()}var l=e.getRange().startNode;o&&!r.find(l,!0)&&r.select(o),r.activate(n,Cy.MOUSE_DOWN)}}})),this.event.onDocument("copy",(function(e){o.write(e)})),this.event.onContainer("cut",(function(t){t.stopPropagation(),o.write(t,void 0,(function(){o.cut(),e.change()}))}));var a=function(){var t=Am(Iv.mark((function t(n){var r,o,a,s,l;return Iv.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getValue({ignoreCursor:!1}),o=new cw(n,e.engine),(a=e.engine.schema.clone()).add([{name:"span",type:"mark"},{name:"div",type:"block"}]),s=o.toText(a),l=i(document.createTextNode(s)),e.engine.trigger("paste:markdown-before",l),e.engine.trigger("paste:markdown",l),e.engine.trigger("paste:markdown-after",l),l.text()!==s&&e.engine.messageConfirm(e.engine.language.get("checkMarkdown","title")).then((function(){var t;e.setValue(r),null===(t=l.get())||void 0===t||t.normalize(),e.paste(l.text())}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();this.event.onPaste((function(t){var n=t.html,i=t.text,r=t.files,o=t.isPasteText,s="";if(0===r.length)if(o){var l="";i?l=i:n&&(l=new cw(n,e.engine).toText()),s=new ow(l).toHTML()}else if(n&&n.indexOf('<meta name="source" content="aomao" />')>-1)s=n;else if(i&&/^https?:\/\/\S+$/.test(i)){var c=escape(i);s='<a href="'.concat(c,'" target="_blank">').concat(c,"</a>")}else n?s=n:i&&(s=new ow(i).toHTML());!1!==e.engine.trigger("paste:event",t,s)&&0===r.length&&(a(s),e.paste(s))}));var s=function(e){return!e||r.closest(e.commonAncestorContainer)};this.event.onDrop((function(t){var n=t.event,i=t.range,r=t.card,o=t.files;if(r){if(n.preventDefault(),s(i))return;var a=r.constructor.cardName,l=r.getValue();e.engine.card.remove(r.root),e.select(i),e.engine.card.insert(a,l)}if(o.length>0){if(n.preventDefault(),s(i))return;e.select(i),e.engine.trigger("drop:files",o)}}))}},{key:"paste",value:function(e){var t=this,n=new uw(e,this.engine).normalize();this.engine.trigger("paste:before",n),this.insertFragment(n,(function(e){t.engine.trigger("paste:insert",e);var n=e.createSelection();t.engine.card.render(),n.move(),e.scrollRangeIntoView()})),this.engine.trigger("paste:after")}},{key:"combinTextNode",value:function(){var e;e=this.engine.container,iy(e)&&(e=e[0]),e.normalize()}},{key:"apply",value:function(e){this.combinTextNode(),e&&this.select(e),this.change()}},{key:"insertFragment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.engine,i=n.block,r=n.list,o=n.card,a=n.$,s=n.schema,l=this.engine.node,c=this.getSafeRange(),u=i.closest(c.startNode),d=i.closest(c.endNode),h=d[0]===u[0],f=i.isLastOffset(c,"end"),p=s.getCanMergeTags(),g=s.getAllowInTags(),v=u.closest(p.join(",")),m=c.collapsed,b=e.childNodes,y=a(e.firstChild||[]);if(m||this.deleteContent(c,h||!f),y[0]){if(!l.isBlock(y)&&!y.isCard())return c.shrinkToElementNode().insertNode(e),void this.apply(c.collapse(!1));c.deepCut();var w=c.startContainer.childNodes[c.startOffset-1],k=c.startContainer.childNodes[c.startOffset];if(v[0]&&b.forEach((function(e){p.indexOf(a(e).name)<0&&l.wrap(a(e),l.clone(v,!1))})),0!==b.length){var x=ay(c.startContainer),C=a(b[b.length-1]);"br"===C.name&&(C.remove(),C=a(b[b.length-1]));for(var M=x.createDocumentFragment(),S=a(b[0]);S&&S.length>0;){l.removeSide(S);var E=S.next();E||(C=S),M.appendChild(S[0]),S=E}c.insertNode(M),c.shrinkToElementNode().collapse(!1);var O=o.find(c.startNode);O&&O.focus(c,!1)}var N=function(e){var t=e.first();if(!t||!l.isBlock(t))return e;for(;g.indexOf(t?t.name:"")>-1;)t=t.first();return t},T=function(e){var t=e.last();if(!t||!l.isBlock(t))return e;for(;g.indexOf(t?t.name:"")>-1;)t=t.last();return t},A=function(e,t){var n,i,o=(null===(n=t.parent())||void 0===n?void 0:n.name)===(null===(i=e.parent())||void 0===i?void 0:i.name);return"p"===t.name&&o||e.name===t.name&&o&&!("li"===e.name&&!r.isSame(e.parent(),t.parent()))},I=function(e){for(;!e.isEditable();){var t=e.parent();if(e.remove(),!t||!l.isEmpty(t))break;e=t}},D=function(e,t){if(e.name===t.name&&"p"===e.name){var n=t.attributes();n["data-id"]&&delete n["data-id"],e.attributes(n)}l.isLikeEmpty(e)&&!l.isLikeEmpty(t)&&(e.get().innerHTML=""),l.isCustomize(e)===l.isCustomize(t)&&r.unwrapCustomize(t)};if(w){var _=N(a(w.nextSibling||[])),j=T(a(w));A(j,_)?(D(j,_),l.merge(j,_,!1),I(_)):(l.isEmpty(j)||r.isEmptyItem(j))&&I(j)}if(k){var L=T(a(k.previousSibling||[])),R=N(a(k));c.select(L,!0).shrinkToElementNode().collapse(!1),R&&l.isEmpty(R)?I(R):A(L,R)&&(l.merge(L,R,!1),I(R))}i.merge(c),r.merge(void 0,c),t&&t(c),this.apply(c)}else this.apply(c)}},{key:"deleteContent",value:function(e,t){var n=this,i=e||this.getSafeRange();if(!i.collapsed){var r=this.engine,o=r.mark,a=r.node,s=r.$,l=i.cloneRange();l.collapse(!0);var c=o.findMarks(l);i.enlargeToElementNode();var u=this.engine.block.closest(i.startNode);if(u.isEditable()||u.inEditor()){i.extractContents(),i.collapse(!0);var d=i.startNode,h=i.startOffset;if(d.isText())e||this.apply(i);else{var f=d[0].childNodes[h-1],p=d[0].childNodes[h],g=0===d[0].childNodes.length;if(!g){var v,m=d[0].firstChild;1===d[0].childNodes.length&&m.nodeType===sy().Node.ELEMENT_NODE&&a.isCustomize(d)&&(null===(v=d.first())||void 0===v?void 0:v.isCard())&&(g=!0)}if(g&&a.isBlock(d)){var b=a.getBatchAppendHTML(c,"<br />");d.isEditable()&&(b="<p>".concat(b,"</p>")),d.append(s(b));var y=d.find("br"),w=y.parent();return w&&a.isMark(w)&&a.replace(y,s("​",null)),i.select(d,!0).shrinkToElementNode().shrinkToTextNode(),i.collapse(!1),void(e||this.apply(i))}if(f&&p&&a.isBlock(f)&&a.isBlock(p)&&t&&function e(t,i,r,o){if(a.isBlock(i)&&!a.isVoid(i)&&!i.isCard()){t.select(i,!0),t.collapse(!1);var l=t.createSelection();n.engine.node.merge(i,r),l.move();var c=t.getPrevNode(),u=t.getNextNode(),d=t.startNode;c||u||!a.isBlock(d)||(d.append(s(n.engine.node.getBatchAppendHTML(o,"<br />"))),t.select(d.find("br"),!0),t.collapse(!1)),c&&u&&!c.isCard()&&!u.isCard()&&e(t,c,u,o)}}(i,s(f),s(p),c),d.children().each((function(e){var t=s(e);!n.engine.node.isVoid(t)&&t.isElement()&&""===n.engine.node.html(t)&&t.remove(),n.engine.node.isInline(t)&&n.engine.inline.repairCursor(t)})),(l=i.cloneRange().shrinkToTextNode()).startNode.isText()&&/^\u200B/g.test(l.startNode.text())&&0===l.startOffset){var k=l.startNode.prev();k&&this.engine.node.isInline(k)&&(i.select(k,!0),i.collapse(!1))}e||this.apply(i)}}else e||this.apply(i)}}},{key:"addBrAfterDelete",value:function(e){var t=this.getRange(),n=e.parent();e.remove(),n&&this.engine.node.isEmpty(n)&&(n.isEditable()?(this.engine.node.html(n,"<p><br /></p>"),t.select(n,!0).shrinkToElementNode().collapse(!1)):(this.engine.node.html(n,"<br />"),t.select(n,!0).collapse(!1)),this.select(t))}},{key:"unwrapNode",value:function(e){var t=this.engine.block,n=this.getRange();if((e=e||t.closest(n.startNode)).inEditor()){var i=n.createSelection();this.engine.node.unwrap(e),i.move(),this.select(n)}}},{key:"mergeAfterDeletePrevNode",value:function(e){var t,n,i,r=this.engine,o=r.block,a=r.$,s=this.getRange();if((e=e||o.closest(s.startNode)).children().length>1&&"br"===(null===(t=e.first())||void 0===t?void 0:t.name)){var l;null===(l=e.first())||void 0===l||l.remove()}else{var c=e.prev();if(c){if(c.isCard()){var u;(1===e.children().length&&"br"===(null===(u=e.first())||void 0===u?void 0:u.name)||this.engine.node.isEmpty(e))&&e.remove();var d=this.engine.card.find(c);if(d)return void this.engine.card.focus(d)}if(this.engine.node.isVoid(c))c.remove();else if(this.engine.node.isRootBlock(c)&&this.engine.node.isEmpty(c))c.remove();else{if(c.isText()){var h=a("<p />");c.before(h),h.append(c),c=h}var f;if(["ol","ul"].indexOf(c.name)>=0&&(c=c.last()),1===e.children().length&&"br"===(null===(n=e.first())||void 0===n?void 0:n.name))null===(f=e.first())||void 0===f||f.remove();else if(c&&1===c.children().length&&"br"===(null===(i=c.first())||void 0===i?void 0:i.name)){var p;null===(p=c.first())||void 0===p||p.remove()}if(!c||c.isText())this.unwrapNode(e);else{var g=s.createSelection();this.engine.node.merge(c,e),g.move(),this.select(s),this.engine.mark.merge(),this.engine.list.merge()}}}else{var v;(null===(v=e.parent())||void 0===v?void 0:v.inEditor())&&this.unwrapNode(e)}}}},{key:"focusPrevBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getRange(),i=(e=e||this.engine.block.closest(n.startNode)).prev();if(i)if(i.isCard()){var r=this.engine.card.find(i);r&&r.focus(n)}else["ol","ul"].indexOf(i.name)>=0&&(i=i.last()),i&&(t&&this.engine.node.isEmptyWithTrim(i)?i.remove():(n.select(i,!0),n.collapse(!1),this.select(n)))}},{key:"destroy",value:function(){this.event.destroy(),this.clearChangeTimer()}}]),e}(),hw=function(){function e(){jm(this,e),this._map={},this._all=[],this.data={blocks:[],inlines:[],marks:[],globals:{}}}return Rm(e,[{key:"add",value:function(e){var t=this;e=Tv(e),Array.isArray(e)||(e=[e]),e.forEach((function(e){!function(e){return!!e.name}(e)?t.data["".concat(e.type,"s")]&&(t.data.globals[e.type]=vm(_m({},t.data.globals[e.type]),e.attributes)):(e.attributes&&Object.keys(e.attributes).forEach((function(n){t.data.globals[e.type]&&("style"===n?Object.keys(e.attributes.style).forEach((function(i){t.data.globals[e.type][n]&&t.data.globals[e.type][n][i]===e.attributes.style[i]&&delete e.attributes.style[i]})):t.data.globals[e.type][n]===e.attributes[n]&&delete e.attributes[n])})),"block"===e.type?t.data.blocks.push(e):"inline"===e.type?t.data.inlines.push(e):"mark"===e.type&&t.data.marks.push(e))}));var n=function(e){var t=e.attributes||{},n=t.style||{},i=0,r=0;return Object.keys(t).forEach((function(e){var n=t[e];fw(n)&&n.required&&i++})),Object.keys(n).forEach((function(e){var t=n[e];fw(t)&&t.required&&r++})),[i,r]},i=this.data,r=i.blocks,o=i.marks,a=i.inlines;this._all=[].concat(Wm(r),Wm(o),Wm(a)).sort((function(e,t){var i=Vm(n(e),2),r=i[0],o=i[1],a=Vm(n(t),2),s=a[0],l=a[1];return r>s?-1:r===s?o===l?0:o>l?-1:1:1})),this._map={}}},{key:"clone",value:function(){var t=new e;return t.data=Tv(this.data),t}},{key:"find",value:function(e){var t=this,n=[];return Object.keys(this.data).some((function(i){if("globals"!==i){var r=t.data[i].filter((function(t){return e(t)}));r&&r.length>0&&(n=n.concat(r))}})),n}},{key:"getType",value:function(e){for(var t=0;t<this._all.length;t++){var n=this._all[t];if(n.name===e.name&&this.checkNode(e,n.attributes))return n.type}}},{key:"checkNode",value:function(e,t){var n=this,i=e.attributes(),r=e.css();delete i.style;var o=(t||{}).style;return t=oh(_m({},t),"style"),!!Object.keys(t).every((function(e){return n.checkValue(t,e,i[e])}))&&Object.keys(o||{}).every((function(e){return n.checkValue(o,e,r[e])}))}},{key:"checkStyle",value:function(e,t,n,i){var r=this.getMapCache(i);if(!r[e])return!1;var o=r[e].style;return!!o&&this.checkValue(o,t,n)}},{key:"checkAttributes",value:function(e,t,n,i){var r=this.getMapCache(i);if(!r[e])return!1;var o=r[e];return!!o&&this.checkValue(_m({},oh(o,"style")),t,n)}},{key:"checkValue",value:function(e,t,n){if(!e[t])return!1;var i=e[t];if(fw(i)){if(void 0===n&&!1===i.required)return!0;i=i.value}else if(void 0===n)return!0;if("string"==typeof i&&"@"===i.charAt(0))switch(i){case"@number":i=/^-?\d+(\.\d+)?$/;break;case"@length":i=/^-?\d+(\.\d+)?(\w*|%)$/;break;case"@color":i=/^(rgb(.+?)|#\w{3,6}|\w+)$/i;break;case"@url":i=zy}return"string"==typeof i?"*"===i||("class"===t?(n||"").split(/\s+/).some((function(e){return e.trim()===i})):i===n):Array.isArray(i)?"class"===t?(n||"").split(/\s+/).every((function(e){return""===e.trim()||i.indexOf(e.trim())>-1})):i.indexOf(n)>-1:"object"===zm(i)&&"function"==typeof i.test?"class"===t?(n||"").split(/\s+/).every((function(e){return""===e.trim()||i.test(e.trim())})):i.test(n||""):"function"!=typeof i||i(n)}},{key:"filterStyles",value:function(e,t,n){var i=this;Object.keys(t).forEach((function(r){i.checkStyle(e,r,t[r],n)||delete t[r]}))}},{key:"filterAttributes",value:function(e,t,n){var i=this;Object.keys(t).forEach((function(r){i.checkAttributes(e,r,t[r],n)||delete t[r]}))}},{key:"toAttributesMap",value:function(e){var t=this,n={};return Object.keys(this.data.globals).forEach((function(i){if(void 0===e||i===e){var r=t.data.globals[i];t.data[i+"s"].forEach((function(e){n[e.name]=vm(_m({},e.attributes),_m({},r))}))}})),Object.keys(this.data).forEach((function(i){"globals"===i||void 0!==e&&i!=="".concat(e,"s")||t.data[i].forEach((function(t){var i=_m({},t.attributes);void 0===e&&n[t.name]&&Object.keys(n[t.name]).forEach((function(e){var r=n[t.name][e],o=i[e];"string"==typeof r&&"string"==typeof o&&r!==o?i[e]=[r,o]:Array.isArray(r)&&"string"==typeof o&&r.indexOf(o)<0?(i[e]=r,i[e].push(o)):Array.isArray(o)&&"string"==typeof r&&o.indexOf(r)<0?i[e].push(r):Array.isArray(o)&&Array.isArray(r)&&r.forEach((function(t){o.indexOf(t)<0&&i[e].push(t)}))})),n[t.name]=vm(_m({},n[t.name]),i)}))})),n}},{key:"getMapCache",value:function(e){var t=e||"*";return this._map[t]||(this._map[t]=this.toAttributesMap(e)),this._map[t]}},{key:"closest",value:function(e){var t=this,n=e;return this.data.blocks.filter((function(t){return t.name===e})).forEach((function(e){var i=e;i.allowIn&&(i.allowIn.forEach((function(e){t.isAllowIn(e,n)&&(n=e)})),n=t.closest(n))})),n}},{key:"isAllowIn",value:function(e,t){return"p"!==e&&("p"===t&&"p"!==e||this.data.blocks.filter((function(e){return e.name===t})).some((function(t){var n=t;if(n.allowIn&&n.allowIn.indexOf(e)>-1)return!0})))}},{key:"getAllowInTags",value:function(){var e=[];return this.data.blocks.forEach((function(t){var n=t;n.allowIn&&n.allowIn.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),e}},{key:"getCanMergeTags",value:function(){var e=[];return this.data.blocks.forEach((function(t){var n=t;!0===n.canMerge&&e.indexOf(n.name)<0&&e.push(n.name)})),e}}]),e}(),fw=function(e){return void 0!==e.required},pw=function(e,t){return Math.floor(e+Math.random()*(t-e))},gw=function(e){if(e.isElement()){if([zb,Rb,Pb].indexOf(e.attributes(Tb))>-1)return!0;if(e.attributes("data-transient-element")||e.attributes(Tb)===Db||e.closest(_b).length>0)return!0;var t=e.closest($b);if(!e.isCard()&&t.isCard()&&!t.isEditableCard())return!0;var n=e.parent(),i=null==n?void 0:n.closest($b);if(e.isCard()&&!e.isEditableCard()&&i&&i.isCard()&&!i.isEditableCard())return!0}return!1},vw=function(e,t){if(e.isRoot()&&!/^data-selection-/.test(t))return!0;if(e.isCard()&&["id","class","style"].includes(t))return!0;var n=e.attributes("data-transient-attributes");return!("*"!==n&&!n.split(",").some((function(e){return e.trim().toLowerCase()===t.toLowerCase()})))},mw=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=e[n+1];yw(i,r)?n++:t.push(i)}return t},bw=function(e){var t=e;return(e.oi||t.od)&&e.p&&2===e.p.length&&1===e.p[0]&&e.p[1].toString().startsWith("data-selection-")},yw=function(e,t){var n=e,i=e,r=t,o=t,a=e,s=e,l=t,c=t;return!!(e&&t&&(n.li&&o.ld&&Zg(n.li,o.ld)&&(Zg(e.p,t.p)||ww(e.p,t.p)||ww(t.p,e.p))||i.ld&&r.li&&Zg(i.ld,r.li)&&Zg(e.p,t.p)||a.si&&c.sd&&Zg(a.si,c.sd)&&(Zg(e.p,t.p)||ww(e.p,t.p,a.si.length)||ww(t.p,e.p,a.si.length))||s.sd&&l.si&&Zg(s.sd,l.si)&&Zg(e.p,t.p)))},ww=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e.length!==t.length)return!1;var i=t.slice();return i[i.length-1]=i[i.length-1]-n,Zg(e.slice(),i)},kw=function(e,t){var n=[];return t.forEach((function(e){e.ops&&n.push(e.ops)})),n.forEach((function(t){e=yb.type.transform(e,t,"left")})),e},xw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Vm(e,2),i=n[0],r=n[1];if(!i||!r)return e;var o=i.map((function(e){return parseInt(e.toString())+2})),a=r.map((function(e){return parseInt(e.toString())+2})),s=[];return null==t||t.forEach((function(e){e.ops&&(s=s.concat(e.ops))})),s.forEach((function(e){o=Cw(o,e),a=Cw(a,e)})),[o.map((function(e){return parseInt(e.toString())-2})),a.map((function(e){return parseInt(e.toString())-2}))]},Cw=function(e,t){var n=e.slice();if(Mw(t.p,e))if("li"in t)n[t.p.length-1]=parseInt(n[t.p.length-1].toString())+1;else if("ld"in t)n[t.p.length-1]=parseInt(n[t.p.length-1].toString())-1;else if("si"in t)n[t.p.length-1]=parseInt(n[t.p.length-1].toString())+t.si.length;else if("sd"in t){var i=t.p.length;n[i-1]=parseInt(n[i-1].toString())-t.sd.length,n[i-1]=Math.max(parseInt(t.p[i-1].toString()),parseInt(n[i-1].toString()))}return n},Mw=function(e,t){for(var n=0;e[n];){if(!t[n])return!1;if(e[n]===t[n])n++;else{if(e[n]>t[n])return!1;if(e[n]<t[n])return void 0===e[n+1]}}return!0},Sw=function(e,t){var n=e;return t.forEach((function(t){parseInt(t.p[t.p.length-1].toString())-2<=e&&("li"in t?n-=1:"ld"in t&&(n+=1))})),n},Ew=function(){function e(t){jm(this,e),this.currentRangePath=[],this.engine=t}return Rm(e,[{key:"getAll",value:function(){var e,t=[],n=null===(e=this.engine.container.get())||void 0===e?void 0:e.attributes;if(!n)return t;for(var i=0;i<n.length;i++){var r=n.item(i);if(r){var o=r.nodeName,a=r.nodeValue;if(/^data-selection-/.test(o)&&a){var s=JSON.parse(decodeURIComponent(a));s&&t.push(s)}}}return t}},{key:"setAll",value:function(e){var t,n=this.engine.container,i={};e.forEach((function(e){if(e){var t="data-selection-".concat(e.uuid);i[t]=!0;var r=n.attributes(t),o=encodeURIComponent(JSON.stringify(e));r!==o&&n.attributes(t,o)}}));var r=null===(t=n.get())||void 0===t?void 0:t.attributes;if(r)for(var o=0;o<r.length;o++){var a=r.item(o);if(a){var s=a.nodeName;/^data-selection-/.test(s)&&!i[s]&&n.removeAttributes(s)}}}},{key:"remove",value:function(e){this.engine.container.removeAttributes("data-selection-".concat(e))}},{key:"updateAll",value:function(e,t){var n=this.engine,i=n.change,r=n.card,o=i.getRange().cloneRange(),a=r.active;if(a&&!a.isEditable){var s=a.getCenter();s&&s.length>0&&o.select(s.get(),!0)}else(null==a?void 0:a.isEditable)&&a.updateBackgroundSelection&&a.updateBackgroundSelection(o);if(!a&&!o.collapsed){var l=this.engine.card.find(o.startNode,!0);l&&l.constructor.cardType===ky.BLOCK&&o.setStart(l.getCenter().parent(),1);var c=this.engine.card.find(o.endNode,!0);c&&c.constructor.cardType===ky.BLOCK&&o.setEnd(c.getCenter().parent(),1)}var u=o.toPath();this.currentRangePath=u;var d=JSON.stringify(u),h=this.getAll(),f=!1,p=!1;h=h.map((function(n){return n?n.uuid===e.uuid?(f=!0,d!==JSON.stringify(n.path)&&(p=!0,n.path=u,n.active=!0),n):t.find((function(e){return e.uuid===n.uuid}))?(n.active=!1,n):(p=!0,null):(p=!0,null)}));var g=[];return h.forEach((function(e){e&&g.push(e)})),f||(p=!0,g.push({path:u,uuid:e.uuid,active:!0})),p&&this.setAll(g),{data:g,range:o}}}]),e}();tw(".data-tooltip {\n\tfont-size: 14px;\n\tfont-variant: tabular-nums;\n\tline-height: 1.5;\n\tcolor: rgba(0, 0, 0, 0.65);\n\t-webkit-box-sizing: border-box;\n\tbox-sizing: border-box;\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n\tposition: absolute;\n\tz-index: 1060;\n\tdisplay: block;\n\tvisibility: visible;\n\tmax-width: 250px;\n\twhite-space: nowrap;\n}\n\n.data-tooltip-hidden {\n\topacity: 0;\n\tvisibility: hidden;\n\ttransition: opacity 0.3s ease-in-out;\n}\n\n.data-tooltip-active {\n\topacity: 1;\n\tvisibility: visible;\n}\n\n.data-tooltip-placement-top,.data-tooltip-placement-topLeft,.data-tooltip-placement-topRight {\n\tpadding-bottom: 8px;\n}\n\n.data-tooltip-placement-right,.data-tooltip-placement-rightTop,.data-tooltip-placement-rightBottom {\n\tpadding-left: 8px;\n}\n\n.data-tooltip-placement-bottom,.data-tooltip-placement-bottomLeft,.data-tooltip-placement-bottomRight {\n\tpadding-top: 8px;\n}\n\n.data-tooltip-placement-left,.data-tooltip-placement-leftTop,.data-tooltip-placement-leftBottom {\n\tpadding-right: 8px;\n}\n\n.data-tooltip-inner {\n\tpadding: 6px 8px;\n\tcolor: #fff;\n\ttext-align: left;\n\ttext-decoration: none;\n\tbackground-color: rgba(0, 0, 0, 0.75);\n\tborder-radius: 4px;\n\t-webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n\tword-wrap: break-word;\n}\n\n.data-tooltip-arrow {\n\tposition: absolute;\n\twidth: 0;\n\theight: 0;\n\tborder-color: transparent;\n\tborder-style: solid;\n}\n\n.data-tooltip-placement-top .data-tooltip-arrow,.data-tooltip-placement-topLeft .data-tooltip-arrow,.data-tooltip-placement-topRight .data-tooltip-arrow {\n\tbottom: 3px;\n\tborder-width: 5px 5px 0;\n\tborder-top-color: rgba(0, 0, 0, 0.75);\n}\n\n.data-tooltip-placement-top .data-tooltip-arrow {\n\tleft: 50%;\n\tmargin-left: -5px;\n}\n\n.data-tooltip-placement-topLeft .data-tooltip-arrow {\n\tleft: 16px;\n}\n\n.data-tooltip-placement-topRight .data-tooltip-arrow {\n\tright: 16px;\n}\n\n.data-tooltip-placement-right .data-tooltip-arrow,.data-tooltip-placement-rightTop .data-tooltip-arrow,.data-tooltip-placement-rightBottom .data-tooltip-arrow {\n\tleft: 3px;\n\tborder-width: 5px 5px 5px 0;\n\tborder-right-color: rgba(0, 0, 0, 0.75);\n}\n\n.data-tooltip-placement-right .data-tooltip-arrow {\n\ttop: 50%;\n\tmargin-top: -5px;\n}\n\n.data-tooltip-placement-rightTop .data-tooltip-arrow {\n\ttop: 8px;\n}\n\n.data-tooltip-placement-rightBottom .data-tooltip-arrow {\n\tbottom: 8px;\n}\n\n.data-tooltip-placement-left .data-tooltip-arrow,.data-tooltip-placement-leftTop .data-tooltip-arrow,.data-tooltip-placement-leftBottom .data-tooltip-arrow {\n\tright: 3px;\n\tborder-width: 5px 0 5px 5px;\n\tborder-left-color: rgba(0, 0, 0, 0.75);\n}\n\n.data-tooltip-placement-left .data-tooltip-arrow {\n\ttop: 50%;\n\tmargin-top: -5px;\n}\n\n.data-tooltip-placement-leftTop .data-tooltip-arrow {\n\ttop: 8px;\n}\n\n.data-tooltip-placement-leftBottom .data-tooltip-arrow {\n\tbottom: 8px;\n}\n\n.data-tooltip-placement-bottom .data-tooltip-arrow,.data-tooltip-placement-bottomLeft .data-tooltip-arrow,.data-tooltip-placement-bottomRight .data-tooltip-arrow {\n\ttop: 3px;\n\tborder-width: 0 5px 5px;\n\tborder-bottom-color: rgba(0, 0, 0, 0.75);\n}\n\n.data-tooltip-placement-bottom .data-tooltip-arrow {\n\tleft: 50%;\n\tmargin-left: -5px;\n}\n\n.data-tooltip-placement-bottomLeft .data-tooltip-arrow {\n\tleft: 16px;\n}\n\n.data-tooltip-placement-bottomRight .data-tooltip-arrow {\n\tright: 16px;\n}");var Ow=function(e){return"\n    <div ".concat(Tb,'="tooltip" class="data-tooltip data-tooltip-placement-').concat(e.placement,' data-tooltip-hidden" style="transform-origin: 50% 45px 0px;">\n        <div class="data-tooltip-content">\n            <div class="data-tooltip-arrow"></div>\n            <div class="data-tooltip-inner" data-role="tooltip"></div>\n        </div>\n    </div>')},Nw=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"show",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{placement:"top"};this.hide();var i=this.editor.$,r=i(Ow(n));"string"==typeof t?r.find("[data-role=tooltip]").html(t):r.find("[data-role=tooltip]").append(t);var o=i(document.body);o.append(r);var a=r.get(),s=(null==a?void 0:a.clientWidth)||0,l=(null==a?void 0:a.clientHeight)||0,c=e.get(),u=c.clientWidth,d=c.getBoundingClientRect(),h=Math.round(window.pageXOffset+d.left+u/2-s/2),f=Math.round(window.pageYOffset+d.top-l-2);r.css({left:h+"px",top:f+"px"}),r.addClass("data-tooltip-active")}},{key:"hide",value:function(){(0,this.editor.$)("div[".concat(Tb,"=tooltip]")).remove()}}]),e}(),Tw=function(){function e(t,n){jm(this,e),this.editor=t,this.options=n,this.root=this.editor.$(function(e){return'\n    <span class="data-toolbar-item">\n        <a class="data-toolbar-btn"'.concat(e.disabled?' disabled="disabled"':""," ").concat(e.link?' href="'+e.link+'" target="_blank"':"",">\n            ").concat(e.content,"\n        </a>\n    </span>")}(n)),n.style&&this.root.attributes("style",n.style),n.class&&this.root.addClass(n.class)}return Rm(e,[{key:"render",value:function(e){var t=this,n=this.options,i=n.title,r=n.didMount,o=n.onClick;if(e.append(this.root),i){var a=new Nw(this.editor);this.root.on("mouseenter",(function(){a.show(t.root,"function"==typeof i?i():i)})),this.root.on("mouseleave",(function(){a.hide()})),this.root.on("mousedown",(function(){a.hide()}))}this.root.find("a").on("click",(function(e){e.preventDefault(),e.stopPropagation(),o&&o()})),r&&r(this.root)}}]),e}(),Aw=function(){function e(t,n){jm(this,e),this.editor=t,this.options=n}return Rm(e,[{key:"renderTo",value:function(e){var t,n,i=this,r=this.editor.$;this.root=r((t=this.options,n=!!t.checked,t.getState&&(n=t.getState()),'\n    <div class="data-toolbar-item data-toolbar-dropdown-item data-toolbar-dropdown-switch">\n        <span class="data-toolbar-dropdown-item-content"'.concat(t.disabled?' disabled="disabled"':"",">").concat(t.content,'</span>\n        <button type="button" role="switch" aria-checked="true" class="switch-btn ').concat(n?" switch-checked":"",'">\n            <div class="switch-handle"></div>\n            <span class="switch-inner"></span>\n        </button>\n    </div>'))),this.switch=this.root.find(".ant-switch"),e.append(this.root),this.root.on("mousedown",(function(e){return e.preventDefault()})),this.root.on("click",(function(e){e.stopPropagation(),i.options.onClick&&(i.options.onClick(),i.updateSwitch())}))}},{key:"updateSwitch",value:function(){var e,t;this.options.getState&&(this.options.getState()?null===(e=this.switch)||void 0===e||e.addClass("ant-switch-checked"):null===(t=this.switch)||void 0===t||t.removeClass("ant-switch-checked"))}}]),e}(),Iw=function(){function e(t,n){jm(this,e),this.editor=t,this.options=n}return Rm(e,[{key:"renderTo",value:function(e){var t,n=this.editor.$;this.root=n((t=this.options,'\n    <div class="data-toolbar-item data-toolbar-dropdown-item data-toolbar-dropdown-btn">\n        <span class="data-toolbar-dropdown-item-content"'.concat(t.disabled?' disabled="disabled"':"",">\n            ").concat(t.content,"\n        </span>\n    </div>"))),e.append(this.root);var i=this.options.onClick;i&&this.root.on("click",(function(){return i()}))}}]),e}(),Dw=function(){function e(t,n){var i=this;jm(this,e),this.documentMouseDown=function(e){var t;i.root&&!i.root[0].contains(e.target)&&(null===(t=i.dropdown)||void 0===t?void 0:t.hasClass("show"))&&i.hideDropdown()},this.editor=t,this.options=n}return Rm(e,[{key:"initToggleEvent",value:function(){var e=this,t=this.root.find(".data-toolbar-dropdown");t.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),t.on("click",(function(t){t.stopPropagation(),e.toggleDropdown()})),document.addEventListener("mousedown",this.documentMouseDown,!0)}},{key:"toggleDropdown",value:function(){var e;(null===(e=this.dropdown)||void 0===e?void 0:e.hasClass("show"))?this.hideDropdown():this.showDropdown()}},{key:"showDropdown",value:function(){var e;null===(e=this.dropdown)||void 0===e||e.addClass("show")}},{key:"hideDropdown",value:function(){var e;null===(e=this.dropdown)||void 0===e||e.removeClass("show")}},{key:"renderTooltip",value:function(){var e=this,t=this.options.title;if(t){var n=new Nw(this.editor);this.root.on("mouseenter",(function(){n.show(e.root,"function"==typeof t?t():t)})),this.root.on("mouseleave",(function(){n.hide()})),this.root.on("mousedown",(function(){n.hide()}))}}},{key:"renderDropdown",value:function(e){var t=this;this.dropdown=e.find(".dropdown-container"),this.options.items.forEach((function(e){switch(e.type){case"switch":return new Aw(t.editor,e).renderTo(t.dropdown);case"button":return new Iw(t.editor,e).renderTo(t.dropdown)}})),this.dropdown.on("click",(function(e){e.stopPropagation(),t.hideDropdown()}))}},{key:"render",value:function(e){var t;this.root=this.editor.$((t=this.options,'\n    <span class="data-toolbar-item data-toolbar-item-dropdown">\n        <a class="data-toolbar-btn data-toolbar-dropdown"'.concat(t.disabled?' disabled="disabled"':"",">").concat(t.content,'</a>\n        <div class="dropdown-container"></div>\n    </span>'))),e.append(this.root),this.initToggleEvent(),this.renderTooltip(),this.renderDropdown(e)}},{key:"destroy",value:function(){document.removeEventListener("mousedown",this.documentMouseDown,!0)}}]),e}(),_w=function(){function e(t,n){jm(this,e),this.editor=t,this.options=n,this.root=this.editor.$(function(e){return'\n    <span class="data-toolbar-item data-toolbar-item-input">\n        '.concat(e.prefix?"<span class='data-toolbar-input-prefix'>"+Ty(e.prefix)+"</span>":"",'<input data-role="input" placeholder="').concat(Ty(e.placeholder),'" class="data-toolbar-input" type="input" value="').concat(Ty(e.value.toString()),'" />').concat(e.suffix?"<span class='data-toolbar-input-suffix'>"+Ty(e.suffix)+"</span>":"","\n    </span>")}(n)),this.onEnter=n.onEnter||function(){},this.onInput=n.onInput||function(){},this.onChange=n.onChange||function(){}}return Rm(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"render",value:function(e){var t=this,n=this.options,i=n.value,r=n.didMount,o=this.find("input"),a=o.get();a&&(a.value=(void 0!==i?i:"").toString(),o.on("keydown",(function(e){e.stopPropagation(),Nm("enter",e)&&(e.preventDefault(),a.blur(),t.onEnter(a.value))})),o.on("input",(function(){t.onInput(a.value)})),o.on("change",(function(){setTimeout((function(){t.onChange(a.value)}),10)})),e.append(this.root),r&&r(this.root))}}]),e}();tw('.data-toolbar {\n\tposition: absolute;\n\topacity: 0;\n\tvisibility: hidden;\n\twidth: auto;\n\tline-height: 26px;\n\tdisplay: flex;\n\tflex-direction: row;\n\tfont-size: 14px;\n\tfont-weight: normal;\n\ttext-indent: 0;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t -ms-user-select: none;\n\t     user-select: none;\n}\n\n.data-toolbar-active {\n\topacity: 1;\n\tvisibility: visible;\n}\n\n.data-toolbar-block {\n\ttop: auto;\n\tbottom: -46px;\n\tleft: -1px;\n\tright: auto;\n\theight: 40px;\n\tz-index: 125;\n}\n\n.data-toolbar-btn {\n\tline-height: 26px;\n\tmin-width: 28px;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tcolor: #595959;\n\ttransition: background-color 0.3s ease-in-out;\n\tcursor: pointer;\n}\n\n.data-toolbar-btn-disabled,.data-toolbar-btn-disabled:hover {\n\tbackground-color: transparent;\n\tbox-shadow: none;\n\tcursor: not-allowed;\n}\n\n.data-toolbar-group {\n\tborder: 1px solid rgba(226, 226, 226, 0.84);\n    border-radius: 4px;\n    box-shadow: 0px 2px 4px 0px rgb(225 225 225 / 50%);\n    background: #fff;\n    position: relative;\n    display: inline-flex;\n    padding: 5px;\n    align-items: center;\n}\n\n.data-toolbar-item {\n\tposition: relative;\n\tdisplay: inline-block;\n\tline-height: 26px;\n\ttext-align: left;\n\tcolor: #595959;\n\tflex: 0 0 auto;\n    font-size: 12px;\n    cursor: pointer;\n}\n\n.data-toolbar-item:not(.data-toolbar-item-input):hover{\n    background-color: #f4f4f4;\n    border-radius: 2px;\n}\n\n.data-toolbar-item > * {\n    font-size: 12px !important;\n}\n\n.data-toolbar-item[disabled] {\n\topacity: 0.5;\n\tcursor: not-allowed;\n}\n\n.data-toolbar-item-split {\n\twidth: 1px;\n\theight: 16px;\n\tline-height: 16px;\n\tmargin: 6px 4px;\n\tborder-left: 1px solid #e8e8e8;\n\tdisplay: inline-block;\n}\n\n.data-toolbar-item-dropdown-active {\n\topacity: 1;\n\tvisibility: visible;\n\ttransform: translateY(0px);\n}\n\n.data-toolbar-item-input {\n\tdisplay: flex;\n    margin: 0 4px;\n}\n\n.data-toolbar-item-input .data-toolbar-input {\n    width: 46px;\n    line-height: 12px;\n    font-size: 12px;\n    outline: none;\n    border: 1px solid #dadada;\n    border-radius: 4px;\n}\n\n.data-toolbar-item-input .data-toolbar-input::-moz-selection {\n    color: inherit;\n    background:transparent\n}\n\n.data-toolbar-item-input .data-toolbar-input::selection {\n    color: inherit;\n    background:transparent\n}\n\n.data-toolbar-item-input .data-toolbar-input:focus::-moz-selection\n{\n    color: #fff;\n    background: #1890ff;\n}\n\n.data-toolbar-item-input .data-toolbar-input:focus::selection\n{\n    color: #fff;\n    background: #1890ff;\n}\n\n.data-toolbar-item-dropdown .dropdown-container {\n\tdisplay: none;\n\tposition: absolute;\n\tpadding: 8px 0;\n\ttop: 100%;\n\tmargin-top: 9px;\n\tborder-radius: 4px;\n\tbackground-color: #fff;\n\tbox-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n}\n\n.data-toolbar-item-dropdown .dropdown-container.show {\n\tdisplay: block;\n}\n\n.data-toolbar-dropdown-item {\n\twidth: 218px;\n\tpadding: 8px 16px;\n\tmargin: 0;\n\twhite-space: nowrap;\n\tfont-size: 15px;\n\tline-height: 26px;\n\tcolor: #404040;\n\tcursor: pointer;\n}\n\n.data-toolbar-dropdown-item:hover {\n\tbackground-color: #f5f5f5;\n}\n\n.data-toolbar-dropdown-switch {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.data-toolbar-dropdown-switch .data-toolbar-dropdown-item-content {\n\tflex: 1;\n}\n\n.data-toolbar-dropdown-switch .switch-btn {\n    margin: 0;\n    padding: 0;\n    color: #595959;\n    font-size: 14px;\n    font-variant: tabular-nums;\n    line-height: 1.5;\n    list-style: none;\n    -webkit-font-feature-settings: "tnum";\n    font-feature-settings: "tnum";\n    position: relative;\n    display: inline-block;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    vertical-align: middle;\n    background-color: rgba(0,0,0,.25);\n    border: 0;\n    border-radius: 100px;\n    cursor: pointer;\n    -webkit-transition: all .2s;\n    transition: all .2s;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    min-width: 28px;\n    height: 16px;\n    line-height: 16px;\n}\n\n.data-toolbar-dropdown-switch .switch-btn.switch-checked {\n    background-color: #347EFF\n}\n\n.data-toolbar-dropdown-switch .switch-btn .switch-handle {\n    top: 2px;\n    left: 2px;\n    width: 12px;\n    height: 12px;\n}\n\n.data-toolbar-dropdown-switch .switch-btn .switch-handle, .data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\n    position: absolute;\n    -webkit-transition: all .2s ease-in-out;\n    transition: all .2s ease-in-out;\n}\n\n.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-handle {\n    left: calc(100% - 14px);\n}\n\n.data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-color: #fff;\n    border-radius: 9px;\n    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\n    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\n    content: "";\n}\n\n.data-toolbar-dropdown-switch .switch-btn .switch-inner {\n    display: block;\n    margin: 0 5px 0 18px;\n    font-size: 12px;\n    color: #fff;\n    -webkit-transition: margin .2s;\n    transition: margin .2s;\n}\n\n.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-inner {\n    margin: 0 18px 0 5px;\n}');var jw=function(){function e(t,n){jm(this,e),this.items=[],this.editor=t,this.options=_m({},n),this.root=this.editor.$("<div ".concat(Tb,'="ui" class="data-toolbar data-toolbar-active" contenteditable="false"></div>'))}return Rm(e,[{key:"addItems",value:function(e){var t=this;this.options.items.forEach((function(n){var i;if("button"===n.type&&(i=new Tw(t.editor,n)).render(e),"input"===n.type){var r=n;(i=new _w(t.editor,r)).render(e)}if("dropdown"===n.type&&(i=new Dw(t.editor,n)).render(e),"node"===n.type){var o=n,a=o.node;a.addClass("data-toolbar-item");var s=o.title;if(s){var l=new Nw(t.editor);a.on("mouseenter",(function(){l.show(a,"function"==typeof s?s():s)})),a.on("mouseleave",(function(){l.hide()})),a.on("mousedown",(function(){l.hide()}))}e.append(a),n.didMount&&n.didMount(a)}i&&t.items.push(i)}))}},{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"destroy",value:function(){this.root.remove()}},{key:"hide",value:function(){this.root.removeClass("data-toolbar-active")}},{key:"show",value:function(){this.root.addClass("data-toolbar-active")}},{key:"render",value:function(e){var t=this.editor.$('<div class="data-toolbar-group"></div>');return this.root.append(t),this.addItems(t),e&&e.append(this.root),this.root.addClass("data-toolbar-block"),this.root}}]),e}(),Lw=function(){function e(t){jm(this,e),this.engine=t,this.root=t.root,this.hideCursorInfoTimeoutIdMap={}}return Rm(e,[{key:"destroy",value:function(){this.root.children(".".concat("ot-user-background")).remove(),this.root.children(".".concat("ot-user-cursor")).remove(),this.root.children(".".concat("ot-card-mask")).remove()}},{key:"getRelativeRect",value:function(e,t){var n,i=t.getClientRect(),r=null===(n=e.get())||void 0===n?void 0:n.getBoundingClientRect();return new DOMRect(i.left-(r?r.left:0),i.top-(r?r.top:0),i.right-i.left,i.bottom-i.top)}},{key:"cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"isRangeWrap",value:function(e){var t=e.cloneRange().collapse(!0).getClientRect(),n=e.cloneRange().collapse(!1).getClientRect();return t.bottom!==n.bottom}},{key:"drawOneByOne",value:function(e,t,n,i){for(var r=this.cacheRange(n),o=r.startOffset;o<r.endOffset;){n.setStart(r.commonAncestorContainer,o),n.setEnd(r.commonAncestorContainer,o+1);var a=this.getRelativeRect(e,n);t.clearRect(a),t.drawRect(_m(_m({},a.toJSON()),i)),o++}n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset)}},{key:"drawBackground",value:function(e,t){var n,i,r=this,o=this.engine,a=o.$,s=o.card,l=t.uuid,c=t.color,u=Hm(c);u.setAlpha(.3);var d=u.toRgbString(),h=this.root.children(".".concat("ot-user-background",'[data-uuid="').concat(l,'"]'));h&&h.length>0?(h.attributes("data-color",c.toString()),(i=h[0].__targetCanvas).clear()):((h=a('<div class="'.concat("ot-user-background",'" data-uuid="').concat(l,'" data-color="').concat(c,'" />'))).css({position:"absolute",top:0,left:0,"pointer-events":"none"}),this.root.append(h),i=new oy({container:h.get()}),h[0].__targetCanvas=i),h[0].__targetRange=e;var f=this.root.width(),p=this.root.height();i.resize(f,p);var g=s.find(e.commonAncestorNode,!0);g&&!g.isCenter(e.commonAncestorNode)&&(g=void 0);var v={fill:d},m=e.getSubRanges();if((null===(n=g)||void 0===n?void 0:n.isEditable)&&g.drawBackground){var b=g.drawBackground(h,e,i);if(!1===b)return[e];if(b){if(!Array.isArray(b))return i.clearRect(b),i.drawRect(_m(_m({},b.toJSON()),v)),[e];m=b}}return m.forEach((function(e){if(r.isRangeWrap(e))r.drawOneByOne(h,i,e,v);else{var t=r.getRelativeRect(h,e);i.clearRect(t),i.drawRect(_m(_m({},t.toJSON()),v))}})),m}},{key:"getNodeRect",value:function(e,t){var n,i,r;if(e.isCard()&&(null===(n=e.parent())||void 0===n?void 0:n.hasClass("data-list-item"))&&(null===(i=e.parent())||void 0===i||null===(r=i.first())||void 0===r?void 0:r.equal(e))&&e.next()&&(e=e.next()),e.isElement()&&(t=e.get().getBoundingClientRect()),e.isText()){var o=ew.create(this.engine);o.select(e,!0),t=o.getClientRect()}return t}},{key:"getCursorRect",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=(null===(t=this.root.get())||void 0===t?void 0:t.getBoundingClientRect())||{top:0,left:0};if(Gy(e)){var o=e,a=o.startNode;o.shrinkToElementNode();var s=o.getClientRect();if(a.isElement()&&0===s.height){var l=this.engine.$(a[0].childNodes[o.startOffset]);(l&&l.length>0||(l=a.first())&&l.length>0)&&(s=this.getNodeRect(l,s))}var c=s.top-(r.top||0),u=s.left-(r.left||0)-i,d=s.height;return{top:c+"px",left:u+"px",height:d>0?d+"px":-1}}var h=e,f=jy(h.css("outline-width")),p=(null===(n=h.get())||void 0===n?void 0:n.getBoundingClientRect())||{top:0,left:0},g=p.top-r.top-1,v=p.left-r.left;return f&&(g-=f+1,v-=2),{left:v+"px",top:g+"px",height:0}}},{key:"setCursorRect",value:function(e,t){if(-1!==t.height){if(0===t.height)return e.css(t),void e.addClass("ot-user-cursor-card");e.css(t),e.removeClass("ot-user-cursor-card")}else e.remove()}},{key:"showCursorInfo",value:function(e,t){var n=t.uuid,i=t.color;this.hideCursorInfoTimeoutIdMap[n]&&clearTimeout(this.hideCursorInfoTimeoutIdMap[n]);var r=e.find(".".concat("ot-user-cursor-trigger")),o=e.css("background-color");e.attributes("data-old-background-color",o),r.addClass("".concat("ot-user-cursor-trigger-active")),e.css("background-color",i),r.css("background-color",i)}},{key:"hideCursorInfo",value:function(e){var t=e.find(".".concat("ot-user-cursor-trigger")),n=e.attributes("data-old-background-color");t.removeClass("".concat("ot-user-cursor-trigger-active")),e.css("background-color",n),t.css("background-color",n)}},{key:"drawCursor",value:function(e,t){var n=this,i=t.uuid,r=t.name,o=t.color,a=this.engine.$,s=this.getCursorRect(e),l=this.root.children(".".concat("ot-user-cursor",'[data-uuid="').concat(i,'"]'));if(l&&l.length>0)this.setCursorRect(l,s);else{var c='\n            <div class="'.concat("ot-user-cursor",'" data-uuid="').concat(i,'">\n                <div class="').concat("ot-user-cursor-trigger",'">').concat(Ty(r||""),"</div>\n            </div>"),u=(l=a(c)).find(".".concat("ot-user-cursor-trigger"));this.setCursorRect(l,s),l.on("mouseenter",(function(){return n.showCursorInfo(l,t)}));var d=!0;l.on("transitionstart",(function(){d=!1})),l.on("transitionend",(function(){d=!0})),l.on("mouseleave",(function(){d&&n.hideCursorInfo(l)})),l.css("background-color",o),u.css("background-color",o),this.root.append(l)}if(l&&l[0])return l[0].__target=e,this.showCursorInfo(l,t),this.hideCursorInfoTimeoutIdMap[i]&&clearTimeout(this.hideCursorInfoTimeoutIdMap[i]),this.hideCursorInfoTimeoutIdMap[i]=setTimeout((function(){n.hideCursorInfo(l)}),2e3),l}},{key:"drawCardMask",value:function(e,t,n){var i,r,o=this,a=this.engine.language,s=(null===(i=this.root.get())||void 0===i?void 0:i.getBoundingClientRect())||{left:0,top:0,width:0,height:0},l=(null===(r=e.get())||void 0===r?void 0:r.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c=this.engine.$,u=this.root.children(".".concat("ot-card-mask",'[data-uuid="').concat(n.uuid,'"]'));if(u&&u.length>0)return u[0].__targetNode=e[0],void u.css({left:l.left-s.left+"px",top:l.top-s.top+"px"});(u=c('<div class="'.concat("ot-card-mask",'" data-uuid="').concat(n.uuid,'" />')))[0].__targetNode=e[0],u.css({left:l.left-s.left+"px",top:l.top-s.top+"px",width:l.width+"px",height:l.height+"px"});var d=new Nw(this.engine);u.on("mouseenter",(function(){o.showCursorInfo(t,n),d.show(u,a.get("card","lockAlert").toString(),{placement:"bottomLeft"})})),u.on("mousemove",(function(e){c("div[".concat(Tb,"=tooltip]")).css({left:e.pageX-16+"px",top:e.pageY+32+"px"})})),u.on("mouseleave",(function(){o.hideCursorInfo(t),d.hide()})),u.on("click",(function(e){e.preventDefault(),e.stopPropagation()})),u.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),this.root.append(u)}},{key:"setCardSelectedByOther",value:function(e,t){var n=t||{},i=n.uuid,r=n.color;if(r){var o=Hm(r);o.setAlpha(.3);var a,s=o.toRgbString();return e.selectedByOther||(a=e.onSelectByOther(!0,{color:r,rgb:s})),e.selectedByOther=i,a}e.selectedByOther&&e.onSelectByOther(!1),e.selectedByOther=!1}},{key:"setCardActivatedByOther",value:function(e,t){if(!e.isEditable){var n=t||{},i=n.uuid,r=n.color;if(r){var o=Hm(r);o.setAlpha(.3);var a,s=o.toRgbString();return e.activatedByOther||(a=e.onActivateByOther(!0,{color:r,rgb:s})),e.activatedByOther=i,a}e.activatedByOther&&e.onActivateByOther(!1),e.activatedByOther=!1}}},{key:"drawRange",value:function(e,t){var n=this,i=this.engine.card,r=t.uuid,o=i.find(e.commonAncestorNode);if(o&&!o.isCenter(e.commonAncestorNode)&&(o=void 0),i.each((function(e){e.isEditable||o&&e.root.equal(o.root)||(e.activatedByOther===r&&n.setCardActivatedByOther(e),n.root.children(".".concat("ot-card-mask",'[data-uuid="').concat(r,'"]')).remove())})),o&&!o.isEditable){var a=this.setCardActivatedByOther(o,t)||o.root,s=this.drawCursor(a,t),l=o.constructor.collab;void 0!==l&&!0!==l||!s||this.drawCardMask(a,s,t),this.drawBackground(e,t)}else{if(o)return void this.drawBackground(e,t);i.each((function(i){var o=i.getCenter();if(o&&o.length>0){if(i.isEditable&&o.contains(e.startNode)&&o.contains(e.endNode)&&(e.startNode.closest(Lb).length>0||e.endNode.closest(Lb).length>0))return void n.setCardSelectedByOther(i);e.isPointInRange(o.get(),0)?n.setCardSelectedByOther(i,t):i.selectedByOther===r&&n.setCardSelectedByOther(i)}}));var c=i.getSingleSelectedCard(e);if(c){if(c.isEditable){var u=c.getCenter();if(u.contains(e.startNode)&&u.contains(e.endNode)&&(e.startNode.closest(Lb).length>0||e.endNode.closest(Lb).length>0))return}var d=this.setCardSelectedByOther(c,t)||c.root;this.drawCursor(d,t)}else{e.shrinkToElementNode();var h=this.drawBackground(e,t);e.collapsed||(h.forEach((function(t){t.collapsed||(e=t)})),e.shrinkToElementNode(),e.collapse(!1)),this.drawCursor(e,t)}}}},{key:"updateBackgroundPosition",value:function(){var e=this,t=this.engine.$;this.root.children(".".concat("ot-user-background")).each((function(n){var i=t(n),r=n.__targetRange,o=i.attributes("data-uuid"),a=i.attributes("data-color");e.drawBackground(r,{uuid:o,color:a})}))}},{key:"updateCursorPosition",value:function(){var e=this,t=this.engine.$;this.root.children(".".concat("ot-user-cursor")).each((function(n){var i=t(n),r=n.__target;if(r.startContainer||0!==t(r).closest("body").length){var o=e.getCursorRect(r);e.setCursorRect(i,o)}else i.remove()}))}},{key:"updateCardMaskPosition",value:function(){var e,t=(null===(e=this.root.get())||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0},n=this.engine.$;this.root.children(".".concat("ot-card-mask")).each((function(e){var i=n(e),r=e.__targetNode;if(0!==n(r).closest("body").length){var o=r.getBoundingClientRect();i.css({left:o.left-t.left+"px",top:o.top-t.top+"px"})}else i.remove()}))}},{key:"updatePosition",value:function(){this.updateBackgroundPosition(),this.updateCursorPosition(),this.updateCardMaskPosition()}},{key:"updateBackgroundAlpha",value:function(e){var t=this.getCursorRect(e),n=this.engine.$;this.root.children(".".concat("ot-user-cursor")).each((function(e){var i=n(e),r=i.find(".".concat("ot-user-cursor-trigger")),o=i.css("left"),a=i.css("top"),s=Hm(i.css("background-color"));t.left===o&&t.top===a?s.setAlpha(.3):s.setAlpha(1),i.css("background-color",s.toRgbString()),r.css("background-color",s.toRgbString())}))}},{key:"render",value:function(e,t,n){var i=this;this.root;var r=this.engine,o={};e.forEach((function(e){var a=e.path,s=e.uuid,l=e.active,c=t.find((function(e){return e.uuid===s}));if(c&&(n||l))if(0!==a.length){var u=ew.fromPath(r,a);i.drawRange(u,c)}else o[s]=!0})),this.root.children("[data-uuid]").each((function(e){var n=i.engine.$,a=n(e),s=a.attributes("data-uuid");if(!t.find((function(e){return e.uuid===s}))||o[s]){if(a.hasClass("ot-card-mask")){var l=n(a[0].__targetNode),c=r.card.find(l);c&&!c.isEditable&&c.activatedByOther===s&&i.setCardActivatedByOther(c)}a.remove()}})),r.card.each((function(e){if(!e.isEditable){var n=t.find((function(t){return t.uuid===e.selectedByOther}));n&&!o[n.uuid]||i.setCardSelectedByOther(e)}}))}}]),e}(),Rw=function e(t){var n=document.createDocumentFragment(),i=null,r=0,o=null;for("string"==typeof t[0]&&(i=t[0],r=1);r<t.length;r++)if(Array.isArray(t[r]))n.appendChild(e(t[r]));else if("[object Object]"===t[r].toString()){if(i)for(var a in o=document.createElement(i),t[r])o.setAttribute(Dy(a),Ay(t[r][a]))}else if("number"==typeof t[r]||"string"==typeof t[r]){var s=document.createTextNode(t[r].toString());n.appendChild(s)}return!o&&i&&(o=document.createElement(i)),o?(o.appendChild(n),o):n.childNodes[0]};var Pw=function(e){var t;if(!gw(e)){var n=e.get(),i=n.nodeName,r=n.nodeType,o=n.attributes,a=n.nodeValue;if(r===sy().Node.ELEMENT_NODE){t=[i.toLowerCase()];for(var s={},l=0;o&&l<o.length;l++){var c,u=o[l],d=u.name,h=u.specified,f=u.value;if(h&&!vw(e,d))if("style"===d)s.style=Ey((null===(c=e.get())||void 0===c?void 0:c.style.cssText)||f);else"string"==typeof f&&(s[d]=f)}return t.push(s),function(e,t){var n=e.children();if(0!==n.length)for(var i=0;i<n.length;i++){var r=n.eq(i);if(r){var o=Pw(r);o&&t.push(o)}}}(e,t),t}return r===sy().Node.TEXT_NODE?String(a):void 0}},zw=function(e,t){if(0===t.length)return e;for(var n=e,i=0;i<t.length&&void 0!==n;i++)n=n[t[i]];return n},Bw=function(e,t){var n,i=(null===(n=t.oldPath)||void 0===n?void 0:n.slice())||[];e.forEach((function(e){var n,r=t.newPath[t.newPath.length-1],o=e.newPath[e.newPath.length-1],a=(null===(n=e.oldPath)||void 0===n?void 0:n.slice())||[],s=e.p.slice();"ld"in t&&("ld"in e&&(o<=r?i[i.length-1]=parseInt(i[i.length-1].toString())+1:(a[a.length-1]=parseInt(a[a.length-1].toString())+1,s[s.length-1]=parseInt(s[s.length-1].toString())+1)),"li"in e&&(o>=r?s[s.length-1]=parseInt(s[s.length-1].toString())+1:i[i.length-1]=parseInt(i[i.length-1].toString())-1)),"li"in t&&("ld"in e&&o>r&&(a[a.length-1]=parseInt(a[a.length-1].toString())-1,s[s.length-1]=parseInt(s[s.length-1].toString())-1),"li"in e&&o>r&&(s[s.length-1]=parseInt(s[s.length-1].toString())-1)),e.oldPath=a,e.p=s})),t.oldPath=i,e.push(t)},Fw=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e){var i;return jm(this,n),(i=t.call(this)).mode="lock",i.version=0,i.engine=e,i.create(),i}return Rm(n,[{key:"destroy",value:function(){delete this.data}},{key:"create",value:function(){this.data=Pw(this.engine.container)}},{key:"apply",value:function(e){if(e.length)try{this.data=yb.type.apply(this.data,e)}catch(t){console.log(t)}}},{key:"submitOp",value:function(e){this.apply(e)}}]),n}(),Hw=function(){function e(t){var n=this;jm(this,e),this.elementAtPath=function(e,t){iy(e)&&(e=e[0]);var i=t[0];if(i===Xb)return[e,void 0,e,i];var r=i-Jb,o=Array.from(e.childNodes).filter((function(e){var t=n.engine.$(e);return!gw(t)}))[r],a=t[1];return 1===t.length||a===Kb||a===Xb||o.nodeType===sy().Node.TEXT_NODE?[o,r,e,a]:n.elementAtPath(o,t.slice(1))},this.engine=t}return Rm(e,[{key:"fromRemoteAttr",value:function(e){if(e){var t=this.engine.$,n=e.id,i=e.leftText,r=e.rightText,o=t('[data-id="'.concat(n,'"]'));if(0!==o.length){var a=o.get(),s=a.textContent||"";if(""===s)return{container:a,offset:0};if(null==s?void 0:s.startsWith(i)){for(var l=a.firstChild,c=i.length;l&&(3!==l.nodeType||((null===(u=l.textContent)||void 0===u?void 0:u.length)||0)<c);){var u,d,h;if(((null===(d=l.textContent)||void 0===d?void 0:d.length)||0)<c)c-=(null===(h=l.textContent)||void 0===h?void 0:h.length)||0,l=l.nextSibling;else l=l.firstChild}return{container:l,offset:c}}if(null==s?void 0:s.endsWith(r)){for(var f,p,g=r.length,v=a.lastChild;v&&(3!==v.nodeType||((null===(m=v.textContent)||void 0===m?void 0:m.length)||0)<g);){var m,b,y,w;if((null===(b=v.textContent)||void 0===b?void 0:b.length)||0<g)g-=(null===(y=v)||void 0===y||null===(w=y.textContent)||void 0===w?void 0:w.length)||0,v=v.previousSibling;else v=v.lastChild}return{container:v,offset:(null===(f=v)||void 0===f||null===(p=f.textContent)||void 0===p?void 0:p.length)||0-g}}for(var k=0;s[k]===i[k];)k++;for(var x=a.firstChild;3!==(null===(C=x)||void 0===C?void 0:C.nodeType)||((null===(M=x.textContent)||void 0===M?void 0:M.length)||0)<k;){var C,M,S,E,O,N,T,A;if((null===(S=x)||void 0===S||null===(E=S.textContent)||void 0===E?void 0:E.length)||0<k)k-=(null===(O=x)||void 0===O||null===(N=O.textContent)||void 0===N?void 0:N.length)||0,x=null===(T=x)||void 0===T?void 0:T.nextSibling;else x=null===(A=x)||void 0===A?void 0:A.firstChild}return{container:x,offset:k}}}}},{key:"getSideText",value:function(e,t){var n=e.closest("[data-id]");if(n.length>0){var i=n.attributes("data-id"),r=ew.create(this.engine),o=ew.create(this.engine);return r.setStart(n[0],0),r.setEnd(e[0],t),o.setStart(e[0],t),o.setEnd(n[0],n[0].childNodes.length),{id:i,leftText:r.toString(),rightText:o.toString()}}}},{key:"setAttribute",value:function(e,t,n){var i,r=this.engine,o=this.engine,a=o.$,s=o.card,l=Vm(this.elementAtPath(r.container[0],e),1)[0],c=a(l);if((c&&c.length>0&&!c.isRoot()||/^data-selection-/.test(t))&&(t=Dy(t),n=Ay(n),null===(i=c.get())||void 0===i||i.setAttribute(t,n),c.isCard())){var u=s.find(c);(null==u?void 0:u.isEditable)||s.render(a(l))}}},{key:"removeAttribute",value:function(e,t){var n,i=this.engine,r=(0,this.engine.$)(Vm(this.elementAtPath(i.container[0],e),1)[0]);(r.length>0&&!r.isRoot()||/^data-selection-/.test(t))&&(null===(n=r.get())||void 0===n||n.removeAttribute(t))}},{key:"insertNode",value:function(e,t){var n=this.engine,i=this.engine.$,r=Vm(this.elementAtPath(n.container[0],e),3),o=r[0];r[1];var a=r[2],s=i(o),l=i(a);if(l.length>0&&!s.isRoot()){var c,u,d="string"==typeof t?document.createTextNode(t):Rw(t);if(s&&s.parent())null===(c=l.get())||void 0===c||c.insertBefore(d,s.get());else null===(u=l.get())||void 0===u||u.insertBefore(d,null);n.card.render(i(d))}}},{key:"deleteNode",value:function(e){var t=this.engine,n=Vm(this.elementAtPath(t.container[0],e),1)[0],i=(0,this.engine.$)(n);if(i.length>0&&!i.isRoot())if(i.isCard()){t.readonly=!1,t.card.remove(i);var r=t.card.find(i);r&&r.activated&&t.readonly&&(t.readonly=!1,t.isFocus()||t.focus())}else i.remove()}},{key:"insertInText",value:function(e,t,n){var i=this.engine,r=Vm(this.elementAtPath(i.container[0],e),4),o=r[0];r[1];var a=r[2];switch(r[3]){case Kb:throw Error("Unsupported indexType JSONML.TAG_NAME_INDEX (0)");case Xb:throw Error("Unsupported indexType JSONML.ATTRIBUTE_INDEX (1)");default:if(o&&!this.engine.$(o).isText())return;var s=o&&o.nodeValue?o.nodeValue:"",l=s.substring(0,t)+n+s.substring(t);if(o&&o.parentNode===a)o.nodeValue=l;else{var c=document.createTextNode(l);a.insertBefore(c,a.firstChild)}}}},{key:"deleteInText",value:function(e,t,n){var i=this.engine,r=Vm(this.elementAtPath(i.container[0],e),4),o=r[0];r[1];var a=r[2];switch(r[3]){case Kb:throw Error("Unsupported indexType JSONML.TAG_NAME_INDEX (0)");case Xb:throw Error("Unsupported indexType JSONML.ATTRIBUTE_INDEX (1)");default:if(a=o,!i.$(a).isText())return;var s=a&&a.nodeValue?a.nodeValue:"",l=s.substring(0,t)+s.substring(t+n.length);a.nodeValue=l}}},{key:"applyOperation",value:function(e){var t,n,i=e.p;if(0!==i.length)return("si"in e||"sd"in e)&&(n=i[i.length-1],i=i.slice(0,-1)),("oi"in e||"od"in e)&&(t=i[i.length-1].toString(),i=i.slice(0,-1)),"oi"in e?this.setAttribute(i,t,e.oi):"od"in e?this.removeAttribute(i,t):"sd"in e?this.deleteInText(i,n,e.sd):"si"in e?this.insertInText(i,n,e.si):"ld"in e?this.deleteNode(i):"li"in e?this.insertNode(i,e.li):void 0}},{key:"applyRemoteOperations",value:function(e){var t=this;try{var n=this.getRangeRemotePath();e.forEach((function(e){return t.applyOperation(e)})),n&&this.setRangeByRemotePath(n),this.engine.change.change()}catch(i){console.log(i)}}},{key:"applySelfOperations",value:function(e){var t=this;e.forEach((function(e){return t.applyOperation(e)})),this.engine.change.change()}},{key:"setRangeAfterOp",value:function(e){var t,n=this.engine,i=e.p;("si"in e||"sd"in e)&&(t=i[i.length-1],i=i.slice(0,-1)),("oi"in e||"od"in e)&&(i=i.slice(0,-1));var r=Vm(this.elementAtPath(n.container[0],i),3),o=r[0];r[1];var a=r[2],s=ew.create(this.engine);if("si"in e||"sd"in e){var l=""===o.data?a:o,c=e,u=t+(c.si?c.si.length:0);return s.setOffset(l,u,u),void n.change.select(s)}s.select(o||a.lastChild||a,!0).shrinkToElementNode().collapse(!1),n.change.select(s)}},{key:"getRangeRemotePath",value:function(){try{var e;if(0===(null===(e=window.getSelection())||void 0===e?void 0:e.rangeCount))return;var t=ew.from(this.engine);if(!t||t.inCard())return;var n=t.startNode,i=t.startOffset,r=t.endNode,o=t.endOffset;return{start:this.getSideText(n,i),end:this.getSideText(r,o)}}catch(a){return void console.log(a)}}},{key:"setRangeByRemotePath",value:function(e){try{var t,n=window.getSelection(),i=n?null===(t=ew.from(this.engine,n))||void 0===t?void 0:t.cloneRange():void 0;if(!i)return;var r,o,a=e.start,s=e.end;a&&(r=this.fromRemoteAttr(a)),s&&(o=this.fromRemoteAttr(s)),r&&r.container&&i.setStart(r.container,r.offset),o&&o.container&&i.setStart(o.container,o.offset),n.removeAllRanges(),this.engine.change.select(i)}catch(l){console.log(l)}}},{key:"setRangeByPath",value:function(e){if(e){var t=this.engine.$,n=Vm(e,2),i=n[0],r=n[1];if(i&&r){var o=i[i.length-1],a=r[r.length-1],s=i.slice(),l=r.slice();s.pop(),l.pop();var c=this.engine,u=c.container,d=c.change,h=u.getChildByPath(s,(function(e){return!gw(t(e))})),f=u.getChildByPath(l,(function(e){return!gw(t(e))}));try{var p=d.getRange();p.setStart(h,o),p.setEnd(f,a),d.select(p),p.scrollRangeIntoView()}catch(g){console.log(g)}}}}}]),e}(),Uw=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e,i){var r;return jm(this,n),(r=t.call(this)).addedNodes=[],r.timer=null,r.lineStart=!1,r.laterOps=null,r.engine=e,r.doc=i.doc,r.dmp=new wb.exports.diff_match_patch,r}return Rm(n,[{key:"patchesToOps",value:function(e,t,n){var i=[],r=this.dmp.patch_make(t,n);return Object.keys(r).forEach((function(t){var n=r[t],o=n.start1;n.diffs.forEach((function(t){var n=Vm(t,2),r=n[0],a=n[1];if(r!==wb.exports.DIFF_DELETE)if(r!==wb.exports.DIFF_INSERT)r===wb.exports.DIFF_EQUAL&&(o+=a.length);else{i.push({si:a,p:[].concat(Wm(e),[o])})}else{i.push({sd:a,p:[].concat(Wm(e),[o])})}}))})),i}},{key:"cacheAddedNode",value:function(e){this.addedNodes.push(e)}},{key:"clearAddedNodeCache",value:function(){this.addedNodes=[]}},{key:"inAddedCache",value:function(e){var t=this;return this.addedNodes.find((function(n){return t.engine.$(e).inside(n)||n===e}))}},{key:"isTransientMutation",value:function(e){var t=this.engine.$,n=e.addedNodes,i=e.removedNodes,r=e.target,o=e.type,a=e.attributeName;if("childList"===o){if(n[0]&&gw(t(n[0])))return!0;if(i[0]&&gw(t(i[0])))return!0;if(gw(t(r)))return!0}return!("attributes"!==o||!gw(t(r))&&!vw(t(r),a||""))||!("characterData"!==o||!gw(t(r)))}},{key:"makeOpsFromMutations",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.engine.container,o=[],a=[],s=[],l=[],c=[],u=!1,d=this.engine.$,h=function(e,t){l.includes(e)||(c.includes(e)||c.push(e),e.mutations=e.mutations||[],e.mutations.push(t))},f=function(c){var f=e[c],g=f.target,v=f.addedNodes,m=f.removedNodes,b=f.type;if(t.inAddedCache(g))return c++,p=c,"continue";if("childList"===b)if(r.equal(g)){if(m[0]){var y=t.getRemoveNodeIndex(f,e);Array.from(m).forEach((function(e){if(!o.find((function(t){return t===e}))){var t=[];t=t.concat(Wm(n),[y+2]);var r=[];r=r.concat(Wm(i),[y+2]),Bw(a,{ld:!0,p:t,newPath:t.slice(),oldPath:r})}}))}v[0]&&Array.from(v).forEach((function(e){var i=d(e),s=Pw(i);if(e.parentNode===r.get()){var c=[];c=c.concat(Wm(n),[i.getIndex((function(e){return!gw(d(e))}))+2]),Bw(a,{li:s,p:c,newPath:c.slice()}),l.push(e),t.cacheAddedNode(e)}else if(null!==e.parentNode){var u=d(e).findParent(r);u&&u.length>0&&h(u.get(),f),o.push(e)}else o.push(e)}))}else{var w=d(g).findParent(r);w&&w.length>0&&h(w.get(),f)}else if("characterData"===b)if(r.equal(g)){var k;if(!u)"string"==typeof zw(null===(k=t.doc)||void 0===k?void 0:k.data,i)&&(s.push({path:n,oldPath:i,newValue:g.data}),u=!0)}else{var x=d(g).findParent(r);x&&x.length>0&&h(x.get(),f)}else if("attributes"===b)if(r.equal(g)){var C=f.oldValue,M=f.attributeName,S=M?g.getAttribute(M):"";if(C!==(S=S?Ty(S):"")){var E={};E.p=[].concat(Wm(n),[1,Iy(M||"")]),C&&(E.od=C),S&&(E.oi=S),s.push(E)}}else{var O=d(g).findParent(r);O&&O.length>0&&h(O.get(),f)}c++,p=c},p=0;e[p];)f(p);var g=[];return a.forEach((function(e){if("ld"in e){var n,i=zw(null===(n=t.doc)||void 0===n?void 0:n.data,e.oldPath||[]);void 0!==i&&g.push({ld:i,p:e.p})}"li"in e&&g.push({li:e.li,p:e.p})})),g=g.concat(s),c.forEach((function(e){var r=e.mutations;if(delete e.mutations,null!==e){var o=d(e).getIndex((function(e){return!gw(d(e))})),s=Sw(o,a),l=[];g=g.concat(t.makeOpsFromMutations(r,l.concat.apply(l,Wm(n).concat([[o+2]])),l.concat(Wm(i),[s+2]),d(e)))}})),g}},{key:"getRemoveNodeIndex",value:function(e,t){var n,i=this,r=e.target,o=e.nextSibling,a=e.previousSibling,s=e.addedNodes,l=Array.from(r.childNodes).filter((function(e){return!gw(i.engine.$(e))})),c=l.indexOf(s[0]),u=l.indexOf(a),d=l.indexOf(o);return-1!==u?n=u+1:-1!==d?n=d:-1!==c?n=c:a?o?a&&(n=this.getRemoveNodeIndexFromMutation(a,r,t)):n=r.childNodes.length:n=0,void 0!==n?n:0}},{key:"getRemoveNodeIndexFromMutation",value:function(e,t,n){var i=n.find((function(n){return n.target===t&&n.removedNodes[0]===e}));return i?this.getRemoveNodeIndex(i,n):0}},{key:"handleMutations",value:function(e){var t=this;e=e.filter((function(e){return!t.isTransientMutation(e)})),this.clearAddedNodeCache();var n=this.makeOpsFromMutations(e);0!==(n=mw(n)).length&&this.normalizeOps(n)}},{key:"normalizeOps",value:function(e){var t=this;if(this.engine.change.isComposing()){if(2===e.length&&"ld"in e[1]&&e[1].ld[0]&&"li"in e[0]&&"string"==typeof e[0].li)return this.lineStart=!0,e[0].li="",void this.readyToEmitOps(e);if(1===e.length&&bw(e[0]))return;2===e.length&&"si"in e[0]&&Zg(e[0],e[1])&&e.splice(1,1),this.laterOps=e,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.engine.change.isComposing()||(t.lineStart&&(t.engine.history.hold(),t.lineStart=!1),t.laterOps&&(t.readyToEmitOps(t.laterOps),t.laterOps=null),t.timer=null)}),0)}if(this.laterOps){var n=Zg(this.laterOps,e);if(this.readyToEmitOps(this.laterOps),this.laterOps=null,n)return}this.readyToEmitOps(e)}},{key:"setDoc",value:function(e){this.doc=e}},{key:"readyToEmitOps",value:function(e){var t=this,n=[];e.forEach((function(e){if("path"in e&&void 0!==e.newValue){var i,r=zw(null===(i=t.doc)||void 0===i?void 0:i.data,e.oldPath);n=n.concat(t.patchesToOps(Wm(e.path),r,e.newValue))}else 0!==e.p.length&&n.push(e)})),0!==n.length&&this.emit("ops",n)}}]),n}(),Yw={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},Vw=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e,i){var r;return jm(this,n),(r=t.call(this)).isCache=!1,r.cache=[],r.node=e,r.isStopped=!0,r.engine=i.engine,r.doc=i.doc,r.creator=new Uw(r.engine,{doc:r.doc}),r.observer=new MutationObserver((function(e){var t;r.isCache&&(t=r.cache).push.apply(t,Wm(e));r.isStopped||r.isCache||r.creator.handleMutations(e)})),r.creator.on("ops",(function(e){r.onOpsReady(e)})),r}return Rm(n,[{key:"setDoc",value:function(e){this.doc=e,this.creator.setDoc(e)}},{key:"start",value:function(){this.isStopped&&(this.observer.observe(this.node[0],Yw),this.isStopped=!1)}},{key:"stop",value:function(){this.isStopped||(this.observer.disconnect(),this.isStopped=!0)}},{key:"startCache",value:function(){this.isCache||(this.cache=[],this.isCache=!0)}},{key:"submitCache",value:function(){var e=this;this.isCache&&setTimeout((function(){e.isCache=!1,e.cache.length>0&&e.creator.handleMutations(e.cache),e.cache=[]}),20)}},{key:"destroyCache",value:function(){var e=this;this.isCache&&setTimeout((function(){e.isCache=!1,e.cache=[]}),20)}},{key:"onOpsReady",value:function(e){this.isStopped||this.emit("ops",e)}}]),n}();tw(".ot-user-cursor {\n\tposition: absolute;\n\tz-index: 10;\n\twidth: 2px;\n}\n\n.ot-user-cursor-trigger {\n\tposition: absolute;\n\ttop: -5px;\n\tleft: -2px;\n\tborder-radius: 100%;\n\tcolor: #ffffff;\n\twidth: 6px;\n\theight: 6px;\n\tfont-size: 0;\n\toverflow: hidden;\n\ttransition: all 0.1s linear;\n}\n\n.ot-user-cursor-trigger-active {\n\ttop: -17px;\n\tborder-radius: 2px;\n\tcolor: #ffffff;\n\tfont-size: 10px;\n\tline-height: 18px;\n\theight: 18px;\n\twidth: auto;\n\tpadding: 0 3px;\n\twhite-space: nowrap;\n}\n\n.ot-card-mask {\n\tposition: absolute;\n\tz-index: 10;\n\tbackground: transparent;\n\tcursor: not-allowed;\n}\n\n.ot-user-cursor-card {\n\tposition: absolute;\n}\n\n.ot-user-cursor-card .ot-user-cursor-trigger {\n\tdisplay: none;\n}\n\n.ot-user-cursor-card .ot-user-cursor-trigger-active {\n\tposition: absolute;\n\tdisplay: block;\n\ttop: -19px;\n\tleft: 0;\n\tborder-radius: 2px;\n\tcolor: #ffffff;\n\tfont-size: 10px;\n\tline-height: 18px;\n\theight: 18px;\n\twidth: auto;\n\tpadding: 0 3px;\n\twhite-space: nowrap;\n}");var Ww=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],$w=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e){var i;return jm(this,n),(i=t.call(this)).currentMember={uuid:"",name:"",color:""},i.waitingOps=[],i.doc=null,i.updateRangeColoringPosition=Nv((function(){i.updateSelectionData(),i.rangeColoring.updatePosition()}),100),i.applyWaitingOps=Nv((function(){var e=mw(i.waitingOps);if(e.length>0){i.waitingOps=[],i.applyAll(e),i.engine.history.collectRemoteOps(e);var t=i.selectionData.getAll();i.doRangeColoring(t)}}),0),i.engine=e,i.members=[],i.selectionData=new Ew(e),i.rangeColoring=new Lw(e),i.applier=new Hw(e),i.mutation=new Vw(e.container,{engine:e}),i.mutation.on("ops",(function(e){return i.handleOps(e)})),i.clientId=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="23456789abcdefghijkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",n="";e--;)n+=t[pw(0,t.length)];return n}(),i.waitingOps=[],i.engine.on("select",(function(){i.updateSelectionData()})),i}return Rm(n,[{key:"destroy",value:function(){this.doc&&this.doc.destroy(),this.stopMutation(),this.rangeColoring.destroy(),this.mutation=null}},{key:"initLockMode",value:function(){var e;this.stopMutation(),this.doc=new Fw(this.engine),null===(e=this.mutation)||void 0===e||e.setDoc(this.doc),this.startMutation()}},{key:"init",value:function(e){var t,n=this,i=!this.doc||"lock"===this.doc.mode;this.stopMutation(),i||this.doc.destroy(),this.doc=e,null===(t=this.mutation)||void 0===t||t.setDoc(e),this.syncData(),e.on("op",(function(e,t){n.clientId!==t.toString()&&(n.waitingOps=n.waitingOps.concat(e),n.applyWaitingOps())})),this.initSelection(),this.startMutation(),i&&this.emit("load")}},{key:"handleOps",value:function(e){this.submitOps(e),this.engine.history.collectSelfOps(e),"lock"!==this.doc.mode&&this.updateRangeColoringPosition(),this.engine.trigger("ops",e)}},{key:"submitOps",value:function(e){this.doc&&this.doc.submitOp(e,{source:this.clientId})}},{key:"applyAll",value:function(e){this.stopMutation(),this.applier.applyRemoteOperations(e),this.startMutation()}},{key:"syncData",value:function(){var e=this.doc,t=this.engine;if(e)if(Array.isArray(e.data)&&e.data.length>0&&"lock"!==e.mode)this.setData(e.data);else{var n=Pw(t.container);e.data?e.submitOp([{p:[],oi:n}],{source:this.clientId}):e.create(n,"ot-json0",{source:this.clientId})}}},{key:"setData",value:function(e){this.engine.setJsonValue(e)}},{key:"startMutation",value:function(){this.mutation&&this.mutation.start()}},{key:"stopMutation",value:function(){this.mutation&&this.mutation.stop()}},{key:"startMutationCache",value:function(){this.mutation&&this.mutation.startCache()}},{key:"submitMutationCache",value:function(){this.mutation&&this.mutation.submitCache()}},{key:"destroyMutationCache",value:function(){this.mutation&&this.mutation.destroyCache()}},{key:"setMemberIdToUuid",value:function(e){e.__uuid=e.uuid,e.uuid=String(e.id).toLowerCase()}},{key:"setMemberUuidToId",value:function(e){e.uuid=e.__uuid,delete e.__uuid}},{key:"setMemberColor",value:function(e){var t=((e.iid||1)-1)%Ww.length;e.color=Ww[t]}},{key:"getMembers",value:function(){var e=this,t=Tv(this.members);return t.forEach((function(t){e.setMemberUuidToId(t)})),t}},{key:"setMembers",value:function(e){var t=this;(e=Tv(e)).forEach((function(e){t.setMemberIdToUuid(e),t.setMemberColor(e)})),this.members=e}},{key:"addMember",value:function(e){e=Tv(e),this.setMemberIdToUuid(e),this.setMemberColor(e),this.members.find((function(t){return t.uuid===e.uuid}))||this.members.push(e)}},{key:"removeMember",value:function(e){if((e=Tv(e)).uuid){this.setMemberIdToUuid(e),this.members=this.members.filter((function(t){return t.uuid!==e.uuid})),this.selectionData.remove(e.uuid);var t=this.selectionData.getAll();this.doRangeColoring(t)}}},{key:"setCurrentMember",value:function(e){e=Tv(e),this.setMemberIdToUuid(e),this.setMemberColor(e);var t=this.members.find((function(t){return t.uuid===e.uuid}));t&&(this.currentMember=t)}},{key:"getCurrentMember",value:function(){return this.currentMember&&this.currentMember.id?this.currentMember:void 0}},{key:"doRangeColoring",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.members,i=this.currentMember;e=e.filter((function(e){return e.uuid!==(null==i?void 0:i.uuid)})),this.rangeColoring.render(e,n,t),this.rangeColoring.updatePosition()}},{key:"updateSelectionData",value:function(){if(!this.engine.change.isComposing()){var e=this.selectionData.updateAll(this.currentMember,this.members).range;this.rangeColoring.updateBackgroundAlpha(e)}}},{key:"initSelection",value:function(){var e=this.selectionData.updateAll(this.currentMember,this.members).data;this.doRangeColoring(e,!0)}}]),n}(),Gw=function(){function e(){jm(this,e),this.data=ey}return Rm(e,[{key:"getValue",value:function(){return this.data}},{key:"clone",value:function(){var t=Tv(this.data),n=new e;return n.data=t,n}}]),e}(),Zw=function(){function e(t){var n=this;jm(this,e),this.totalOps=[],this.actionOps=[],this.currentAction={},this.currentActionIndex=0,this.holded=!1,this.locked=!1,this.lazySaveOp=Nv((function(){n.saveOp()}),200),this.engine=t}return Rm(e,[{key:"reset",value:function(){this.totalOps=[],this.actionOps=[],this.currentAction={},this.currentActionIndex=0}},{key:"hasUndo",value:function(){return!!this.getUndoOp()}},{key:"hasRedo",value:function(){return!!this.getRedoOp()}},{key:"undo",value:function(){this.saveOp();var e=this.getUndoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{this.engine.ot.submitOps(e.ops),this.engine.ot.applier.applySelfOperations(e.ops);var n=this.totalOps[this.totalOps.length-1];n&&n.uid===e.uid&&"undo"!==n.status?this.totalOps.pop():this.totalOps.push(e),this.currentActionIndex--,t=!0}catch(i){this.reset(),console.log(i)}this.engine.ot.startMutation(),t&&(this.engine.ot.applier.setRangeByPath(e.startRangePath),this.engine.change.change())}}},{key:"redo",value:function(){this.saveOp();var e=this.getRedoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{this.engine.ot.submitOps(e.ops),this.engine.ot.applier.applySelfOperations(e.ops);var n=this.totalOps[this.totalOps.length-1];n&&n.uid===e.uid&&"undo"===n.status?this.totalOps.pop():this.totalOps.push(e),this.currentActionIndex++,t=!0}catch(i){this.reset(),console.log(i)}this.engine.ot.startMutation(),t&&(this.engine.ot.applier.setRangeByPath(e.rangePath),this.engine.change.change())}}},{key:"hold",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.holded=!0,this.holdTimer&&clearTimeout(this.holdTimer),this.holdTimer=setTimeout((function(){return e.releaseHold()}),t)}},{key:"lock",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.locked=!0,this.lockTimer&&clearTimeout(this.lockTimer),this.lockTimer=setTimeout((function(){return e.releaseLock()}),t)}},{key:"releaseHold",value:function(){this.holded=!1}},{key:"releaseLock",value:function(){this.locked=!1}},{key:"clear",value:function(){var e=this;setTimeout((function(){e.reset()}),10)}},{key:"startCache",value:function(){this.engine.ot.startMutationCache()}},{key:"submitCache",value:function(){this.engine.ot.submitMutationCache()}},{key:"destroyCache",value:function(){this.engine.ot.destroyMutationCache()}},{key:"saveOp",value:function(){!this.locked&&this.currentAction&&this.currentAction.ops&&this.currentAction.ops.length>0&&(this.totalOps.push(this.currentAction),this.currentAction.self&&(this.currentAction.rangePath=this.getCurrentRangePath(),this.currentAction.uid=wy(8),this.actionOps.splice(this.currentActionIndex),this.actionOps.push(this.currentAction),this.currentActionIndex=this.actionOps.length,this.engine.change.change()),this.currentAction={})}},{key:"collectSelfOps",value:function(e){var t,n=this;if(!this.locked){(null===(t=this.currentAction)||void 0===t?void 0:t.self)||this.saveOp();var i=!1;e.forEach((function(e){var t;if(!bw(e))if(i=!0,n.holded&&n.actionOps.length>0)null===(t=n.actionOps[n.actionOps.length-1].ops)||void 0===t||t.push(e);else{n.currentAction.self=!0,n.currentAction.ops||(n.currentAction.ops=[]),n.currentAction.startRangePath||(n.currentAction.startRangePath=n.getRangePathBeforeCommand());var r=n.currentAction.ops[n.currentAction.ops.length-1];r&&yw(e,r)?n.currentAction.ops.pop():n.currentAction.ops.push(e)}})),i&&this.lazySaveOp()}}},{key:"collectRemoteOps",value:function(e){var t=this;this.currentAction.self&&this.saveOp(),e.forEach((function(e){if(!bw(e)){t.currentAction.ops||(t.currentAction.ops=[]);var n=t.currentAction.ops[t.currentAction.ops.length-1];n&&yw(e,n)?t.currentAction.ops.pop():t.currentAction.ops.push(e)}}))}},{key:"getUndoOp",value:function(){var e=this.currentActionIndex-1;if(this.actionOps[e]){var t=Tv(this.actionOps[e]),n=Zm(this.totalOps,(function(e){return e.uid==t.uid}));-1!==n?t=this.totalOps[n]:n=e;var i=yb.type.invert(t.ops||[]),r=this.totalOps.slice(n+1);try{var o=kw(i,r);if(0===o.length)return;return{self:!0,ops:o,uid:t.uid,status:"undo",rangePath:xw(t.rangePath,r),startRangePath:xw(t.startRangePath,r)}}catch(a){console.log(a)}}}},{key:"getRedoOp",value:function(){var e=this.currentActionIndex;if(this.actionOps[e]){var t=Tv(this.actionOps[e]),n=Zm(this.totalOps,(function(e){return e.uid===t.uid}));-1!==n?t=this.totalOps[n]:n=e;var i,r=[];r="undo"===t.status?yb.type.invert(t.ops||[]):t.ops,i=this.totalOps.slice(n+1);try{var o=kw(r||[],i);if(0===o.length)return;return{self:!0,ops:o,uid:t.uid,status:"redo",rangePath:xw(t.rangePath,i),startRangePath:xw(t.startRangePath,i)}}catch(a){console.log(a)}}}},{key:"getCurrentRangePath",value:function(){var e=this.engine,t=e.ot,n=e.change,i=t.selectionData.currentRangePath;return 0!==i.length?i:n.getRange().toPath()}},{key:"getRangePathBeforeCommand",value:function(){return this.engine.change.getRangePathBeforeCommand()||this.getCurrentRangePath()}}]),e}(),qw=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"queryEnabled",value:function(e){return!!this.editor.plugin.components[e]}},{key:"queryState",value:function(e){var t=this.editor.plugin.components[e];if(t&&t.queryState)try{for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.queryState(i)}catch(o){console.log(o)}}},{key:"execute",value:function(e){var t=this.editor.plugin.components[e];if(t&&t.execute){var n,i;Vy(this.editor)&&(i=this.editor.change).cacheRangeBeforeCommand();for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(n=this.editor).trigger.apply(n,["beforeCommandExecute",e].concat(o));try{var s,l,c,u=t.execute.apply(t,o);return null===(s=i)||void 0===s||s.combinTextNode(),null===(l=i)||void 0===l||l.onSelect(),(c=this.editor).trigger.apply(c,["afterCommandExecute",e].concat(o)),u}catch(d){console.log(d)}}}}]),e}(),Qw=function(){function e(t){var n,i=this;jm(this,e),this.disabled=!1,this.engine=t,null===(n=this.engine.typing.getHandleListener("default","keydown"))||void 0===n||n.on((function(e){return i.trigger(e)}))}return Rm(e,[{key:"trigger",value:function(e){var t=this;this.disabled||Object.keys(this.engine.plugin.components).every((function(n){var i=t.engine.plugin.components[n];if(i.hotkey){var r,o=i.hotkey(e),a=!1,s=[];if("string"==typeof o&&Nm(o,e)?a=!0:Array.isArray(o)?o.some((function(t){if("string"==typeof t){if(Nm(t,e))return a=!0,s=[],!0}else{var n=t.key,i=t.args;if(Nm(n,e))return a=!0,s=Array.isArray(i)?i:[i],!0}return!1})):"object"===zm(o)&&Nm(o.key,e)&&(a=!0,s=Array.isArray(o.args)?o.args:[o.args]),a)return e.preventDefault(),(r=t.engine.command).execute.apply(r,[n].concat(Wm(s))),!1}return!0}))}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"destroy",value:function(){this.engine.container.off("keydown",this.trigger)}}]),e}(),Kw=function e(t,n){jm(this,e),this.kind="plugin",this.editor=t,this.options=n||{}},Xw=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"init",value:function(){this.editor.schema.add(this.schema())}},{key:"setStyle",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=this.editor.$;ry(e)&&(e=o(e)),this.style&&Object.keys(this.style).forEach((function(n){var r,o=t.style[n];"object"===zm(o)&&(o=o.value),null===(r=o.match(/@var\d/g))||void 0===r||r.forEach((function(e){var t=parseInt(e.replace("@var",""),10);o=o.replace(new RegExp(e,"gm"),i[t]||"")})),e.css(n,o)}))}},{key:"setAttributes",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=this.editor.$;ry(e)&&(e=o(e)),this.attributes&&Object.keys(this.attributes).forEach((function(n){var r,o=t.attributes[n];"object"===zm(o)&&(o=o.value),null===(r=o.match(/@var\d/g))||void 0===r||r.forEach((function(e){var t=parseInt(e.replace("@var",""),10);o=o.replace(new RegExp(e,"gm"),i[t]||"")})),e.attributes(n,o)}))}},{key:"getStyle",value:function(e){var t=this,n=this.editor.$;ry(e)&&(e=n(e));var i={};return this.style&&this.isSelf(e)&&Object.keys(this.style).forEach((function(n){e=e;var r=n.toLowerCase().indexOf("color")>-1?Ey(e.css(n)||""):e.css(n),o=t.style[n];"object"===zm(o)&&(r=o.format(r)),r&&(i[n]=r)})),i}},{key:"getAttributes",value:function(e){var t=this,n=this.editor.$;ry(e)&&(e=n(e));var i={};return this.attributes&&this.isSelf(e)&&Object.keys(this.attributes).forEach((function(n){var r=e.attributes(n),o=t.attributes[n];"object"===zm(o)&&(r=o.format(r)),r&&(i[n]=r)})),i}},{key:"isSelf",value:function(e){var t=this.editor.$;ry(e)&&(e=t(e));var n=this.schema();return Array.isArray(n)&&(n=n.find((function(t){return t.name===e.name}))),!!n&&((Array.isArray(this.tagName)?this.tagName.indexOf(e.name)>-1:e.name===this.tagName)&&this.editor.schema.checkNode(e,n.attributes))}},{key:"schema",value:function(){var e=this;if(this.sechamCache)return this.sechamCache;var t={};if(this.attributes&&Object.keys(this.attributes).forEach((function(n){var i,r=e.attributes[n];"object"===zm(r)&&(r=r.value),t[n]=r,null===(i=r.match(/@var\d/g))||void 0===i||i.forEach((function(i){if(!e.variable)throw"Please specify the variable type";t[n]=e.variable[i]}))})),this.style){var n={};Object.keys(this.style).forEach((function(t){var i,r=e.style[t];"object"===zm(r)&&(r=r.value),null===(i=r.match(/@var\d/g))||void 0===i||i.forEach((function(i){if(!e.variable)throw"Please specify the variable type";n[t]=e.variable[i]}))})),t=_m(_m({},t),{},{style:n})}if(this.sechamCache={type:this.kind,attributes:t},"string"==typeof this.tagName)this.sechamCache.name=this.tagName.toLowerCase();else if(Array.isArray(this.tagName)){var i=[];this.tagName.forEach((function(t){i.push(_m(_m({},e.sechamCache),{},{name:t}))})),this.sechamCache=i}return this.sechamCache}}]),n}(),Jw=function(e){Qm(n,Xw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).kind="block",e}return Rm(n,[{key:"schema",value:function(){var e=this,t=kb(Km(n.prototype),"schema",this).call(this);return Array.isArray(t)?t.map((function(t){return _m(_m({},t),{},{allowIn:e.allowIn})})):_m(_m({},t),{},{allowIn:this.allowIn,canMerge:this.canMerge})}}]),n}(),ek=function(e){Qm(n,Xw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).kind="inline",e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),Vy(this.editor)&&this.markdown&&this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)}))}},{key:"execute",value:function(){if(Vy(this.editor)){for(var e=this.editor.$("<".concat(this.tagName," />")),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.setStyle.apply(this,[e].concat(n)),this.setAttributes.apply(this,[e].concat(n));var r=this.editor.inline,o=this.isTrigger?this.isTrigger.apply(this,n):!this.queryState();o?r.wrap(e):r.unwrap()}}},{key:"queryState",value:function(){var e=this;if(Vy(this.editor)){var t=this.editor.change;if(!this.style&&!this.attributes)return t.inlines.some((function(t){return t.name===e.tagName}));var n=[];return t.inlines.forEach((function(t){n.push.apply(n,Wm(Object.values(e.getStyle(t)))),n.push.apply(n,Wm(Object.values(e.getAttributes(t))))})),0===n.length?void 0:n}}},{key:"triggerMarkdown",value:function(e,t,n){if(Vy(this.editor)&&this.markdown){var i=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),r=new RegExp("^(.*)".concat(i,"(.+?)").concat(i,"$")).exec(t);if(r){var o=this.editor.change,a=o.getRange(),s=r[1]&&/\S$/.test(r[1]),l=r[2];e.preventDefault();var c=t.substr(0,t.length-l.length-2*this.markdown.length);n.get().splitText((c+l).length+2*this.markdown.length),s&&(c+=" "),n[0].nodeValue=c+l,a.setStart(n[0],c.length),a.setEnd(n[0],(c+l).length),o.select(a),this.editor.command.execute(this.constructor.pluginName),(a=o.getRange()).collapse(!1);var u=this.editor.inline.closest(a.startNode),d=u.next();return u&&d&&d.isText()&&/^\u200B/g.test(d.text())&&(a.setStart(d,1),a.setEnd(d,1)),o.select(a),this.editor.node.insertText(" "),!1}}}},{key:"pasteMarkdown",value:function(e){if(Vy(this.editor)&&this.markdown&&e.isText()){var t=this.editor,n=t.$;t.inline;var i=e.text();if(i){var r=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),o=new RegExp("(".concat(r,"([^").concat(r,"\r\n]+)").concat(r,")")),a=o.exec(i);if(a){for(var s="",l=e.clone(!0).get();l.textContent&&(a=o.exec(l.textContent));){var c,u=l.splitText(a.index);s+=l.textContent,l=u.splitText(a[0].length);var d=n("<".concat(this.tagName,">").concat(a[2],"</").concat(this.tagName,">"));this.setStyle(d),this.setAttributes(d),s+=null===(c=d.get())||void 0===c?void 0:c.outerHTML}s+=l.textContent,e.text(s)}}}}}]),n}();tw('.am-engine ol, .am-engine-view ol, .am-engine ul, .am-engine-view ul {\n    margin: 0 0 0 3px;\n    padding: 0;\n    list-style: none;\n}\n\n.am-engine ol ul,.am-engine-view ol ul,.am-engine ul ul,.am-engine-view ul ul,.am-engine ol ol,.am-engine-view ol ol,.am-engine ul ol,.am-engine-view ul ol {\n\tmargin-left: 0;\n}\n\n.am-engine ol ul li,.am-engine-view ol ul li,.am-engine ul ul li,.am-engine-view ul ul li,.am-engine ol ol li,.am-engine-view ol ol li,.am-engine ul ol li,.am-engine-view ul ol li {\n\tmargin-left: 2em;\n}\n\n.am-engine ol ol[data-indent-new="0"],.am-engine-view ol ol[data-indent-new="0"],.am-engine ul ol[data-indent-new="0"],.am-engine-view ul ol[data-indent-new="0"],.am-engine ol ol[data-indent-new="3"],.am-engine-view ol ol[data-indent-new="3"],.am-engine ul ol[data-indent-new="3"],.am-engine-view ul ol[data-indent-new="3"],.am-engine ol ol[data-indent-new="6"],.am-engine-view ol ol[data-indent-new="6"],.am-engine ul ol[data-indent-new="6"],.am-engine-view ul ol[data-indent-new="6"] {\n\tlist-style-type: decimal;\n}\n\n.am-engine ol ol[data-indent-new="1"],.am-engine-view ol ol[data-indent-new="1"],.am-engine ul ol[data-indent-new="1"],.am-engine-view ul ol[data-indent-new="1"],.am-engine ol ol[data-indent-new="4"],.am-engine-view ol ol[data-indent-new="4"],.am-engine ul ol[data-indent-new="4"],.am-engine-view ul ol[data-indent-new="4"],.am-engine ol ol[data-indent-new="7"],.am-engine-view ol ol[data-indent-new="7"],.am-engine ul ol[data-indent-new="7"],.am-engine-view ul ol[data-indent-new="7"] {\n\tlist-style-type: lower-alpha;\n}\n\n.am-engine ol ol[data-indent-new="2"],.am-engine-view ol ol[data-indent-new="2"],.am-engine ul ol[data-indent-new="2"],.am-engine-view ul ol[data-indent-new="2"],.am-engine ol ol[data-indent-new="5"],.am-engine-view ol ol[data-indent-new="5"],.am-engine ul ol[data-indent-new="5"],.am-engine-view ul ol[data-indent-new="5"],.am-engine ol ol[data-indent-new="8"],.am-engine-view ol ol[data-indent-new="8"],.am-engine ul ol[data-indent-new="8"],.am-engine-view ul ol[data-indent-new="8"] {\n\tlist-style-type: lower-roman;\n}\n\n.am-engine ol ul[data-indent-new="3"],.am-engine-view ol ul[data-indent-new="3"],.am-engine ul ul[data-indent-new="3"],.am-engine-view ul ul[data-indent-new="3"],.am-engine ol ul[data-indent-new="6"],.am-engine-view ol ul[data-indent-new="6"],.am-engine ul ul[data-indent-new="6"],.am-engine-view ul ul[data-indent-new="6"] {\n\tlist-style-type: disc;\n}\n\n.am-engine ol ul[data-indent-new="1"],.am-engine-view ol ul[data-indent-new="1"],.am-engine ul ul[data-indent-new="1"],.am-engine-view ul ul[data-indent-new="1"],.am-engine ol ul[data-indent-new="4"],.am-engine-view ol ul[data-indent-new="4"],.am-engine ul ul[data-indent-new="4"],.am-engine-view ul ul[data-indent-new="4"],.am-engine ol ul[data-indent-new="7"],.am-engine-view ol ul[data-indent-new="7"],.am-engine ul ul[data-indent-new="7"],.am-engine-view ul ul[data-indent-new="7"] {\n\tlist-style-type: circle;\n}\n\n.am-engine ol ul[data-indent-new="2"],.am-engine-view ol ul[data-indent-new="2"],.am-engine ul ul[data-indent-new="2"],.am-engine-view ul ul[data-indent-new="2"],.am-engine ol ul[data-indent-new="5"],.am-engine-view ol ul[data-indent-new="5"],.am-engine ul ul[data-indent-new="5"],.am-engine-view ul ul[data-indent-new="5"],.am-engine ol ul[data-indent-new="8"],.am-engine-view ol ul[data-indent-new="8"],.am-engine ul ul[data-indent-new="8"],.am-engine-view ul ul[data-indent-new="8"] {\n\tlist-style-type: square;\n}\n\n.am-engine li,.am-engine-view li {\n\tmargin-left: 23px;\n}\n\n.am-engine ol,.am-engine-view ol,.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"] {\n\tlist-style-type: decimal;\n}\n\n.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"] {\n\tlist-style-type: lower-alpha;\n}\n\n.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"] {\n\tlist-style-type: lower-roman;\n}\n\n.am-engine ul,.am-engine-view ul,.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\n\tlist-style-type: disc;\n}\n\n.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\n\tlist-style-type: circle;\n}\n\n.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\n\tlist-style-type: square;\n}\n\n.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"] {\n\tpadding-left: 2em;\n}\n\n.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"] {\n\tpadding-left: 4em;\n}\n\n.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"] {\n\tpadding-left: 6em;\n}\n\n.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"] {\n\tpadding-left: 8em;\n}\n\n.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"] {\n\tpadding-left: 10em;\n}\n\n.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\n\tpadding-left: 12em;\n}\n\n.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\n\tpadding-left: 14em;\n}\n\n.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\n\tpadding-left: 16em;\n}\n\n.am-engine .data-list,.am-engine-view .data-list {\n\tcolor: #262626;\n\ttext-indent: 0;\n}\n\n.am-engine .data-list-item,.am-engine-view .data-list-item {\n    line-height: inherit;\n    position: relative;\n    list-style: none;\n    text-indent: 0;\n}');var tk=function(e){Qm(n,Jw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).isPasteList=!1,e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),Vy(this.editor)&&(this.editor.on("paste:before",(function(t){return e.pasteBefore(t)})),this.editor.on("paste:insert",(function(){return e.pasteInsert()})),this.editor.on("paste:before",(function(){return e.pasteAfter()})))}},{key:"queryState",value:function(){return!!Vy(this.editor)&&this.editor.list.getPluginNameByNodes(this.editor.change.blocks)===this.constructor.pluginName}},{key:"pasteBefore",value:function(e){var t=this;if(this.cardName&&this.editor){var n=this.editor,i=n.list,r=n.$,o=r(e).allChildren();o.forEach((function(e){var n,o=r(e);"li"===o.name&&o.hasClass(i.CUSTOMZIE_LI_CLASS)&&(o.closest("ul").addClass(i.CUSTOMZIE_UL_CLASS),0===o.find("[".concat(Yb,"=").concat(t.cardName,"]")).length&&(null===(n=t.editor)||void 0===n||n.list.addReadyCardToCustomize(o,t.cardName)))})),this.isPasteList=o.some((function(e){return"li"===e.nodeName.toLowerCase()}))}}},{key:"pasteInsert",value:function(){var e=this;if(this.cardName&&Vy(this.editor)){var t=this.editor,n=t.change,i=t.list,r=n.getRange().getRootBlock(),o=null==r?void 0:r.next(),a=null==o?void 0:o.find("li.".concat(i.CUSTOMZIE_LI_CLASS));a&&a.length>0&&a.each((function(t){var n=e.editor.$(t);0===n.find("[".concat(Ub,"=").concat(e.cardName,"],[").concat(Yb,"=").concat(e.cardName,"]")).length&&i.addReadyCardToCustomize(n,e.cardName)}))}}},{key:"pasteAfter",value:function(){var e;this.isPasteList&&(null===(e=this.editor)||void 0===e||e.list.merge())}}]),n}(),nk=function(e){Qm(n,Xw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).kind="mark",e.followStyle=!0,e.combineValueByWrap=!1,e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),Vy(this.editor)&&this.markdown&&this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)}))}},{key:"execute",value:function(){if(Vy(this.editor)){for(var e=this.editor,t=e.$,n=e.change,i=t("<".concat(this.tagName," />")),r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];this.setStyle.apply(this,[i].concat(o)),this.setAttributes.apply(this,[i].concat(o));var s=this.editor.mark,l=this.isTrigger?this.isTrigger.apply(this,o):!this.queryState();if(l){if(!this.followStyle&&n.getRange().collapsed)return;s.wrap(i)}else s.unwrap(i)}}},{key:"queryState",value:function(){var e=this;if(Vy(this.editor)){var t=this.editor.change;if(!this.style&&!this.attributes)return t.marks.some((function(t){return t.name===e.tagName}));var n=[];return t.marks.forEach((function(t){n.push.apply(n,Wm(Object.values(e.getStyle(t)))),n.push.apply(n,Wm(Object.values(e.getAttributes(t))))})),0===n.length?void 0:n}}},{key:"schema",value:function(){var e=kb(Km(n.prototype),"schema",this).call(this);return Array.isArray(e)?e.map((function(e){return _m({},e)})):_m({},e)}},{key:"triggerMarkdown",value:function(e,t,n){if(Vy(this.editor)&&this.markdown){var i=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),r=new RegExp("^(.*)".concat(i,"(.+?)").concat(i,"$")).exec(t);if(r){var o=this.editor.block.findPlugin(n),a=this.constructor.pluginName;if(o.some((function(e){return e.disableMark&&e.disableMark.indexOf(a)>-1})))return;var s=this.editor.change,l=s.getRange(),c=r[1]&&/\S$/.test(r[1]),u=r[2];e.preventDefault();var d=t.substr(0,t.length-u.length-2*this.markdown.length);return n.get().splitText((d+u).length+2*this.markdown.length),c&&(d+=" "),n[0].nodeValue=d+u,l.setStart(n[0],d.length),l.setEnd(n[0],(d+u).length),s.select(l),this.editor.command.execute(this.constructor.pluginName),(l=s.getRange()).collapse(!1),s.select(l),this.editor.node.insertText(" "),!1}}}},{key:"pasteMarkdown",value:function(e){if(Vy(this.editor)&&this.markdown&&e.isText()){var t=e.text();if(t){var n=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),i=new RegExp("(".concat(n,"([^").concat(n,"\r\n]+)").concat(n,")")),r=i.exec(t);if(r){for(var o="",a=e.clone(!0).get();a.textContent&&(r=i.exec(a.textContent));){var s,l=a.splitText(r.index);o+=a.textContent,a=l.splitText(r[0].length);var c=this.editor.$("<".concat(this.tagName,">").concat(r[2],"</").concat(this.tagName,">"));this.setStyle(c),this.setAttributes(c),o+=null===(s=c.get())||void 0===s?void 0:s.outerHTML}o+=a.textContent,e.text(o)}}}}}]),n}(),ik=function(){function e(t){jm(this,e),this.data={},this.components={},this.editor=t}return Rm(e,[{key:"init",value:function(e,t){var n=this;e.forEach((function(e){n.data[e.pluginName]=e;var i=new e(n.editor,t[e.pluginName]);n.components[e.pluginName]=i,i.init&&i.init()}))}},{key:"add",value:function(e,t){if(this.data[e.pluginName]=e,t=_m(_m({},t),{},{editor:this.editor}),Vy(this.editor)){var n=new e(this.editor,t);n.init&&n.init(),this.components[e.pluginName]=n}}},{key:"each",value:function(e){var t=this;Object.keys(this.data).forEach((function(n,i){!e||e(n,t.data[n],i)}))}}]),e}(),rk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"insertNewline",value:function(e,t,n){var i=this.engine.change;e.select(t.root),e.collapse(n),i.select(e);var r=this.engine.$("<p><br /></p>");this.engine.block.insert(r,!0),n?t.focus(e,!0):(e.select(r,!0),e.collapse(!1)),i.select(e)}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.getRange(),i=this.engine.card.find(n.startNode);if(!i)return!0;if(i.constructor.cardType===ky.INLINE){n.startNode.closest(Zb).length>0&&(n.select(i.root),n.collapse(!0),t.select(n)),n.startNode.closest(Qb).length>0&&(n.select(i.root),n.collapse(!1),t.select(n))}else{if(n.startNode.closest(Zb).length>0){e.preventDefault();var r=i.root.prev();return!r||r.isCard()?(i.focusPrevBlock(n,!0),t.select(n)):this.insertNewline(n,i,!0),!1}if(n.startNode.closest(Qb).length>0){e.preventDefault();var o=i.root.next();return!o||o.isCard()?(i.focusNextBlock(n,!0),t.select(n)):this.insertNewline(n,i,!1),!1}}return!0}}]),e}(),ok=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine.change,n=t.getRange();if(n.collapsed){var i=this.engine.card.find(n.startNode);if(!i){var r=n.getPrevNode();return!(!e.isDelete&&r&&r.isCard()&&!this.engine.node.isCustomize(r))||(e.preventDefault(),this.engine.card.remove(r),!1)}if(i.constructor.cardType===ky.INLINE){if(n.startNode.closest(Zb).length>0&&(n.select(i.root).collapse(!0),t.select(n)),n.startNode.closest(Qb).length>0)return e.preventDefault(),this.engine.card.remove(i.id),n.addOrRemoveBr(),!1}else{var o;if(n.startNode.closest(Zb).length>0)return e.preventDefault(),(null===(o=i.root.parent())||void 0===o?void 0:o.inEditor())?t.unwrapNode(i.root.parent()):t.focusPrevBlock(i.root,!0),!1;if(n.startNode.closest(Qb).length>0)return e.preventDefault(),t.focusPrevBlock(i.root),this.engine.card.remove(i.id),!1}return!1!==this.engine.trigger("keydown:backspace")}}}]),e}(),ak=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"inline",value:function(e,t){var n=this.engine.change,i=n.getRange(),r=e.constructor.singleSelectable;return i.commonAncestorNode.closest(Zb).length>0?(i.setStartBefore(e.root[0]),i.collapse(!0),n.select(i),!0):!(i.commonAncestorNode.closest(Qb).length>0)||(t.preventDefault(),!1!==r?this.engine.card.select(e):(e.focus(i,!0),n.select(i)),!1)}},{key:"block",value:function(e,t){var n=this.engine.change,i=n.getRange();return i.commonAncestorNode.closest(Zb).length>0?(t.preventDefault(),e.focusPrevBlock(i,!1),n.select(i),!1):i.commonAncestorNode.closest(Qb).length>0?(t.preventDefault(),this.engine.card.select(e),!1):!this.engine.card.getSingleSelectedCard(i)||(t.preventDefault(),e.focus(i,!0),n.select(i),!1)}},{key:"trigger",value:function(e){var t=this.engine.change.getRange(),n=this.engine.card.getSingleCard(t);return!n||(n.constructor.cardType===ky.INLINE?this.inline(n,e):this.block(n,e))}}]),e}(),sk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"inline",value:function(e,t){var n=this.engine.change,i=n.getRange(),r=e.constructor.singleSelectable;if(i.commonAncestorNode.closest(Zb).length>0)return t.preventDefault(),!1!==r?this.engine.card.select(e):(e.focus(i,!1),n.select(i)),!1;if(i.commonAncestorNode.closest(Qb).length>0){var o=e.root.next();if(o&&o.isCard())return t.preventDefault(),this.engine.card.select(this.engine.card.find(o)),!1;i.setEndAfter(e.root[0]),i.collapse(!1),n.select(i)}return!0}},{key:"block",value:function(e,t){var n=this.engine.change,i=n.getRange();return i.commonAncestorNode.closest(Zb).length>0?(t.preventDefault(),this.engine.card.select(e),!1):i.commonAncestorNode.closest(Qb).length>0?(t.preventDefault(),e.focusNextBlock(i,!1),n.select(i),!1):!this.engine.card.getSingleSelectedCard(i)||(t.preventDefault(),e.focus(i,!1),n.select(i),!1)}},{key:"trigger",value:function(e){var t=this.engine.change.getRange(),n=this.engine.card.getSingleCard(t);return!n||(n.constructor.cardType===ky.INLINE?this.inline(n,e):this.block(n,e))}}]),e}(),lk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"inline",value:function(e,t){var n=this.engine.change,i=n.getRange();return t.preventDefault(),e.focusPrevBlock(i,!1),n.select(i),!1}},{key:"block",value:function(e,t){var n=this.engine.change,i=n.getRange();return t.preventDefault(),e.focusPrevBlock(i,!1),n.select(i),!1}},{key:"trigger",value:function(e){var t=this.engine.change.getRange(),n=this.engine.card.getSingleCard(t);return!n||(n.constructor.cardType===ky.INLINE?this.inline(n,e):this.block(n,e))}}]),e}(),ck=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"inline",value:function(e,t){var n=this.engine.change,i=n.getRange();return t.preventDefault(),e.focusNextBlock(i,!1),n.select(i),!1}},{key:"block",value:function(e,t){var n=this.engine.change,i=n.getRange();return t.preventDefault(),e.focusNextBlock(i,!1),n.select(i),!1}},{key:"trigger",value:function(e){var t=this.engine.change.getRange(),n=this.engine.card.getSingleCard(t);return!n||(n.constructor.cardType===ky.INLINE?this.inline(n,e):this.block(n,e))}}]),e}(),uk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"block",value:function(e,t){var n=this.engine.change,i=n.getRange();return i.commonAncestorNode.closest(Zb).length>0?(t.metaKey||t.ctrlKey||(e.focusPrevBlock(i,!0),n.select(i)),!0):(i.commonAncestorNode.closest(Qb).length>0&&(t.metaKey||t.ctrlKey||(e.focusNextBlock(i,!0),n.select(i))),!0)}},{key:"trigger",value:function(e){var t=this.engine.change.getRange(),n=this.engine.card.getSingleCard(t);return!n||(n.constructor.cardType!==ky.BLOCK||this.block(n,e))}}]),e}();tw('.am-engine .card-selected [data-card-element="center"].data-card-background-selected {\n    background: rgba(27, 162, 227, 0.2);\n}\n\n.am-engine .card-selected [data-card-element="center"].data-card-border-selected {\n    outline: 2px solid #1890FF;\n}');var dk=function(){function e(t){jm(this,e),this.classes={},this.components=[],this.editor=t}return Rm(e,[{key:"init",value:function(e){var t=this;if(Vy(this.editor)){var n,i,r,o,a,s,l,c=new rk(this.editor);null===(n=this.editor.typing.getHandleListener("enter","keydown"))||void 0===n||n.on((function(e){return c.trigger(e)}));var u=new ok(this.editor);null===(i=this.editor.typing.getHandleListener("backspace","keydown"))||void 0===i||i.on((function(e){return u.trigger(e)}));var d=new ak(this.editor);null===(r=this.editor.typing.getHandleListener("left","keydown"))||void 0===r||r.on((function(e){return d.trigger(e)}));var h=new sk(this.editor);null===(o=this.editor.typing.getHandleListener("right","keydown"))||void 0===o||o.on((function(e){return h.trigger(e)}));var f=new lk(this.editor);null===(a=this.editor.typing.getHandleListener("up","keydown"))||void 0===a||a.on((function(e){return f.trigger(e)}));var p=new ck(this.editor);null===(s=this.editor.typing.getHandleListener("down","keydown"))||void 0===s||s.on((function(e){return p.trigger(e)}));var g=new uk(this.editor);null===(l=this.editor.typing.getHandleListener("default","keydown"))||void 0===l||l.on((function(e){return g.trigger(e)}))}e.forEach((function(e){t.classes[e.cardName]=e}))}},{key:"add",value:function(e){this.classes[e.cardName]=e}},{key:"each",value:function(e){this.components.every((function(t,n){return!e||!1!==e(t,n)}))}},{key:"closest",value:function(e,t){var n=this.editor.$;if(ry(e)&&(e=n(e)),iy(e)&&!e.isCard()){var i=e.closest($b,(function(e){if(!(e&&t?n(e).isRoot():n(e).isEditable()))return e.parentNode||void 0}));if(!i||0===i.length)return;e=i}return e}},{key:"find",value:function(e,t){var n=this;if("string"!=typeof e){var i=this.closest(e,t);if(!i)return;e=i}var r=this.components.filter((function(t){return"string"==typeof e?t.id===e:t.root.equal(e)||t.id===function(e){ry(e)&&(e=n.editor.$(e));var t=e.attributes("data-card-value");return t?Ry(t):{}}(e).id}));if(0!==r.length)return r[0]}},{key:"findBlock",value:function(e){var t=this.editor.$;if(ry(e)&&(e=t(e)),e.get()){var n=e.parent();if(n){var i=this.find(n);if(i)return i.constructor.cardType===ky.BLOCK?i:this.findBlock(i.root)}}}},{key:"getSingleCard",value:function(e){var t=this.find(e.commonAncestorNode);return t||(t=this.getSingleSelectedCard(e)),t}},{key:"getSingleSelectedCard",value:function(e){var t=this.editor.$,n=e.findElementsInSimpleRange(),i=n[0];if(1===n.length&&i){var r=t(i);if(r.isCard())return this.find(r)}}},{key:"insertNode",value:function(e,t){var n=this.editor.$,i="inline"===t.constructor.cardType,r=this.editor;e.collapsed||r.change.deleteContent(e),this.gc(),i?r.inline.insert(t.root,e):r.block.insert(t.root,!0,e),this.components.push(t),t.focus(e);var o=t.root.parent();!i&&o&&o.inEditor()&&this.editor.node.isBlock(o)&&r.block.unwrap(o,e);var a=t.render(),s=t.getCenter();return void 0!==a&&t.getCenter().append("string"==typeof a?n(a):a),t.contenteditable.length>0&&s.find(t.contenteditable.join(",")).each((function(e){var t=n(e);t.attributes("contenteditable","true"),t.attributes(Tb,jb)})),t.didRender(),t.didInsert&&t.didInsert(),t}},{key:"removeNode",value:function(e){e.destroy&&e.destroy();var t=this.editor;e.constructor.cardType===ky.BLOCK&&(t.readonly=!1),this.removeComponent(e),e.root.remove()}},{key:"updateNode",value:function(e,t){var n=this.editor.$;e.destroy&&e.destroy(),e.findByKey("center").empty(),e.setValue(t);var i=e.render();void 0!==i&&e.getCenter().append("string"==typeof i?n(i):i),e.didUpdate&&e.didUpdate()}},{key:"replaceNode",value:function(e,t,n){var i=this.classes[t];if(!i)throw"".concat(t,": This card does not exist");var r=this.editor.$;n=Ly(n);var o=r(Py('<card type="'.concat(i.cardType,'" name="').concat(t,'" value="').concat(n,'"></card>')));return e.before(o),o.append(e),o}},{key:"activate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cy.MANUAL,n=arguments.length>2?arguments[2]:void 0;if(Vy(this.editor)){var i=e.getRoot();if(!i.get()||this.editor.container.equal(i)){var r=this.find(e),o=e.closest(Lb);if(!r&&o.length>0){var a=o.parent();r=a?this.find(a):void 0}var s=r?this.findBlock(r.root):void 0;s&&(r=s),r&&r.isCursor(e)&&(r=void 0);var l=r&&this.active&&this.active.root.equal(r.root);if(t===Cy.UPDATE_CARD&&(l=!1),this.active&&!l){var c;null===(c=this.active.toolbarModel)||void 0===c||c.hide();var u=this.active.constructor.cardType;this.active.activate(!1),u===ky.BLOCK&&(this.editor.readonly=!1)}if(r){if(r.activatedByOther)return;var d;if(!l)null===(d=r.toolbarModel)||void 0===d||d.show(n),r.constructor.cardType!==ky.INLINE||!1===r.constructor.autoSelected||t===Cy.CLICK&&r.readonly||this.select(r),r.activate(!0);r.constructor.cardType===ky.BLOCK&&(r.select(!1),0===o.length?this.editor.readonly=!0:this.editor.readonly=!1),l||t!==Cy.MOUSE_DOWN||this.editor.trigger("focus"),this.editor.change.onSelect()}}}}},{key:"select",value:function(e){if(Vy(this.editor)&&!1!==e.constructor.singleSelectable&&(e.constructor.cardType!==ky.BLOCK||!e.activated)){var t=this.editor.change.getRange(),n=e.root,i=n.parent(),r=i.children().toArray().findIndex((function(e){return e.equal(n)}));t.setStart(i,r),t.setEnd(i,r+1),this.editor.change.select(t)}}},{key:"focus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Vy(this.editor)){var n=this.editor.change.getRange();e.focus(n,t),this.editor.change.select(n),this.editor.readonly=!1,this.activate(n.startNode,Cy.MOUSE_DOWN),this.editor.change.onSelect(),this.editor.scrollNode&&n.scrollIntoViewIfNeeded(this.editor.container,this.editor.scrollNode)}}},{key:"insert",value:function(e,t){if(!Vy(this.editor))throw"Engine not found";var n=this.create(e,{value:t}),i=this.editor.change,r=i.getSafeRange(),o=this.insertNode(r,n),a=n.constructor.cardType;return"inline"===a&&o.focus(r,!1),i.select(r),"block"===a&&!1!==n.constructor.autoActivate&&this.activate(o.root,Cy.INSERT_CARD),i.change(),o}},{key:"update",value:function(e,t){if(Vy(this.editor)){var n=this.editor.change,i=this.find(e);if(i){this.updateNode(i,t);var r=n.getRange();i.focus(r,!1),n.change()}}}},{key:"remove",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.list,r=t.node,o=n.getRange(),a=this.find(e);if(a){a.constructor.cardType===ky.INLINE?(o.setEndAfter(a.root[0]),o.collapse(!1)):a.focusPrevBlock(o,!0);var s=a.root.parent();this.removeNode(a),i.addBr(o.startNode),s&&r.isEmpty(s)&&(s.isEditable()?(this.editor.node.html(s,"<p><br /></p>"),o.select(s,!0),o.shrinkToElementNode(),o.collapse(!1)):(this.editor.node.html(s,"<br />"),o.select(s,!0),o.collapse(!1))),n.select(o),n.change()}}}},{key:"create",value:function(e,t){var n=this.classes[e];if(!n)throw"".concat(e,": This card does not exist");var i=this.editor.$;if(["inline","block"].indexOf(n.cardType)<0)throw"".concat(e,': the type of card must be "inline", "block"');(null==t?void 0:t.root)&&t.root.empty();var r=new n({editor:this.editor,value:null==t?void 0:t.value,root:null==t?void 0:t.root});r.root.attributes(Vb,n.cardType),r.root.attributes(Ub,e);var o=void 0!==n.focus?n.focus:!r.readonly,a=n.cardType===ky.INLINE?"span":"div",s=i("<".concat(a," ").concat(r.isEditable?"data-transient-attributes='*'":"","/>"));s.attributes(Wb,"center"),o?s.attributes("contenteditable","false"):r.root.attributes("contenteditable","false");var l=i("<".concat(a," ").concat(Wb,'="body" />'));if(o){var c=i("<span ".concat(Wb,'="left" ').concat("data-transient-element",'="true">&#8203;</span>')),u=i("<span ".concat(Wb,'="right" ').concat("data-transient-element",'="true">&#8203;</span>'));l.append(c),l.append(s),l.append(u)}else l.append(s);return r.root.append(l),r.init&&r.init(),r}},{key:"render",value:function(e){var t=this,n=this.editor.$,i=e?e.isCard()?e:e.find("".concat(Gb,",").concat($b)):this.editor.container.find(Gb);this.gc(),i.each((function(e){var i=n(e),r=i.attributes(Yb),o=i.attributes(Ub),a=r||o;if(t.classes[a]){var s,l=i.attributes("data-card-value"),c=i.attributes();o&&(s=t.find(i))&&(s.destroy&&s.destroy(),t.removeComponent(s)),s=t.create(a,{value:Ry(l),root:o?i:void 0}),Object.keys(c).forEach((function(e){0===e.indexOf("data-")&&0!==e.indexOf("data-card")&&s.root.attributes(e,c[e])})),r&&i.replaceWith(s.root),t.components.push(s);var u=s.render(),d=s.getCenter();void 0!==u&&d.append("string"==typeof u?n(u):u),s.contenteditable.length>0&&d.find(s.contenteditable.join(",")).each((function(e){var t=n(e);t.attributes("contenteditable","true"),t.attributes(Tb,jb)})),s.didRender()}}))}},{key:"removeComponent",value:function(e){var t=this;this.each((function(n,i){if(n.root.equal(e.root))return t.components.splice(i,1),!1}))}},{key:"gc",value:function(){for(var e=0;e<this.components.length;e++){var t=this.components[e];t.root[0]&&0!==t.root.closest("body").length||(t.destroy&&t.destroy(),this.components.splice(e,1),e--)}}},{key:"active",get:function(){return this.components.find((function(e){return e.activated}))}},{key:"length",get:function(){return this.components.length}}]),e}(),hk=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"getData",value:function(e){var t,n=function(e){return!!e.dataTransfer}(e)?e.dataTransfer:e.clipboardData,i=null==n?void 0:n.getData("text/html"),r=null==n?void 0:n.getData("text"),o=[];try{(null==n?void 0:n.items)&&n.items.length>0?Array.from(n.items).forEach((function(e){var t,n="file"===e.kind?e.getAsFile():null;null!==n&&(n.type&&n.type.indexOf("image/png")>-1&&!n.lastModified&&(n=new File([n],"image.png",{type:n.type})),n.ext=null===(t=r)||void 0===t?void 0:t.split(".").pop());n&&o.push(n)})):(null==n?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}catch(a){(null==n?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}return""===i&&r&&/^.+\.\w+$/.test(r)&&o.length>0?r="":""===r&&i&&/^(<meta.+?>)?<img.+?>$/.test(i)&&o.length>0?i="":(i||r)&&o.length>0&&!(null===(t=i)||void 0===t?void 0:t.startsWith("<img"))&&(i||!/^https(s)?:/.test(r||""))&&(o=[]),{html:i,text:r,files:o}}},{key:"write",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(t||(t=ew.from(this.editor)),!t)throw"Range is null";t=t.cloneRange();var i=this.editor.$,r=t.startNode.closest("[data-card-key]",(function(e){return i(e).isEditable()?void 0:e.parentNode||void 0}));if(r.length>0&&!t.collapsed&&0===t.endOffset&&(t.endContainer.previousSibling&&t.setEndAfter(t.endContainer.previousSibling),!t.collapsed&&t.endOffset>0&&t.endContainer.childNodes[t.endOffset-1]===r[0])){var o=t.startNode.closest('[data-card-element="center"]',(function(e){return i(e).isEditable()?void 0:e.parentNode||void 0}));o.length>0?t.setEnd(o[0],o[0].childNodes.length):t.setEnd(r[0],r[0].childNodes.length)}var a=t.commonAncestorNode;if((r=a.closest("[data-card-key]",(function(e){return i(e).isEditable()?void 0:e.parentNode||void 0}))).length>0){var s=a.closest('[data-card-element="center"]',(function(e){return i(e).isEditable()?void 0:e.parentNode||void 0}));0===s.length&&(t.select(r),a=t.commonAncestorNode)}var l="#text"===a.name?[document.createElement("span")]:[];r=a.closest("[data-card-key]",(function(e){if(!i(e).isEditable()){if(e.nodeType===sy().Node.ELEMENT_NODE)"inline"===window.getComputedStyle(e).getPropertyValue("display")&&l.push(e.cloneNode());return e.parentNode||void 0}}));var c=a.find(".am-engine-view").length>0||a.find(".am-engine").length>0,u=a.closest(".am-engine-view").length>0||a.closest(".am-engine").length>0;if(r.length<=0&&(c||u)){if(u&&!a.isEditable()){var d=this.editor.block.closest(a);["h1","h2","h3","h4","h5","h6"].indexOf(d.name)>-1&&l.push(d[0].cloneNode())}if(e.preventDefault(),t.collapsed){var h,f;null===(h=e.clipboardData)||void 0===h||h.setData("text/html",""),null===(f=e.clipboardData)||void 0===f||f.setData("text","")}else{var p,g,v=t.cloneContents(),m=this.setNodes(l),b=m.inner,y=m.outter,w=new cw(v,this.editor),k=w.toHTML(b,y),x=k.html,C=k.text;n&&n({html:x,text:C}),x&&(x='<meta name="source" content="aomao" />'+x),null===(p=e.clipboardData)||void 0===p||p.setData("text/html",x),null===(g=e.clipboardData)||void 0===g||g.setData("text",C)}}}},{key:"copy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return Mb(e);var i=this.editor.$,r=window.getSelection(),o=r&&ew.from(this.editor,r)||ew.create(this.editor),a=o.cloneRange(),s=i('<div class="am-engine-view">&#8203;</div>');s.css({position:"fixed",top:0,clip:"rect(0, 0, 0, 0)"}),s.on("copy",(function(e){t.write(e)})),i(document.body).append(s),s.append(this.editor.node.clone(i(e),!0)),n&&s.allChildren().forEach((function(e){t.editor.trigger("copy",i(e))})),s.append(i("&#8203;",null)),o.select(s,!0),null==r||r.removeAllRanges(),null==r||r.addRange(o.toRange());var l=!1;try{if(!(l=document.execCommand("copy")))throw"copy command was unsuccessful"}catch(c){console.log("unable to copy using execCommand: ",c)}finally{s.remove(),null==r||r.removeAllRanges(),null==r||r.addRange(a.toRange())}return l}},{key:"cut",value:function(){var e=ew.from(this.editor);if(e){var t=e.commonAncestorNode;this.editor.change.deleteContent(e);for(var n=-1!==["ul","ol"].indexOf(t.name)?t:t.find("ul,ol"),i=this.editor.$,r=0;r<n.length;r++){var o=i(n[r]);o.find("li").each((function(e){var t;(""===e.innerText||fy&&"\n"===e.innerText)&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e))})),0===o.children().length&&o.remove()}}}},{key:"setNodes",value:function(e){if(0===e.length)return{};for(var t=e.length-1;t>0;t--){e[t].appendChild(e[t-1])}return{inner:e[0],outter:e[e.length-1]}}}]),e}(),fk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jm(this,e),this.data={},this.lange="zh-cn",this.lange=t,this.data=n}return Rm(e,[{key:"add",value:function(e){this.data=vm(this.data,e)}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=function e(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,r=n;r<t.length;r++){var o=i[t[r]];return"object"===zm(o)?e(r+1,o):o||""}return i};return i(0,this.data[this.lange])}}]),e}(),pk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,i=t.node,r=n.getRange(),o=r.cloneRange().shrinkToTextNode(),a=o.collapsed,s=o.endNode,l=o.startNode,c=o.startOffset,u=o.endOffset;if(s.type===Node.TEXT_NODE||l.type===Node.TEXT_NODE){if(!a){var d=s.parent();if(d&&s.type===Node.TEXT_NODE&&i.isMark(d)){var h=s.text().substr(u);if(!/^\u200b$/.test(h))return!0;r.setEnd(s,u+1)}return!0}var f=l.parent();if(f&&l.type===Node.TEXT_NODE&&i.isMark(f)){if(c<1)return!0;var p=l.text().substr(c-1,1);if(!/^\u200b$/.test(p))return!0;if(1===c){var g=f.prev();if(g&&!i.isEmpty(g)){var v=r.cloneRange().select(g,!0).shrinkToTextNode().collapse(!1),m=v.startNode,b=v.startOffset;r.setStart(m,b-1)}else if(!g&&i.isEmpty(f)){var y=f.parent(),w=f.offset();f.remove(),y&&r.setStart(y,0===w?0:w-1)}}else r.setStart(l,c-1);return!0}if((f=l.prev()||void 0)&&l.type===Node.TEXT_NODE&&i.isMark(f)){var k=l.text().substr(c-1,1);if(!/^\u200b$/.test(k))return!0;if(1===c){var x=r.cloneRange().select(f,!0).shrinkToTextNode().collapse(!1),C=x.startNode,M=x.startOffset;r.setStart(C,M-1)}else r.setStart(l,c-1)}}return!0}}]),e}(),gk=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"init",value:function(){var e=this;if(Vy(this.editor)){var t,n=new pk(this.editor);null===(t=this.editor.typing.getHandleListener("backspace","keydown"))||void 0===t||t.on((function(e){return n.trigger(e)})),this.editor.on("keydown:space",(function(t){return e.triggerMarkdown(t)}))}}},{key:"triggerMarkdown",value:function(e){var t=this;if(Vy(this.editor)){var n=this.editor.change,i=n.getRange();if(i.collapsed&&!n.isComposing()){var r=i.startNode,o=i.startOffset,a=r.type===Node.TEXT_NODE?r:r.children().eq(o-1);if(a){var s=a.type===Node.TEXT_NODE?a.text().substr(0,o):a.text();return!Object.keys(this.editor.plugin.components).some((function(n){var i=t.editor.plugin.components[n];if(Zy(i)&&i.markdown&&!1===i.triggerMarkdown(e,s,a))return!0}))}}}}},{key:"findPlugin",value:function(e){var t=this.editor,n=t.node,i=t.plugin,r=t.schema;if(n.isMark(e)){var o=void 0;return Object.keys(i.components).some((function(t){var n=i.components[t];if(Zy(n)&&e.name===n.tagName){var a=n.schema();if((n.attributes||n.style)&&!(Array.isArray(a)?a.find((function(t){return r.checkNode(e,t.attributes)})):r.checkNode(e,a.attributes)))return;return o=n,!0}})),o}}},{key:"closestNotMark",value:function(e){for(;(this.editor.node.isMark(e)||e.isText())&&!e.isEditable();){var t=e.parent();if(!t)break;e=t}return e}},{key:"compare",value:function(e,t,n){if(e.name!==t.name)return!1;var i=e.attributes();delete i.style;var r=t.attributes();delete r.style;var o=e.css(),a=t.css();delete i.class,delete r.class;var s=e.get().className.trim(),l=t.get().className.trim(),c=""!==s?s.split(/\s+/):[],u=""!==l?l.split(/\s+/):[],d=this.editor.schema,h=d.find((function(t){return t.name===e.name})),f=function(e){for(var t=0;t<h.length;t++){var n=h[t];if(n.attributes&&d.checkValue(n.attributes,"class",e.join(" ").trim()))return n.attributes.class.toString()}return e.join(" ").trim()};return n||(c=c.length>0?[f(c)]:[],u=u.length>0?[f(u)]:[]),Object.keys(i).length===Object.keys(r).length&&(!!Object.keys(i).every((function(e){return n?i[e]===r[e]:!!r[e]}))&&(Object.keys(o).length===Object.keys(a).length&&(!!Object.keys(o).every((function(e){return n?o[e]===a[e]:!!a[e]}))&&(c.length===u.length&&!!c.every((function(e){return-1!==u.indexOf(e)}))))))}},{key:"contain",value:function(e,t){var n=t.attributes(),i=n.style||{};delete n.style;var r=e.attributes(),o=r.style||{};return delete r.style,Object.keys(n).every((function(e){return!!r[e]}))&&Object.keys(i).every((function(e){return!o[e]}))}},{key:"unwrapEmptyMarks",value:function(e,t){var n=this.editor,i=n.$,r=n.node;e.allChildren().forEach((function(e){var n=i(e);r.isEmpty(n)&&r.isMark(n)&&(!t||t(n))&&r.unwrap(n)}))}},{key:"splitOnCollapsed",value:function(e,t,n){var i=this;if(e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var r=e.startNode,o=r.parent(),a=r.isCard()?r:r.closest($b),s=this.editor;s.$;var l=s.node;if((0===a.length||"inline"!==a.attributes(Vb))&&(l.isMark(r)||o&&l.isMark(o))){var c,u=this.closestNotMark(r),d=e.createSelection(),h=d.getNode(u,"left"),f=this.editor.$,p=void 0,g=void 0,v=[];if(n){ry(n)&&(n=f(n));var m=n.getPath(u.get()),b=u.clone(!0);v=m.slice(1),g=f(b.getChildByPath(m.slice(0,1))),p=d.getNode(b,"right",!1)}else p=d.getNode(u,"right");this.unwrapEmptyMarks(h),this.unwrapEmptyMarks(p,(function(e){return t&&!Array.isArray(t)&&(t=[t]),!t||0===t.length||!e.isCard()&&t.some((function(t){return i.compare(e,t)}))})),u.empty();var y=h.children(),w=y.toArray();u.append(y);var k=p.children(),x=k.toArray();g&&(n=null===(c=x.find((function(e){return e.equal(g)})))||void 0===c?void 0:c.getChildByPath(v)),u.append(k),u.find($b).each((function(e){var t=i.editor.card.find(e);t&&!t.root.equal(e)&&(t.root[0]=e)}));var C=f("​",null);if(1===w.length&&"br"===w[0].name&&(w[0].remove(),w.splice(0,1)),1===x.length&&"br"===x[0].name&&(x[0].remove(),x.splice(0,1)),x.length>0){var M=x[0];if(l.isEmpty(M)){for(var S=M.first();S&&!S.isText();)M=S,S=S.first();M.isText()?M.before(C):M.prepend(C)}else{var E=l.isMark(r)?r:r.parent(),O=C;t&&!Array.isArray(t)&&(t=[t]);for(var N=function(){var e=E.clone();if(!t.some((function(t){return i.compare(e,t)}))){var n=C.equal(O);O=l.wrap(O,e),n&&(C=O.first())}E=E.parent()};t&&t.length>0&&E&&l.isMark(E);)N();M.before(O)}e.select(C).collapse(!1)}else if(w.length>0){w[w.length-1].after(C),e.select(C).collapse(!1)}else e.select(u,!0).collapse(!0);var T=!1;u.children().each((function(e){var t=i.editor.$(e);if(t.isText()){var n=e.textContent,r=(null==n?void 0:n.replace(/\u200b+/g,"​"))||"";if(n!==r&&(e.textContent=r),T){var o=t.next(),a=t.parent();(!o&&a&&!l.isInline(a)||o&&!l.isInline(o))&&r.startsWith("​")?(r=r.substring(1))?e.textContent=r:t.remove():T=!1}r.endsWith("​")&&(T=!0)}else T=!1}));var A=l;if(C[0].parentNode){var I=C[0],D=null,_=0,j=function(e,t){for(var n;e;){if(e.nodeType!==I.nodeType)return;var i=(n=e,t?n.previousSibling:n.nextSibling);if(e.textContent===D){var r;if(i&&A.isInline(i)||!i&&e.parentNode&&A.isInline(e.parentNode))break;null===(r=e.parentNode)||void 0===r||r.removeChild(e),e=i}else{var o,a;if(t)for(;D&&(null===(s=e.textContent)||void 0===s?void 0:s.endsWith(D));){var s;if(i&&A.isInline(i)||!i&&e.parentNode&&A.isInline(e.parentNode))break;e.textContent=e.textContent.substring(0,e.textContent.length-_)}else for(;D&&(null===(l=e.textContent)||void 0===l?void 0:l.startsWith(D));){var l;if(i&&A.isInline(i)||!i&&e.parentNode&&A.isInline(e.parentNode))break;e.textContent=e.textContent.substring(D.length)}if(0!==(null===(o=e.textContent)||void 0===o?void 0:o.length))return;null===(a=e.parentNode)||void 0===a||a.removeChild(e),e=i}}};if(I.nodeType===sy().Node.TEXT_NODE){var L=I.textContent;_=(D=L).length,j(I.previousSibling,!0),j(I.nextSibling,!1)}}}return n}}},{key:"splitOnExpanded",value:function(e,t){var n=this;if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var i=e.startNode,r=e.endNode,o=i.isCard()?i:i.closest($b),a=r.isCard()?r:r.closest($b);if(!(o.length>0&&"inline"===o.attributes(Vb)||a.length>0&&"inline"===a.attributes(Vb))){var s=this.closestNotMark(i),l=this.closestNotMark(r);if(!s.equal(l)){var c=e.cloneRange();c.collapse(!0);var u=e.cloneRange();u.collapse(!1);var d=void 0,h=c.startOffset,f=u.endOffset;return void(s.contains(l)?(d=this.splitOnCollapsed(c,t,u.endNode),e.setStart(c.startContainer,c.startOffset),d&&u.setOffset(d,f,f),this.splitOnCollapsed(u,t),e.setEnd(u.startContainer,u.startOffset)):(d=this.splitOnCollapsed(u,t,c.startNode),e.setEnd(u.startContainer,u.startOffset),d&&c.setOffset(d,h,h),this.splitOnCollapsed(c,t),e.setStart(c.startContainer,c.startOffset)))}var p=this.editor.node,g=i.parent(),v=p.isMark(i)||g&&p.isMark(g),m=r.parent(),b=p.isMark(r)||m&&p.isMark(m);if(!v&&!b)return;var y=e.commonAncestorNode;y.isText()&&(y=y.parent());var w=this.closestNotMark(y),k=e.createSelection(),x=k.getNode(w,"left"),C=k.getNode(w),M=k.getNode(w,"right");this.unwrapEmptyMarks(x),this.unwrapEmptyMarks(M),w.empty(),w.append(x.children());var S=C.children(),E=S.toArray();w.append(S),w.append(M.children()),w.find($b).each((function(e){var t=n.editor.card.find(e);t&&!t.root.equal(e)&&(t.root[0]=e)})),e.setStartBefore(E[0][0]),e.setEndAfter(E[E.length-1][0])}}}},{key:"split",value:function(e,t){if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.$,o=e||i.getSafeRange(),a=ay(o.startContainer);("string"==typeof t||!Array.isArray(t)&&t&&ry(t))&&(t=r(t,a)),o.collapsed?this.splitOnCollapsed(o,t):this.splitOnExpanded(o,t),e||i.apply(o)}}},{key:"wrap",value:function(e,t){var n=this,i=Vy(this.editor)?this.editor.change:void 0;if(t||i){var r=this.editor,o=r.node,a=r.$,s=t||i.getSafeRange(),l=ay(s.startContainer);if(e="string"==typeof e||ry(e)?a(e,l):e,o.isMark(e)){if(s.collapsed){0===e.children().length&&e.append(l.createTextNode("​"));var c=s.startNode,u=c.parent();return u&&c.isText()&&o.isMark(u)&&this.compare(u,e)&&this.split(s,u.clone()),o.insert(e,s),this.merge(s),s.addOrRemoveBr(),void(t||null==i||i.apply(s))}this.split(s);var d=s.commonAncestorNode;d.type===sy().Node.TEXT_NODE&&(d=d.parent());var h=s.createSelection();if(h.anchor||h.focus){var f=!1,p=o;d.traverse((function(t){var i=a(t);if(e=e,i.equal(h.anchor))f=!0;else if(f){if(i.equal(h.focus))return f=!1,!1;if(p.isMark(i)&&!i.isCard()){if(!p.isEmpty(i)){for(var r=i,o=r.children();p.isMark(r)&&1===o.length;){var s=o.eq(0);if(p.isMark(s))o=(r=s).children();else{if(!s.isText())break;r=s}}r.removeZeroWidthSpace();var l=r.parent();if(r.isText()&&l&&p.isMark(l)){if(n.compare(l.clone(),e,!0))return!0;if(1===l.children().length){var c=n.findPlugin(e),u=n.findPlugin(l);if(c&&c===u&&!0===c.combineValueByWrap)return p.wrap(l,e,!0),!0;c&&c===u&&p.unwrap(l)}}return p.wrap(r,e),!0}i.name!==e.name&&i.remove()}if(i.isText()&&!p.isEmpty(i)){i.removeZeroWidthSpace();var d=i.parent();if(d&&p.isMark(d)){if(n.compare(d.clone(),e,!0))return!0;if(1===d.children().length){var g=n.findPlugin(e),v=n.findPlugin(d);if(g&&g===v&&!0===g.combineValueByWrap)return p.wrap(d,e,!0),!0;g&&g===v&&p.unwrap(d)}}p.wrap(i,e)}}})),h.move(),this.merge(s),t||null==i||i.apply(s)}else t||null==i||i.apply(s)}}}},{key:"merge",value:function(e){var t=this;if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.$,o=n.node,a=e||i.getSafeRange(),s=this.findMarks(a);if(0!==s.length){!function e(n){n.forEach((function(n){var i=n.prev(),s=n.next();if(i&&t.compare(i,n,!0)){var l=a.shrinkToElementNode().createSelection();o.merge(i,n),l.move(),n=i}if(s&&t.compare(s,n,!0)){var c=a.shrinkToElementNode().createSelection();o.merge(n,s),c.move()}var u=[];n.children().each((function(e){var t=r(e);o.isMark(t)&&u.push(t)})),u.length>0&&e(u)}))}(s),a.addOrRemoveBr(),e||i.apply(a)}}}},{key:"unwrap",value:function(e,t){var n=this;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.$,a=i.node,s=t||r.getSafeRange(),l=ay(s.startContainer)||document;if(void 0===e||Array.isArray(e)||"string"!=typeof e&&!ry(e)||(e=o(e,l)),this.split(s,e),s.collapsed)t||r.apply(s);else{var c=s.commonAncestorNode;c.type===sy().Node.TEXT_NODE&&(c=c.parent());var u=s.createSelection();if(u.has()){var d=[],h=!1;c.traverse((function(e){var t=o(e);t.equal(u.anchor)?h=!0:h&&(t.equal(u.focus)||a.isMark(t)&&!t.isCard()&&s.isPointInRange(t,0)&&d.push(t))}));var f=a;d.forEach((function(t){if(!(e=e)||!t.isCard()&&n.compare(t,e))f.unwrap(t);else if(e){var i,r=e.css();Object.keys(r).forEach((function(e){t.css(e,"")}));var o=null===(i=e.get())||void 0===i?void 0:i.className.split(/\s+/);o&&function(){for(var e=n.editor.schema,i=e.find((function(e){return e.name===t.name})),r=function(n){var r=i[n];o.forEach((function(n){""!==(n=n.trim())&&r.attributes&&e.checkValue(r.attributes,"class",n)&&t.removeClass(n)}))},a=0;a<i.length;a++)r(a)}()}else t.removeAttributes("class"),t.removeAttributes("style")})),u.move(),this.merge(s),t||r.apply(s)}else t||r.apply(s)}}}},{key:"insert",value:function(e,t){var n;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.node,a=i.$,s=t||r.getSafeRange();if("string"==typeof e||ry(e))e=a(e,ay(s.startContainer));s.collapsed||r.deleteContent(s),null===(n=o.insert(e,s))||void 0===n||n.addOrRemoveBr().select(e).collapse(!1),t||r.apply(s)}}},{key:"findMarks",value:function(e){var t=e.cloneRange(),n=this.editor,i=n.$,r=n.node,o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.collapsed){var i=t.startNode,o=t.startOffset,a=i.findParent();if(a){var s=t.cloneRange();if(s.select(a,!0),n){s.setEnd(i,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var l=i.children(),c=s.endNode,u=s.endOffset,d=c.children(),h=d.eq(u),f=l.eq(o)||l.eq(o-1);if(!e&&c.type===Node.ELEMENT_NODE&&h&&r.isBlock(h)&&(i.type!==Node.ELEMENT_NODE||f&&!r.isBlock(f)))return;s.select(a,!0),s.setStart(c,u),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setStart(s.startContainer,s.startOffset),t.collapse(!0)}else{s.setStart(i,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var p=i.children(),g=s.startNode,v=s.startOffset,m=g.children(),b=m.eq(v),y=p.eq(o)||p.eq(o-1);if(!e&&g.type===Node.ELEMENT_NODE&&b&&r.isBlock(b)&&(i.type!==Node.ELEMENT_NODE||y&&!r.isBlock(y)))return;s.select(a,!0),s.setEnd(g,v),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setEnd(s.endContainer,s.endOffset),t.collapse(!1)}}}};if(!e.collapsed){var a=e.cloneRange(),s=e.cloneRange();a.collapse(!0),s.collapse(!1),o(!0,a,!0),o(!0,s),t.setStart(a.startContainer,a.startOffset),t.setEnd(s.startContainer,s.startOffset)}o(!1,t);var l=t.startContainer,c=t.startOffset,u=t.endContainer,d=t.endOffset,h=l,f=u;l.nodeType===sy().Node.ELEMENT_NODE&&l.childNodes[c]&&(h=l.childNodes[c]||l),u.nodeType===sy().Node.ELEMENT_NODE&&d>0&&u.childNodes[d-1]&&(f=u.childNodes[d-1]||l),e.collapsed&&(h=f);var p=function(e,t){e.some((function(e){return e.equal(t)}))||e.push(t)},g=r,v=function(e){for(var t=[];e&&(e.type!==sy().Node.ELEMENT_NODE||!e.isEditable());){!g.isMark(e)||e.attributes(Ub)||e.attributes(Wb)||t.push(e);var n=e.parent();if(!n)break;e=n}return t},m=v(i(h));if(!e.collapsed&&(v(i(f)).forEach((function(e){return p(m,e)})),l!==u)){var b=!1,y=!1;e.commonAncestorNode.traverse((function(e){if(y)return!1;if(e.equal(l))b=!0;else if(b){if(e.equal(u))return y=!0,!1;!g.isMark(e)||e.attributes(Ub)||e.attributes(Wb)||p(m,e)}}))}return m}},{key:"removeEmptyMarks",value:function(e,t){if(!(0===e.length||e.isEditable()||e.isCard()||e.attributes(Tb))){var n=this.editor.node;if(!e.attributes(Tb)){var i,r=e.parent();if(1===e.children().length&&(null===(i=e.first())||void 0===i?void 0:i.attributes(Tb)))return void(n.isMark(e)?(e.before(e.first()),e.remove(),r&&this.removeEmptyMarks(r,!0)):t&&n.isBlock(e)&&e.prepend("<br />"));var o=n.html(e);""!==o&&"​"!==o||(n.isMark(e)?(e.remove(),r&&this.removeEmptyMarks(r,!0)):t&&n.isBlock(e)&&n.html(e,"<br />"))}}}}]),e}(),vk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e,t){var n=this.engine,i=n.change,r=n.command,o=n.list,a=n.node,s=i.getRange();if(s.collapsed){var l=this.engine.block.closest(s.startNode);if("li"===l.name&&o.isFirst(s))return e.preventDefault(),r.execute(o.getPluginNameByNode(l)),!1}else{var c=this.engine.block.closest(s.startNode),u=this.engine.block.closest(s.endNode);if("li"===c.name||"li"===u.name){e.preventDefault();var d=s.cloneRange();return i.deleteContent(void 0,t),o.addBr(c),o.addBr(u),s.setStart(d.startContainer,d.startOffset),s.collapse(!0),o.merge(),i.select(s),!1}}if(this.engine.block.isFirstOffset(s,"start")){var h=this.engine.block.closest(s.startNode);if(["ul","ol"].indexOf(h.name)>=0){var f=h.first();if(!f||f.isText())return e.preventDefault(),i.mergeAfterDeletePrevNode(h),!1;h=f,s.setStart(h[0],0),s.collapse(!0),i.select(s)}if("li"===h.name){var p;if(a.isCustomize(h))return;e.preventDefault();var g=h.closest("ul");return(null===(p=h.parent())||void 0===p?void 0:p.isEditable())?(i.mergeAfterDeletePrevNode(h),!1):(g.length>0?r.execute(o.getPluginNameByNode(g)):i.unwrapNode(h),!1)}return!0}}}]),e}(),mk=function(){function e(t){jm(this,e),this.engine=t,this.backspace=new vk(t)}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,i=t.command,r=t.list,o=n.getRange();o.shrinkToElementNode();var a=this.engine.block.closest(o.startNode),s=this.engine.block.closest(o.endNode);if("li"===a.name||"li"===s.name){o.collapsed||(this.backspace.trigger(e,a.name!==s.name),o=n.getRange()),e.preventDefault();var l=r.getPluginNameByNode(a);if(r.isLast(o)&&r.isFirst(o))i.execute(l);else{this.engine.block.split();var c=(o=n.getRange()).createSelection(),u=this.engine.block.closest(o.endNode),d=r.getPlugins().find((function(e){return l===e.constructor.pluginName}));if(!d)return;if(d.cardName){var h=u.prev();h&&(r.addCardToCustomize(h,d.cardName),r.addBr(h)),r.addCardToCustomize(u,d.cardName),r.addBr(u);var f=u.next();f&&(r.addCardToCustomize(f,d.cardName),r.addBr(f))}c.move(),o.collapse(!1),n.select(o),r.merge(),r.addBr(o.startNode.closest("ul"))}return o.scrollIntoView(),!1}return!0}}]),e}(),bk=function(){function e(t){jm(this,e),this.CUSTOMZIE_UL_CLASS="data-list",this.CUSTOMZIE_LI_CLASS="data-list-item",this.INDENT_KEY="data-indent",this.editor=t}return Rm(e,[{key:"init",value:function(){if(Vy(this.editor)){var e,t,n=new mk(this.editor);null===(e=this.editor.typing.getHandleListener("enter","keydown"))||void 0===e||e.on((function(e){return n.trigger(e)}));var i=new vk(this.editor);null===(t=this.editor.typing.getHandleListener("backspace","keydown"))||void 0===t||t.on((function(e){return i.trigger(e)}))}}},{key:"isEmptyItem",value:function(e){var t,n,i,r;return"li"===e.name&&(this.editor.node.isEmpty(e)||(1===e.children().length?e.hasClass(this.CUSTOMZIE_LI_CLASS)&&(null===(t=e.first())||void 0===t?void 0:t.isCard())||"br"===(null===(n=e.first())||void 0===n?void 0:n.name):2===e.children().length&&e.hasClass(this.CUSTOMZIE_LI_CLASS)&&!!(null===(i=e.first())||void 0===i?void 0:i.isCard())&&"br"===(null===(r=e.last())||void 0===r?void 0:r.name)))}},{key:"isSame",value:function(e,t){if(e.name!==t.name)return!1;var n=this.editor.node;return n.isCustomize(e)===n.isCustomize(t)&&(parseInt(e.attributes(this.INDENT_KEY),10)||0)===(parseInt(t.attributes(this.INDENT_KEY),10)||0)}},{key:"isSpecifiedType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ul",n=arguments.length>2?arguments[2]:void 0,i=this.editor.node,r=!0;return e.forEach((function(e){var o;if(-1!==["li","p"].indexOf(e.name)||!(e.name===t||e.find(t).length>0))switch(e.name){case"li":var a;if(n)r=r&&i.isCustomize(e)&&((null===(a=e.first())||void 0===a?void 0:a.attributes(Ub))||"")===n;else r=r&&!i.isCustomize(e);break;case"p":e.parent()&&"li"!==(null===(o=e.parent())||void 0===o?void 0:o.name)&&(r=!1);break;default:r=!1}})),r}},{key:"getPlugins",value:function(){var e=this,t=[];return Object.keys(this.editor.plugin.components).forEach((function(n){var i=e.editor.plugin.components[n];i.isCurrent&&t.push(i)})),t}},{key:"getPluginNameByNode",value:function(e){var t=this,n=e.name,i=function(e){var n="";return t.getPlugins().some((function(t){if(t.isCurrent(e))return n=t.constructor.pluginName,!0})),n};return this.editor.node.isCustomize(e)?i(e):"li"===n&&e.parent()?i(e.parent()):""}},{key:"getPluginNameByNodes",value:function(e){for(var t="",n=0;n<e.length;n++){var i=e[n],r=i.parent(),o="";switch(i.name){case"li":case"ul":case"ol":o=this.getPluginNameByNode(e[n]);break;case"p":if(!r||"li"!==r.name)return"";o=this.getPluginNameByNode(r);break;default:if(this.editor.node.isBlock(i)&&i.find("ul,ol").length>0)break;return""}if(t&&o&&t!==o)return"";t=o}return t}},{key:"unwrapCustomize",value:function(e){if(this.editor.node.isCustomize(e))switch(e.name){case"li":return e.removeAttributes("class"),e.find($b).remove(),e;case"ul":return e.removeAttributes("class"),e;default:return e}return e}},{key:"unwrap",value:function(e){var t=this,n=0,i=this.editor,r=i.node,o=(0,i.$)("<p />");e.forEach((function(e){if(t.unwrapCustomize(e),r.isList(e)&&(n=parseInt(e.attributes(t.INDENT_KEY),10)||0,r.unwrap(e)),"li"===e.name){var i=r.clone(o,!1);0!==n&&i.css("padding-left",2*n+"em"),r.replace(e,i)}}))}},{key:"normalize",value:function(){if(!Vy(this.editor))return[];var e=this.editor,t=e.$,n=e.change,i=e.block,r=e.node,o=n.getRange(),a=i.getBlocks(o),s=[];a.forEach((function(e,n){var i=e.parent();if("p"===e.name){if("li"===(null==i?void 0:i.name))return 0===n&&s.push(i),void r.unwrap(e);if(i&&["ul","ol"].indexOf(i.name)>-1)return e=r.replace(e,t("<li />")),void s.push(e)}if("li"===e.name&&"li"===(null==i?void 0:i.name))return 0===n&&s.push(i),void r.unwrap(e);["ul","ol"].indexOf(e.name)>-1&&"li"===(null==i?void 0:i.name)?r.unwrap(e):s.push(e)}));var l=o.endNode.closest("li");return s.some((function(e){return e[0]===l[0]}))||s.push(l),s}},{key:"split",value:function(){if(Vy(this.editor)){var e=this.editor,t=e.change,n=e.node,i=t.getSafeRange(),r=this.normalize();if(r.length>0&&("li"===r[0].name||"li"===r[r.length-1].name)){var o,a,s,l,c=i.createSelection(),u=r[0],d=r[r.length-1],h=[],f=[];if(u.prev()){o=u.parent();for(var p=0;r[p]&&"li"===r[p].name;)h.push(r[p]),p+=1}if(d.next()){a=d.parent();for(var g=d.next();g&&"li"===g.name;)f.push(g),g=g.next()}if(f.length>0&&a&&(s=n.clone(a,!1),f.forEach((function(e){var t;null===(t=s)||void 0===t||t.append(e[0])})),a.after(s)),h.length>0&&o&&(l=n.clone(o,!1),h.forEach((function(e){var t;null===(t=l)||void 0===t||t.append(e[0])})),o.after(l)),o&&a&&a.equal(o)&&"ol"===o.name){var v=(parseInt(o.attributes("start"),10)||1)+o.find("li").length;s.attributes("start",v)}c.move()}t.apply(i)}}},{key:"merge",value:function(e,t){var n=this;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.block,a=i.node,s=t||r.getSafeRange();if((e=e||o.getBlocks(s)).forEach((function(e){if(e=e.closest("ul,ol"),a.isList(e)){var t=e.prev(),i=e.next();if(t&&n.isSame(t,e)){var r=s.createSelection();a.merge(t,e),r.move(),e=t}if(i&&n.isSame(i,e)){var o=s.createSelection();a.merge(e,i),o.move()}}})),(e=o.getBlocks(s)).length>0){var l=e[0].closest("ul,ol");this.addStart(l)}t||r.apply(s)}}},{key:"addStart",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.node;if(!e){var r=this.editor.block.getBlocks(n.getRange());if(0===r.length)return;e=r[0].closest("ul,ol")}if(e&&i.isList(e)){for(var o=[],a=parseInt(e.attributes(this.INDENT_KEY),10)||0,s=e.prev();s&&i.isList(s);){if("ol"===s.name){var l=parseInt(s.attributes(this.INDENT_KEY),10)||0,c=parseInt(s.attributes("start"),10)||1,u=s.find("li").length;if(0===l){o[l]=c+u;break}l<=a&&(a=l,o[l]=o[l]||c+u)}else a=parseInt(s.attributes(this.INDENT_KEY),10)||0;s=s.prev()}for(var d=e;d;){if(i.isList(d)){var h=parseInt(d.attributes(this.INDENT_KEY),10)||0,f=parseInt(d.attributes("start"),10),p=d.find("li").length;if("ol"===d.name){var g=o[h];h>0?((g=g||1)>1?d.attributes("start",g):d.removeAttributes("start"),o[h]=g+p):g&&g!==f?(g>1?d.attributes("start",g):d.removeAttributes("start"),o[h]=g+p):(o[h]=(f||1)+p,o=o.slice(0,h+1))}}else o=[];var v=d.next();if(!v)break;d=v}}}}},{key:"addIndent",value:function(e,t,n){this.editor.node.isList(e)&&(t=this.getIndent(e)+(t<0?-1:1),n&&t>n&&(t=n),t<1?e.removeAttributes(this.INDENT_KEY):e.attributes(this.INDENT_KEY,t))}},{key:"getIndent",value:function(e){return this.editor.node.isList(e)&&parseInt(e.attributes(this.INDENT_KEY),10)||0}},{key:"addCardToCustomize",value:function(e,t,n){var i;if(ry(e)&&(e=this.editor.$(e)),"li"===e.name&&!(null===(i=e.first())||void 0===i?void 0:i.isCard())){var r=this.editor.card,o=r.create(t,{value:n}),a=ew.create(this.editor);return a.select(e,!0),a.collapse(!0),r.insertNode(a,o),o}}},{key:"addReadyCardToCustomize",value:function(e,t,n){var i,r=this.editor.$;if(ry(e)&&(e=r(e)),"li"===e.name&&!(null===(i=e.first())||void 0===i?void 0:i.isCard())){var o=r("<span />");return e.prepend(o),this.editor.card.replaceNode(o,t,n),o}}},{key:"addBr",value:function(e){var t=this,n=this.editor.$,i=this.editor.node;if(i.isList(e))e.find("li").each((function(e){t.addBr(n(e))}));else if("li"===e.name){var r,o=e.last();if((null===(r=o)||void 0===r?void 0:r.isCursor())&&(o=o.prev()),o){if("br"===o.name)return;if(i.isCustomize(e)&&o.isCard())return void e.append(n("<br />"));for(;o;){if(o.equal(e.first())&&(o.isCard()||""===o.text()))return void e.append(n("<br />"));if(o.type===sy().Node.TEXT_NODE){if(""!==o.text())return;o=o.prev()}else if(o.type===sy().Node.ELEMENT_NODE){if(!i.isMark(o)||""!==o.text())return;o=e.prev()}else o=o.prev()}}else e.append(n("<br />"))}}},{key:"toCustomize",value:function(e,t,n){var i=this,r=this.editor,o=r.$,a=r.node;if(Array.isArray(e)){var s=[];return e.forEach((function(e){if(!a.isCustomize(e)){var r=i.toCustomize(e,t,n);s=s.concat(r)}})),s}var l,c=o('<ul class="'.concat(this.CUSTOMZIE_UL_CLASS,'"/>')),u=o('<li class="'.concat(this.CUSTOMZIE_LI_CLASS,'"/>'));switch(e.name){case"li":return e.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(e,t,n),e;case"ul":return e.addClass(this.CUSTOMZIE_UL_CLASS),e;case"ol":return c.attributes(e.attributes()),e=a.replace(e,c);case"p":return l=jy(e.css("padding-left"))/2,e=a.replace(e,u),this.addCardToCustomize(e,t,n),l&&c.attributes(this.INDENT_KEY,l),e=a.wrap(e,c);default:return a.isRootBlock(e)&&(e=a.replace(e,u),this.addCardToCustomize(e,t,n),e=a.wrap(e,c)),e}}},{key:"toNormal",value:function(e){var t,n,i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ul",o=arguments.length>2?arguments[2]:void 0,a=this.editor,s=a.$,l=a.node;if(Array.isArray(e)){var c=[];return e.forEach((function(e){var t=i.toNormal(e,r,o);c=c.concat(t)})),c}this.unwrapCustomize(e);var u=s("<".concat(r," />")),d=s("<li />");switch(e.name){case"li":case r:return e;case"ol":case"ul":return u.attributes(e.attributes()),"ul"===u.name&&u.removeAttributes("start"),e=l.replace(e,u);case"p":return"li"===(null===(t=e.parent())||void 0===t?void 0:t.name)?(l.unwrap(e),e):(n=jy(e.css("padding-left"))/2,e=l.replace(e,d),n&&u.attributes(this.INDENT_KEY,n),o&&u.attributes("start",o),e=l.wrap(e,u));default:return l.isRootBlock(e)&&(e=l.replace(e,d),e=l.wrap(e,u)),e}}},{key:"isFirst",value:function(e){var t=this.editor.$,n=e.startNode,i=e.startOffset,r=e.cloneRange(),o="li"===n.name?n:n.closest("li");if(!o[0])return!1;r.select(o,!0),r.setEnd(n[0],i);var a=r.cloneContents();if(!a.firstChild)return!0;if(1===a.childNodes.length&&"br"===t(a.firstChild).name)return!0;if(1===a.childNodes.length&&o.hasClass("data-list-item")&&t(a.firstChild).isCard())return!0;var s=this.editor.node;if(2===a.childNodes.length&&o.hasClass("data-list-item")&&t(a.firstChild).isCard()&&s.isEmpty(t(a.lastChild||[])))return!0;var l=t("<div />");return l.append(a),s.isEmpty(l)}},{key:"isLast",value:function(e){var t=this.editor.$,n=e.endNode,i=e.endOffset,r=e.cloneRange(),o="li"===n.name?n:n.closest("li");if(!o[0])return!1;r.select(o,!0),r.setStart(n,i);var a=r.cloneContents();if(!a.firstChild)return!0;if(1===a.childNodes.length&&"br"===t(a.firstChild).name)return!0;var s=t("<div />");return s.append(a),this.editor.node.isEmpty(s)}}]),e}(),yk=function(){function e(t){jm(this,e),this.type="keydown",this.hotkey="backspace",this.listeners=[],this.engine=t}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.getRange();if(t.isEmpty())return e.preventDefault(),void t.setValue("<p><br /><cursor /></p>");var i=n.startNode,r=n.startOffset;if(i.isEditable()){var o=i[0].childNodes[r-1],a=this.engine.$(o);if("br"===a.name)return e.preventDefault(),void a.remove()}for(var s=!0,l=0;l<this.listeners.length;l++){if(!1===(s=(0,this.listeners[l])(e)))break}return!1!==s?n.collapsed?void 0:(e.preventDefault(),void t.deleteContent()):void 0}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),wk=function(){function e(t){jm(this,e),this.type="keydown",this.hotkey="",this.listeners=[],this.engine=t}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){for(var t=0;t<this.listeners.length;t++){if(!1===(0,this.listeners[t])(e))break}}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),kk=function(){function e(t){jm(this,e),this.type="keydown",this.hotkey="delete",this.listeners=[],this.engine=t}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"getNext",value:function(e){return this.engine.$(e).isEditable()?null:e.nextSibling?e.nextSibling:null===e.parentNode?null:this.getNext(e.parentNode)}},{key:"getRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.engine.$;if(n(e).isEditable())return null;if(!t){var i=this.getNext(e);if(!i)return null;e=i}for(;e;){var r=n(e);if(r.attributes(Ub)){if(!e.ownerDocument)return null;var o=ew.create(this.engine,e.ownerDocument);return o.setStartAfter(e),o.collapse(!0),o}if(this.engine.node.isBlock(r)){if(!e.ownerDocument)return null;var a=ew.create(this.engine,e.ownerDocument);return a.select(r,!0).collapse(!0),a}if("br"===r.name){var s;if(1===(null===(s=e.parentNode)||void 0===s?void 0:s.childNodes.length))return null;if(!e.ownerDocument)return null;var l=ew.create(this.engine,e.ownerDocument);return l.setStartAfter(e),l.collapse(!0),l}if(e.nodeType===sy().Node.TEXT_NODE){if(0===e.data.length)return this.getRange(e);if(!e.ownerDocument)return null;var c=ew.create(this.engine,e.ownerDocument);return c.setStart(e,1),c.collapse(!0),c}if(0===e.childNodes.length)return this.getRange(e);e=e.childNodes[0]}return null}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.getRange();if(!n.collapsed)return e.preventDefault(),void t.deleteContent();var i,r=this.engine.card.find(n.startNode),o=!1;if(r){if(r.isLeftCursor(n.startNode))return e.preventDefault(),this.engine.card.select(r),void t.deleteContent();if(!r.isRightCursor(n.startNode))return;i=r.root[0]}else if(n.endContainer.nodeType===sy().Node.TEXT_NODE){if(n.endContainer.data.length>n.endOffset){e.preventDefault();var a=n.cloneRange();return a.setEnd(n.endContainer,n.endOffset+1),t.select(a),void t.deleteContent()}i=n.endContainer}else{if(n.endContainer.nodeType!==sy().Node.ELEMENT_NODE)return;if(0===n.endContainer.childNodes.length)i=n.endContainer;else if(0===n.endOffset){var s;1===n.endContainer.childNodes.length&&"BR"===(null===(s=n.endContainer.firstChild)||void 0===s?void 0:s.nodeName)||(o=!0),i=n.endContainer.childNodes[n.endOffset]}else i=n.endContainer.childNodes[n.endOffset-1]}var l=this.getRange(i,o);if(l){e.preventDefault();var c=n.startOffset;1===c&&1===n.startContainer.childNodes.length&&"BR"===n.startContainer.childNodes[0].nodeName&&(c=0),l.setStart(n.startContainer,c),t.select(l),t.deleteContent()}for(var u=0;u<this.listeners.length;u++){if(!1===(0,this.listeners[u])(e))break}}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),xk=[{name:"default",handle:wk},{name:"enter",handle:function(){function e(t){jm(this,e),this.type="keydown",this.hotkey="enter",this.listeners=[],this.engine=t}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){var t=this.engine.change.getRange();this.engine.block.closest(t.endNode).isEditable()&&this.engine.block.wrap("<p />");for(var n=0;n<this.listeners.length;n++){if(!1===(0,this.listeners[n])(e))break}this.engine.scrollNode&&this.engine.change.getRange().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode)}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),triggerName:"keydown:enter"},{name:"backspace",handle:yk,triggerName:"keydown:backspace"},{name:"delete",handle:kk,triggerName:"keydown:backspace"},{name:"tab",handle:function(){function e(t){jm(this,e),this.type="keydown",this.hotkey="tab",this.listeners=[],this.engine=t}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){var t=this.engine.node;e.preventDefault(),t.insertText("    ")}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),triggerName:"keydown:tab"},{name:"shift-tab",handle:function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey="shift+tab",e}return n}(),triggerName:"keydown:shift-tab"},{name:"at",handle:function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey=function(e){return"@"===e.key||e.shiftKey&&229===e.keyCode&&"Digit2"===e.code},e}return n}(),triggerName:"keydown:at"},{name:"space",handle:function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey=function(e){return" "===e.key},e}return n}(),triggerName:"keydown:space"},{name:"slash",handle:function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey=function(e){return"/"===e.key||Nm("/",e)||229===e.keyCode&&"Slash"===e.code},e}return n}(),triggerName:"keydown:slash"},{name:"all",handle:function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey="mod+a",e}return n}(),triggerName:"keydown:all"},{name:"left",handle:function(){function e(){jm(this,e),this.type="keydown",this.hotkey=function(e){return Nm("left",e)||Nm("shift+left",e)||Nm("ctrl+a",e)||Nm("ctrl+b",e)},this.listeners=[]}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){for(var t=0;t<this.listeners.length;t++){if(!1===(0,this.listeners[t])(e))break}}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),triggerName:"keydown:left"},{name:"right",handle:function(){function e(t){jm(this,e),this.type="keydown",this.hotkey=function(e){return Nm("right",e)||Nm("shift+right",e)||Nm("ctrl+e",e)||Nm("ctrl+f",e)},this.listeners=[],this.engine=t}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){for(var t=0;t<this.listeners.length;t++){if(!1===(0,this.listeners[t])(e))break}}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),triggerName:"keydown:right"},{name:"up",handle:function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey=function(e){return Nm("up",e)||Nm("ctrl+p",e)},e}return n}(),triggerName:"keydown:up"},{name:"down",handle:function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey=function(e){return Nm("down",e)||Nm("ctrl+n",e)},e}return n}(),triggerName:"keydown:down"}],Ck=function(e){Qm(n,wk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).type="keyup",e}return n}(),Mk=[{name:"default",handle:Ck},{name:"enter",handle:function(e){Qm(n,Ck);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey="enter",e}return n}(),triggerName:"keyup:enter"},{name:"backspace",handle:function(){function e(t){jm(this,e),this.type="keyup",this.hotkey="backspace",this.listeners=[],this.engine=t}return Rm(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){var t=this.engine.change;if(t.getRange(),t.isEmpty())return e.preventDefault(),void t.setValue("<p><br /><cursor /></p>");for(var n=0;n<this.listeners.length;n++){if(!1===(0,this.listeners[n])(e))break}}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),triggerName:"keyup:backspace"},{name:"tab",handle:function(e){Qm(n,Ck);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey="tab",e}return n}(),triggerName:"keyup:tab"},{name:"space",handle:function(e){Qm(n,Ck);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).hotkey=function(e){return" "===e.key},e}return n}(),triggerName:"keyup:space"}],Sk=function(){function e(t){var n=this;jm(this,e),this.handleListeners=[],this.engine=t,xk.concat(Mk).forEach((function(e){n.addHandleListener(e.name,e.handle,e.triggerName)})),this.engine.container.on("keydown",(function(e){return n.bindKeydown(e)})),this.engine.container.on("keyup",(function(e){return n.bindKeyup(e)}))}return Rm(e,[{key:"addHandleListener",value:function(e,t,n,i){this.handleListeners.push({name:e,handle:new t(this.engine),triggerName:n,triggerParams:i})}},{key:"getHandleListener",value:function(e,t){var n;return null===(n=this.handleListeners.find((function(n){return n.name===e&&n.handle.type===t})))||void 0===n?void 0:n.handle}},{key:"removeHandleListener",value:function(e,t){for(var n=0;n<this.handleListeners.length;n++)if(this.handleListeners[n].name===e&&this.handleListeners[n].handle.type===t){this.handleListeners[n].handle.destroy(),this.handleListeners.splice(n,1);break}}},{key:"bindKeydown",value:function(e){this.engine.readonly?Nm("mod+a",e)&&e.preventDefault():e.target&&this.engine.card.find(this.engine.$(e.target))||this.trigger("keydown",e)}},{key:"bindKeyup",value:function(e){this.engine.readonly||e.target&&this.engine.card.find(this.engine.$(e.target))||this.trigger("keyup",e)}},{key:"trigger",value:function(e,t){var n,i=this;!1===this.handleListeners.filter((function(t){return t.handle.type===e})).some((function(e){var n=e.name,r=e.handle,o=e.triggerName,a=e.triggerParams;if("default"===n||!r.hotkey)return!1;if("function"==typeof r.hotkey?r.hotkey(t):Nm(r.hotkey,t)){var s,l=[t];return"function"==typeof a&&(l=a(i.engine,t)),o&&!1===(s=i.engine).trigger.apply(s,[o].concat(Wm(l)))||r.trigger(t),!0}return!1}))&&(null===(n=this.getHandleListener("default",e))||void 0===n||n.trigger(t))}}]),e}(),Ek=function(){function e(t,n){jm(this,e),this._focused=!1,this.node=n.engine.$(t),this.options=n,this._init(),this._focused=null!==document.activeElement&&this.node.equal(document.activeElement)}return Rm(e,[{key:"_init",value:function(){var e=this,t=this.options,n=t.lang,i=t.tabIndex,r=t.className;this.node.attributes(Tb,Ab),this.node.attributes({contenteditable:"true",role:"textbox",autocorrect:"en"===n?"on":"off",autocomplete:"off",spellcheck:"en"===n?"true":"false","data-gramm":"false"}),void 0!==i&&this.node.attributes("tabindex",i),this.node.hasClass("am-engine")||this.node.addClass("am-engine"),void 0!==r&&(Array.isArray(r)?r:r.split(/\s+/)).forEach((function(t){""!==t.trim()&&e.node.addClass(t)}))}},{key:"init",value:function(){var e=this,t=this.options.engine,n=t.$;this.node.on("input",(function(e){t.readonly||(t.card.find(e.target)||t.change.getRange().addOrRemoveBr(!0))})),this.node.on("click",(function(i){if(i.target&&n(i.target).isEditable()){var r=e.node.last();if(r){var o,a;if(!r.isCard())return;if(((null===(o=r.get())||void 0===o?void 0:o.offsetTop)||0)+((null===(a=r.get())||void 0===a?void 0:a.clientHeight)||0)>i.offsetY)return}var s=n("<p><br /></p>");e.node.append(s);var l=t.change.getRange();l.select(s,!0).collapse(!1),t.change.select(l)}})),this.node.on("focus",(function(){return e._focused=!0,t.trigger("focus")})),this.node.on("blur",(function(){return e._focused=!1,t.trigger("blur")}))}},{key:"isFocus",value:function(){return this._focused}},{key:"getNode",value:function(){return this.node}},{key:"setReadonly",value:function(e){this.node.attributes("contenteditable",e?"false":"true")}},{key:"destroy",value:function(){var e=this,t=this.options,n=t.className,i=t.engine;this.node.removeAttributes(Tb),this.node.removeAttributes("contenteditable"),this.node.removeAttributes("role"),this.node.removeAttributes("autocorrect"),this.node.removeAttributes("autocomplete"),this.node.removeAttributes("spellcheck"),this.node.removeAttributes("data-gramm"),this.node.removeAttributes("tabindex"),this.options.className&&(Array.isArray(n)?n:(n||"").split(/\s+/)).forEach((function(t){""!==t.trim()&&e.node.removeClass(t)})),i.card.closest(this.node)&&this.node.removeClass("am-engine"),this.node.removeAllEvents()}}]),e}(),Ok=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change;t.mark;var i=t.inline,r=t.node,o=n.getRange(),a=o.cloneRange().shrinkToTextNode(),s=a.collapsed,l=a.endNode,c=a.startNode,u=a.startOffset;if(l.type===Node.TEXT_NODE||c.type===Node.TEXT_NODE){if(!s){var d=i.closest(l);if(r.isInline(d)&&!d.isCard()&&r.isEmpty(d)){if(u>1)return!0;var h=l.prev(),f=l.parent();if(f&&r.isInline(f)){if(h)return!0;var p=l.text().substr(0,u);if(!/^\u200b$/.test(p))return!0;var g=d.next(),v=null==g?void 0:g.text();if(g&&g.isText()&&v&&/^\u200b/.test(v))return o.setEnd(g,1),!1}}return!0}var m=i.closest(c);if(r.isInline(m)){if(m.isCard())return!0;if(u>1)return!0;var b=c.prev(),y=c.parent();if(y&&r.isInline(y)){if(b)return!0;var w=c.text().substr(0,u);if(!/\u200b$/.test(w))return!0}else{if(0!==u)return!0;for(;!b&&y&&!r.isInline(y);){var k;b=y.prev(),y=null===(k=y)||void 0===k?void 0:k.parent()}if(b&&!b.isText())return!0;if(b&&!/\u200b$/.test(b.text()))return!0}var x=m.prev(),C=null==x?void 0:x.text();if(x&&x.isText()&&C&&/\u200b$/.test(C)){if(o.setStart(x,C.length-1),r.isEmpty(m)){var M=m.next(),S=null==M?void 0:M.text();M&&M.isText()&&S&&/^\u200b/.test(S)&&o.setEnd(M,1)}else o.collapse(!0);return n.select(o),!1}return!0}var E=c.prev(),O=c.parent(),N=void 0;if(E){if(r.isInline(E)&&!E.isCard()){var T=c.text().substr(0,u);if(!/^\u200b$/.test(T))return!0;N=E}}else{if(0!==u)return!0;for(;!E&&O&&!r.isBlock(O);){var A;E=O.prev(),O=null===(A=O)||void 0===A?void 0:A.parent()}if(E&&!E.isText())return!0;if(E){if(!/^\u200b$/.test(E.text()))return!0;if(!(E=E.prev())||!r.isInline(E))return!0;N=E}}if(N){var I=N.last(),D=null==I?void 0:I.text();if(I&&I.isText()&&D&&/\u200b$/.test(D))return o.setStart(I,D.length-1),o.collapse(!0),n.select(o),!1}}return!0}}]),e}(),Nk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,i=t.inline,r=t.node,o=n.getRange().cloneRange().shrinkToTextNode(),a=o.startNode,s=o.startOffset;if(!this.engine.card.getSingleCard(o)&&a.type===Node.TEXT_NODE){var l=i.closest(a);if(r.isInline(l)){if(l.isCard())return;if(s>1)return!0;var c=a.prev(),u=a.parent();if(u&&r.isInline(u)){if(c)return!0;var d=a.text().substr(0,s);if(!/^\u200b$/.test(d))return!0}else{if(0!==s)return!0;for(;!c&&u&&!r.isInline(u);){var h;c=u.prev(),u=null===(h=u)||void 0===h?void 0:h.parent()}if(c&&!c.isText())return!0;if(c&&!/^\u200b$/.test(c.text()))return!0}var f=l.prev(),p=null==f?void 0:f.text();if(f&&f.isText()&&p&&/\u200b$/.test(p)){e.preventDefault();var g=o.cloneRange().collapsed;return o.setStart(f,p.length-1),g&&o.collapse(!0),n.select(o),!1}return!0}var v=a.prev(),m=a.parent(),b=void 0;if(v){if(r.isInline(v)&&!v.isCard()){var y=a.text().substr(0,s);if(!/^\u200b$/.test(y))return!0;b=v}}else{if(0!==s)return!0;for(;!v&&m&&!r.isBlock(m);){var w;v=m.prev(),m=null===(w=m)||void 0===w?void 0:w.parent()}if(v&&!v.isText())return!0;if(v){if(!/^\u200b$/.test(v.text()))return!0;if(!(v=v.prev())||!r.isInline(v))return!0;b=v}}if(b){e.preventDefault();var k=b.last(),x=null==k?void 0:k.text();if(k&&k.isText()&&x&&/\u200b$/.test(x)){var C=o.cloneRange().collapsed;return o.setStart(k,x.length-1),C&&!Nm("shift+left",e)&&o.collapse(!0),n.select(o),!1}}}return!0}}]),e}(),Tk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,i=t.inline,r=t.node,o=n.getRange().cloneRange().shrinkToTextNode(),a=o.endNode,s=o.endOffset;if(!this.engine.card.getSingleCard(o)&&a.type===Node.TEXT_NODE){var l=i.closest(a),c=a.text();if(r.isInline(l)){if(l.isCard())return;if(s<c.length-1)return!0;var u=a.next(),d=a.parent();if(d&&r.isInline(d)){if(u)return!0;var h=c.substr(s);if(!/^\u200b$/.test(h))return!0}else{if(s!==c.length&&s!==c.length-1)return!0;for(;!u&&d&&!r.isInline(d);){var f;u=d.next(),d=null===(f=d)||void 0===f?void 0:f.parent()}if(u&&!u.isText())return!0;if(u){if(!/^\u200b$/.test(u.text()))return!0;if(s===c.length-1){e.preventDefault();var p=o.cloneRange().collapsed;return o.setEnd(u,0),p&&o.collapse(!1),n.select(o),!1}}}var g=l.next(),v=null==g?void 0:g.text();if(g&&g.isText()&&v&&/^\u200b/.test(v)){e.preventDefault();var m=o.cloneRange().collapsed;return o.setEnd(g,1),m&&o.collapse(!1),n.select(o),!1}return!0}var b=a.next(),y=a.parent(),w=void 0;if(b){if(r.isInline(b)&&!b.isCard()){var k=c.substr(s);if(!/^\u200b$/.test(k))return!0;w=b}}else{if(s!==c.length)return!0;for(;!b&&y&&!r.isBlock(y);){var x;b=y.next(),y=null===(x=y)||void 0===x?void 0:x.parent()}if(b&&!b.isText())return!0;if(b){if(!/^\u200b$/.test(b.text()))return!0;if(!(b=b.next())||!r.isInline(b))return!0;w=b}}if(w){e.preventDefault();var C=w.first(),M=null==C?void 0:C.text();if(C&&C.isText()&&M&&/^\u200b/.test(M)){var S=o.cloneRange().collapsed;return o.setEnd(C,1),S&&!Nm("shift+right",e)&&o.collapse(!1),n.select(o),!1}}}return!0}}]),e}(),Ak=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"init",value:function(){var e=this;if(Vy(this.editor)){var t,n,i,r=new Ok(this.editor);null===(t=this.editor.typing.getHandleListener("backspace","keydown"))||void 0===t||t.on((function(e){return r.trigger(e)}));var o=new Nk(this.editor);null===(n=this.editor.typing.getHandleListener("left","keydown"))||void 0===n||n.on((function(e){return o.trigger(e)}));var a=new Tk(this.editor);null===(i=this.editor.typing.getHandleListener("right","keydown"))||void 0===i||i.on((function(e){return a.trigger(e)})),this.editor.event.on("keydown:space",(function(t){return e.triggerMarkdown(t)}))}}},{key:"repairRange",value:function(e){var t=this.editor,n=t.change,i=t.node,r=e=e||n.getRange(),o=r.startNode,a=r.startOffset,s=r.endNode,l=r.endOffset;if(r.collapsed)return e;var c=this.closest(o);if(c&&i.isInline(c)&&a<=1){for(var u=!0,d=o;d&&!d.equal(c);){if(d.prev()){u=!1;break}d=d.parent()}if(u){var h=c.prev(),f=(null==h?void 0:h.text())||"";h&&h.isText()&&/\u200B$/g.test(f)&&e.setStart(h,f.length-1)}}var p=this.closest(s);if(p&&i.isInline(p)&&l<=p.last().text().length){for(var g=!0,v=o;v&&!v.equal(p);){if(v.next()){g=!1;break}v=v.parent()}if(g){var m=p.next(),b=(null==m?void 0:m.text())||"";m&&m.isText()&&/^\u200B/g.test(b)&&e.setEnd(m,1)}}return e}},{key:"triggerMarkdown",value:function(e){var t=this;if(Vy(this.editor)){var n=this.editor.change,i=n.getRange();if(i.collapsed&&!n.isComposing()){var r=i.startNode,o=i.startOffset,a=r.type===Node.TEXT_NODE?r:r.children().eq(o-1);if(a){var s=a.type===Node.TEXT_NODE?a.text().substr(0,o):a.text();return!Object.keys(this.editor.plugin.components).some((function(n){var i=t.editor.plugin.components[n];if(function(e){return"inline"===e.kind}(i)&&i.markdown&&!1===i.triggerMarkdown(e,s,a))return!0}))}}}}},{key:"closest",value:function(e){for(var t=this.editor.node;e&&e.parent()&&!t.isBlock(e)&&!e.isEditable();){if(t.isInline(e))return e;var n=e.parent();if(!n)break;e=n}return e}},{key:"closestNotInline",value:function(e){for(var t=this.editor.node;(t.isInline(e)||t.isMark(e)||e.isText())&&!e.isEditable();){var n=e.parent();if(!n)break;e=n}return e}},{key:"wrap",value:function(e,t){if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.mark,o=n.node,a=n.$,s=t||i.getSafeRange(),l=ay(s.startContainer);if(e="string"==typeof e||ry(e)?a(e,l):e,o.isInline(e)){if(s.collapsed)return this.insert(e,s),void(t||i.apply(s));r.split(s),this.split(s);var c=s.commonAncestorNode;if(c.type===sy().Node.TEXT_NODE||o.isMark(c))for(c=c.parent();o.isMark(c);)c=c.parent();var u=s.enlargeToElementNode().createSelection();if(u.has()){var d=!1,h=o.clone(e,!1);c.traverse((function(e){if(e.equal(u.anchor))d=!0;else if(d){if(e.equal(u.focus))return d=!1,!1;if(o.isInline(e)){var t=e.children();o.unwrap(e),e=t}return o.isMark(e)&&!e.isCard()||e.isText()?o.isEmpty(e)?(e.remove(),!0):(h.parent()||e.before(h),h.append(e),!0):void(0!==h[0].childNodes.length&&(h=o.clone(h,!1)))}}));var f=u.anchor,p=u.focus,g=null==f?void 0:f.parent();if(g&&o.isRootBlock(g)&&!f.prev()&&!f.next()&&f.after("<br />"),!f.equal(p)){var v=null==p?void 0:p.parent();v&&o.isRootBlock(v)&&!p.prev()&&!p.next()&&p.before("<br />")}this.repairCursor(h),u.move(),s.setStart(h.first(),1),s.setEnd(h.last(),h.last().text().length-1),t||i.apply(s)}else t||i.apply(s)}}}},{key:"unwrap",value:function(e){var t=this;if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.mark,o=e&&Gy(e)?e:i.getSafeRange();this.repairRange(o),r.split(o);var a=e&&!Gy(e)?[e]:this.findInlines(o),s=o.createSelection();a.forEach((function(e){var n,i,r,o,a=e.prev();a&&a.isCursor()&&(a=a.prev());var s=e.next();s&&s.isCursor()&&(s=s.prev());var l=e.first();l&&l.isCursor()&&(l=l.next());var c=(null===(n=a)||void 0===n?void 0:n.text())||"",u=(null===(i=s)||void 0===i?void 0:i.text())||"",d=(null===(r=l)||void 0===r?void 0:r.text())||"";a&&a.isText()&&/\u200B$/g.test(c)&&(/^\u200B$/g.test(c)?a.remove():a.text(c.substr(0,c.length-1))),s&&s.isText()&&/^\u200B/g.test(u)&&(/^\u200B$/g.test(u)?s.remove():s.text(u.substr(1))),l&&l.isText()&&/^\u200B/g.test(d)&&(/^\u200B$/g.test(d)||l.get().splitText(1),l.remove());var h=e.last();h&&h.isCursor()&&(h=h.prev());var f=(null===(o=h)||void 0===o?void 0:o.text())||"";h&&h.isText()&&/\u200B$/g.test(f)&&(/^\u200B$/g.test(f)?h.remove():h.get().splitText(f.length-1).remove()),t.editor.node.unwrap(e)})),s.move(),r.merge(o),e||i.apply(o)}}},{key:"insert",value:function(e,t){var n;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.node,a=i.$,s=i.mark,l=t||r.getSafeRange(),c=ay(l.startContainer);if(("string"==typeof e||ry(e))&&(e=a(e,c)),o.isInline(e)){l.collapsed||r.deleteContent(l),s.split(l),null===(n=o.insert(e,l))||void 0===n||n.select(e).collapse(!1),"br"!==e.name&&l.addOrRemoveBr();var u=0!==e.children().length;if(this.repairCursor(e),!e.isCard())if(u){var d=e.next();l.setStart(d,1),l.setEnd(d,1)}else{var h=e.last(),f=h.text();l.setStart(h,f.length-1),l.setEnd(h,f.length-1)}t||r.apply(l)}}}},{key:"unwrapEmptyInlines",value:function(e,t){var n=this,i=this.editor.node;e.allChildren().forEach((function(e){var r=n.editor.$(e);i.isEmpty(r)&&i.isInline(r)&&(!t||t(r))&&i.unwrap(r)}))}},{key:"splitOnCollapsed",value:function(e,t){var n=this;if(e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var i=e.startNode,r=i.parent(),o=this.editor,a=o.node,s=o.$,l=i.isCard()?i:i.closest($b);if((0===l.length||"inline"!==l.attributes(Vb))&&(a.isInline(i)||r&&a.isInline(r))){var c,u=this.closestNotInline(i),d=e.createSelection(),h=d.getNode(u,"left"),f=void 0,p=void 0,g=[];if(t){ry(t)&&(t=s(t));var v=t.getPath(u.get()),m=u.clone(!0);g=v.slice(1),p=s(m.getChildByPath(v.slice(0,1))),f=d.getNode(m,"right",!1)}else f=d.getNode(u,"right");this.unwrapEmptyInlines(h),this.unwrapEmptyInlines(f),u.empty();var b=h.children(),y=b.toArray();u.append(b);var w=f.children(),k=w.toArray();p&&(t=null===(c=k.find((function(e){return e.equal(p)})))||void 0===c?void 0:c.getChildByPath(g)),u.append(w),u.find($b).each((function(e){var t=n.editor.card.find(e);t&&!t.root.equal(e)&&(t.root[0]=e)})),1===y.length&&"br"===y[0].name&&(y[0].remove(),y.splice(0,1)),1===k.length&&"br"===k[0].name&&(k[0].remove(),k.splice(0,1)),u.traverse((function(e){a.isInline(e)&&n.repairCursor(e)}))}return t}}},{key:"splitOnExpanded",value:function(e){var t=this;if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var n=e.startNode,i=e.endNode,r=n.isCard()?n:n.closest($b),o=i.isCard()?i:i.closest($b);if(!(r.length>0&&"inline"===r.attributes(Vb)||o.length>0&&"inline"===o.attributes(Vb))){var a=this.closestNotInline(n),s=this.closestNotInline(i);if(!a.equal(s)){var l=e.cloneRange();l.collapse(!0);var c=e.cloneRange();c.collapse(!1);var u=void 0,d=l.startOffset,h=c.endOffset;return void(a.contains(s)?(u=this.splitOnCollapsed(l,c.endNode),e.setStart(l.startContainer,l.startOffset),u&&c.setOffset(u,h,h),this.splitOnCollapsed(c),e.setEnd(c.startContainer,c.startOffset)):(u=this.splitOnCollapsed(c,l.startNode),e.setEnd(c.startContainer,c.startOffset),u&&l.setOffset(u,d,d),this.splitOnCollapsed(l),e.setStart(l.startContainer,l.startOffset)))}var f=this.editor.node,p=n.parent(),g=f.isInline(n)||p&&f.isInline(p),v=i.parent(),m=f.isInline(i)||v&&f.isInline(v);if(!g&&!m)return;var b=e.commonAncestorNode;b.isText()&&(b=b.parent());var y=this.closestNotInline(b),w=e.createSelection(),k=w.getNode(y,"left"),x=w.getNode(y),C=w.getNode(y,"right");this.unwrapEmptyInlines(k),this.unwrapEmptyInlines(C),y.empty(),y.append(k.children());var M=x.children(),S=M.toArray();y.append(M),y.append(C.children()),y.find($b).each((function(e){var n=t.editor.card.find(e);n&&!n.root.equal(e)&&(n.root[0]=e)})),y.traverse((function(e){f.isInline(e)&&t.repairCursor(e)})),e.setStartBefore(S[0][0]),e.setEndAfter(S[S.length-1][0])}}}},{key:"split",value:function(e){if(Vy(this.editor)){var t=this.editor.change,n=e||t.getSafeRange();n.collapsed?this.splitOnCollapsed(n):this.splitOnExpanded(n),e||t.apply(n)}}},{key:"findInlines",value:function(e){var t=e.cloneRange(),n=this.editor.$,i=this.editor.node,r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.collapsed){var r=t.startNode,o=t.startOffset,a=r.findParent();if(a){var s=t.cloneRange();if(s.select(a,!0),n){s.setEnd(r,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var l=r.children(),c=s.endNode,u=s.endOffset,d=c.children(),h=d.eq(u),f=l.eq(o)||l.eq(o-1);if(!e&&c.type===Node.ELEMENT_NODE&&h&&i.isBlock(h)&&(r.type!==Node.ELEMENT_NODE||f&&!i.isBlock(f)))return;s.select(a,!0),s.setStart(c,u),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setStart(s.startContainer,s.startOffset),t.collapse(!0)}else{s.setStart(r,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var p=r.children(),g=s.startNode,v=s.startOffset,m=g.children(),b=m.eq(v),y=p.eq(o)||p.eq(o-1);if(!e&&g.type===Node.ELEMENT_NODE&&b&&i.isBlock(b)&&(r.type!==Node.ELEMENT_NODE||y&&!i.isBlock(y)))return;s.select(a,!0),s.setEnd(g,v),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setEnd(s.endContainer,s.endOffset),t.collapse(!1)}}}};if(!e.collapsed){var o=e.cloneRange(),a=e.cloneRange();o.collapse(!0),a.collapse(!1),r(!0,o,!0),r(!0,a),t.setStart(o.startContainer,o.startOffset),t.setEnd(a.startContainer,a.startOffset)}r(!1,t);var s=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset,d=s,h=c;s.nodeType===sy().Node.ELEMENT_NODE&&s.childNodes[l]&&(d=s.childNodes[l]||s),c.nodeType===sy().Node.ELEMENT_NODE&&u>0&&c.childNodes[u-1]&&(h=c.childNodes[u-1]||s),e.collapsed&&(d=h);var f=function(e,t){e.some((function(e){return e[0]===t[0]}))||e.push(t)},p=function(e){for(var t=[];e&&!e.isEditable();){i.isInline(e)&&t.push(e);var n=e.parent();if(!n)break;e=n}return t},g=p(n(d));if(!e.collapsed&&(p(n(h)).forEach((function(e){return f(g,e)})),s!==c)){var v=!1,m=!1;e.commonAncestorNode.traverse((function(e){if(m)return!1;if(e.equal(s))v=!0;else if(v){if(e.equal(c))return m=!0,!1;!i.isInline(e)||e.attributes(Ub)||e.attributes(Wb)||f(g,e)}}))}return g}},{key:"repairCursor",value:function(e){var t,n,i=this.editor.$,r=this.editor.node;if(ry(e)&&(e=i(e)),r.isInline(e)&&!r.isVoid(e)&&!e.isCard()){this.repairBoth(e);var o=e.first();(null===(t=o)||void 0===t?void 0:t.isCursor())&&(o=o.next()),o&&o.type===Node.TEXT_NODE&&/^\u200B/g.test(o.text())||(o?o.isText()?o.text("​"+o.text()):o.before(i("​",null)):e.append(i("​",null)));var a=e.last();(null===(n=a)||void 0===n?void 0:n.isCursor())&&(a=a.prev()),!a||!/^\u200B$/g.test(e.text())&&a.type===Node.TEXT_NODE&&/\u200B$/g.test(a.text())||(a.isText()?a.text(a.text()+"​"):a.after(i("​",null)))}}},{key:"repairBoth",value:function(e){var t=this.editor.$,n=this.editor.node;if(ry(e)&&(e=t(e)),e.parent()&&!n.isVoid(e)){var i=t("​",null),r=e.prev(),o=null==r?void 0:r.prev(),a=(null==r?void 0:r.text())||"";!r||!r.isText()||!/\u200B$/g.test(a)||o&&n.isInline(o)&&!/\u200B\u200B$/g.test(a)?r&&r.isText()?r.text(a+"​"):e.before(n.clone(i,!0)):r&&r.isText()&&/\u200B\u200B$/g.test(a)&&o&&!n.isInline(o)&&r.text(a.substr(0,a.length-1));var s=e.next(),l=(null==s?void 0:s.text())||"",c=null==s?void 0:s.next();s&&s.isText()&&/^\u200B/g.test(l)&&(!c||!n.isInline(c)||/^\u200B\u200B/g.test(l))||(s&&s.isText()?s.text("​"+s.text()):(e.after(this.editor.node.clone(i,!0)),"br"===(null==s?void 0:s.name)&&s.remove()))}}}]),e}(),Ik=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,i=t.node,r=t.$,o=n.getRange(),a=this.engine.block.closest(o.endNode),s=a.parent();if(s&&s.inEditor()&&i.isBlock(s)){var l;if("li"===s.name&&"p"===a.name){var c;1===a.children().length&&"br"===(null===(c=a.first())||void 0===c?void 0:c.name)&&a.first().remove();var u=o.createSelection();n.unwrapNode(a),u.move(),a=this.engine.block.closest(o.endNode)}if(o.collapsed&&(1===o.startContainer.childNodes.length&&"BR"===(null===(l=o.startContainer.firstChild)||void 0===l?void 0:l.nodeName)||this.engine.block.isLastOffset(o,"end")&&this.engine.block.isFirstOffset(o,"end")))return e.preventDefault(),["li"].indexOf(s.name)>=0?(this.engine.block.unwrap("<".concat(s.name," />")),this.engine.block.setBlocks("<".concat(s.name," />"))):(this.engine.block.unwrap("<".concat(s.name," />")),this.engine.block.setBlocks("<p />")),!1}if(this.engine.node.isRootBlock(a)&&!a.isCard())return e.preventDefault(),this.engine.block.insertOrSplit(o,a),!1;if("li"===a.name){if(this.engine.node.isCustomize(a))return;if(e.preventDefault(),this.engine.block.isLastOffset(o,"end"))if(o.collapsed&&this.engine.block.isFirstOffset(o,"end")){var d=a.closest("ul,ol");this.engine.block.unwrap("<".concat(d.name," />")),this.engine.block.setBlocks("<p />")}else{var h=r("<li><br /></li>");h.attributes(a.attributes()),this.engine.block.insertEmptyBlock(o,h)}else this.engine.block.split();return this.engine.list.merge(),o.scrollIntoView(),!1}return!0}}]),e}(),Dk=function(){function e(t){jm(this,e),this.engine=t}return Rm(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,i=t.node,r=t.block,o=t.card,a=n.getRange();if(a.collapsed){var s=a.getPrevNode();if(s&&i.isBlock(s)&&i.isEmptyWithTrim(s))return e.preventDefault(),n.addBrAfterDelete(s),!1;var l=!!o.closest(a.startNode);if(l||r.isFirstOffset(a,"start")){var c=r.closest(a.startNode);return!(!l&&this.engine.node.isRootBlock(c))||(e.preventDefault(),n.mergeAfterDeletePrevNode(c),!1)}var u=a.cloneRange().shrinkToElementNode().shrinkToTextNode();u.startContainer.nodeType===sy().Node.TEXT_NODE&&function(e){var t,r,o,a=e.commonAncestorContainer;if(e.collapsed&&1===e.startOffset&&e.startContainer===a&&a.nodeType===sy().Node.TEXT_NODE&&(e=e.cloneRange(),((null===(t=a.parentNode)||void 0===t||null===(r=t.childNodes)||void 0===r?void 0:r.length)||0)<=1&&1===(null===(o=a.textContent)||void 0===o?void 0:o.length))){var s=e,l=s.startNode,c=s.startOffset,u=l.parent();if(u&&i.isMark(u)&&c>0){var d=l.text().substr(c-1,1);if(/^\u200b$/.test(d))if(1===c){var h=u.prev();if(h&&!i.isEmpty(h)){var f=e.cloneRange().select(h,!0).shrinkToTextNode().collapse(!1),p=f.startNode,g=f.startOffset;e.setStart(p,g-1)}}else e.setStart(l,c-1)}return e.collapsed&&e.select(a,!0),n.deleteContent(e,!0),n.apply(e),!0}return!1}(u)&&(e.preventDefault(),e.isDelete=!0,n.change())}}}]),e}(),_k=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"init",value:function(){var e=this;if(Vy(this.editor)){var t,n,i=new Ik(this.editor);null===(t=this.editor.typing.getHandleListener("enter","keydown"))||void 0===t||t.on((function(e){return i.trigger(e)}));var r=new Dk(this.editor);null===(n=this.editor.typing.getHandleListener("backspace","keydown"))||void 0===n||n.on((function(e){return r.trigger(e)})),this.editor.event.on("keydown:space",(function(t){return e.triggerMarkdown(t)}))}}},{key:"triggerMarkdown",value:function(e){var t=this;if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.block,o=i.getRange();if(o.collapsed&&!i.isComposing()){var a=o.startNode,s=o.startOffset,l=a.type===Node.TEXT_NODE?a:a.children().eq(s-1);if(l){var c=r.closest(l);if(this.editor.node.isRootBlock(c)){var u=r.getLeftText(c);return!Object.keys(this.editor.plugin.components).some((function(n){var i=t.editor.plugin.components[n];if(qy(i)&&i.markdown&&!1===i.markdown(e,u,c,l))return!0}))}}}}}},{key:"findPlugin",value:function(e){var t=this,n=this.editor,i=n.node,r=n.schema;if(!i.isBlock(e))return[];var o=[];return Object.keys(this.editor.plugin.components).some((function(n){var i=t.editor.plugin.components[n];if(qy(i)&&i.tagName&&("string"==typeof i.tagName?i.tagName===e.name:i.tagName.indexOf(e.name)>-1)){var a=i.schema();if(!(Array.isArray(a)?a.find((function(t){return r.checkNode(e,t.attributes)})):r.checkNode(e,a.attributes)))return;o.push(i)}})),o}},{key:"findTop",value:function(e,t){var n=this.editor.schema,i=n.closest(e.name),r=n.closest(t.name);if(i===parent.name||r===t.name)return t;if(n.isAllowIn(e.name,t.name))return e;var o=this.editor,a=o.node,s=o.list;if(a.isList(e)&&a.isList(t)){var l=parseInt(t.attributes(s.INDENT_KEY),10)||0,c=parseInt(e.attributes(s.INDENT_KEY),10)||0;t.attributes(s.INDENT_KEY,c?c+1:l+1)}return t}},{key:"closest",value:function(e){for(var t=e;e;){if(e.isEditable()||this.editor.node.isBlock(e))return e;var n=e.parent();if(!n)break;e=n}return t}},{key:"wrap",value:function(e,t){var n,i=this;if(Vy(this.editor)){var r=this.editor,o=r.change,a=r.node,s=t||o.getSafeRange(),l=ay(s.startContainer);if(e="string"==typeof e||ry(e)?this.editor.$(e,l):e,a.isBlock(e)){var c=this.getBlocks(s),u=[];if(0===(c=c.map((function(e){var t=null==e?void 0:e.parent();return"li"===(null==e?void 0:e.name)&&t&&i.editor.node.isList(t)?u.find((function(e){return e.equal(t)}))?null:(u.push(t),t):e})).filter((function(e){return null!==e}))).length){var d=this.closest(s.startNode),h=s.createSelection();return d.children().each((function(t){e.append(t)})),d.append(e),void h.move()}var f=s.createSelection();null===(n=c[0])||void 0===n||n.before(e),c.forEach((function(t){t&&e.append(t)})),f.move(),t||o.apply(s)}}}},{key:"unwrap",value:function(e,t){if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.node,o=n.$,a=t||i.getSafeRange(),s=ay(a.startContainer);if(e="string"==typeof e||ry(e)?o(e,s):e,r.isBlock(e)){var l=this.getSiblings(a,e);if(0!==l.length){var c=l[0].node.parent();if(null==c?void 0:c.inEditor()){var u=l.some((function(e){return"left"===e.position})),d=l.some((function(e){return"right"===e.position})),h=void 0;if(u){var f=c;h=r.clone(f,!1),f.before(h)}var p=void 0;if(d){var g=l[l.length-1].node.parent();g&&(p=r.clone(g,!1),null==g||g.after(p))}var v=a.createSelection(),m=r;l.forEach((function(t){var n,i,r,o=t.position,a=t.node,s=a.parent();"left"===o&&(null===(n=h)||void 0===n||n.append(a));"center"===o&&((null==s?void 0:s.name)===(null===(i=e)||void 0===i?void 0:i.name)&&(null==s?void 0:s.inEditor())&&m.unwrap(s));"right"===o&&(null===(r=p)||void 0===r||r.append(a))})),h&&"ol"===h.name&&p&&"ol"===p.name&&p.attributes("start",(parseInt(h.attributes("start"),10)||1)+h.find("li").length),v.move(),t||i.apply(a)}}}}}},{key:"getSiblings",value:function(e,t){var n=this,i=[],r=this.editor.node;if(!r.isBlock(t))return i;for(var o=function(e,t){for(var i=n.closest(e);i;){var r=i.parent();if(!r)break;if(!i.inEditor())break;if(i.text().trim()!==r.text().trim())break;if(r.name===t)break;i=r}return i},a=o(e.startNode,t.name),s=o(e.endNode,t.name),l=a.parent(),c="left",u=null==l?void 0:l.first();u;){if(u=this.editor.$(u),!r.isBlock(u))return i;if(!u.inEditor())return i;u[0]===a[0]&&(c="center"),i.push({position:c,node:u}),u[0]===s[0]&&(c="right"),u=u.next()}return i}},{key:"split",value:function(e){var t,n=this;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.mark,a=e||r.getSafeRange();a.collapsed||r.deleteContent(a);var s=this.closest(a.startNode);if(s.isEditable()||s.inEditor()){if(s.isEditable()){var l=a.startContainer.childNodes[a.startOffset];return l&&a.select(l,!0).shrinkToElementNode().collapse(!0),void(e||r.apply(a))}var c=a.cloneRange();c.shrinkToElementNode().shrinkToTextNode().collapse(!0);var u=o.findMarks(c),d=this.createSide({block:s[0],range:a,isLeft:!1,keepID:!0}),h=this.editor.node;d.traverse((function(e){!h.isVoid(e)&&(h.isInline(e)||h.isMark(e))&&h.isEmpty(e)&&e.remove()}),!0);var f=function(e){return h.isBlock(e)&&(0===e.childNodes.length||""===e.innerText)};f(s[0])&&!f(d[0])?this.generateRandomID(s,!0):this.generateRandomID(d,!0),s.after(d),h.isEmpty(s)&&h.html(s,h.getBatchAppendHTML(u,"<br />")),h.isEmpty(d)&&h.html(d,h.getBatchAppendHTML(u,"<br />")),s.children().each((function(e){h.isInline(e)&&n.editor.inline.repairCursor(e)})),d.children().each((function(e){h.isInline(e)&&n.editor.inline.repairCursor(e)})),a.select(d,!0).shrinkToElementNode(),1===d.children().length&&"br"===(null===(t=d.first())||void 0===t?void 0:t.name)?a.collapse(!1):a.collapse(!0),e||r.apply(a)}}}},{key:"insert",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(Vy(this.editor)){var r=this.editor,o=r.$,a=r.change,s=r.node,l=r.list,c=i||a.getSafeRange(),u=ay(c.startContainer);if(e="string"==typeof e||ry(e)?o(e,u):e,s.isBlock(e)){c.collapsed||a.deleteContent(c);var d=this.closest(c.startNode);if(d.isEditable()||d.inEditor()){if(d.isEditable())return s.insert(e,c),c.collapse(!1),void(i||a.apply(c));1===d.children().length&&"br"===(null===(t=d.first())||void 0===t?void 0:t.name)&&c.select(d,!0).collapse(!1);var h=c.enlargeToElementNode().createSelection();if(h.has()){for(var f=s.clone(d,!1),p=d.first(),g=!0;p;){var v=p.next();p.equal(h.anchor)?(g=!1,p=v):(g||f.append(p),p=v)}s.isEmpty(f)||d.after(f);var m=d.parent();if(m&&s.isList(m)){var b=d.first();if(null==b?void 0:b.isCard()){var y=b.attributes(Ub);l.addCardToCustomize(f,y)}s.isCustomize(d)&&l.addBr(d)}h.move(),c.setStartAfter(d),c.collapse(!0),s.isEmpty(d)&&!n&&d.remove(),s.insert(e,c),i||a.apply(c)}else i||a.apply(c)}else i||a.apply(c)}}}},{key:"setBlocks",value:function(e,t){if(Vy(this.editor)){var n=this.editor,i=n.$,r=n.node,o=this.editor.change,a=t||o.getSafeRange(),s=ay(a.startContainer),l=null,c={};"string"==typeof e?(l=i(e,s),(c=l.attributes()).style=l.css()):c=e;var u=this.getBlocks(a),d=a.startNode;if(d.isEditable()&&0===u.length){var h=l||i("<p></p>");r.setAttributes(h,c);var f=a.createSelection();return d.children().each((function(e){h.append(e)})),d.append(h),f.move(),void(t||o.apply(a))}var p=a.createSelection();u.forEach((function(e){e.attributes(Ub)||(l&&e.name!==l.name?r.replace(e,l):r.setAttributes(e,c))})),p.move(),t||o.apply(a)}}},{key:"merge",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.schema,r=e||n.getSafeRange(),o=this.getBlocks(r);if(0!==o.length){var a=o[0].closest(Ib),s=i.getCanMergeTags();if(0!==s.length){var l=a.find(s.join(","));if(l.length>0){for(var c=r.createSelection(),u=l.next();u;){var d=u.prev(),h=u.attributes(),f=null==d?void 0:d.attributes();u.name===(null==d?void 0:d.name)&&h.class===(f?f.class:void 0)&&Object.keys(h).join(",")===Object.keys(f||{}).join(",")&&this.editor.node.merge(d,u),u=u.next()}c.move()}e||n.apply(r)}}}}},{key:"findBlocks",value:function(e){var t=this;(e=e.cloneRange()).shrinkToElementNode();var n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,a=n,s=r;n.nodeType===sy().Node.ELEMENT_NODE&&n.childNodes[i]&&(a=n.childNodes[i]||n),r.nodeType===sy().Node.ELEMENT_NODE&&o>0&&r.childNodes[o-1]&&(s=r.childNodes[o-1]||n),e.collapsed&&(a=s);var l=function(e,t,n){e.some((function(e){return e[0]===t[0]}))||(n?e.unshift(t):e.push(t))},c=function(e){for(var n=[];e&&!e.isEditable();){t.editor.node.isBlock(e)&&n.push(e);var i=e.parent();if(!i)break;e=i}return n},u=this.getBlocks(e),d=this.editor.$;return c(d(a)).forEach((function(e){return l(u,e,!0)})),e.collapsed||c(d(s)).forEach((function(e){return l(u,e)})),u}},{key:"isFirstOffset",value:function(e,t){var n=e,i=n.startNode,r=n.endNode,o=n.startOffset,a=n.endOffset,s="start"===t?i:r,l="start"===t?o:a;e=e.cloneRange();var c=this.closest(s);e.select(c,!0),e.setEnd(s[0],l);var u=e.cloneContents();if(!u.firstChild)return!0;var d=this.editor.$;if(1===u.childNodes.length&&"br"===d(u.firstChild).name)return!0;var h=d("<div />");return h.append(u),this.editor.node.isEmpty(h)}},{key:"isLastOffset",value:function(e,t){var n=e,i=n.startNode,r=n.endNode,o=n.startOffset,a=n.endOffset,s="start"===t?i:r,l="start"===t?o:a;e=e.cloneRange();var c=this.closest(s);e.select(c,!0),e.setStart(s,l);var u=e.cloneContents();if(!u.firstChild)return!0;var d=(0,this.editor.$)("<div />");return d.append(u),0>=d.find("br").length&&this.editor.node.isEmpty(d)}},{key:"getBlocks",value:function(e){var t=this;(e=e.cloneRange()).shrinkToElementNode(),e.shrinkToTextNode();var n=this.closest(e.startNode),i=this.closest(e.endNode),r=this.closest(e.commonAncestorNode),o=[],a=!1,s=this.editor.$;return r.traverse((function(e){var r=s(e);if(r.equal(n)&&(a=!0),a&&t.editor.node.isBlock(r)&&!r.isCard()&&r.inEditor()&&o.push(r),r.equal(i))return a=!1,!1})),o.length>1&&this.isFirstOffset(e,"end")&&o.pop(),o}},{key:"createSide",value:function(e){var t=e.block,n=e.range,i=e.isLeft,r=e.clone,o=void 0!==r&&r,a=e.keepID,s=void 0!==a&&a,l=this.editor.$;ry(t)&&(t=l(t));var c=ew.create(this.editor,t.document);i?(c.select(t,!0),c.setEnd(n.startContainer,n.startOffset)):(c.select(t,!0),c.setStart(n.endContainer,n.endOffset));var u=o?c.cloneContents():c.extractContents(),d=s?t.clone(!1):this.editor.node.clone(t,!1);return d.append(u),o&&d.find($b).each((function(e){var t=l(e),n=t.attributes(Ub);t.attributes(Yb,n),t.removeAttributes(Ub)})),d}},{key:"getLeftText",value:function(e,t){return Vy(this.editor)?(t=t||this.editor.change.getRange(),this.createSide({block:e,range:t,isLeft:!0,clone:!0}).text().trim().replace(/\u200B/g,"")):""}},{key:"removeLeftText",value:function(e,t){if(Vy(this.editor)){var n=this.editor.$;t=t||this.editor.change.getRange(),ry(e)&&(e=n(e)),t.createSelection();var i=e.find(Hb),r=!1;e.traverse((function(e){var t=n(e);if(t.equal(i))return i.remove(),void(r=!0);r&&t.isText()&&t.remove()}),!1)}}},{key:"flatten",value:function(e,t){if(Vy(this.editor))for(var n=this.editor,i=n.$,r=n.schema,o=n.node,a=r.getCanMergeTags(),s=e[0].parentNode,l=t.isFragment?t[0].parentNode:t[0];s!==l;){var c=i(s||[]);if(e.isCard())c.before(e);else if(o.isList(c)&&"li"===e.name||a.indexOf(c.name)>-1&&o.isBlock(e)&&c.name!==e.name){var u=o.clone(c,!1);u.append(e),e=u,c.before(e)}else e=o.replace(e,o.clone(this.findTop(c,e),!1)),c.before(e);c.first()||c.remove(),s=e[0].parentNode}}},{key:"getMarkIdTags",value:function(){var e=[];return this.editor.schema.data.blocks.forEach((function(t){e.indexOf(t.name)<0&&e.push(t.name)})),e}},{key:"createDataID",value:function(e,t){var n,i=this.editor.$;ry(e)&&(e=i(e));var r=e.name,o=Nb("".concat(r,"_").concat(t.toString(),"_").concat((null===(n=e.get())||void 0===n?void 0:n.innerText)||""))+"_"+r+"_"+t.toString();return e.attributes("data-id",o),o}},{key:"generateDataID",value:function(e,t){var n=t.nodeName,i=t.getAttribute("data-id");if(i)return i;for(var r=e.querySelectorAll(n),o=0;o<r.length;o++)if(r[o]===t)return this.createDataID(t,o);return null}},{key:"generateDataIDForDescendant",value:function(e){var t=this;this.getMarkIdTags().forEach((function(n){for(var i=e.querySelectorAll(n),r=0;r<i.length;r++){var o=t.editor.$(i[r]);o.attributes("data-id")||o.isCard()||t.createDataID(o,r)}}))}},{key:"generateRandomID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.editor.$;if(ry(e)&&(e=n(e)),e.isCard())return"";if(!t){var i=e.attributes("data-id");if(i)return i}var r=Nb("".concat(Math.random().toString(),"_").concat(Date.now().toString()));return e.attributes("data-id",r),r}},{key:"generateRandomIDForDescendant",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.nodeType!==sy().Node.ELEMENT_NODE&&e.nodeType!==sy().Node.DOCUMENT_FRAGMENT_NODE||this.getMarkIdTags().forEach((function(i){for(var r=e.querySelectorAll(i),o=0;o<r.length;o++){var a=t.editor.$(r[o]);a.isCard()||t.generateRandomID(a,n)}}))}},{key:"needMarkDataID",value:function(e){return!!this.getMarkIdTags()[e.toLowerCase()]}},{key:"brToBlock",value:function(e){var t,n;if(e.first()&&1!==e.children().length&&"li"!==e.name&&(2!==e.children().length||(null===(t=e.first())||void 0===t?void 0:t.attributes(Tb))!==zb)&&(null===(n=e.last())||void 0===n?void 0:n.attributes(Tb))!==zb){for(var i,r,o=e.first(),a=this.editor.$;o;){var s=o.next();i&&"br"!==o.name||(r=i,i=this.editor.node.clone(e,!1),e.before(i)),"br"!==o.name&&i.append(o),"br"!==o.name&&s||!r||r.first()||r.append(a("<br />")),o=s}i&&!i.first()&&i.remove(),e.remove()}}},{key:"insertEmptyBlock",value:function(e,t){var n=this;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.$,a=r.blocks,s=r.marks,l=this.editor.node;if(this.insert(t,!0),a[0]){var c=a[0].css();t.css(c)}var u=t.find("br");s.forEach((function(e){var t=n.editor.mark.findPlugin(e);e=l.clone(e),!1!==(null==t?void 0:t.copyOnEnter)&&!1!==(null==t?void 0:t.followStyle)&&(e=l.clone(e),u.before(e),e.append(u),u=e)}));var d=(u=t.find("br")).parent();d&&l.isMark(d)&&(u=l.replace(u,o("​",null))),e.select(u),e.collapse(!1),e.scrollIntoView(),r.select(e)}}},{key:"insertOrSplit",value:function(e,t){var n,i,r=e.cloneRange();r.enlargeFromTextNode();var o,a,s=this.editor.$;this.isLastOffset(e,"end")||r.endNode.type===sy().Node.ELEMENT_NODE&&t.children().length>0&&r.endContainer.childNodes[r.endOffset]===(null===(n=t.last())||void 0===n?void 0:n.get())&&"br"===(null===(i=t.first())||void 0===i?void 0:i.name)?"p"===t.name&&(null===(o=t.get())||void 0===o?void 0:o.className)?this.insertEmptyBlock(e,s('<p class="'.concat(null===(a=t.get())||void 0===a?void 0:a.className,'"><br /></p>'))):this.insertEmptyBlock(e,s("<p><br /></p>")):this.split()}}]),e}(),jk=function e(t,n,i,r){var o=void 0,a=void 0,s=/\[\]$/;if(Array.isArray(n))for(a=0;a<n.length;a++){var l=n[a];i||s.test(t)?r(t,l):e(t+"["+("object"===(void 0===l?"undefined":zm(l))?a:"")+"]",l,i,r)}else if("[object Object]"===n.toString())for(o in n)n.hasOwnProperty(o)&&e(t+"["+o+"]",n[o],i,r);else r(t,n)},Lk=function(e,t){return e+(/\?/.test(e)?"&":"?")+t},Rk=function(e){return"undefined"!=typeof FormData&&e instanceof FormData},Pk=/^http/,zk=/(^\w+):\/\//,Bk=/^(20\d|1223)$/,Fk={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(e){return e}},Hk=function(){function e(t){var n;jm(this,e),this.isAborted=!1,this.isTimeout=!1,this.callbackPrefix="request_"+new Date,this.uuid=0,"string"==typeof t&&(t={url:t});var i,r,o,a,s,l,c=t.url;r="//",i=Hd(i=c),o=null==o?0:(a=iv(o),s=0,l=i.length,a==a&&(void 0!==l&&(a=a<=l?a:l),void 0!==s&&(a=a>=s?a:s)),a),r=Fd(r),i.slice(o,o+r.length)==r&&(c=window.location.protocol+c),this.options=_m(_m(_m({},Fk),t),{},{url:c,context:t.context||sy(),doc:t.doc||ay(),jsonpCallback:t.jsonpCallback||"callback",method:t.method||"GET"}),this.headNode=null===(n=this.options.doc)||void 0===n?void 0:n.getElementsByTagName("head")[0],this.initPromise(),this.init()}return Rm(e,[{key:"initPromise",value:function(){var e=this;this.promise=new Promise((function(t,n){e.__resolve=t,e.__reject=n})).catch((function(){}))}},{key:"init",value:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,this.options.timeout&&(this.timeout=setTimeout((function(){var t;e.isTimeout=!0,null===(t=e.request)||void 0===t||t.abort()}),this.options.timeout));this.request=this.getRequest((function(t){e.triggerSuccess(t)}),(function(t,n){e.triggerError(t,n)}))}},{key:"defaultXHR",value:function(){var e=this.options,t=e.context,n=e.crossOrigin;if(t){if(!0===n){var i=t.XMLHttpRequest?new t.XMLHttpRequest:null;if(i&&"withCredentials"in i)return i;if(t.XDomainRequest)return new t.XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return t.XMLHttpRequest?new t.XMLHttpRequest:new t.ActiveXObject("Microsoft.XMLHTTP")}}},{key:"succeed",value:function(){var e,t,n,i=this.options,r=i.url,o=i.context,a=zk.exec(r),s=a?a[1]:"";return s||(s=(null==o?void 0:o.location.protocol)||""),Pk.test(s)?Bk.test((null===(e=this.request)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.toString())||""):!!(null===(n=this.request)||void 0===n?void 0:n.response)}},{key:"noop",value:function(){}},{key:"handleReadyState",value:function(e,t){return this.isAborted?t("Request is aborted",this.request):this.isTimeout?t("Request is aborted: timeout",this.request):void(this.request&&4===this.request.readyState&&(this.request.onreadystatechange=this.noop,this.succeed()?e(this.request):t(this.request.statusText,this.request)))}},{key:"setHeaders",value:function(e){var t=this.options.headers||{};t.Accept=t.Accept||Fk.accept[this.options.type||"*"],this.options.crossOrigin||t["X-Requested-With"]||(t["X-Requested-With"]=Fk.requestedWith),t["Content-Type"]||Rk(this.options.data)||(t["Content-Type"]=this.options.contentType||Fk.contentType),Object.keys(t).forEach((function(n){e.setRequestHeader(n,t[n])}))}},{key:"setCredentials",value:function(e){void 0!==this.options.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!this.options.withCredentials)}},{key:"generalCallback",value:function(e){this.callbackData=e}},{key:"getCallbackPrefix",value:function(e){return this.callbackPrefix+"_"+e}},{key:"handleJsonp",value:function(e,t,n){var i,r=this,o=this.options,a=o.jsonpCallback,s=o.jsonpCallbackName,l=o.doc,c=o.context;if(l&&c){var u=this.uuid++,d=a||"callback",h=s||this.getCallbackPrefix(u),f=new RegExp("((^|\\?|&)"+d+")=([^&]+)"),p=e.match(f),g=l.createElement("script"),v=0,m=-1!==navigator.userAgent.indexOf("MSIE 10.0");return p?"?"===p[3]?e=e.replace(f,"$1="+h):h=p[3]:e=Lk(e,d+"="+h),c[h]=this.generalCallback,g.type="text/javascript",g.src=e,g.async=!0,void 0===g.onreadystatechange||m||(g.htmlFor=g.id="_request_"+u),g.onload=g.onreadystatechange=function(){var e;return!(g.readyState&&"complete"!==g.readyState&&"loaded"!==g.readyState||v)&&(g.onload=g.onreadystatechange=null,g.onclick&&g.onclick(),t(r.callbackData),r.callbackData=void 0,null===(e=r.headNode)||void 0===e||e.removeChild(g),v=1,!0)},null===(i=this.headNode)||void 0===i||i.appendChild(g),{abort:function(){var e;g.onload=g.onreadystatechange=null,n("Request is aborted: timeout"),r.callbackData=void 0,null===(e=r.headNode)||void 0===e||e.removeChild(g),v=1}}}}},{key:"getRequest",value:function(e,t){var n,i,r=this,o=(null===(n=this.options.method)||void 0===n?void 0:n.toUpperCase())||"GET",a=this.options,s=a.processData,l=a.traditional,c=a.type,u=a.context,d=a.xhr,h=a.async,f=a.before;if(u){var p=this.options,g=p.data,v=p.url;((null===(i=this.options.contentType)||void 0===i?void 0:i.indexOf("json"))||-1)>-1&&"object"===zm(g)&&(g=JSON.stringify(g)),g=!1!==s&&g&&"string"!=typeof g&&!Rk(g)?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,i=[],r=function(e,t){"function"==typeof t?t=t():null==t&&(t=""),i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(Array.isArray(e))for(var o=0;o<e.length;o++)r(e[o].name,e[o].value);else for(n in e)e.hasOwnProperty(n)&&jk(n,e[n],t,r);return i.join("&").replace(/%20/g,"+")}(g,l||Fk.traditional):g||null;var m=void 0,b=!1;if("jsonp"!==c&&"GET"!==o||!g||(v=Lk(v,g),g=null),"jsonp"===c)return this.handleJsonp(v,e,t);if(m=("function"==typeof d?d(this.options):d)||this.defaultXHR())return m.open(o,v,!1!==h),this.setHeaders(m),this.setCredentials(m),u.XDomainRequest&&m instanceof u.XDomainRequest?(m.onload=e,m.onerror=function(){t("http error",m)},m.onprogress=this.noop,b=!0):m.onreadystatechange=function(){r.handleReadyState(e,t)},f&&f(m),b?setTimeout((function(){var e;null===(e=m)||void 0===e||e.send(g)}),200):m.send(g),m}}},{key:"getType",value:function(e){if(e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}},{key:"triggerSuccess",value:function(e){var t=this.options,n=t.dataFilter,i=t.context,r=t.success;if(i){var o=this.options.type,a=(n||Fk.dataFilter)(e.responseText,o);o||(o=e&&this.getType(e.getResponseHeader("Content-Type")));var s="jsonp"!==o?this.request:e;try{s.responseText=a}catch(YM){}if(a)switch(o){case"json":try{s=i.JSON.parse(a)}catch(l){return this.triggerError("Could not parse JSON in response",s)}break;case"html":s=a;break;case"xml":s=s.responseXML&&s.responseXML.parseError&&s.responseXML.parseError.errorCode&&s.responseXML.parseError.reason?null:s.responseXML}r&&r(s),this.triggerComplete(s),this.__resolve&&this.__resolve(s)}}},{key:"triggerError",value:function(e,t){var n=this.options.error,i=new Error(e);i.xhr=t,n&&n(i),this.triggerComplete(i),this.__reject&&this.__reject(i)}},{key:"triggerComplete",value:function(e){var t=this.options.complete;this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,t&&t(e)}},{key:"retry",value:function(){this.initPromise(),this.init()}},{key:"then",value:function(e,t){var n;return null===(n=this.promise)||void 0===n?void 0:n.then(e,t)}},{key:"always",value:function(e){var t;return null===(t=this.promise)||void 0===t?void 0:t.then(e,e)}},{key:"fail",value:function(e){var t;return null===(t=this.promise)||void 0===t?void 0:t.then(void 0,e)}},{key:"catch",value:function(e){return this.fail(e)}}]),e}();Hk.setup=function(e){Object.keys(e).forEach((function(t){Fk[t]&&(Fk[t]=e[t])}))};var Uk={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["cvs"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]},Yk=function(e){if("string"==typeof e)return e.split(".").pop();var t=Uk[e.type]&&Uk[e.type][0];return!t&&e.name&&(t=e.name.split(".").pop()),t},Vk=function(){function e(t){jm(this,e),this.uploadingFiles=[],this.options=t}var t,n;return Rm(e,[{key:"createUid",value:function(e){return Date.now()+"-"+e}},{key:"request",value:(n=Am(Iv.mark((function e(t){var n=this;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Am(Iv.mark((function e(i,r){return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.uid||(i.uid=n.createUid(r)),e.next=3,n.handleBefore(i,t);case 3:if(e.t0=e.sent,!1!==e.t0){e.next=6;break}t.splice(r,1);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.upload(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"upload",value:(t=Am(Iv.mark((function e(t){var n=this;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Am(Iv.mark((function e(t){var i,r,o,a,s,l,c;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("file",t,t.name),t.data&&Object.keys(t.data).forEach((function(e){i.append(e,t.data[e])})),r=n.options,o=r.url,a=r.data,s=r.onUploading,l=r.onSuccess,c=r.onError,a&&Object.keys(a).forEach((function(e){i.append(e,a[e])})),e.next=7,new Hk({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&s&&s(t,{percent:parseInt((e.loaded/e.total*100).toString(),10)})}),!1),e},url:o,data:i,contentType:n.options.contentType,type:n.options.type||"json",success:function(e){l&&l(e,t)},error:function(e){c&&c(e,t)},method:"POST",processData:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"handleBefore",value:function(e,t){var n=this,i=e.type,r=e.uid,o=e.name,a=e.size,s=Yk(e),l=this.options.onBefore;return(!l||!1!==l(e))&&new Promise((function(l,c){var u=new FileReader;u.addEventListener("load",(function(){n.uploadingFiles[r]={uid:r,src:u.result,name:o,size:a,type:i,ext:s},t.every((function(e){return!!n.uploadingFiles[e.uid]}))&&t.forEach((function(e){n.options.onReady&&n.options.onReady(n.uploadingFiles[e.uid],e)})),l(!0)}),!1),u.addEventListener("error",(function(){c(!1)})),u.readAsDataURL(e)}))}}]),e}(),Wk=function(){function e(){jm(this,e)}return Rm(e,[{key:"ajax",value:function(e){return new Hk(e)}},{key:"upload",value:function(e,t){return new Vk(e).request(t)}},{key:"getFiles",value:function(e){var t=e||{},n=t.event,i=t.accept,r=t.multiple;i=i||"*",r=void 0===zm(r)?100:r;var o=document.createElement("input");o.type="file",o.accept=i,o.style.display="none",o.multiple=!1!==r;var a=function e(){o.remove(),document.removeEventListener("mousedown",e)};return new Promise((function(e){var t=function t(){for(var n=[],i=0;i<((null===(s=o.files)||void 0===s?void 0:s.length)||0);i++){var s;if("number"==typeof r&&i>r)break;n.push(o.files[i])}o.removeEventListener("change",t),a(),e(n)};o.addEventListener("change",t),document.body.appendChild(o),n||(n=document.createEvent("MouseEvents")).initEvent("click",!0,!0);try{if(o.dispatchEvent)o.dispatchEvent(n);else{if(!o.fireEvent)throw"";o.fireEvent(n)}document.addEventListener("mousedown",a)}catch(i){o.removeEventListener("change",t),a(),e([])}}))}}]),e}();tw('@font-face {\n    font-family: "data-icon"; /* Project id 1456030 */\n    src: url(\'//at.alicdn.com/t/font_1456030_puji2jhkpsb.woff2?t=1620540396165\') format(\'woff2\'),\n         url(\'//at.alicdn.com/t/font_1456030_puji2jhkpsb.woff?t=1620540396165\') format(\'woff\'),\n         url(\'//at.alicdn.com/t/font_1456030_puji2jhkpsb.ttf?t=1620540396165\') format(\'truetype\');\n  }\n  \n  .data-icon {\n    font-family: "data-icon" !important;\n    font-size: 16px;\n    font-style: normal;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  \n  .data-icon-comment:before {\n    content: "\\e73e";\n  }\n  \n  .data-icon-huanyuan:before {\n    content: "\\e60a";\n  }\n  \n  .data-icon-label:before {\n    content: "\\e714";\n  }\n  \n  .data-icon-video:before {\n    content: "\\e741";\n  }\n  \n  .data-icon-table:before {\n    content: "\\e6a8";\n  }\n  \n  .data-icon-h:before {\n    content: "\\e7a0";\n  }\n  \n  .data-icon-collapse-subtree:before {\n    content: "\\e754";\n  }\n  \n  .data-icon-expand-subtree:before {\n    content: "\\e792";\n  }\n  \n  .data-icon-sub-node:before {\n    content: "\\e78e";\n  }\n  \n  .data-icon-sister-node:before {\n    content: "\\e784";\n  }\n  \n  .data-icon-sup:before {\n    content: "\\e790";\n  }\n  \n  .data-icon-sub:before {\n    content: "\\e75a";\n  }\n  \n  .data-icon-maximize:before {\n    content: "\\e752";\n  }\n  \n  .data-icon-codeblock:before {\n    content: "\\e709";\n  }\n  \n  .data-icon-emoji:before {\n    content: "\\e73a";\n  }\n  \n  .data-icon-h4:before {\n    content: "\\e759";\n  }\n  \n  .data-icon-h1:before {\n    content: "\\e75b";\n  }\n  \n  .data-icon-h5:before {\n    content: "\\e75c";\n  }\n  \n  .data-icon-h2:before {\n    content: "\\e75d";\n  }\n  \n  .data-icon-h3:before {\n    content: "\\e760";\n  }\n  \n  .data-icon-h6:before {\n    content: "\\e761";\n  }\n  \n  .data-icon-liuchengtu:before {\n    content: "\\e61c";\n  }\n  \n  .data-icon-website:before {\n    content: "\\e694";\n  }\n  \n  .data-icon-preferences:before {\n    content: "\\e788";\n  }\n  \n  .data-icon-hr:before {\n    content: "\\e76a";\n  }\n  \n  .data-icon-task-list:before {\n    content: "\\e79f";\n  }\n  \n  .data-icon-unordered-list:before {\n    content: "\\e777";\n  }\n  \n  .data-icon-ordered-list:before {\n    content: "\\e795";\n  }\n  \n  .data-icon-arrow-left:before {\n    content: "\\e748";\n  }\n  \n  .data-icon-arrow-up:before {\n    content: "\\e769";\n  }\n  \n  .data-icon-arrow-right:before {\n    content: "\\e779";\n  }\n  \n  .data-icon-arrow-down:before {\n    content: "\\e79a";\n  }\n  \n  .data-icon-moremark:before {\n    content: "\\e772";\n  }\n  \n  .data-icon-clean:before {\n    content: "\\e74d";\n  }\n  \n  .data-icon-paintformat:before {\n    content: "\\e756";\n  }\n  \n  .data-icon-lock:before {\n    content: "\\e768";\n  }\n  \n  .data-icon-loading:before {\n    content: "\\e76b";\n  }\n  \n  .data-icon-unlock:before {\n    content: "\\e796";\n  }\n  \n  .data-icon-collapse:before {\n    content: "\\e79e";\n  }\n  \n  .data-icon-align-bottom:before {\n    content: "\\e72b";\n  }\n  \n  .data-icon-attachment:before {\n    content: "\\e72c";\n  }\n  \n  .data-icon-bold:before {\n    content: "\\e72d";\n  }\n  \n  .data-icon-border-color:before {\n    content: "\\e72e";\n  }\n  \n  .data-icon-border-all:before {\n    content: "\\e72f";\n  }\n  \n  .data-icon-border-inner:before {\n    content: "\\e730";\n  }\n  \n  .data-icon-border-left:before {\n    content: "\\e731";\n  }\n  \n  .data-icon-border-bottom:before {\n    content: "\\e732";\n  }\n  \n  .data-icon-border-none:before {\n    content: "\\e733";\n  }\n  \n  .data-icon-box:before {\n    content: "\\e734";\n  }\n  \n  .data-icon-border-outer:before {\n    content: "\\e735";\n  }\n  \n  .data-icon-border-right:before {\n    content: "\\e736";\n  }\n  \n  .data-icon-clear:before {\n    content: "\\e737";\n  }\n  \n  .data-icon-close:before {\n    content: "\\e738";\n  }\n  \n  .data-icon-code-example:before {\n    content: "\\e739";\n  }\n  \n  .data-icon-clip:before {\n    content: "\\e73b";\n  }\n  \n  .data-icon-border-up:before {\n    content: "\\e73c";\n  }\n  \n  .data-icon-code:before {\n    content: "\\e73d";\n  }\n  \n  .data-icon-command:before {\n    content: "\\e73f";\n  }\n  \n  .data-icon-compact-display:before {\n    content: "\\e740";\n  }\n  \n  .data-icon-copy:before {\n    content: "\\e742";\n  }\n  \n  .data-icon-download:before {\n    content: "\\e743";\n  }\n  \n  .data-icon-deletecolumn:before {\n    content: "\\e744";\n  }\n  \n  .data-icon-cut:before {\n    content: "\\e745";\n  }\n  \n  .data-icon-decreasedecimalplace:before {\n    content: "\\e746";\n  }\n  \n  .data-icon-drag:before {\n    content: "\\e747";\n  }\n  \n  .data-icon-delete:before {\n    content: "\\e749";\n  }\n  \n  .data-icon-drag-circle:before {\n    content: "\\e74a";\n  }\n  \n  .data-icon-deleterow:before {\n    content: "\\e74b";\n  }\n  \n  .data-icon-edit:before {\n    content: "\\e74c";\n  }\n  \n  .data-icon-filter:before {\n    content: "\\e74e";\n  }\n  \n  .data-icon-embedded-preview:before {\n    content: "\\e74f";\n  }\n  \n  .data-icon-error:before {\n    content: "\\e750";\n  }\n  \n  .data-icon-freezerowcoloum:before {\n    content: "\\e751";\n  }\n  \n  .data-icon-freezefirstrow:before {\n    content: "\\e753";\n  }\n  \n  .data-icon-freezzecolumn:before {\n    content: "\\e755";\n  }\n  \n  .data-icon-border-style:before {\n    content: "\\e757";\n  }\n  \n  .data-icon-gotolink:before {\n    content: "\\e758";\n  }\n  \n  .data-icon-increasedecimalplace:before {\n    content: "\\e75e";\n  }\n  \n  .data-icon-insertrowbelow:before {\n    content: "\\e75f";\n  }\n  \n  .data-icon-image:before {\n    content: "\\e762";\n  }\n  \n  .data-icon-italic:before {\n    content: "\\e763";\n  }\n  \n  .data-icon-indent:before {\n    content: "\\e764";\n  }\n  \n  .data-icon-insertrowabove:before {\n    content: "\\e765";\n  }\n  \n  .data-icon-insertrowright:before {\n    content: "\\e766";\n  }\n  \n  .data-icon-left-circle-fill:before {\n    content: "\\e767";\n  }\n  \n  .data-icon-link:before {\n    content: "\\e76c";\n  }\n  \n  .data-icon-keyboard:before {\n    content: "\\e76d";\n  }\n  \n  .data-icon-more:before {\n    content: "\\e76e";\n  }\n  \n  .data-icon-merge-cells:before {\n    content: "\\e76f";\n  }\n  \n  .data-icon-outdent:before {\n    content: "\\e770";\n  }\n  \n  .data-icon-mention:before {\n    content: "\\e771";\n  }\n  \n  .data-icon-plus:before {\n    content: "\\e773";\n  }\n  \n  .data-icon-minus-circle-o:before {\n    content: "\\e774";\n  }\n  \n  .data-icon-highlight:before {\n    content: "\\e775";\n  }\n  \n  .data-icon-paste:before {\n    content: "\\e776";\n  }\n  \n  .data-icon-insertrowleft:before {\n    content: "\\e778";\n  }\n  \n  .data-icon-quote:before {\n    content: "\\e77a";\n  }\n  \n  .data-icon-plus-circle-o:before {\n    content: "\\e77b";\n  }\n  \n  .data-icon-right-circle-fill:before {\n    content: "\\e77c";\n  }\n  \n  .data-icon-question-circle-o:before {\n    content: "\\e77d";\n  }\n  \n  .data-icon-preview:before {\n    content: "\\e77e";\n  }\n  \n  .data-icon-reload:before {\n    content: "\\e77f";\n  }\n  \n  .data-icon-rotate-left:before {\n    content: "\\e780";\n  }\n  \n  .data-icon-math:before {\n    content: "\\e781";\n  }\n  \n  .data-icon-overflow:before {\n    content: "\\e782";\n  }\n  \n  .data-icon-redo:before {\n    content: "\\e783";\n  }\n  \n  .data-icon-searchreplace:before {\n    content: "\\e785";\n  }\n  \n  .data-icon-save:before {\n    content: "\\e786";\n  }\n  \n  .data-icon-singleselect:before {\n    content: "\\e787";\n  }\n  \n  .data-icon-rotate-right:before {\n    content: "\\e789";\n  }\n  \n  .data-icon-sort-ascending:before {\n    content: "\\e78a";\n  }\n  \n  .data-icon-sort-descending:before {\n    content: "\\e78b";\n  }\n  \n  .data-icon-toc:before {\n    content: "\\e78c";\n  }\n  \n  .data-icon-solit-cells:before {\n    content: "\\e78d";\n  }\n  \n  .data-icon-translate:before {\n    content: "\\e78f";\n  }\n  \n  .data-icon-successful:before {\n    content: "\\e791";\n  }\n  \n  .data-icon-strikethrough:before {\n    content: "\\e793";\n  }\n  \n  .data-icon-undo:before {\n    content: "\\e794";\n  }\n  \n  .data-icon-underline:before {\n    content: "\\e797";\n  }\n  \n  .data-icon-unlink:before {\n    content: "\\e798";\n  }\n  \n  .data-icon-wrap:before {\n    content: "\\e799";\n  }\n  \n  .data-icon-upload:before {\n    content: "\\e79b";\n  }\n  \n  .data-icon-zoom-out:before {\n    content: "\\e79c";\n  }\n  \n  .data-icon-zoom-in:before {\n    content: "\\e79d";\n  }\n  \n  .data-icon-align-center:before {\n    content: "\\e725";\n  }\n  \n  .data-icon-align-justify:before {\n    content: "\\e726";\n  }\n  \n  .data-icon-align-left:before {\n    content: "\\e727";\n  }\n  \n  .data-icon-align-top:before {\n    content: "\\e728";\n  }\n  \n  .data-icon-align-right:before {\n    content: "\\e729";\n  }\n  \n  .data-icon-align-middle:before {\n    content: "\\e72a";\n  }\n\n.data-anticon {\n    display: inline-block;\n    font-style: normal;\n    vertical-align: -0.125em;\n    text-align: center;\n    text-transform: none;\n    line-height: 0;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n}\n\n.data-anticon svg {\n    display: inline-block;\n}\n\n.data-anticon .data-anticon-spin {\n    display: inline-block;\n    -webkit-animation: loadingCircle 1s infinite linear;\n    animation: loadingCircle 1s infinite linear;\n}\n\n.data-anticon > * {\n    line-height: 1;\n}\n\n*, *::before, *::after {\n    box-sizing: border-box;\n}\n\n.am-engine {\n    position: relative;\n    background-color: #FFFFFF;\n}\n\n.am-engine ::-moz-selection {\n    background: rgba(180, 213, 254, 0.5) !important;\n    color: inherit!important;\n}\n\n.am-engine ::selection {\n    background: rgba(180, 213, 254, 0.5) !important;\n    color: inherit!important;\n}\n\n.am-engine , .am-engine-view {\n    font-family: \'Chinese Quote\', \'Segoe UI\', Roboto, \'PingFang SC\', \'Hiragino Sans GB\', \'Microsoft YaHei\', \'Helvetica Neue\', Helvetica, Arial, sans-serif, \'Apple Color Emoji\';\n\tword-wrap: break-word;\n\toutline-style: none;\n\twhite-space: pre-wrap;\n    -webkit-user-select: auto;\n       -moz-user-select: auto;\n        -ms-user-select: auto;\n            user-select: auto;\n    font-size: 14px;\n    line-height: 1.74;\n    color: #262626;\n    letter-spacing: .05em;\n    /* pt / px 换算表：https://websemantics.uk/articles/font-size-conversion/ */\n}\n\n.am-engine > *:first-child,.am-engine-view > *:first-child {\n\tmargin-top: 0 !important;\n}\n\n.am-engine p , .am-engine-view p {\n    white-space: normal;\n    margin: 0;\n    min-height: 24px;\n}\n\n.am-engine [contenteditable="true"],.am-engine-view [contenteditable="true"] {\n\toutline-style: none;\n}\n\n.am-engine .selection-transparent::-moz-selection,.am-engine-view .selection-transparent::-moz-selection {\n\tbackground: transparent;\n}\n\n.am-engine .selection-transparent::selection,.am-engine-view .selection-transparent::selection {\n\tbackground: transparent;\n}\n/*---------------------------卡片 begin-----------------------*/\n\n.am-engine [data-card-type], .am-engine-view [data-card-type] {\n    white-space: normal;\n}\n.am-engine span[data-card-type="inline"],.am-engine-view span[data-card-type="inline"] {\n\tdisplay: inline-block;\n\ttext-indent: 0;\n\tvertical-align: baseline;\n\twhite-space: initial;\n}\n\n.am-engine span[data-card-type="inline"] span[data-card-element],.am-engine-view span[data-card-type="inline"] span[data-card-element] {\n\tdisplay: inline-block;\n}\n\n.am-engine span[data-card-type="inline"] span[data-card-element="center"],.am-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\n\tvertical-align: bottom;\n}\n\n.am-engine span[data-card-type="inline"] span[data-card-element="left"],.am-engine-view span[data-card-type="inline"] span[data-card-element="left"],.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\n\tmin-width: 1px;\n\ttext-align: left;\n\t-webkit-user-select: text;\n\t-moz-user-select: text;\n\t -ms-user-select: text;\n\t     user-select: text;\n}\n\n.am-engine div[data-card-type="block"],.am-engine-view div[data-card-type="block"],.am-engine span[data-card-type="inline"].data-card-block,.am-engine-view span[data-card-type="inline"].data-card-block {\n\tdisplay: block;\n}\n\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\n\tbottom: 0;\n\tposition: absolute;\n\twidth: 2px;\n\toverflow: hidden;\n\toutline: none;\n\ttext-align: left;\n\ttext-indent: 0;\n\t-webkit-box-flex: 0;\n\tflex: 0 0 auto;\n\t-webkit-user-select: text;\n\t-moz-user-select: text;\n\t -ms-user-select: text;\n\t     user-select: text;\n}\n\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\n\tleft: -2px;\n\ttext-align: left;\n}\n\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\n\tright: -2px;\n\ttext-align: right;\n}\n\n.am-engine span[data-card-element="body"],.am-engine-view span[data-card-element="body"],.am-engine div[data-card-element="body"],.am-engine-view div[data-card-element="body"] {\n\tposition: relative;\n}\n\n.am-engine span[data-card-element="body"] [data-card-element="center"],.am-engine-view span[data-card-element="body"] [data-card-element="center"],.am-engine div[data-card-element="body"] [data-card-element="center"],.am-engine-view div[data-card-element="body"] [data-card-element="center"] {\n\t-webkit-user-select: text;\n\t-moz-user-select: text;\n\t -ms-user-select: text;\n\t     user-select: text;\n}\n.am-engine span[data-card-element="body"] [data-element="editable"],.am-engine div[data-card-element="body"] [data-element="editable"]\n{\n    cursor: text;\n}\n/*---------------------------卡片 end-----------------------*/');var $k=function(){function e(t,n){var i=this;jm(this,e),this._readonly=!1,this.kind="engine",this.options={lang:"zh-cn",plugins:[],cards:[],config:{}},this.$=function(e,t,n){return function(e,t,n,i){void 0===n&&(n=ay());var r=Yy(e,t,n),o=new(i||Qy)(e,r,n||void 0);return ry(t)&&t.nodeType===sy().Node.DOCUMENT_FRAGMENT_NODE&&(o.isFragment=!0),o}(i,e,t,n)},this.options=_m(_m({},this.options),n),this.language=new fk(this.options.lang||"zh-cn",Xy),this.event=new ny,this.command=new qw(this),this.schema=new hw,this.schema.add(ty),this.conversion=new Gw,this.history=new Zw(this),this.card=new dk(this),this.clipboard=new hk(this),this.request=new Wk,this.plugin=new ik(this),this.node=new Ky(this),this.list=new bk(this),this.mark=new gk(this),this.inline=new Ak(this),this.block=new _k(this),this._container=new Ek(t,{engine:this,lang:this.options.lang,className:this.options.className,tabIndex:this.options.tabIndex}),this.root=this.$(this.options.root||this.container.parent()||ay().body),this._container.init(),this.change=new dw(this,{onChange:function(e){return i.trigger("change",e)},onSelect:function(){return i.trigger("select")},onSetValue:function(){return i.trigger("afterSetValue")}}),this.typing=new Sk(this),this.mark.init(),this.inline.init(),this.block.init(),this.list.init(),this.hotkey=new Qw(this),this.scrollNode=this.options.scrollNode?this.$(this.options.scrollNode):null,this.card.init(this.options.cards||[]),this.plugin.init(this.options.plugins||[],this.options.config||{}),this.ot=new $w(this)}var t;return Rm(e,[{key:"isSub",value:function(){return this.container.closest($b).length>0}},{key:"isFocus",value:function(){return this._container.isFocus()}},{key:"focus",value:function(){this.change.focus()}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"trigger",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=this.event).trigger.apply(t,[e].concat(i))}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.change.getValue({});return e?Jy.removeTags(t):t}},{key:"getValueAsync",value:(t=Am(Iv.mark((function e(){var t,n=this,i=arguments;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],e.abrupt("return",new Promise((function(e){Object.keys(n.plugin.components).forEach(function(){var e=Am(Iv.mark((function e(t){var i;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=n.plugin.components[t]).waiting){e.next=4;break}return e.next=4,i.waiting();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(n.getValue(t))})));case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"getHtml",value:function(){var e=this.$(this.container[0].cloneNode(!0));return e.removeAttributes("contenteditable"),e.removeAttributes("tabindex"),e.removeAttributes("autocorrect"),e.removeAttributes("autocomplete"),e.removeAttributes("spellcheck"),e.removeAttributes("data-gramm"),e.removeAttributes("role"),new cw(e,this).toHTML().html}},{key:"setValue",value:function(e){return this.readonly=!1,e=this.trigger("beforeSetValue",e)||e,this.change.setValue(e),this.normalizeTree(),this}},{key:"setJsonValue",value:function(e){for(var t,n=this.$(Rw(e)),i=null===(t=n.get())||void 0===t?void 0:t.attributes,r=0;i&&r<i.length;r++){var o=i.item(r)||{},a=o.nodeName,s=o.nodeValue;/^data-selection-/.test(a||"")&&"null"!==s&&this.container.attributes(a,s)}var l=this.node.html(n);this.change.setValue(l);var c=this.change.getRange();return c.shrinkToElementNode(),this.change.select(c),this.normalizeTree(),this}},{key:"destroy",value:function(){this._container.destroy(),this.change.destroy(),this.hotkey.destroy(),this.card.gc(),this.ot&&this.ot.destroy()}},{key:"normalizeTree",value:function(){var e,t,n,i,r,o,a,s,l=this,c=this.$("<p />"),u=this.change.getRange().createSelection();(u.anchor&&u.focus&&(n=u.anchor.next(),i=u.focus.prev(),r=u.anchor.parent(),o=u.focus.parent()),n&&(null===(e=u.anchor)||void 0===e||e.remove()),i&&(null===(t=u.focus)||void 0===t||t.remove()),this.container.children().each((function(e){var t=l.$(e);l.node.isBlock(t)?(c.children().length>0&&t.before(c),c=l.$("<p />")):c.append(t)})),c.children().length>0&&this.container.append(c),n&&u.anchor&&u.anchor.length>0&&n.before(u.anchor),i&&u.focus&&u.focus.length>0&&i.after(u.focus),u.has()&&n&&i)&&((null===(a=r)||void 0===a?void 0:a.isEditable())&&c.append(u.anchor),(null===(s=o)||void 0===s?void 0:s.isEditable())&&c.append(u.focus),c.children().length>0&&this.container.append(c));this.container.children().each((function(e){var t=l.$(e);if(l.node.removeMinusStyle(t,"text-indent"),l.node.isRootBlock(t)){var n=t.children().length;if(0===n)t.remove();else{var i=t.first();1===n&&"span"===(null==i?void 0:i.name)&&[zb,Rb,Pb].indexOf(i.attributes(Tb))>=0&&t.prepend(l.$("<br />"))}}})),u.move()}},{key:"messageSuccess",value:function(e){console.log("success:".concat(e))}},{key:"messageError",value:function(e){console.log("error:".concat(e))}},{key:"messageConfirm",value:function(e){return console.log("confirm:".concat(e)),Promise.reject(!1)}},{key:"container",get:function(){return this._container.getNode()}},{key:"readonly",get:function(){return this._readonly},set:function(e){this.readonly!==e&&(e?(this.hotkey.disable(),this._container.setReadonly(!0)):(this.hotkey.enable(),this._container.setReadonly(!1)),this._readonly=e,this.trigger("readonly",e))}}]),e}();tw(".card-maximize-header {\n    position: fixed !important;\n    top: 0;\n    right: 0;\n    left: 0;\n    z-index: 1032;\n    height: 56px;\n    background: #fff;\n    border-bottom: 1px solid #e8e8e8;\n    width: 100%;\n}\n\n.card-maximize-header .header-crumb {\n    float: left;\n    line-height: 32px;\n    display: flex;\n    height: 100%;\n    align-items: center;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n}\n\n.card-maximize-header .header-crumb a\n{\n    color: #595959;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.card-maximize-header .header-crumb .split {\n    display: inline-block;\n    vertical-align: middle;\n    padding: 0 15px;\n    font-size: 20px;\n    padding-right: 8px;\n    font-weight: 200;\n    margin: 0 8px;\n}\n\n.card-maximize-header .header-crumb .split + a {\n    display: inline-block;\n    vertical-align: middle;\n}\n\n.card-maximize-header .header-crumb .split + a:hover {\n\tcolor: #8C8C8C;\n}\n\n.data-card-block-max .card-max-edit {\n    top: 96px;\n}");var Gk=function(){function e(t,n){jm(this,e),this.editor=t,this.card=n}return Rm(e,[{key:"restore",value:function(){this.card.root.removeClass("data-card-block-max"),this.node&&(this.node.remove(),this.node=void 0),!this.card.readonly&&Vy(this.editor)&&(this.card.findByKey("center").removeClass("card-max-edit"),this.editor.trigger("card:minimize",this.card),this.editor.history.reset())}},{key:"maximize",value:function(){var e=this;if(!this.node){var t=this.editor,n=t.$,i=t.language.get("maximize","back").toString(),r=n('<div class="card-maximize-header" data-transient="true">\n            <div class="header-crumb">\n                <a class="split">\n                    <span class="data-icon data-icon-arrow-left"></span>\n                </a>\n                <a>'.concat(i,"</a>\n            </div>\n        </div>"));r.on("click",(function(e){e.stopPropagation()})),this.card.root.addClass("data-card-block-max"),r.find(".header-crumb").on("click",(function(){e.restore()})),this.card.findByKey("body").prepend(r),!this.card.readonly&&Vy(this.editor)&&(this.card.findByKey("center").addClass("card-max-edit"),this.editor.trigger("card:maximize",this.card),this.editor.history.reset()),this.node=r}}}]),e}();tw(".data-card-resize {\n    position: absolute;\n    bottom: -3px;\n    right: 0px;\n    left: 0px;\n    margin: 0 auto;\n    z-index: 2;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.data-card-resize-btn{\n    background: #d9dbdd;\n    border-radius: 3px;\n    height: 6px;\n    padding: 0 50px;\n    display: block;\n}\n\n.data-card-resize-btn svg {\n    display: block;\n    color: #999;\n}\n\n.data-card-resize-btn:hover {\n    cursor: row-resize;\n}");var Zk=function(){function e(t,n){var i=this;jm(this,e),this.options={},this.dragStart=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,i.point={x:e.clientX,y:e.clientY};var t=i.options.dragStart;t&&t(i.point)},this.dragMove=function(e){if(i.point){var t=i.options.dragMove;t&&t(e.clientY-i.point.y)}},this.dragEnd=function(e){i.point=void 0;var t=i.options.dragEnd;t&&t()},this.editor=t,this.card=n}return Rm(e,[{key:"create",value:function(e){var t=this.editor.$;this.options=e,this.component=t('<div class="data-card-resize" draggable="true"><span class="data-card-resize-btn"><svg viewBox="0 0 3413 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="8px" height="6px"><path d="M341.333333 341.333333h2730.666667a170.666667 170.666667 0 0 0 0-341.333333H341.333333a170.666667 170.666667 0 1 0 0 341.333333zM341.333333 1024h2730.666667a170.666667 170.666667 0 0 0 0-341.333333H341.333333a170.666667 170.666667 0 0 0 0 341.333333z"></path></svg></span></div>'),this.component.on("dragstart",this.dragStart),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd),this.component.on("click",(function(e){e.stopPropagation()}))}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.card.root,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,i=!1,r=0,o=0;this.create({dragStart:function(){r=t.height(),i=!0},dragMove:function(e){i&&(o=(o=r+e)<n?n:o,t.css("height","".concat(o,"px")))},dragEnd:function(){i&&(e.card.setValue({height:t.height()}),i=!1)}}),this.component&&(this.component.hide(),t.append(this.component))}},{key:"show",value:function(){var e;null===(e=this.component)||void 0===e||e.show()}},{key:"hide",value:function(){var e;null===(e=this.component)||void 0===e||e.hide()}},{key:"destroy",value:function(){this.component&&this.component.off("dragstart",this.dragStart),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd)}}]),e}();tw(".data-card-dnd {\n    position: absolute;\n    top: 0;\n    left: -21px;\n    right: auto;\n    bottom: auto;\n    width: 18px;\n    height: 24px;\n    line-height: 24px;\n    font-size: 14px;\n    font-weight: normal;\n    display: none;\n    opacity: 0;\n    z-index: 125;\n    transition: all 0.3s ease-in-out;\n    background: rgba(255, 255, 255, 0.9);\n}\n\n.data-card-dnd-active {\n    display: block;\n    opacity: 1;\n    cursor: pointer;\n}\n\n.data-card-dnd:hover {\n\tbackground: #f4f4f4;\n\tcolor: #595959;\n}\n\n.data-card-dnd-trigger {\n    width: 18px;\n    height: 24px;\n    text-align: center;\n    color: #BFBFBF;\n    font-size: 16px;\n    border-radius: 2px 2px;\n    cursor: move;\n    cursor: grab;\n    cursor: -moz-grab;\n    cursor: -webkit-grab;\n}\n\n.am-engine-view .data-toolbar-active {\n\tmin-width: 200px;\n}\n\n.data-card-toolbar.data-toolbar-block {\n\ttop: -48px;\n\tbottom: auto;\n\tdisplay: none;\n}\n\n.data-card-toolbar.data-card-toolbar-active {\n\tdisplay: block;\n}\n\n.data-card-toolbar.data-toolbar-active {\n\tdisplay: block;\n}");var qk=function(){function e(t,n){jm(this,e),this.editor=t,this.card=n}return Rm(e,[{key:"getContainer",value:function(){var e;return null===(e=this.toolbar)||void 0===e?void 0:e.root}},{key:"getDefaultItem",value:function(e){var t=this,n=this.editor,i=n.$,r=n.language;switch(e.type){case"separator":return{type:"node",node:e.node||i('<span class="data-toolbar-item-split"></span>')};case"copy":return{type:"button",content:e.content||'<span class="data-icon data-icon-copy"></span>',title:e.title||r.get("copy","title").toString(),onClick:function(){t.editor.clipboard.copy(t.card.root[0],!0)?t.editor.messageSuccess(r.get("copy","success").toString()):t.editor.messageError(r.get("copy","error").toString())}};case"delete":return{type:"button",content:e.content||'<span class="data-icon data-icon-delete"></span>',title:e.title||r.get("delete","title").toString(),onClick:function(){t.editor.card.remove(t.card.root)}};case"maximize":return{type:"button",content:e.content||'<span class="data-icon data-icon-maximize"></span>',title:e.title||r.get("maximize","title").toString(),onClick:function(){t.card.maximize()}};case"more":return{type:"dropdown",content:e.content||'<span class="data-icon data-icon-more"></span>',title:e.title||r.get("more","title").toString(),items:e.items}}}},{key:"create",value:function(){var e=this;if(this.card.toolbar){var t=this.card.toolbar(),n=this.editor.root;this.hide();var i=[];if(t.forEach((function(t){if(function(e){return-1===["button","input","dropdown","node"].indexOf(e.type)}(t))switch(t.type){case"dnd":var r=e.createDnd(t.content||'<span class="data-icon data-icon-drag"></span>',t.title||e.editor.language.get("dnd","title").toString());n.append(r);break;default:var o=e.getDefaultItem(t);o&&i.push(o)}else i.push(t)})),i.length>0){var r=new jw(this.editor,{items:i});r.root.addClass("data-card-toolbar"),r.render(n),r.hide(),this.toolbar=r}}}},{key:"hide",value:function(){this.editor.root.find(".data-card-dnd").remove(),this.hideCardToolbar()}},{key:"show",value:function(e){this.showCardToolbar(e)}},{key:"hideCardToolbar",value:function(){var e;null===(e=this.toolbar)||void 0===e||e.destroy()}},{key:"showCardToolbar",value:function(e){this.create();var t=this.getContainer();if(t&&t.length>0){var n=t.get();if(n.style.left="0px",e){var i=e.clientX,r=t.first(),o=this.card.root.get().getBoundingClientRect();if(r&&i>=o.left&&i<=o.right){var a=r.get().getBoundingClientRect(),s=o.width-a.width;if(s>0){var l=i-o.width-a.width/2;n.style.left=Math.max(Math.min(l,s),0)+"px"}}}else{var c=this.card.root.getBoundingClientRect()||{left:0,top:0},u=this.editor.root,d=u.getBoundingClientRect()||{left:0,top:0},h=c.top-d.top,f=c.left-d.left;n.style.top="".concat(h-48,"px"),n.style.left="".concat(f,"px");var p=u.find(".data-card-dnd"),g=p.get();g&&(g.style.top="".concat(h,"px"),g.style.left="".concat(f-21,"px"),p.addClass("data-card-dnd-active"))}t.addClass("data-toolbar-active"),t.attributes("toolbar-trigger-key",this.card.constructor.cardName),this.toolbar&&this.toolbar.show()}}},{key:"createDnd",value:function(e,t){var n=this,i=(0,this.editor.$)("<div ".concat(Tb,'="').concat(Db,'" class="data-card-dnd" draggable="true" dnd-trigger-key="').concat(this.card.constructor.cardName,'" drag-card-trigger="').concat(this.card.id,'" contenteditable="false">\n                <div class="data-card-dnd-trigger">\n                    ').concat(e,"\n                </div>\n            </div>")),r=new Nw(this.editor);return i.on("mouseenter",(function(){r.show(i,t)})),i.on("mouseleave",(function(){r.hide()})),i.on("mousedown",(function(e){e.stopPropagation(),r.hide(),n.hideCardToolbar()})),i.on("mouseup",(function(){n.showCardToolbar()})),i}}]),e}(),Qk=function(){function e(t){var n=t.editor,i=t.value,r=t.root;jm(this,e),this.activatedByOther=!1,this.selectedByOther=!1,this.contenteditable=[],this.isMaximize=!1,this.editor=n;var o=this.editor.$,a="inline"===this.constructor.cardType?"span":"div";this.root=r||o("<".concat(a," />")),"string"==typeof i&&(i=Ry(i)),(i=i||{}).id=this.getId(i.id),this.setValue(i),this.toolbar&&(this.toolbarModel=new qk(this.editor,this)),this.defaultMaximize=new Gk(this.editor,this)}return Rm(e,[{key:"setActivated",value:function(e){e?this.root.addClass("card-activated"):this.root.removeClass("card-activated")}},{key:"setSelected",value:function(e){e?this.root.addClass("card-selected"):this.root.removeClass("card-selected")}},{key:"getId",value:function(e){var t=[];if(this.editor.card.each((function(e){t.push(e.id)})),e&&t.indexOf(e)<0)return e;for(var n=wy();t.indexOf(n)>=0;)n=wy();return n}},{key:"setValue",value:function(e){if(null!=e){var t=this.getValue();(null==t?void 0:t.id)&&delete e.id,e=_m(_m({},this.getValue()),e),this.root.attributes("data-card-value",Ly(e))}}},{key:"getValue",value:function(){var e=this.root.attributes("data-card-value");if(e)return Ry(e)}},{key:"find",value:function(e){var t=this,n=this.editor,i=n.card,r=n.$,o=this.root.find(e),a=[];return o.each((function(e){var n=i.find(e);n&&n.root.equal(t.root)&&a.push(e)})),r(a)}},{key:"findByKey",value:function(e){return this.find("[".concat(Wb,"=").concat(e,"]"))}},{key:"activate",value:function(e){e?this.activated||(this.setActivated(e),this.onActivate(e)):this.activated&&(this.setActivated(e),this.onActivate(!1))}},{key:"select",value:function(e){this.readonly||this.activatedByOther||(e?this.selected||(this.setSelected(e),this.onSelect(e)):this.selected&&(this.setSelected(e),this.onSelect(!1)))}},{key:"getCenter",value:function(){return this.find(qb)}},{key:"isCenter",value:function(e){var t=e.closest(qb);return t.length>0&&t.equal(this.find(qb))}},{key:"isCursor",value:function(e){return this.isLeftCursor(e)||this.isRightCursor(e)}},{key:"isLeftCursor",value:function(e){var t=e.closest(Zb);return t.length>0&&t.equal(this.find(Zb))}},{key:"isRightCursor",value:function(e){var t=e.closest(Qb);return t.length>0&&t.equal(this.find(Qb))}},{key:"focus",value:function(e,t){var n=this.findByKey("left"),i=this.findByKey("right");0!==n.length&&0!==i.length&&(e.select(t?n:i,!0),e.collapse(!1),this.onFocus&&this.onFocus())}},{key:"focusPrevBlock",value:function(e,t){if(!Vy(this.editor))throw"Engine not initialized";var n;if("inline"===this.constructor.cardType){var i=this.editor.block.closest(this.root);n=i.isEditable()?this.root.prevElement():i.prevElement()}else n=this.root.prevElement();if(t){if(!n||n.attributes(Ub)){var r=this.editor.$("<p><br /></p>");return this.root.before(r),e.select(r,!0),void e.collapse(!1)}}else{if(!n)return;var o;if(n.attributes(Ub))return void(null===(o=this.editor.card.find(n))||void 0===o||o.focus(e,!1))}e.select(n,!0).shrinkToElementNode().collapse(!1)}},{key:"focusNextBlock",value:function(e,t){if(!Vy(this.editor))throw"Engine not initialized";var n;if("inline"===this.constructor.cardType){var i=this.editor.block.closest(this.root);n=i.isEditable()?this.root.nextElement():i.nextElement()}else n=this.root.nextElement();if(t){if(!n||n.attributes(Ub)){var r=this.editor.$("<p><br /></p>");return this.root.after(r),e.select(r,!0),void e.collapse(!1)}}else{if(!n)return;var o;if(n.attributes(Ub))return void(null===(o=this.editor.card.find(n))||void 0===o||o.focus(e,!1))}e.select(n,!0).shrinkToElementNode().collapse(!0)}},{key:"maximize",value:function(){this.isMaximize=!0,this.defaultMaximize.maximize()}},{key:"minimize",value:function(){this.isMaximize=!1,this.defaultMaximize.restore()}},{key:"onSelect",value:function(e){var t="data-card-".concat(this.constructor.selectStyleType,"-selected"),n=this.getCenter();e?n.addClass(t):n.removeClass(t)}},{key:"onSelectByOther",value:function(e,t){var n=this.getCenter();"background"===this.constructor.selectStyleType?n.css("background-color",e?t.rgb:""):n.css("outline",e?"2px solid "+t.color:"")}},{key:"onActivate",value:function(e){var t,n;this.resize&&(e?null===(t=this.resizeModel)||void 0===t||t.show():null===(n=this.resizeModel)||void 0===n||n.hide())}},{key:"onActivateByOther",value:function(e,t){this.onSelectByOther(e,t)}},{key:"destroy",value:function(){var e;null===(e=this.toolbarModel)||void 0===e||e.hide()}},{key:"didRender",value:function(){if(this.resize){var e="function"==typeof this.resize?this.resize():this.findByKey("body");this.resizeModel=new Zk(this.editor,this),this.resizeModel.render(e)}}},{key:"isEditable",get:function(){return this.contenteditable.length>0}},{key:"readonly",get:function(){return!Vy(this.editor)}},{key:"activated",get:function(){return this.root.hasClass("card-activated")}},{key:"selected",get:function(){return this.root.hasClass("card-selected")}},{key:"id",get:function(){var e=this.getValue();return"object"===zm(e)?e.id:""}},{key:"name",get:function(){return this.root.attributes(Ub)}}]),e}();Qk.autoSelected=!0,Qk.collab=!0,Qk.selectStyleType="border",Qk.toolbarFollowMouse=!1;tw(".data-scrollable::-webkit-scrollbar {\n    display: none;\n  }\n  .data-scrollable.scroll-x {\n    padding-bottom: 10px;\n    overflow-x: hidden;\n  }\n  .data-scrollable.scroll-x:hover {\n    overflow-x: auto;\n  }\n  .data-scrollable.scroll-y {\n    padding-right: 10px;\n    overflow-y: hidden;\n  }\n  .data-scrollable.scroll-y:hover {\n    overflow-y: auto;\n  }\n  .data-scrollable:hover .data-scrollbar {\n    display: block;\n  }\n  .data-scrollable.scrolling {\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n  }\n  .data-scrollable.scrolling .data-scrollbar {\n    display: block;\n  }\n  .data-scrollable .data-scrollbar {\n    display: none;\n    position: absolute;\n    cursor: default;\n    transition: opacity 0.3s ease-in-out;\n  }\n  .data-scrollable .data-scrollbar .data-scrollbar-trigger {\n    position: absolute;\n    background: #c1c1c1;\n    border-radius: 10px;\n    cursor: pointer;\n  }\n  .data-scrollable .data-scrollbar .data-scrollbar-trigger:hover {\n    background: #888;\n  }\n  .data-scrollable .data-scrollbar.data-scrollbar-x {\n    width: 100%;\n    height: 8px;\n    bottom: 0px;\n  }\n  .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\n    height: 8px;\n    min-width: 60px;\n  }\n  .data-scrollable .data-scrollbar.data-scrollbar-y {\n    top: 0;\n    width: 8px;\n    height: 100%;\n    right: 0px;\n  }\n  .data-scrollable .data-scrollbar.data-scrollbar-y .data-scrollbar-trigger {\n    width: 8px;\n    min-height: 60px;\n  }\n  .data-scrollable .scrollbar-shadow-left {\n    position: absolute;\n    z-index: 10;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    opacity: 0.8;\n    background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\n    background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\n    pointer-events: none;\n  }\n  .data-scrollable .scrollbar-shadow-right {\n    position: absolute;\n    z-index: 10;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    opacity: 0.8;\n    background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\n    background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\n    pointer-events: none;\n  }");var Kk=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e,i){var r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return jm(this,n),(r=t.call(this)).oWidth=0,r.oHeight=0,r.sWidth=0,r.sHeight=0,r.xWidth=0,r.yHeight=0,r.maxScrollLeft=0,r.scrollX=function(e){if(r.sildeXDragging){var t,n=r.sildeXDragging,i=n.point,o=n.position+(e.clientX-i);o=Math.max(0,Math.min(o,r.oWidth-r.xWidth)),null===(t=r.slideX)||void 0===t||t.css("left",o+"px");var a=o/(r.oWidth-r.xWidth);a=Math.min(1,a),r.container.get().scrollLeft=(r.sWidth-r.oWidth)*a}},r.scrollY=function(e){if(r.slideYDragging){var t,n=r.slideYDragging,i=n.point,o=n.position+(e.clientY-i);o=Math.max(0,Math.min(o,r.oHeight-r.yHeight)),null===(t=r.slideY)||void 0===t||t.css("top",o+"px");var a=o/(r.oHeight-r.yHeight);a=Math.min(1,a),r.container.get().scrollTop=(r.sHeight-r.oHeight)*a}},r.scrollXEnd=function(){r.sildeXDragging=void 0,document.body.removeEventListener("mousemove",r.scrollX),document.body.removeEventListener("mouseup",r.scrollXEnd),r.container.removeClass("scrolling")},r.scrollYEnd=function(){r.slideYDragging=void 0,document.body.removeEventListener("mousemove",r.scrollY),document.body.removeEventListener("mouseup",r.scrollYEnd),r.container.removeClass("scrolling")},r.bindXScrollEvent=function(){var e;r.x&&(null===(e=r.slideX)||void 0===e||e.on("mousedown",(function(e){var t;r.container.addClass("scrolling"),r.sildeXDragging={point:e.clientX,position:parseInt((null===(t=r.slideX)||void 0===t?void 0:t.css("left"))||"0")},document.body.addEventListener("mousemove",r.scrollX),document.body.addEventListener("mouseup",r.scrollXEnd)})))},r.bindYScrollEvent=function(){var e;r.y&&(null===(e=r.slideY)||void 0===e||e.on("mousedown",(function(e){var t;r.container.addClass("scrolling"),r.sildeXDragging={point:e.clientY,position:parseInt((null===(t=r.slideY)||void 0===t?void 0:t.css("top"))||"0")},document.body.addEventListener("mousemove",r.scrollY),document.body.addEventListener("mouseup",r.scrollYEnd)})))},r.reRenderShadow=function(e){var t,n,i,o;r.shadow&&(null===(t=r.shadowLeft)||void 0===t||t.css("left",e+"px"),null===(n=r.shadowRight)||void 0===n||n.css("left",e+r.oWidth-4+"px"),null===(i=r.shadowLeft)||void 0===i||i.css("display","none"),null===(o=r.shadowRight)||void 0===o||o.css("display","none"),r.shadowTimer&&clearTimeout(r.shadowTimer),r.shadowTimer=setTimeout((function(){var t,n;0!==e&&(null===(t=r.shadowLeft)||void 0===t||t.css("display","block"));e!==r.maxScrollLeft&&(null===(n=r.shadowRight)||void 0===n||n.css("display","block"))}),100))},r.reRenderX=function(e){if(r.x){var t,n;null===(t=r.scrollBarX)||void 0===t||t.css("left",e+"px");var i=e/(r.sWidth-r.oWidth);i=Math.min(1,i),null===(n=r.slideX)||void 0===n||n.css("left",(r.oWidth-r.xWidth)*i+"px"),r.reRenderShadow(e)}},r.reRenderY=function(e){if(r.y){var t,n;null===(t=r.scrollBarY)||void 0===t||t.css("top",e+"px");var i=e/(r.sHeight-r.oHeight);i=Math.min(1,i),null===(n=r.slideY)||void 0===n||n.css("top",(r.oHeight-r.yHeight)*i+"px")}},r.editor=e,r.container=ry(i)?e.$(i):i,r.x=o,r.y=a,r.shadow=s,r.init(),r}return Rm(n,[{key:"init",value:function(){var e=this.editor.$;if(!hy&&!py){var t=this.container.children(),n=!1;t.each((function(t){e(t).hasClass("data-scrollbar")&&(n=!0)})),n||(this.container.css("position","relative"),this.container.addClass("data-scrollable"),this.x&&(this.scrollBarX=e("<div ".concat(Tb,'="').concat(Db,'" class="data-scrollbar data-scrollbar-x "><div class="data-scrollbar-trigger"></div></div>')),this.slideX=this.scrollBarX.find(".data-scrollbar-trigger"),this.container.append(this.scrollBarX),this.container.addClass("scroll-x")),this.y&&(this.scrollBarY=e("<div ".concat(Tb,'="').concat(Db,'" class="data-scrollbar data-scrollbar-y "><div class="data-scrollbar-trigger"></div></div>')),this.slideY=this.scrollBarY.find(".data-scrollbar-trigger"),this.container.append(this.scrollBarY),this.container.addClass("scroll-y")),this.shadow&&(this.shadowLeft=e("<div ".concat(Tb,'="').concat(Db,'" class="scrollbar-shadow-left"></div>')),this.shadowRight=e("<div ".concat(Tb,'="').concat(Db,'" class="scrollbar-shadow-right"></div>')),this.container.append(this.shadowLeft),this.container.append(this.shadowRight)),this.refresh(),this.bindEvents())}}},{key:"refresh",value:function(){var e=this.container.get();if(!hy&&!py&&e){var t=e.offsetWidth,n=e.offsetHeight,i=e.scrollWidth,r=e.scrollHeight,o=e.scrollLeft,a=e.scrollTop;if(this.oWidth=t,this.oHeight=n,this.sWidth=i,this.sHeight=r,this.xWidth=Math.floor(t*t/i),this.yHeight=Math.floor(n*n/r),this.maxScrollLeft=i-t,this.x){var s,l;null===(s=this.slideX)||void 0===s||s.css("width",this.xWidth+"px");var c=this.oWidth===this.sWidth?"none":"block";null===(l=this.slideX)||void 0===l||l.css("display",c),this.emit("display",c)}if(this.y){var u,d;null===(u=this.slideY)||void 0===u||u.css("height",this.yHeight+"px");var h=this.oHeight===this.sHeight?"none":"block";null===(d=this.slideY)||void 0===d||d.css("display",h),this.emit("display",h)}this.reRenderX(o),this.reRenderY(a)}}},{key:"bindEvents",value:function(){var e=this;this.container.on("scroll",(function(t){var n=t.target,i=n.scrollTop,r=n.scrollLeft;e.reRenderX(r),e.reRenderY(i)})),this.bindXScrollEvent(),this.bindYScrollEvent()}}]),n}(),Xk=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"execute",value:function(){Vy(this.editor)&&(this.editor.readonly=!1,this.editor.history.redo())}},{key:"queryState",value:function(){if(Vy(this.editor))return this.editor.history.hasRedo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+y","shift+mod+y"]}}],[{key:"pluginName",get:function(){return"redo"}}]),n}(),Jk=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"execute",value:function(){Vy(this.editor)&&(this.editor.readonly=!1,this.editor.history.undo())}},{key:"queryState",value:function(){if(Vy(this.editor))return this.editor.history.hasUndo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+z","shift+mod+z"]}}],[{key:"pluginName",get:function(){return"undo"}}]),n}(),ex=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="strong",e.markdown=!1!==e.options.markdown?"**":"",e}return Rm(n,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+b"}}],[{key:"pluginName",get:function(){return"bold"}}]),n}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".am-engine code, .am-engine-view code {\n    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;\n    font-size: inherit;\n    background-color: rgba(0, 0, 0, 0.06);\n    padding: 0 2px;\n    border: 1px solid rgba(0, 0, 0, 0.08);\n    border-radius: 2px 2px;\n    line-height: inherit;\n    word-wrap: break-word;\n    text-indent: 0;\n}");var tx=function(e){Qm(n,ek);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="code",e.markdown=!1!==e.options.markdown?"`":"",e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),this.editor.on("paser:html",(function(t){return e.parseHtml(t)}))}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+e"}},{key:"parseHtml",value:function(e){e.find(this.tagName).css({"font-family":"monospace","font-size":"inherit","background-color":"rgba(0,0,0,.06)",padding:"0 2px",border:"1px solid rgba(0,0,0,.08)","border-radius":"2px 2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})}}],[{key:"pluginName",get:function(){return"code"}}]),n}(),nx=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="span",e.style={"background-color":"@var0"},e.variable={"@var0":{required:!0,value:"@color"}},e}return Rm(n,[{key:"isTrigger",value:function(e,t){return void 0===t||e!==t}},{key:"hotkey",value:function(){return this.options.hotkey||[]}}],[{key:"pluginName",get:function(){return"backcolor"}}]),n}(),ix=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="span",e.style={color:"@var0"},e.variable={"@var0":{required:!0,value:"@color"}},e}return Rm(n,[{key:"isTrigger",value:function(e,t){return void 0===t||e!==t}},{key:"hotkey",value:function(){return this.options.hotkey||[]}}],[{key:"pluginName",get:function(){return"fontcolor"}}]),n}(),rx=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="span",e.style={"font-size":{value:"@var0",format:function(t){t=e.convertToPX(t);var n=e.options.data;if("object"===zm(n)){var i=Object.keys(n).find((function(e){return n[e]===t}));i&&(t=i)}return t}}},e.variable={"@var0":{required:!0,value:/[\d\.]+(pt|px)$/}},e}return Rm(n,[{key:"isTrigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.defaultSize||"14px";return e!==t}},{key:"hotkey",value:function(){return this.options.hotkey||[]}},{key:"convertToPX",value:function(e){var t=/([\d\.]+)(pt|px)$/i.exec(e);return t&&"pt"===t[2]?String(Math.round(96*parseInt(t[1],10)/72))+"px":e}},{key:"pasteEach",value:function(e){if("span"===e.name){var t=this.convertToPX(e.css("fontSize"));if(t&&t!==this.options.defaultSize){var n=this.options.data;Array.isArray(n)&&-1===n.indexOf(t)?e.css("font-size",""):"object"===zm(n)&&(Object.keys(n).some((function(e){if(n[e]===t)return!0}))||e.css("font-size",""))}}}}],[{key:"pluginName",get:function(){return"fontsize"}}]),n}(),ox=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="em",e.markdown=!1!==e.options.markdown?"_":"",e}return Rm(n,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+i"}}],[{key:"pluginName",get:function(){return"italic"}}]),n}(),ax=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="u",e}return Rm(n,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+u"}}],[{key:"pluginName",get:function(){return"underline"}}]),n}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".am-engine .card-hr,.am-engine-view .card-hr {\n    border: 1px solid transparent;\n    padding: 18px 0;\n    border-radius: 2px 2px;\n}\n\n.am-engine .card-hr hr,.am-engine-view .card-hr hr {\n    box-sizing: border-box;\n    position: absolute;\n    top: 50%;\n    left: 0;\n    margin-top: -1px;\n    width: 100%;\n    height: 2px;\n    background-color: #e8e8e8;\n    padding: 0;\n    border: 1px solid transparent;\n}\n\n.am-engine .card-hr:hover , .am-engine .card-hr.hr-activated {\n    background-color: #f4f4f4;\n}");var sx=function(e){Qm(n,Qk);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"toolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"delete"}]}},{key:"onActivate",value:function(e){kb(Km(n.prototype),"onActivate",this).call(this,e);var t="hr-activated",i=this.getCenter();e?i.addClass(t):i.removeClass(t)}},{key:"onSelectByOther",value:function(e,t){kb(Km(n.prototype),"onSelectByOther",this).call(this,e,t),this.getCenter().find("hr").css("background-color",e?t.rgb:"")}},{key:"onActivateByOther",value:function(e,t){this.onSelectByOther(e,t)}},{key:"render",value:function(){return this.getCenter().addClass("card-hr"),"<hr />"}}],[{key:"cardName",get:function(){return"hr"}},{key:"cardType",get:function(){return ky.BLOCK}},{key:"autoActivate",get:function(){return!1}},{key:"selectStyleType",get:function(){return"background"}}]),n}(),lx=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"init",value:function(){var e=this;this.editor.on("paser:html",(function(t){return e.parseHtml(t)})),this.editor.on("paste:schema",(function(t){return e.pasteSchema(t)})),this.editor.on("paste:each",(function(t){return e.pasteHtml(t)})),Vy(this.editor)&&(this.editor.on("keydown:enter",(function(t){return e.markdown(t)})),this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)})))}},{key:"execute",value:function(){Vy(this.editor)&&this.editor.card.insert(sx.cardName)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+e"}},{key:"markdown",value:function(e){if(Vy(this.editor)&&!1!==this.options.markdown){var t=this.editor.change,n=t.getRange();if(n.collapsed&&!t.isComposing()&&this.markdown){var i=this.editor.block.closest(n.startNode);if(this.editor.node.isRootBlock(i)){var r=this.editor.block.getLeftText(i);return/^[-]{3,}$/.exec(r)?(e.preventDefault(),this.editor.block.removeLeftText(i),this.editor.command.execute(this.constructor.pluginName),!1):void 0}}}}},{key:"pasteMarkdown",value:function(e){if(Vy(this.editor)&&this.markdown&&e.isText()){var t=e.text(),n=/(^|\r\n|\n)([-]{3,})\s?(\r\n|\n|$)/,i=n.exec(t);if(i){for(var r="",o=e.clone(!0).get(),a=this.editor,s=a.$,l=a.card;o.textContent&&(i=n.exec(o.textContent));){var c,u=o.splitText(i.index);r+=o.textContent,o=u.splitText(i[0].length);var d=l.replaceNode(s(u),"hr");u.remove(),r+=(null===(c=d.get())||void 0===c?void 0:c.outerHTML)+"\n"}r+=o.textContent,e.text(r)}}}},{key:"pasteSchema",value:function(e){e.add([{type:"block",name:"hr",isVoid:!0}])}},{key:"pasteHtml",value:function(e){Vy(this.editor)&&"hr"===e.name&&this.editor.card.replaceNode(e,sx.cardName)}},{key:"parseHtml",value:function(e){var t=this.editor.$;e.find("[".concat(Ub,"=").concat(sx.cardName)).each((function(e){var n=t(e),i=n.find("hr");i.css({"background-color":"#e8e8e8",border:"1px solid transparent",margin:"18px 0"}),n.replaceWith(i)}))}}],[{key:"pluginName",get:function(){return"hr"}}]),n}();function cx(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}cx(".data-checkbox {\n\tfont-size: 14px;\n\tfont-variant: tabular-nums;\n\tcolor: rgba(0, 0, 0, 0.65);\n\t-webkit-box-sizing: border-box;\n\tbox-sizing: border-box;\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\toutline: none;\n\tdisplay: inline-block;\n\tline-height: 1;\n\tposition: relative;\n\tvertical-align: middle;\n\ttop: -0.09em;\n}\n\n.data-checkbox-checked:after {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: 2px;\n\tborder: 1px solid #347eff;\n\tcontent: \"\";\n\t-webkit-animation: lakeCheckboxEffect 0.36s ease-in-out;\n\tanimation: lakeCheckboxEffect 0.36s ease-in-out;\n\t-webkit-animation-fill-mode: both;\n\tanimation-fill-mode: both;\n\tvisibility: hidden;\n}\n\n.data-checkbox:focus .data-checkbox-inner,.data-checkbox:hover .data-checkbox-inner {\n    border-color: #347eff\n}\n\n.data-checkbox:hover:after{\n\tvisibility: visible;\n}\n\n.data-checkbox-inner {\n\tposition: relative;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: block;\n\twidth: 16px;\n\theight: 16px;\n\tborder: 1px solid #d9d9d9;\n\tborder-radius: 2px;\n\tbackground-color: #fff;\n\t-webkit-transition: all 0.3s;\n\ttransition: all 0.3s;\n\tborder-collapse: separate;\n}\n\n.data-checkbox-inner:after {\n\t-webkit-transform: rotate(45deg) scale(0);\n\t-ms-transform: rotate(45deg) scale(0);\n\ttransform: rotate(45deg) scale(0);\n\tposition: absolute;\n\tleft: 4.57142857px;\n\ttop: 1.14285714px;\n\tdisplay: table;\n\twidth: 5.71428571px;\n\theight: 9.14285714px;\n\tborder: 2px solid #fff;\n\tborder-top: 0;\n\tborder-left: 0;\n\tcontent: ' ';\n\t-webkit-transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\n\ttransition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\n\topacity: 0;\n}\n\n.data-checkbox-input {\n\tposition: absolute;\n\tleft: 0;\n\tz-index: 1;\n\tcursor: pointer;\n\topacity: 0;\n\ttop: 0;\n\tbottom: 0;\n\tright: 0;\n\twidth: 100%;\n    height: 100%;\n    margin: 0;\n}\n\n.data-checkbox-checked .data-checkbox-inner:after {\n\t-webkit-transform: rotate(45deg) scale(1);\n\t-ms-transform: rotate(45deg) scale(1);\n\ttransform: rotate(45deg) scale(1);\n\tposition: absolute;\n\tdisplay: table;\n\tborder: 2px solid #fff;\n\tborder-top: 0;\n\tborder-left: 0;\n\tcontent: ' ';\n\t-webkit-transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\n\ttransition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\n\topacity: 1;\n}\n\n.data-checkbox-checked .data-checkbox-inner {\n\tbackground-color: #347eff;\n    border-color: #347eff;\n}\n\n.data-checkbox-disabled {\n\tcursor: not-allowed;\n}\n\n.data-checkbox-disabled.data-checkbox-checked .data-checkbox-inner:after {\n\t-webkit-animation-name: none;\n\tanimation-name: none;\n\tborder-color: rgba(0, 0, 0, 0.25);\n}\n\n.data-checkbox-disabled .data-checkbox-input {\n\tcursor: not-allowed;\n}\n\n.data-checkbox-disabled .data-checkbox-inner {\n\tborder-color: #d9d9d9 !important;\n\tbackground-color: #f5f5f5;\n}\n\n.data-checkbox-disabled .data-checkbox-inner:after {\n\t-webkit-animation-name: none;\n\tanimation-name: none;\n\tborder-color: #f5f5f5;\n\tborder-collapse: separate;\n}\n\n.data-checkbox-disabled + span {\n\tcolor: rgba(0, 0, 0, 0.25);\n\tcursor: not-allowed;\n}\n");var ux=function(e){Qm(n,Qk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).onClick=function(t){var n=t.hasClass("data-checkbox-checked");n?(t.removeClass("data-checkbox-checked"),e.root.find(".".concat("data-checkbox-input")).removeAttributes("checked")):(t.addClass("data-checkbox-checked"),e.root.find(".".concat("data-checkbox-input")).attributes("checked","checked")),e.setValue({checked:!n})},e}return Rm(n,[{key:"render",value:function(){var e=this,t=(0,this.editor.$)('\n            <span class="'.concat("data-checkbox",'">\n                <input type="checkbox" class="').concat("data-checkbox-input",'" value="">\n                <span class="').concat("data-checkbox-inner",'"></span>\n            </span>')),n=this.getValue();return n&&n.checked&&(t.addClass("data-checkbox-checked"),t.find(".".concat("data-checkbox-input")).attributes("checked","checked")),this.readonly||t.on("click",(function(){return e.onClick(t)})),t}}],[{key:"cardName",get:function(){return"checkbox"}},{key:"cardType",get:function(){return ky.INLINE}},{key:"singleSelectable",get:function(){return!1}},{key:"collab",get:function(){return!1}},{key:"focus",get:function(){return!1}}]),n}();cx('.am-engine .data-list-item [data-card-key="checkbox"],.am-engine-view .data-list-item [data-card-key="checkbox"] {\n\tmargin-left: 0;\n\tmargin-right: 5px;\n}\n\n.am-engine .data-list-task,.am-engine-view .data-list-task {\n\tposition: relative;\n\tlist-style: none;\n\ttext-indent: 0;\n}\n\n.am-engine .data-list-task [data-card-key="checkbox"],.am-engine-view .data-list-task [data-card-key="checkbox"] {\n\tpadding-right: 6px;\n    vertical-align: middle;\n    line-height: inherit;\n    position: absolute;\n    margin-left: -20px;\n    height: 100%;\n}\n');var dx=function(e){Qm(n,tk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).cardName="checkbox",e.tagName="ul",e.attributes={class:"@var0"},e.variable={"@var0":{required:!0,value:[e.editor.list.CUSTOMZIE_UL_CLASS,"data-list-task"]}},e.allowIn=["blockquote","$root"],e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),this.editor.on("paser:html",(function(t){return e.parseHtml(t)})),Vy(this.editor)&&this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)}))}},{key:"schema",value:function(){return[kb(Km(n.prototype),"schema",this).call(this),{name:"li",type:"block",attributes:{class:this.editor.list.CUSTOMZIE_LI_CLASS},allowIn:["ul"]}]}},{key:"isCurrent",value:function(e){var t;return"li"===e.name?e.hasClass(this.editor.list.CUSTOMZIE_LI_CLASS)&&"checkbox"===(null===(t=e.first())||void 0===t?void 0:t.attributes(Ub)):e.hasClass("data-list")&&e.hasClass("data-list-task")}},{key:"execute",value:function(e){var t=this;if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.list,o=n.block;r.split();var a=i.getRange(),s=o.findBlocks(a);if(s){var l=a.createSelection();if(r.isSpecifiedType(s,"ul","checkbox"))r.unwrap(s);else r.toCustomize(s,"checkbox",e).forEach((function(e){t.editor.node.isList(e)&&e.addClass("data-list-task")}));if(l.move(),a.collapsed&&a.startContainer.nodeType===Node.ELEMENT_NODE&&0===a.startContainer.childNodes.length&&a.startContainer.parentNode){var c=document.createElement("br");a.startNode.before(c),a.startContainer.parentNode.removeChild(a.startContainer),a.select(c),a.collapse(!1)}i.select(a),r.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+9"}},{key:"parseHtml",value:function(e){var t=this.editor.$;e.find("[".concat(Ub,"=checkbox")).each((function(e){var n=t(e),i=t("<span>".concat("checked"===n.find("input").attributes("checked")?"✅":"🔲","<span/>"));i.css({margin:"3px 0.5ex","vertical-align":"middle",width:"16px",height:"16px",color:"color: rgba(0, 0, 0, 0.65)"}),n.empty(),n.append(i)})),e.find(".data-list-task").css({"list-style":"none"})}},{key:"markdown",value:function(e,t,n){if(Vy(this.editor)&&!1!==this.options.markdown){var i=this.editor.block.findPlugin(n);if(!("p"!==n.name||i.find((function(e){return"heading"===e.constructor.pluginName}))||["[]","[ ]","[x]"].indexOf(t)<0))return e.preventDefault(),this.editor.block.removeLeftText(n),this.editor.node.isEmpty(n)&&(n.empty(),n.append("<br />")),this.editor.command.execute(this.constructor.pluginName,"[x]"===t?{checked:!0}:void 0),!1}}},{key:"pasteMarkdown",value:function(e){var t=this;if(Vy(this.editor)&&this.markdown&&e.isText()){var n=e.text();if(n){if(/(^|\r\n|\n)(-\s*)?(\[[\sx]{0,1}\])/.exec(n)){var i=this.editor,r=i.$,o=i.list,a=i.card,s=function(e){var n,i=r("<".concat(t.tagName,' class="').concat(o.CUSTOMZIE_UL_CLASS,' data-list-task">').concat(e.join(""),"</").concat(t.tagName,">"));return o.addBr(i),null===(n=i.get())||void 0===n?void 0:n.outerHTML},l="",c=n.split(/\n|\r\n/),u=[];c.forEach((function(e){var n=/^(-\s*)?(\[[\sx]{0,1}\])/.exec(e);if(n){var i,c=n[0].length,d=e.substr(/^\s+/.test(e.substr(c))?c+1:c),h=r("<span />"),f=a.replaceNode(h,t.cardName,{checked:n[0].indexOf("x")>0});h.remove(),u.push('<li class="'.concat(o.CUSTOMZIE_LI_CLASS,'">').concat(null===(i=f.get())||void 0===i?void 0:i.outerHTML).concat(d,"</li>"))}else u.length>0?(l+=s(u)+"\n"+e+"\n",u=[]):l+=e+"\n"})),u.length>0&&(l+=s(u)+"\n"),e.text(l)}}}}}],[{key:"pluginName",get:function(){return"tasklist"}}]),n}(),hx=function(e){Qm(n,tk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="ol",e.attributes={start:"@var0","data-indent":"@var1"},e.variable={"@var0":"@number","@var1":"@number"},e.allowIn=["blockquote","$root"],e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),Vy(this.editor)&&this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)}))}},{key:"schema",value:function(){return[kb(Km(n.prototype),"schema",this).call(this),{name:"ol",type:"block"},{name:"li",type:"block",allowIn:["ol"]}]}},{key:"isCurrent",value:function(e){var t=this.editor.list;return!e.hasClass(t.CUSTOMZIE_UL_CLASS)&&"ol"===e.name}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.list,r=t.block;i.split();var o=n.getRange(),a=r.findBlocks(o);if(a){var s=o.createSelection();"orderedlist"===i.getPluginNameByNodes(a)?i.unwrap(a):i.toNormal(a,"ol",e),s.move(),n.select(o),i.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+7"}},{key:"markdown",value:function(e,t,n){if(Vy(this.editor)&&!1!==this.options.markdown&&"p"===n.name&&/^\d{1,9}\.$/.test(t))return e.preventDefault(),this.editor.block.removeLeftText(n),this.editor.node.isEmpty(n)&&(n.empty(),n.append("<br />")),this.editor.command.execute(this.constructor.pluginName,parseInt(t.replace(/\./,""),10)),!1}},{key:"pasteMarkdown",value:function(e){var t=this;if(Vy(this.editor)&&this.markdown&&e.isText()){var n=e.text();if(n){if(/(^|\r\n|\n)(\d{1,9}\.)/.exec(n)){var i=this.editor,r=i.$,o=i.list,a=function(e,n){var i,a=r("<".concat(t.tagName,' start="').concat(n||1,'">').concat(e.join(""),"</").concat(t.tagName,">"));return o.addBr(a),null===(i=a.get())||void 0===i?void 0:i.outerHTML},s="",l=n.split(/\n|\r\n/),c=[],u=void 0;l.forEach((function(e){var t=/^(\d{1,9}\.)/.exec(e);if(t){var n=t[1].length;void 0===u&&(u=parseInt(t[1].substr(0,n-1),10));var i=e.substr(/^\s+/.test(e.substr(n))?n+1:n);c.push("<li>".concat(i,"</li>"))}else c.length>0?(s+=a(c,u)+"\n"+e+"\n",c=[],u=void 0):s+=e+"\n"})),c.length>0&&(s+=a(c,u)+"\n"),e.text(s)}}}}}],[{key:"pluginName",get:function(){return"orderedlist"}}]),n}(),fx=function(e){Qm(n,tk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="ul",e.attributes={"data-indent":"@var0"},e.variable={"@var0":"@number"},e.allowIn=["blockquote","$root"],e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),Vy(this.editor)&&this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)}))}},{key:"schema",value:function(){return[kb(Km(n.prototype),"schema",this).call(this),{name:"ul",type:"block"},{name:"li",type:"block",allowIn:["ul"]}]}},{key:"isCurrent",value:function(e){return!e.hasClass(this.editor.list.CUSTOMZIE_UL_CLASS)&&"ul"===e.name}},{key:"execute",value:function(){if(Vy(this.editor)){var e=this.editor,t=e.change,n=e.list,i=e.block;n.split();var r=t.getRange(),o=i.findBlocks(r);if(o){var a=r.createSelection();"unorderedlist"===n.getPluginNameByNodes(o)?n.unwrap(o):n.toNormal(o,"ul"),a.move(),t.select(r),n.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+8"}},{key:"markdown",value:function(e,t,n){if(Vy(this.editor)&&!1!==this.options.markdown){var i=this.editor.block.findPlugin(n);if(!("p"!==n.name||i.find((function(e){return"heading"===e.constructor.pluginName}))||["*","-","+"].indexOf(t)<0))return e.preventDefault(),this.editor.block.removeLeftText(n),this.editor.node.isEmpty(n)&&(n.empty(),n.append("<br />")),this.editor.command.execute(this.constructor.pluginName),!1}}},{key:"pasteMarkdown",value:function(e){var t=this;if(Vy(this.editor)&&this.markdown&&e.isText()){var n=e.text();if(n){if(/(\r\n|\n)?([\*\-\+]{1,}\s+)/g.exec(n)){var i=this.editor,r=i.$,o=i.list,a=function(e,n){var i,a=r("<".concat(t.tagName,' start="').concat(n||1,'">').concat(e.join(""),"</").concat(t.tagName,">"));return o.addBr(a),null===(i=a.get())||void 0===i?void 0:i.outerHTML},s="",l=n.split(/\n|\r\n/),c=[];l.forEach((function(e){var t=/^([\*\-\+]{1,}\s+)/.exec(e);if(t){var n=t[1].length,i=e.substr(n);c.push("<li>".concat(i,"</li>"))}else c.length>0?(s+=a(c)+"\n"+e+"\n",c=[]):s+=e+"\n"})),c.length>0&&(s+=a(c)+"\n"),e.text(s)}}}}}],[{key:"pluginName",get:function(){return"unorderedlist"}}]),n}(),px=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"init",value:function(){var e=this;this.editor.schema.add(this.schema()),this.editor.on("keydown:backspace",(function(t){return e.onBackspace(t)})),this.editor.on("keydown:tab",(function(t){return e.onTab(t)})),this.editor.on("keydown:shift-tab",(function(t){return e.onShiftTab(t)}))}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"in",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.list,a=i.block;o.split();var s=r.getRange(),l=a.findBlocks(s);if(l){var c=this.options.maxPadding||50;l.forEach((function(i){e.addPadding(i,"in"===t?2:-2,n,c)})),o.merge()}}}},{key:"queryState",value:function(){if(Vy(this.editor)){var e=this.editor,t=e.change,n=e.list,i=e.node,r=t.getRange(),o=this.editor.block.closest(r.startNode);if("li"===o.name)return n.getIndent(o.closest("ul,ol"));if(i.isRootBlock(o)){var a,s=jy(o.css("padding-left")),l=jy((null===(a=o.get())||void 0===a?void 0:a.style.textIndent)||"");return s||l}return 0}}},{key:"addPadding",value:function(e,t,n,i){var r=this.editor.list;if(this.editor.node.isList(e))r.addIndent(e,t,i);else if(this.editor.node.isRootBlock(e))if(t>0)if(jy(e.css("text-indent"))||!0!==n){var o=e.css("padding-left"),a=jy(o)+t;a=Math.min(a,i),this.editor.node.setAttributes(e,{style:{"padding-left":_y(a>0?a:0,"em")}})}else this.editor.node.setAttributes(e,{style:{"text-indent":"2em"}});else if(jy(e.css("text-indent")))this.editor.node.setAttributes(e,{style:{"text-indent":""}});else{var s=e.css("padding-left"),l=jy(s)+t;this.editor.node.setAttributes(e,{style:{"padding-left":_y(l>0?l:0,"em")}})}}},{key:"hotkey",value:function(){var e,t;return[{key:(null===(e=this.options.hotkey)||void 0===e?void 0:e.in)||"mod+]",args:"in"},{key:(null===(t=this.options.hotkey)||void 0===t?void 0:t.out)||"mod+[",args:"out"}]}},{key:"schema",value:function(){return{type:"block",attributes:{style:{"text-indent":"@length","padding-left":"@length"}}}}},{key:"onBackspace",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.list,r=n.getRange(),o=this.editor.block.closest(r.startNode);if(!r.collapsed||"li"!==o.name||i.isFirst(r))return this.queryState()?(e.preventDefault(),this.editor.command.execute(this.constructor.pluginName,"out"),!1):void 0}}},{key:"onTab",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.list,r=t.block,o=n.getRange();return o.collapsed&&i.isFirst(o)?(e.preventDefault(),this.editor.command.execute(this.constructor.pluginName,"in"),!1):!o.collapsed||r.isFirstOffset(o,"start")?(e.preventDefault(),this.editor.command.execute(this.constructor.pluginName,"in",!0),!1):void 0}}},{key:"onShiftTab",value:function(e){if(Vy(this.editor))return e.preventDefault(),this.editor.command.execute(this.constructor.pluginName,"out"),!1}}],[{key:"pluginName",get:function(){return"indent"}}]),n}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".data-anchor-button {\n\tposition: absolute;\n\twidth: 24px;\n\theight: 24px;\n\tline-height: 24px;\n\ttext-align: center;\n\tfont-size: 14px;\n\tdisplay: block;\n\tbackground: rgba(255, 255, 255, 0.9);\n\tcolor: #BFBFBF;\n\tborder-radius: 2px 2px;\n\tcursor: pointer;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\topacity: 0;\n\tvisibility: hidden;\n\t-webkit-transition: opacity 0.3s ease-in-out;\n\ttransition: opacity 0.3s ease-in-out;\n}\n\n.data-anchor-button.data-anchor-button-active {\n\topacity: 1;\n\tvisibility: visible;\n}\n\n.data-anchor-button .data-icon {\n\twidth: 18px;\n}\n\n.data-anchor-button:hover {\n\tbackground: #f4f4f4;\n\tcolor: #595959;\n}\n\n.am-engine-view h1,.am-engine-view h2,.am-engine-view h3,.am-engine-view h4,.am-engine-view h5,.am-engine-view h6 {\n    position: relative;\n}\n\n.am-engine-view h1 .data-anchor-button,.am-engine-view h2 .data-anchor-button,.am-engine-view h3 .data-anchor-button,.am-engine-view h4 .data-anchor-button,.am-engine-view h5 .data-anchor-button,.am-engine-view h6 .data-anchor-button{\n    position: absolute;\n    left: -24px;\n    display: none;\n}\n\n.am-engine-view h1:hover .data-anchor-button,.am-engine-view h2:hover .data-anchor-button,.am-engine-view h3:hover .data-anchor-button,.am-engine-view h4:hover .data-anchor-button,.am-engine-view h5:hover .data-anchor-button,.am-engine-view h6:hover .data-anchor-button {\n    display: inline-block;\n    opacity: 1;\n    visibility: visible;\n}\n\n.am-engine-view h1 , .am-engine h1,.am-engine-view h2 , .am-engine h2,.am-engine-view h3 , .am-engine h3,.am-engine-view h4 , .am-engine h4,.am-engine-view h5 , .am-engine h5,.am-engine-view h6 , .am-engine h6 {\n    margin: 0;\n    word-spacing: 1px;\n    color: #262626;\n    font-weight: bold;\n    padding:0;\n}\n\n.am-engine-view h1 , .am-engine h1 {\n    font-size: 28px;\n    line-height: 36px;\n    padding: 7px 0;\n}\n\n.am-engine-view h2 , .am-engine h2 {\n    font-size: 24px;\n    line-height: 32px;\n    padding: 7px 0;\n}\n\n.am-engine-view h3 , .am-engine h3 {\n    font-size: 20px;\n    line-height: 28px;\n    padding: 7px 0;\n}\n\n.am-engine-view h4 , .am-engine h4 {\n    font-size: 16px;\n    line-height: 24px;\n    padding: 7px 0;\n}\n\n.am-engine-view h5 , .am-engine h5 {\n    font-size: 14px;\n    line-height: 24px;\n    padding: 7px 0;\n}\n\n.am-engine-view h6 , .am-engine h6 {\n    font-size: 14px;\n    line-height: 24px;\n    padding: 7px 0;\n    font-weight: normal;\n}");var gx=function(e){Qm(n,Jw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).attributes={id:"@var0"},e.variable={"@var0":/^[\w\.\-]+$/},e.tagName=["h1","h2","h3","h4","h5","h6"],e.allowIn=["blockquote","$root"],e.disableMark=e.options.disableMark||["fontsize","bold"],e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),this.editor.on("paser:html",(function(t){return e.parseHtml(t)}));var t=this.editor,i=t.$,r=t.language;Vy(this.editor)||!1===this.options.showAnchor||this.editor.on("render",(function(t){i(t).find(e.tagName.join(",")).each((function(t){var n=i(t),o=n.attributes("id");if(o){n.find(".data-anchor-button").remove();var a=i('<a class="data-anchor-button"><span class="data-icon data-icon-'.concat(n.name,'"></span></a>'));24!==n.height()&&a.css({top:(n.height()-24)/2+"px"});var s=new Nw(e.editor);a.on("mouseenter",(function(){s.show(a,r.get("copyAnchor","title").toString())})),a.on("mouseleave",(function(){s.hide()})),a.on("click",(function(t){t.preventDefault(),t.stopPropagation();var n=e.options.anchorCopy?e.options.anchorCopy(o):window.location.href+"/"+o;e.editor.clipboard.copy(n)?e.editor.messageSuccess(r.get("copy","success").toString()):e.editor.messageError(r.get("copy","error").toString())})),n.prepend(a)}}))})),Vy(this.editor)&&(this.editor.on("keydown:backspace",(function(t){return e.onBackspace(t)})),this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)}))),Vy(this.editor)&&!1!==this.options.showAnchor&&(this.editor.on("setvalue",(function(){e.updateId()})),this.editor.on("change",(function(){e.updateId(),e.showAnchor()})),this.editor.on("select",(function(){e.showAnchor()})),window.addEventListener("resize",(function(){e.updateAnchorPosition()}),!1))}},{key:"updateId",value:function(){var e={},t=this.editor.$;this.editor.container.find(this.tagName.join(",")).each((function(n){var i,r=t(n);if(null===(i=r.parent())||void 0===i?void 0:i.isEditable()){var o=r.attributes("id");if(o||(o=wy(),r.attributes("id",o)),e[o]){for(;e[o];)o=wy();r.attributes("id",o)}e[o]=!0}else r.removeAttributes("id")}))}},{key:"updateAnchorPosition",value:function(){var e;if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.root,r=i.find(".data-anchor-button");if(0!==r.length){var o=n.getRange().startNode.closest("h1,h2,h3,h4,h5,h6");if(0!==o.length){var a=(null===(e=i.get())||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0},s=o.get().getBoundingClientRect(),l=Math.round(s.left-a.left-r.get().clientWidth-1),c=Math.round(s.top-a.top+s.height/2-r.get().clientHeight/2);r.css({top:"".concat(c,"px"),left:"".concat(l,"px")})}else r.remove()}}}},{key:"showAnchor",value:function(){var e,t,n=this;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.root,a=i.clipboard,s=i.$,l=i.language,c=r.getRange(),u=o.find(".data-anchor-button"),d=c.startNode.closest(this.tagName.join(","));if((0===d.length||u.length>0&&0===u.find(".data-icon-".concat(d.name)).length)&&u.remove(),0!==d.length&&(null===(e=d.parent())||void 0===e?void 0:e.isEditable()))if(u.find(".data-icon-".concat(d.name)).length>0)this.updateAnchorPosition();else{u=s('<span class="data-anchor-button"><span class="data-icon data-icon-'.concat(d.name,'"></span></span>')),o.append(u);var h=(null===(t=o.get())||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0},f=d.get().getBoundingClientRect(),p=Math.round(f.left-h.left-u.get().clientWidth-1),g=Math.round(f.top-h.top+f.height/2-u.get().clientHeight/2);u.css({top:"".concat(g,"px"),left:"".concat(p,"px")}),u.addClass("data-anchor-button-active");var v=new Nw(this.editor);u.on("mouseenter",(function(){v.show(u,l.get("copyAnchor","title").toString())})),u.on("mouseleave",(function(){v.hide()})),u.on("click",(function(e){e.preventDefault(),e.stopPropagation();var t=d.attributes("id"),i=n.options.anchorCopy?n.options.anchorCopy(t):window.location.href+"/"+t;a.copy(i)?n.editor.messageSuccess(l.get("copy","success").toString()):n.editor.messageError(l.get("copy","error").toString())}))}}}},{key:"replaceParagraph",value:function(){var e=this;if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.block,r=n.getRange(),o=i.getBlocks(r),a=r.createSelection();o.forEach((function(t){if("p"===t.name){var n=t.parent();if(n&&e.tagName.indexOf(n.name)>-1){for(var i=t[0].childNodes,r=i.length-1;r>=0;r--)n[0].insertBefore(i[r],t[0]);t.remove()}}})),a.move()}}},{key:"beforeProcess",value:function(){var e=this;if(Vy(this.editor)){this.replaceParagraph();var t,n=this.editor,i=n.change,r=n.block,o=i.getRange(),a=r.getBlocks(o),s=o.createSelection();if(s.has())return a.forEach((function(n){var i,r=n.parent(),o=n.first();[zb,Rb].includes((null===(i=o)||void 0===i?void 0:i.attributes(Tb))||"")&&(o=o.next()),"li"===n.name&&r&&"ol"===r.name&&o&&o.isText()&&(t=parseInt(r.attributes("start"),10)||1,o[0].nodeValue="".concat(t,".")+o[0].nodeValue),e.editor.block.brToBlock(n)})),s.move(),t}}},{key:"afterProcess",value:function(e){var t=this;if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.block,o=n.mark,a=n.$,s=i.getRange(),l=r.getBlocks(s),c=s.createSelection();c.has()&&(l.forEach((function(n){n.allChildren().forEach((function(e){var n=a(e),i=o.findPlugin(n);t.disableMark.forEach((function(e){i&&i.constructor.pluginName===e&&t.editor.node.unwrap(n)}))}));var i=n.parent();if(e){var r=null==i?void 0:i.next();r&&"ol"===r.name&&r.attributes("start")&&r.attributes("start",e+1)}if(i&&t.editor.node.isList(i)){var s;if(t.editor.node.isCustomize(i))null===(s=n.first())||void 0===s||s.remove();t.editor.node.unwrap(i)}})),c.move())}}},{key:"execute",value:function(e){if(Vy(this.editor)){e===this.queryState()&&(e="p"),this.beforeProcess();var t=this.editor,n=t.list,i=t.block;n.split(),i.setBlocks("<".concat(e," />")),this.afterProcess()}}},{key:"queryState",value:function(){if(Vy(this.editor)){var e=this.editor.change.blocks;return 0===e.length?"":this.tagName.indexOf(e[0].name)>=0?e[0].name:""}}},{key:"hotkey",value:function(){var e,t,n,i,r,o;return[{key:(null===(e=this.options.hotkey)||void 0===e?void 0:e.h1)||"mod+opt+1",args:"h1"},{key:(null===(t=this.options.hotkey)||void 0===t?void 0:t.h2)||"mod+opt+2",args:"h2"},{key:(null===(n=this.options.hotkey)||void 0===n?void 0:n.h3)||"mod+opt+3",args:"h3"},{key:(null===(i=this.options.hotkey)||void 0===i?void 0:i.h4)||"mod+opt+4",args:"h4"},{key:(null===(r=this.options.hotkey)||void 0===r?void 0:r.h5)||"mod+opt+5",args:"h5"},{key:(null===(o=this.options.hotkey)||void 0===o?void 0:o.h6)||"mod+opt+6",args:"h6"}]}},{key:"markdown",value:function(e,t,n){if(!Vy(this.editor)||!1===this.options.markdown)return!1;var i="";switch(t){case"#":i="h1";break;case"##":i="h2";break;case"###":i="h3";break;case"####":i="h4";break;case"#####":i="h5";break;case"######":i="h6"}return!i||(e.preventDefault(),this.editor.block.removeLeftText(n),this.editor.node.isEmpty(n)&&(n.empty(),n.append("<br />")),this.editor.command.execute(this.constructor.pluginName,i),!1)}},{key:"pasteMarkdown",value:function(e){if(Vy(this.editor)&&this.markdown&&e.isText()){var t=e.text(),n=/(^|\r\n|\n)(#{1,6})(.*)/,i=n.exec(t);if(i){for(var r="",o=e.clone(!0).get();o.textContent&&(i=n.exec(o.textContent));){var a=i[2].length,s=o.splitText(i.index);r+=o.textContent,o=s.splitText(i[0].length),r+="<h".concat(a,">").concat(i[3].trim(),"</h").concat(a,">\n")}r+=o.textContent,e.text(r)}}}},{key:"onBackspace",value:function(e){var t;if(Vy(this.editor)){var n=this.editor.change,i=n.getRange();if(this.editor.block.isFirstOffset(i,"start")){var r=this.editor.block.closest(i.startNode);return this.tagName.indexOf(r.name)>-1&&this.editor.node.isEmptyWithTrim(r)&&(null===(t=r.parent())||void 0===t?void 0:t.isEditable())?(e.preventDefault(),this.editor.block.setBlocks("<p />"),!1):this.tagName.indexOf(r.name)>-1?(e.preventDefault(),n.mergeAfterDeletePrevNode(r),!1):void 0}}}},{key:"parseHtml",value:function(e){e.find("h1,h2,h3,h4,h5,h6").css({padding:"7px 0",margin:"0","font-weight":"700"}).each((function(e){var t=e;"H1"===t.tagName?(t.style["font-size"]="28px",t.style["line-height"]="36px"):"H2"===t.tagName?(t.style["font-size"]="24px",t.style["line-height"]="32px"):"H3"===t.tagName?(t.style["font-size"]="20px",t.style["line-height"]="28px"):"H4"===t.tagName?(t.style["font-size"]="16px",t.style["line-height"]="24px"):"H5"===t.tagName?(t.style["font-size"]="14px",t.style["line-height"]="24px"):"H6"===t.tagName&&(t.style["font-size"]="14px",t.style["line-height"]="24px",t.style["font-weight"]="400")}))}}],[{key:"pluginName",get:function(){return"heading"}}]),n}(),vx=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="del",e.markdown=!1!==e.options.markdown?"~~":"",e}return Rm(n,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+x"}}],[{key:"pluginName",get:function(){return"strikethrough"}}]),n}(),mx=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="sub",e.markdown=!1!==e.options.markdown?"~":"",e}return Rm(n,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+,"}}],[{key:"pluginName",get:function(){return"sub"}}]),n}(),bx=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="sup",e.markdown=!1!==e.options.markdown?"^":"",e}return Rm(n,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+."}}],[{key:"pluginName",get:function(){return"sup"}}]),n}(),yx=function(e){Qm(n,Xw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).kind="block",e.style={"text-align":"@var0"},e.variable={"@var0":["left","center","right","justify"]},e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),this.editor.on("keydown:backspace",(function(t){return e.onBackspace(t)}))}},{key:"repairListStylePosition",value:function(e,t){e&&0!==e.length&&e.forEach((function(e){"li"===e.name&&("left"===t?e.css("list-style-position","outside"):e.css("list-style-position","inside"))}))}},{key:"execute",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change;t.block.setBlocks({style:{"text-align":e}}),this.repairListStylePosition(n.blocks,e)}}},{key:"queryState",value:function(){if(Vy(this.editor)){var e=this.editor,t=e.change,n=e.schema,i=t.blocks;if(0!==i.length){var r=i[0];n.getAllowInTags().indexOf(r.name)>-1&&(r=i[1]||r.first()||r);var o=r.css("text-align");return"start"===o&&(o="left"),"end"===o&&(o="right"),o}}}},{key:"hotkey",value:function(){var e,t,n,i;return[{key:(null===(e=this.options.hotkey)||void 0===e?void 0:e.left)||"mod+shift+l",args:"left"},{key:(null===(t=this.options.hotkey)||void 0===t?void 0:t.center)||"mod+shift+c",args:"center"},{key:(null===(n=this.options.hotkey)||void 0===n?void 0:n.right)||"mod+shift+r",args:"right"},{key:(null===(i=this.options.hotkey)||void 0===i?void 0:i.justify)||"mod+shift+j",args:"justify"}]}},{key:"onBackspace",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.block,r=n.getRange();if(i.isFirstOffset(r,"start")){var o=this.queryState();return"center"===o?(e.preventDefault(),this.editor.command.execute(this.constructor.pluginName,"left"),!1):"right"===o?(e.preventDefault(),this.editor.command.execute(this.constructor.pluginName,"center"),!1):void 0}}}}],[{key:"pluginName",get:function(){return"alignment"}}]),n}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".am-engine mark,\n.am-engine-view mark {\n    padding: 0;\n    background: #ff0;\n}");var wx=function(e){Qm(n,nk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="mark",e.markdown=!1!==e.options.markdown?"==":"",e}return Rm(n,[{key:"hotkey",value:function(){return this.options.hotkey||""}}],[{key:"pluginName",get:function(){return"mark"}}]),n}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".am-engine blockquote, .am-engine-view blockquote {\n    padding-left: 1em;\n    margin: 5px 0 5px 0;\n    border-left: 3px solid #eee;\n    color: #8C8C8C;\n}\n\n.am-engine blockquote + blockquote, .am-engine-view blockquote + blockquote {\n    margin-top: -5px;\n}");var kx=function(e){Qm(n,Jw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).tagName="blockquote",e.canMerge=!0,e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),this.editor.on("paser:html",(function(t){return e.parseHtml(t)})),Vy(this.editor)&&(this.editor.on("keydow:backspace",(function(t){return e.onBackspace(t)})),this.editor.on("keydow:enter",(function(t){return e.onEnter(t)})),this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)})))}},{key:"execute",value:function(){if(Vy(this.editor)){var e=this.editor,t=e.change,n=e.block,i=e.node;if(this.queryState()){var r=t.getRange(),o=t.blocks[0].closest(this.tagName),a=r.createSelection();return i.unwrap(o),a.move(),void t.select(r)}n.wrap("<".concat(this.tagName," />"))}}},{key:"queryState",value:function(){if(Vy(this.editor)){var e=this.editor.change.blocks;if(0===e.length)return!1;var t=e[0].closest(this.tagName);return this.isSelf(t)}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+u"}},{key:"markdown",value:function(e,t,n){if(!1!==this.options.markdown&&Vy(this.editor)){var i=this.editor.block.findPlugin(n);if(!("p"!==n.name||i.find((function(e){return"heading"===e.constructor.pluginName}))||[">"].indexOf(t)<0))return e.preventDefault(),this.editor.block.removeLeftText(n),this.editor.node.isEmpty(n)&&(n.empty(),n.append("<br />")),this.editor.command.execute(this.constructor.pluginName),!1}}},{key:"pasteMarkdown",value:function(e){var t=this;if(Vy(this.editor)&&this.markdown&&e.isText()){var n=e.text();if(n){if(/(^|\r\n|\n)([>]{1,})/.exec(n)){var i=this.editor.$,r="",o=n.split(/\n|\r\n/),a=[];o.forEach((function(e){var n=/^([>]{1,})/.exec(e);if(n){var o,s=n[1].length,l=e.substr(/^\s+/.test(e.substr(s))?s+1:s),c=i("<div></div>");c.html(l);var u=c.children();u.length>1||1===u.length&&!t.editor.node.isBlock(u[0])&&!(null===(o=u.eq(0))||void 0===o?void 0:o.isBlockCard())?a.push("<p>".concat(l,"</p>")):a.push(l)}else a.length>0?(r+="<".concat(t.tagName,">").concat(a.join(""),"</").concat(t.tagName,">")+"\n"+e+"\n",a=[]):r+=e+"\n"})),a.length>0&&(r+="<".concat(this.tagName,">").concat(a.join(""),"</").concat(this.tagName,">")+"\n"),e.text(r)}}}}},{key:"onBackspace",value:function(e){if(Vy(this.editor)){var t=this.editor.change,n=t.getRange();if(this.editor.block.isFirstOffset(n,"start")){var i=this.editor.block.closest(n.startNode),r=i.parent();return r&&"blockquote"===r.name&&this.editor.node.isRootBlock(i)?(e.preventDefault(),i.prevElement()?t.mergeAfterDeletePrevNode(i):this.editor.block.unwrap("<blockquote />"),!1):void 0}}}},{key:"onEnter",value:function(e){if(Vy(this.editor)){var t=this.editor.change.getRange(),n=this.editor.block.closest(t.endNode),i=n.parent();return(null==i?void 0:i.name)===this.tagName&&"p"===n.name&&n.nextElement()?(e.preventDefault(),this.editor.block.insertOrSplit(t,n),!1):void 0}}},{key:"parseHtml",value:function(e){e.find("blockquote").css({"margin-top":"5px","margin-bottom":"5px","padding-left":"1em","margin-left":"0px","border-left":"3px solid #eee",opacity:"0.6"})}}],[{key:"pluginName",get:function(){return"quote"}}]),n}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".am-engine.data-paintformat-mode,\n.am-engine-view.data-paintformat-mode {\n    cursor: text;\n    cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAABGdBTUEAALGPC/xhBQAAATtJREFUSA3dlTFLA0EQhU+jlSkEG63EYGdlZZFG7QUbSyG/QP/C/Q0rqzQWQX+BwUKwtrexEFRQtFSI35NZWDa3soOHhQ8eM/v2zWw2N9xVVVUdwXUYoFxaq5il2wa8hvtG5dJaxYx16xFvLN8i3lmehiFC6Y94wbsTGsxZosajKA/7aewjrKZiyTocJO9DSYHT82r+YXyQs0eRfYBrD/Y1DB58OMyfeM/hrWq8N9qlZkmFBXiPPd6D7ikWUxwjrKWirTeJkzDeNYttKIxhDUuxiFGjfAnfMkUX3hs19emYqFt9P48mU6zVLEQPFjCfwgk8gyuwEd6pS5t0EQYmHhCXLZ8Kvz1oqmFO+H8HxVOXfZC5vwNd46y3xbx5ni1mQ4+dJ6NyDw4xX0GN9484YfcRhg+fcmmt408+5V99wSyVTWN94gAAAABJRU5ErkJggg==) 5 10, text;\n}");var xx=function(e){Qm(n,Kw);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).isFormat=!1,e}return Rm(n,[{key:"init",value:function(){var e=this;Vy(this.editor)&&(this.editor.on("beforeCommandExecute",(function(t){"paintformat"!==t&&!e.isFormat&&e.event&&e.removeActiveNodes(e.editor.container[0].ownerDocument)})),this.editor.container.on("mouseup",(function(t){e.activeMarks&&(e.editor.card.closest(t.target)?e.removeActiveNodes(e.editor.container[0].ownerDocument):(e.isFormat=!0,e.paintFormat(e.activeMarks,e.activeBlocks),e.isFormat=!1,"single"===e.type&&e.removeActiveNodes(e.editor.container[0].ownerDocument)))})))}},{key:"removeActiveNodes",value:function(e){var t=this.editor.$;ry(e)&&(e=t(e)),this.editor.container.removeClass("data-paintformat-mode"),this.activeMarks=void 0,this.activeBlocks=void 0,this.event&&(e.off("keydown",this.event),this.event=void 0),Vy(this.editor)&&this.editor.trigger("select")}},{key:"bindEvent",value:function(e){var t=this,n=e[0].ownerDocument,i=function i(r){r.metaKey||r.ctrlKey||r.shiftKey||(t.event=void 0,"Escape"!==r.key&&27!==r.keyCode||(e.off("keydown",i),n&&t.removeActiveNodes(n)))};n&&((0,this.editor.$)(n).on("keydown",i),this.event=i)}},{key:"paintFormat",value:function(e,t){var n=this;if(Vy(this.editor)){var i=this.editor,r=i.change,o=i.command,a=i.block,s=i.$,l=r.getRange(),c=this.options.removeCommand||"removeformat";if(l.collapsed){var u=s('<img style="display: none;" />');l.insertNode(u[0]);var d=a.closest(l.startNode);l.select(d,!0),r.select(l),"function"==typeof c?c(l):o.execute(c),this.paintMarks(e),t&&this.paintBlocks(d,t),l.select(u),l.collapse(!0),u.remove(),r.select(l)}else{"function"==typeof c?c(l):o.execute(c),this.paintMarks(e),a.getBlocks(l).forEach((function(e){t&&n.paintBlocks(e,t)}))}}}},{key:"paintMarks",value:function(e){var t=this,n=this.editor.mark;e.forEach((function(e){n.wrap(t.editor.node.clone(e))}))}},{key:"paintBlocks",value:function(e,t){var n=this;if(Vy(this.editor)){var i=this.editor.command;t.forEach((function(t){if(n.options.paintBlock&&!1===n.options.paintBlock(e,t))return;if(t.name!==e.name){if("p"===t.name)i.execute("heading",t.name);else if(n.editor.node.isRootBlock(t)){n.editor.block.findPlugin(t).forEach((function(e){return e.execute(t.name)}))}"ol"===t.name&&i.execute("orderlist"),"ul"===t.name&&i.execute("unorderedlist")}var r=t.css();Object.keys(r).length>0&&n.editor.block.setBlocks({style:r})}))}}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single";if(Vy(this.editor))if(this.activeMarks)this.removeActiveNodes(this.editor.container);else{this.type=e,this.bindEvent(this.editor.container);var t=this.editor,n=t.change,i=t.mark,r=t.block,o=n.getRange();this.activeMarks=i.findMarks(o),this.activeBlocks=r.findBlocks(o),this.editor.trigger("select"),this.editor.container.addClass("data-paintformat-mode")}}},{key:"queryState",value:function(){return!!this.activeMarks}}],[{key:"pluginName",get:function(){return"paintformat"}}]),n}(),Cx=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"execute",value:function(){if(Vy(this.editor)){var e=this.editor,t=e.change,n=e.block,i=e.mark,r=t.getRange();n.getBlocks(r).forEach((function(e){e.removeAttributes("style")})),i.unwrap()}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+\\"}}],[{key:"pluginName",get:function(){return"removeformat"}}]),n}(),Mx=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"init",value:function(){var e=this;this.editor.on("keydown:all",(function(t){return e.onSelectAll(t)}))}},{key:"execute",value:function(){if(Vy(this.editor)){var e=this.editor.change,t=e.getRange(),n=t.startNode.closest(Lb);n.length>0?t.select(n,!0):t.select(this.editor.container,!0),e.select(t),this.editor.trigger("select")}}},{key:"onSelectAll",value:function(e){if(Vy(this.editor)){var t=this.editor.command;e.preventDefault(),t.execute("selectall")}}}],[{key:"pluginName",get:function(){return"selectall"}}]),n}(),Sx=o({name:"am-link-editor",components:{AConfigProvider:Ko,AInput:Yf,AButton:Rp},props:{language:{type:Object,required:!0},defaultText:String,defaultLink:String,className:String,onLoad:Function,onOk:Function},setup:function(e){var t=g(e.defaultText),n=g(e.defaultLink),i=g(null),r=e.language.get("link","text"),o=e.language.get("link","text_placeholder"),a=e.language.get("link","link"),s=e.language.get("link","link_placeholder"),l=e.language.get("link","ok_button");return f((function(){var t;e.onLoad&&e.onLoad(),null===(t=i.value)||void 0===t||t.focus()})),{text:t,link:n,textTitle:r,textPlaceholder:o,linkTitle:a,linkPlaceholder:s,buttonTitle:l,onTextChange:function(e){t.value=e},onLinkChange:function(e){n.value=e},linkRef:i}}});Sx.render=function(e,t,n,i,r,o){var a=T("a-input"),s=T("a-button"),c=T("a-config-provider");return A(),I(c,{"auto-insert-space-in-button":"false"},{default:D((function(){return[l("div",{class:["data-link-editor",e.className]},[l("p",null,_(e.textTitle),1),l("p",null,[l(a,{class:"data-link-input",value:e.text,placeholder:e.textPlaceholder,onChange:t[1]||(t[1]=function(t){return e.onTextChange(t.target.value)})},null,8,["value","placeholder"])]),l("p",null,_(e.linkTitle),1),l("p",null,[l(a,{ref:"linkRef",class:"data-link-input",value:e.link,placeholder:e.linkPlaceholder,onChange:t[2]||(t[2]=function(t){return e.onLinkChange(t.target.value)})},null,8,["value","placeholder"])]),l("p",null,[l(s,{class:"data-link-button",onClick:t[3]||(t[3]=function(t){return e.onOk(e.text,e.link)}),disabled:""===e.link.trim()},{default:D((function(){return[k(_(e.buttonTitle),1)]})),_:1},8,["disabled"])])],2)]})),_:1})},Sx.__file="src/toolbar/editor.vue";var Ex=o({name:"am-link-preview",components:{ATooltip:Mv},props:{language:{type:Object,required:!0},href:String,className:String,onEdit:Function,onRemove:Function,onLoad:Function},setup:function(e){var t=e.language.get("link","link_open"),n=e.language.get("link","link_edit"),i=e.language.get("link","link_remove");return f((function(){e.onLoad&&e.onLoad()})),{openTitle:t,editTitle:n,removeTitle:i}}}),Ox={class:"data-link-preview"};Ex.render=function(e,t,n,i,r,o){var a=T("a-tooltip");return A(),I("div",Ox,[l(a,{title:e.openTitle},{default:D((function(){return[l("a",{class:"data-icon data-icon-link data-link-preview-open",href:e.href,target:"_blank"},_(e.href),9,["href"])]})),_:1},8,["title"]),l(a,{title:e.editTitle},{default:D((function(){return[l("a",{class:"data-icon data-icon-edit",onClick:t[1]||(t[1]=function(){return e.onEdit&&e.onEdit.apply(e,arguments)})})]})),_:1},8,["title"]),l(a,{title:e.removeTitle},{default:D((function(){return[l("a",{class:"data-icon data-icon-unlink",onClick:t[2]||(t[2]=function(){return e.onRemove&&e.onRemove.apply(e,arguments)})})]})),_:1},8,["title"])])},Ex.__file="src/toolbar/preview.vue";var Nx=function(){function e(t){var n=this;jm(this,e),this.mouseInContainer=!1,this.engine=t;var i=this.engine,r=i.change,o=i.$;r.event.onWindow("mousedown",(function(e){if(e.target){var t=o(e.target),i=t.closest(".data-link-container");n.mouseInContainer=i&&i.length>0,t.inEditor()||n.mouseInContainer||n.hide()}}))}return Rm(e,[{key:"create",value:function(){var e;if(this.target){var t=this.engine.$(".data-link-container");0===t.length&&(t=this.engine.$('<div class="data-link-container"></div>'),document.body.appendChild(t[0])),this.root=t;var n=null===(e=this.target.get())||void 0===e?void 0:e.getBoundingClientRect();n&&this.root.css({top:"".concat(window.pageYOffset+n.bottom+4,"px"),left:"".concat(window.pageXOffset,"px"),position:"absolute","z-index":1400})}}},{key:"update",value:function(){var e,t;if(this.root&&this.target){var n=null===(e=this.target.get())||void 0===e?void 0:e.getBoundingClientRect();if(n){var i=null===(t=this.root.get())||void 0===t?void 0:t.getBoundingClientRect();if(i){var r=n.top,o=n.left,a=n.bottom,s=i.height,l=i.width,c=o+l>window.innerWidth-20?window.pageXOffset+window.innerWidth-l-20:20>o-window.pageXOffset?window.pageXOffset+20:window.pageXOffset+o,u=a+s>window.innerHeight-20?window.pageYOffset+r-s-4:window.pageYOffset+a+4;this.root.css({top:"".concat(u,"px"),left:"".concat(c,"px")})}}}}},{key:"onOk",value:function(e,t){if(this.target){var n=this.engine,i=n.change,r=n.history;n.inline;var o=i.getRange();i.rangePathBeforeCommand||(o.startNode.inEditor()||(o.select(this.target,!0),i.select(o)),i.cacheRangeBeforeCommand()),this.target.attributes("href",t),e=""===e.trim()?t:e,this.target.text(e),this.engine.inline.repairCursor(this.target),o.setStart(this.target.next(),1),o.setEnd(this.target.next(),1),i.apply(o),r.submitCache(),this.mouseInContainer=!1,this.hide()}}},{key:"editor",value:function(e,t,n){var i=this;return O(Sx,{language:this.engine.language,defaultText:e,defaultLink:t,onLoad:function(){i.mouseInContainer=!0,n&&n()},onOk:function(e,t){return i.onOk(e,t)}})}},{key:"preview",value:function(e,t){var n=this;return O(Ex,{language:this.engine.language,href:e,onLoad:function(){t&&t()},onEdit:function(){n.target&&(n.mouseInContainer=!1,n.hide(void 0,!1),n.show(n.target,!0))},onRemove:function(){if(n.target){var e=n.engine,t=e.change,i=e.inline,r=t.getRange();r.select(n.target,!0),i.repairRange(r),t.select(r),t.cacheRangeBeforeCommand(),i.unwrap(),n.mouseInContainer=!1,n.target=void 0,n.hide()}}})}},{key:"show",value:function(e,t){var n=this;this.target=e,this.create();var i=e.text().replace(/\u200B/g,""),r=e.attributes("href"),o=this.root.get(),a=function(){n.update()},s=!r||t?"am-link-editor":"am-link-preview";this.vm&&this.vm._component.name===s?this.update():(this.vm&&(this.vm.unmount(),this.vm=void 0),setTimeout((function(){n.vm=!r||t?n.editor(i,r,a):n.preview(r,a),n.vm.mount(o)}),20))}},{key:"hide",value:function(e,t){var n;if(!(e&&this.target&&e.equal(this.target))){var i=null===(n=this.root)||void 0===n?void 0:n.get();if(i&&!this.mouseInContainer){if(this.vm&&(this.vm.unmount(),this.vm=void 0),document.body.removeChild(i),this.root=void 0,this.target&&!this.target.attributes("href")){var r=this.engine,o=r.change,a=r.inline,s=o.getRange();s.select(this.target,!0),o.select(s),a.unwrap(),this.engine.history.destroyCache()}!1!==t&&(this.target=void 0)}}}}]),e}(),Tx={en:{link:{text:"Text",link:"Link",text_placeholder:"Description text",link_placeholder:"Link address",link_open:"Open link",link_edit:"Edit link",link_remove:"Remove link",ok_button:"OK"}},"zh-cn":{link:{text:"文本",link:"链接",text_placeholder:"描述文本",link_placeholder:"链接地址",link_open:"打开链接",link_edit:"编辑链接",link_remove:"移除链接",ok_button:"确定"}}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".data-link-container {\n    max-width: 398px;\n    display: inline-block;\n    border: 1px solid #E8E8E8;\n    border-radius: 4px;\n    box-shadow: rgba(221, 221, 221, 0.5) 0px 1px 3px;\n    background: white;\n}\n\n.data-link-container .data-link-editor {\n    width: 365px;\n    padding: 16px 12px;\n    padding-bottom: 4px;\n}\n\n.data-link-container p {\n    margin-top: 0;\n    margin-bottom: 14px;\n}\n\n.data-link-container .itellyou-icon {\n    color: #8590A6;\n    font-size: 16px;\n}\n.data-link-preview {\n    line-height: 16px;\n    padding: 6px 8px;\n    vertical-align: middle;\n    white-space: nowrap;\n}\n.data-link-preview * {\n    display: inline-block;\n}\n.data-link-preview a {\n    color: #595959;\n    margin: 0px 0px 0px 8px;\n    padding: 4px;\n}\n.data-link-preview a:hover {\n    background: #F4F4F4;\n    cursor: pointer;\n}\n.data-link-preview a.data-link-preview-open {\n    color: #1890FF;\n    max-width: 292px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    text-decoration: none;\n    font-size: 14px;\n    letter-spacing: 1.2px;\n    vertical-align: middle;\n    margin: 0;\n}\n.data-link-preview a.data-link-preview-open::before\n{\n    vertical-align: middle;\n    margin-right: 2px;\n}\n\n.data-link-preview a.data-link-preview-open:hover{\n    background: transparent;\n}");var Ax=function(e){Qm(n,ek);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).attributes={target:"@var0",href:"@var1"},e.variable={"@var0":["_blank","_parent","_top","_self"],"@var1":"*"},e.tagName="a",e.markdown=!1!==e.options.markdown?"\\[(.+?)\\]\\(([\\S]+?)\\)$":"",e}return Rm(n,[{key:"init",value:function(){var e=this;kb(Km(n.prototype),"init",this).call(this),Vy(this.editor)&&(this.toolbar=new Nx(this.editor)),this.editor.on("paser:html",(function(t){return e.parseHtml(t)})),this.editor.language.add(Tx)}},{key:"hotkey",value:function(){return this.options.hotkey||{key:"mod+k",args:["_blank"]}}},{key:"execute",value:function(){if(Vy(this.editor)){var e=this.editor.inline;if(!this.queryState()){var t=this.editor.$("<".concat(this.tagName," />"));this.setStyle.apply(this,[t].concat(Array.prototype.slice.call(arguments))),this.setAttributes.apply(this,[t].concat(Array.prototype.slice.call(arguments)));var n=arguments.length>2?arguments[2]:"";n?(t.text(n),e.insert(t)):(this.editor.history.startCache(),e.wrap(t));var i,r=this.editor.change,o=r.getRange();if(!o.collapsed&&r.inlines.length>0)null===(i=this.toolbar)||void 0===i||i.show(r.inlines[0])}}}},{key:"queryState",value:function(){var e,t=this;if(Vy(this.editor)){var n,i=this.editor.change,r=i.inlines.find((function(e){return t.isSelf(e)}));return null===(e=this.toolbar)||void 0===e||e.hide(r),r?(i.getRange().collapsed&&(null===(n=this.toolbar)||void 0===n||n.show(r)),!0):!1}}},{key:"triggerMarkdown",value:function(e,t,n){if(Vy(this.editor)&&this.markdown){var i=new RegExp(this.markdown).exec(t);if(i){var r=this.editor,o=r.command,a=r.$;e.preventDefault();var s=i[1],l=i[2],c=n.get().splitText(n.text().length-i[0].length);return c.splitText(i[0].length),a(c).remove(),o.execute(this.constructor.pluginName,"_blank",l,s),this.editor.node.insertText(" "),!1}}}},{key:"pasteMarkdown",value:function(e){if(Vy(this.editor)&&this.markdown&&e.isText()){var t=e.text();if(t){var n=/([^!]\[(.+?)\]\(([\S]+?)\))/,i=n.exec(t);if(i){for(var r="",o=e.clone(!0).get();o.textContent&&(i=n.exec(o.textContent));){var a,s=o.splitText(i.index+1);r+=o.textContent,o=s.splitText(i[0].length-1);var l=i[2],c=i[3],u=this.editor.$("<".concat(this.tagName," />"));this.setAttributes(u,"_blank",c),u.text(l||c),r+=null===(a=u.get())||void 0===a?void 0:a.outerHTML}r+=o.textContent,e.text(r)}}}}},{key:"parseHtml",value:function(e){e.find(this.tagName).css({"font-family":"monospace","font-size":"inherit","background-color":"rgba(0,0,0,.06)",padding:"0 2px",border:"1px solid rgba(0,0,0,.08)","border-radius":"2px 2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})}}],[{key:"pluginName",get:function(){return"link"}}]),n}();cy||(require("codemirror/mode/shell/shell"),require("codemirror/mode/clike/clike"),require("codemirror/mode/css/css"),require("codemirror/mode/dart/dart"),require("codemirror/mode/diff/diff"),require("codemirror/mode/dockerfile/dockerfile"),require("codemirror/mode/erlang/erlang"),require("codemirror/mode/go/go"),require("codemirror/mode/groovy/groovy"),require("codemirror/mode/htmlmixed/htmlmixed"),require("codemirror/mode/http/http"),require("codemirror/mode/javascript/javascript"),require("codemirror/mode/jsx/jsx"),require("codemirror/mode/cmake/cmake"),require("codemirror/mode/markdown/markdown"),require("codemirror/mode/octave/octave"),require("codemirror/mode/nginx/nginx"),require("codemirror/mode/pascal/pascal"),require("codemirror/mode/perl/perl"),require("codemirror/mode/php/php"),require("codemirror/mode/powershell/powershell"),require("codemirror/mode/protobuf/protobuf"),require("codemirror/mode/python/python"),require("codemirror/mode/r/r"),require("codemirror/mode/ruby/ruby"),require("codemirror/mode/rust/rust"),require("codemirror/mode/sql/sql"),require("codemirror/mode/swift/swift"),require("codemirror/mode/vb/vb"),require("codemirror/mode/velocity/velocity"),require("codemirror/mode/xml/xml"),require("codemirror/mode/yaml/yaml"));var Ix=[{value:"plain",syntax:"simplemode",name:"Plain Text"},{value:"bash",syntax:"shell",name:"Bash"},{value:"basic",syntax:"vbscript",name:"Basic"},{value:"c",syntax:"text/x-csrc",name:"C"},{value:"cpp",syntax:"text/x-c++src",name:"C++"},{value:"csharp",syntax:"text/x-csharp",name:"C#"},{value:"css",syntax:"css",name:"CSS"},{value:"dart",syntax:"dart",name:"Dart"},{value:"diff",syntax:"diff",name:"Diff"},{value:"dockerfile",syntax:"dockerfile",name:"Dockerfile"},{value:"erlang",syntax:"erlang",name:"Erlang"},{value:"git",syntax:"shell",name:"Git"},{value:"go",syntax:"go",name:"Go"},{value:"graphql",syntax:"simplemode",name:"GraphQL"},{value:"groovy",syntax:"groovy",name:"Groovy"},{value:"html",syntax:"htmlmixed",name:"HTML"},{value:"http",syntax:"http",name:"HTTP"},{value:"java",syntax:"text/x-java",name:"Java"},{value:"javascript",syntax:"text/javascript",name:"JavaScript"},{value:"json",syntax:"application/json",name:"JSON"},{value:"jsx",syntax:"jsx",name:"JSX"},{value:"katex",syntax:"simplemode",name:"KaTeX"},{value:"kotlin",syntax:"text/x-kotlin",name:"Kotlin"},{value:"less",syntax:"css",name:"Less"},{value:"makefile",syntax:"cmake",name:"Makefile"},{value:"markdown",syntax:"markdown",name:"Markdown"},{value:"matlab",syntax:"octave",name:"MATLAB"},{value:"nginx",syntax:"nginx",name:"Nginx"},{value:"objectivec",syntax:"text/x-objectivec",name:"Objective-C"},{value:"pascal",syntax:"pascal",name:"Pascal"},{value:"perl",syntax:"perl",name:"Perl"},{value:"php",syntax:"php",name:"PHP"},{value:"powershell",syntax:"powershell",name:"PowerShell"},{value:"protobuf",syntax:"protobuf",name:"Protobuf"},{value:"python",syntax:"python",name:"Python"},{value:"r",syntax:"r",name:"R"},{value:"ruby",syntax:"ruby",name:"Ruby"},{value:"rust",syntax:"rust",name:"Rust"},{value:"scala",syntax:"text/x-scala",name:"Scala"},{value:"shell",syntax:"shell",name:"Shell"},{value:"sql",syntax:"text/x-sql",name:"SQL"},{value:"swift",syntax:"swift",name:"Swift"},{value:"typescript",syntax:"text/typescript",name:"TypeScript"},{value:"vbnet",syntax:"vb",name:"VB.net"},{value:"velocity",syntax:"velocity",name:"Velocity"},{value:"xml",syntax:"xml",name:"XML"},{value:"yaml",syntax:"yaml",name:"YAML"}],Dx={},_x={};Ix.forEach((function(e){Dx[e.value]=e.name,_x[e.value]=e.syntax}));var jx,Lx=["c","cpp","csharp","erlang","go","groovy","java","kotlin","makefile","objectivec","perl","python","rust","swift","vbnet"];cy||import("./codemirror.1fc1ae2c.js").then((function(e){return e.c})).then((function(e){jx={CodeMirror:e.default}}));var Rx=function(){function e(t,n){jm(this,e),this.mode="plain",this.editor=t,this.options=n,this.container=n.container||t.$(this.renderTemplate())}return Rm(e,[{key:"renderTemplate",value:function(){return'<div class="data-codeblock-container"><div class="data-codeblock-content"></div></div>'}},{key:"getConfig",value:function(e,t){var n=this.codeMirror?this.codeMirror.getOption("indentUnit"):Lx.indexOf(t||"")>-1?4:2,i=e?e.match(/^ {2,4}(?=[^\s])/gm):null;return i&&(n=i.reduce((function(e,t){return Math.min(e,t.length)}),1/0)),{tabSize:n,indentUnit:n}}},{key:"getSyntax",value:function(e){return _x[e]||e}},{key:"create",value:function(e,t,n){var i=this;this.mode=e;var r=this.getSyntax(e);this.codeMirror=jx.CodeMirror(this.container.find(".data-codeblock-content").get(),_m(_m({value:t,mode:r,lineNumbers:!0,lineWrapping:!1,autofocus:!1,dragDrop:!1,readOnly:!1,scrollbarStyle:"null",viewportMargin:1/0},this.getConfig(t,r)),n)),this.codeMirror.on("focus",(function(){})),this.codeMirror.on("blur",(function(){})),this.codeMirror.on("change",Nv((function(){Vy(i.editor)&&(i.editor.change.change(),i.save())}),1e3)),this.codeMirror.setOption("extraKeys",{Enter:function(e){var t=i.getConfig(e.getValue());Object.keys(t).forEach((function(n){return e.setOption(n,t[n])})),e.execCommand("newlineAndIndent")}})}},{key:"update",value:function(e){var t,n=this,i=(null===(t=this.codeMirror)||void 0===t?void 0:t.getValue())||"";this.container.find(".data-codeblock-content").empty(),this.create(e,i),this.save(),setTimeout((function(){n.focus()}),10)}},{key:"render",value:function(e,t){var n=this.container.find(".data-codeblock-content");e=this.getSyntax(e);var i=this.editor.$('<div class="CodeMirror"><pre class="cm-s-default" /></div>');n.append(i);var r=i.find("pre")[0];this.runMode(t||"",e,r,this.getConfig(t,e))}},{key:"save",value:function(){if(Vy(this.editor)&&this.codeMirror&&!this.editor.change.isComposing()){var e=this.codeMirror.getValue(),t=this.options.onSave;t&&t(this.mode,e)}}},{key:"focus",value:function(){this.codeMirror&&this.codeMirror.focus()}},{key:"runMode",value:function(e,t,n,i){var r=jx.CodeMirror,o=r.getMode(r.defaults,t),a=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<9);if(n.appendChild){var s=i&&i.tabSize||r.defaults.tabSize,l=n,c=0;l.innerHTML="",n=function(e,t){if("\n"===e)return l.appendChild(document.createTextNode(a?"\r":e)),void(c=0);for(var n="",i=0;;){var r=e.indexOf("\t",i);if(-1===r){n+=e.slice(i),c+=e.length-i;break}c+=r-i,n+=e.slice(i,r);var o=s-c%s;c+=o;for(var u=0;u<o;++u)n+=" ";i=r+1}if(t){var d=l.appendChild(document.createElement("span"));d.className="cm-"+t.replace(/ +/g," cm-"),d.appendChild(document.createTextNode(n))}else l.appendChild(document.createTextNode(n))}}for(var u=r.splitLines(e),d=i&&i.state||r.startState(o),h=0,f=u.length;h<f;++h){h&&n("\n");var p=new r.StringStream(u[h]);for(!p.string&&o.blankLine&&o.blankLine(d);!p.eol();){var g=o.token?o.token(p,d):"";n(p.current(),g,h,p.start,d),p.start=p.pos}}}}]),e}(),Px=If.Option,zx=o({name:"am-codeblock-select",components:{ASelect:If,ASelectOption:Px},props:{defaultValue:String,getContainer:Function,onSelect:Function},data:function(){return{data:Ix}},methods:{filter:function(e,t){e=e.toLowerCase();var n=t.key||"",i=t.name||"";return i=i.toLowerCase(),n.includes(e)||i.includes(e)}}});zx.render=function(e,n,i,r,o,a){var s=T("a-select-option"),l=T("a-select");return A(),I(l,{"show-search":!0,size:"small",bordered:!1,style:{"min-width":"128px"},"default-value":e.defaultValue,"get-popup-container":e.getContainer,onSelect:e.onSelect,"filter-option":e.filter},{default:D((function(){return[(A(!0),I(t,null,j(e.data,(function(e){return A(),I(s,{name:e.name,value:e.value,key:e.value},{default:D((function(){return[k(_(e.name),1)]})),_:2},1032,["name","value"])})),128))]})),_:1},8,["default-value","get-popup-container","onSelect","filter-option"])},zx.__file="src/component/select/component.vue";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".data-codeblock-container {\n    position: relative;\n    padding: 0;\n    overflow: visible;\n    border: 1px solid #e8e8e8;\n    border-radius: 2px 2px;\n    text-indent: 0;\n}\n\n.data-codeblock-container .am-embed-toolbar-item {\n    float: right;\n    line-height: 32px;\n}\n\n.data-codeblock-content {\n     background: #f9f9f9;\n     overflow: auto;\n}\n\n.am-engine .CodeMirror,\n.am-engine-view .CodeMirror {\n    \n    /* \\u5b57\\u4f53\\u53c2\\u7167 github\\uff0c\\u8003\\u8651\\u548c 14px \\u6587\\u5b57\\u5728\\u4e00\\u8d77\\u6392\\u7248\\uff0c\\u5b57\\u53f7\\u7528 13px */\n     font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;\n     font-size: 13px;\n     line-height: 21px;\n     color: #595959;\n     direction: ltr;\n    \n}\n\n.am-engine .CodeMirror-lines,\n.am-engine-view .CodeMirror-lines {\n     padding: 8px 0;\n     -webkit-user-select:none;\n        -moz-user-select:none;\n         -ms-user-select:none;\n             user-select:none\n    /* Vertical padding around content */\n    \n}\n\n.am-engine .CodeMirror-scrollbar-filler,\n.am-engine-view .CodeMirror-scrollbar-filler,\n.am-engine .CodeMirror-gutter-filler,\n.am-engine-view .CodeMirror-gutter-filler {\n     background-color: white;\n    \n    /* The little square between H and V scrollbars */\n    \n}\n\n.am-engine .CodeMirror-gutters,\n.am-engine-view .CodeMirror-gutters {\n     border: 0;\n     white-space: nowrap;\n     padding: 0 8px;\n     background-color: unset;\n    \n}\n\n.am-engine .CodeMirror-linenumber,\n.am-engine-view .CodeMirror-linenumber {\n     padding: 0;\n     min-width: 20px;\n     text-align: right;\n     color: #BFBFBF;\n     white-space: nowrap;\n    \n}\n\n.am-engine .CodeMirror-guttermarker,\n.am-engine-view .CodeMirror-guttermarker {\n     color: black;\n    \n}\n\n.am-engine .CodeMirror-guttermarker-subtle,\n.am-engine-view .CodeMirror-guttermarker-subtle {\n     color: #999;\n    \n}\n\n.am-engine .CodeMirror-cursor,\n.am-engine-view .CodeMirror-cursor {\n     border-left: 1px solid black;\n     border-right: none;\n     width: 0;\n    \n}\n\n.am-engine .CodeMirror div.CodeMirror-secondarycursor,\n.am-engine-view .CodeMirror div.CodeMirror-secondarycursor {\n     border-left: 1px solid silver;\n    \n}\n\n.am-engine .cm-fat-cursor .CodeMirror-cursor,\n.am-engine-view .cm-fat-cursor .CodeMirror-cursor {\n     width: auto;\n     border: 0 !important;\n     background: #7e7;\n    \n}\n\n.am-engine .cm-fat-cursor div.CodeMirror-cursors,\n.am-engine-view .cm-fat-cursor div.CodeMirror-cursors {\n     z-index: 1;\n    \n}\n\n.am-engine .cm-fat-cursor-mark,\n.am-engine-view .cm-fat-cursor-mark {\n     background-color: rgba(20, 255, 20, 0.5);\n     -webkit-animation: blink 1.06s steps(1) infinite;\n     animation: blink 1.06s steps(1) infinite;\n    \n}\n\n.am-engine .cm-animate-fat-cursor,\n.am-engine-view .cm-animate-fat-cursor {\n     width: auto;\n     border: 0;\n     -webkit-animation: blink 1.06s steps(1) infinite;\n     animation: blink 1.06s steps(1) infinite;\n     background-color: #7e7;\n    \n}\n\n@-webkit-keyframes blink {\n     50% {\n         background-color: transparent;\n        \n    }\n\n    \n}\n\n@keyframes blink {\n     50% {\n         background-color: transparent;\n        \n    }\n\n    \n}\n\n.am-engine .cm-tab,\n.am-engine-view .cm-tab {\n     display: inline-block;\n     text-decoration: inherit;\n    \n}\n\n.am-engine .CodeMirror-rulers,\n.am-engine-view .CodeMirror-rulers {\n     position: absolute;\n     left: 0;\n     right: 0;\n     top: -50px;\n     bottom: -20px;\n     overflow: hidden;\n    \n}\n\n.am-engine .CodeMirror-ruler,\n.am-engine-view .CodeMirror-ruler {\n     border-left: 1px solid #ccc;\n     top: 0;\n     bottom: 0;\n     position: absolute;\n    \n}\n\n.am-engine .cm-s-default .cm-header,\n.am-engine-view .cm-s-default .cm-header {\n     color: blue;\n    \n}\n\n.am-engine .cm-s-default .cm-quote,\n.am-engine-view .cm-s-default .cm-quote {\n     color: #090;\n    \n}\n\n.am-engine .cm-negative,\n.am-engine-view .cm-negative {\n     color: #d44;\n    \n}\n\n.am-engine .cm-positive,\n.am-engine-view .cm-positive {\n     color: #292;\n    \n}\n\n.am-engine .cm-header,\n.am-engine-view .cm-header,\n.am-engine .cm-strong,\n.am-engine-view .cm-strong {\n     font-weight: bold;\n    \n}\n\n.am-engine .cm-em,\n.am-engine-view .cm-em {\n     font-style: italic;\n    \n}\n\n.am-engine .cm-link,\n.am-engine-view .cm-link {\n     text-decoration: underline;\n    \n}\n\n.am-engine .cm-strikethrough,\n.am-engine-view .cm-strikethrough {\n     text-decoration: line-through;\n    \n}\n\n.am-engine .cm-s-default .cm-keyword,\n.am-engine-view .cm-s-default .cm-keyword {\n     color: #d73a49;\n    \n}\n\n.am-engine .cm-s-default .cm-atom,\n.am-engine-view .cm-s-default .cm-atom {\n     color: #905;\n    \n}\n\n.am-engine .cm-s-default .cm-number,\n.am-engine-view .cm-s-default .cm-number {\n     color: #005cc5;\n    \n}\n\n.am-engine .cm-s-default .cm-def,\n.am-engine-view .cm-s-default .cm-def {\n     color: #005cc5;\n    \n}\n\n.am-engine .cm-s-default .cm-variable-2,\n.am-engine-view .cm-s-default .cm-variable-2 {\n     color: #005cc5;\n    \n}\n\n.am-engine .cm-s-default .cm-variable-3,\n.am-engine-view .cm-s-default .cm-variable-3,\n.am-engine .cm-s-default .cm-type,\n.am-engine-view .cm-s-default .cm-type {\n     color: #22863a;\n    \n}\n\n.am-engine .cm-s-default .cm-comment,\n.am-engine-view .cm-s-default .cm-comment {\n     color: #6a737d;\n    \n}\n\n.am-engine .cm-s-default .cm-string,\n.am-engine-view .cm-s-default .cm-string {\n     color: #690;\n    \n}\n\n.am-engine .cm-s-default .cm-string-2,\n.am-engine-view .cm-s-default .cm-string-2 {\n     color: #690;\n    \n}\n\n.am-engine .cm-s-default .cm-meta,\n.am-engine-view .cm-s-default .cm-meta {\n     color: #1f7f9a;\n    \n}\n\n.am-engine .cm-s-default .cm-qualifier,\n.am-engine-view .cm-s-default .cm-qualifier {\n     color: #555;\n    \n}\n\n.am-engine .cm-s-default .cm-builtin,\n.am-engine-view .cm-s-default .cm-builtin {\n     color: #6f42c1;\n    \n}\n\n.am-engine .cm-s-default .cm-bracket,\n.am-engine-view .cm-s-default .cm-bracket {\n     color: #997;\n    \n}\n\n.am-engine .cm-s-default .cm-tag,\n.am-engine-view .cm-s-default .cm-tag {\n     color: #22863a;\n    \n}\n\n.am-engine .cm-s-default .cm-attribute,\n.am-engine-view .cm-s-default .cm-attribute {\n     color: #6f42c1;\n    \n}\n\n.am-engine .cm-s-default .cm-hr,\n.am-engine-view .cm-s-default .cm-hr {\n     color: #999;\n    \n}\n\n.am-engine .cm-s-default .cm-link,\n.am-engine-view .cm-s-default .cm-link {\n     color: #00c;\n    \n}\n\n.am-engine .cm-s-default .cm-error,\n.am-engine-view .cm-s-default .cm-error {\n     color: #f00;\n    \n}\n\n.am-engine .cm-invalidchar,\n.am-engine-view .cm-invalidchar {\n     color: #f00;\n    \n}\n\n.am-engine .cm-s-default .cm-operator,\n.am-engine-view .cm-s-default .cm-operator {\n     color: #d73a49;\n    \n}\n\n.am-engine .cm-s-default .cm-property,\n.am-engine-view .cm-s-default .cm-property {\n     color: #005cc5;\n    \n}\n\n.am-engine .CodeMirror-composing,\n.am-engine-view .CodeMirror-composing {\n     border-bottom: 2px solid;\n    \n}\n\n.am-engine div.CodeMirror span.CodeMirror-matchingbracket,\n.am-engine-view div.CodeMirror span.CodeMirror-matchingbracket {\n     color: #0b0;\n    \n}\n\n.am-engine div.CodeMirror span.CodeMirror-nonmatchingbracket,\n.am-engine-view div.CodeMirror span.CodeMirror-nonmatchingbracket {\n     color: #a22;\n    \n}\n\n.am-engine .CodeMirror-matchingtag,\n.am-engine-view .CodeMirror-matchingtag {\n     background: rgba(255, 150, 0, 0.3);\n    \n}\n\n.am-engine .CodeMirror-activeline-background,\n.am-engine-view .CodeMirror-activeline-background {\n     background: transparent;\n    \n}\n\n.am-engine .CodeMirror,\n.am-engine-view .CodeMirror {\n     position: relative;\n     overflow: hidden;\n     height: auto;\n     background: transparent;\n    \n}\n\n.am-engine .CodeMirror-scroll,\n.am-engine-view .CodeMirror-scroll {\n     overflow: scroll !important;\n    \n    /* Things will break if this is overridden */\n    \n    /* 30px is the magic margin used to hide the element's real scrollbars */\n    \n    /* See overflow: hidden in .CodeMirror */\n     margin-bottom: -50px;\n     margin-right: -50px;\n     padding-bottom: 50px;\n     outline: none;\n    \n    /* Prevent dragging from highlighting the element */\n     position: relative;\n     z-index: 0;\n    \n}\n\n.am-engine .CodeMirror-sizer,\n.am-engine-view .CodeMirror-sizer {\n     position: relative;\n     border-right: 50px solid transparent;\n     min-height: auto !important;\n    \n}\n\n.am-engine .CodeMirror-vscrollbar,\n.am-engine-view .CodeMirror-vscrollbar,\n.am-engine .CodeMirror-hscrollbar,\n.am-engine-view .CodeMirror-hscrollbar,\n.am-engine .CodeMirror-scrollbar-filler,\n.am-engine-view .CodeMirror-scrollbar-filler,\n.am-engine .CodeMirror-gutter-filler,\n.am-engine-view .CodeMirror-gutter-filler {\n     position: absolute;\n     z-index: 6;\n     display: none;\n    \n}\n\n.am-engine .CodeMirror-vscrollbar,\n.am-engine-view .CodeMirror-vscrollbar {\n     right: 0;\n     top: 0;\n     overflow-x: hidden;\n     overflow-y: scroll;\n     display: none !important;\n    \n}\n\n.am-engine .CodeMirror-hscrollbar,\n.am-engine-view .CodeMirror-hscrollbar {\n     bottom: 0;\n     left: 0;\n     overflow-y: hidden;\n     overflow-x: scroll;\n     display: none !important;\n    \n}\n\n.am-engine .CodeMirror-scrollbar-filler,\n.am-engine-view .CodeMirror-scrollbar-filler {\n     right: 0;\n     bottom: 0;\n    \n}\n\n.am-engine .CodeMirror-gutter-filler,\n.am-engine-view .CodeMirror-gutter-filler {\n     left: 0;\n     bottom: 0;\n    \n}\n\n.am-engine .CodeMirror-gutters,\n.am-engine-view .CodeMirror-gutters {\n     position: absolute;\n     left: 0;\n     top: 0;\n     min-height: 100%;\n     background: #f9f9f9;\n    \n}\n\n.am-engine .CodeMirror-gutter,\n.am-engine-view .CodeMirror-gutter {\n     white-space: normal;\n     height: 100%;\n     display: inline-block;\n     vertical-align: top;\n     margin-bottom: -30px;\n    \n}\n\n.am-engine .CodeMirror-gutter-wrapper,\n.am-engine-view .CodeMirror-gutter-wrapper {\n     position: absolute;\n     z-index: 4;\n     background: none !important;\n     border: none !important;\n    \n}\n\n.am-engine .CodeMirror-gutter-background,\n.am-engine-view .CodeMirror-gutter-background {\n     position: absolute;\n     top: 0;\n     bottom: 0;\n     z-index: 4;\n    \n}\n\n.am-engine .CodeMirror-gutter-elt,\n.am-engine-view .CodeMirror-gutter-elt {\n     position: absolute;\n     cursor: default;\n     z-index: 4;\n    \n}\n\n.am-engine .CodeMirror-gutter-wrapper ::-moz-selection,\n.am-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\n     background-color: transparent;\n    \n}\n\n.am-engine .CodeMirror-gutter-wrapper ::selection,\n.am-engine-view .CodeMirror-gutter-wrapper ::selection {\n     background-color: transparent;\n    \n}\n\n.am-engine .CodeMirror-gutter-wrapper ::-moz-selection,\n.am-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\n     background-color: transparent;\n    \n}\n\n.am-engine .CodeMirror-lines,\n.am-engine-view .CodeMirror-lines {\n     cursor: text;\n     min-height: 40px;\n    \n    /* prevents collapsing before first draw */\n    \n}\n\n.am-engine .CodeMirror pre,\n.am-engine-view .CodeMirror pre {\n    \n    /* Reset some styles that the rest of the page might have set */\n     border-radius: 0;\n     border-width: 0;\n     background: transparent;\n     font-family: inherit;\n     font-size: inherit;\n     margin: 0;\n     white-space: pre;\n     word-wrap: normal;\n     line-height: inherit;\n     color: inherit;\n     z-index: 2;\n     position: relative;\n     overflow: visible;\n     -webkit-tap-highlight-color: transparent;\n     font-variant-ligatures: contextual;\n    \n}\n\n.am-engine .CodeMirror-wrap pre,\n.am-engine-view .CodeMirror-wrap pre {\n     word-wrap: break-word;\n     white-space: pre-wrap;\n     word-break: normal;\n    \n}\n\n.am-engine .CodeMirror-linebackground,\n.am-engine-view .CodeMirror-linebackground {\n     position: absolute;\n     left: 0;\n     right: 0;\n     top: 0;\n     bottom: 0;\n     z-index: 0;\n    \n}\n\n.am-engine .CodeMirror-linewidget,\n.am-engine-view .CodeMirror-linewidget {\n     position: relative;\n     z-index: 2;\n     padding: 0.1px;\n    \n    /* Force widget margins to stay inside of the container */\n    \n}\n\n.am-engine .CodeMirror-rtl pre,\n.am-engine-view .CodeMirror-rtl pre {\n     direction: rtl;\n    \n}\n\n.am-engine .CodeMirror-code,\n.am-engine-view .CodeMirror-code {\n     outline: none;\n    \n}\n\n.am-engine .CodeMirror-scroll,\n.am-engine-view .CodeMirror-scroll,\n.am-engine .CodeMirror-sizer,\n.am-engine-view .CodeMirror-sizer,\n.am-engine .CodeMirror-gutter,\n.am-engine-view .CodeMirror-gutter,\n.am-engine .CodeMirror-gutters,\n.am-engine-view .CodeMirror-gutters,\n.am-engine .CodeMirror-linenumber,\n.am-engine-view .CodeMirror-linenumber {\n     box-sizing: content-box;\n    \n}\n\n.am-engine .CodeMirror-measure,\n.am-engine-view .CodeMirror-measure {\n     position: absolute;\n     width: 100%;\n     height: 0;\n     overflow: hidden;\n     visibility: hidden;\n    \n}\n\n.am-engine .CodeMirror-cursor,\n.am-engine-view .CodeMirror-cursor {\n     position: absolute;\n     pointer-events: none;\n    \n}\n\n.am-engine .CodeMirror-measure pre,\n.am-engine-view .CodeMirror-measure pre {\n     position: static;\n    \n}\n\n.am-engine div.CodeMirror-cursors,\n.am-engine-view div.CodeMirror-cursors {\n     visibility: hidden;\n     position: relative;\n     z-index: 3;\n    \n}\n\n.am-engine div.CodeMirror-dragcursors,\n.am-engine-view div.CodeMirror-dragcursors {\n     visibility: visible;\n    \n}\n\n.am-engine .CodeMirror-focused div.CodeMirror-cursors,\n.am-engine-view .CodeMirror-focused div.CodeMirror-cursors {\n     visibility: visible;\n    \n}\n\n.am-engine .CodeMirror-selected,\n.am-engine-view .CodeMirror-selected {\n     background: #e8e8e8;\n    \n}\n\n.am-engine .CodeMirror-focused .CodeMirror-selected,\n.am-engine-view .CodeMirror-focused .CodeMirror-selected {\n     background: #b3d7fd;\n    \n}\n\n.am-engine .CodeMirror-crosshair,\n.am-engine-view .CodeMirror-crosshair {\n     cursor: crosshair;\n    \n}\n\n.am-engine .CodeMirror-line::-moz-selection,\n.am-engine-view .CodeMirror-line::-moz-selection,\n.am-engine .CodeMirror-line>span::-moz-selection,\n.am-engine-view .CodeMirror-line>span::-moz-selection,\n.am-engine .CodeMirror-line>span>span::-moz-selection,\n.am-engine-view .CodeMirror-line>span>span::-moz-selection {\n     background: #b3d7fd;\n    \n}\n\n.am-engine .CodeMirror-line::selection,\n.am-engine-view .CodeMirror-line::selection,\n.am-engine .CodeMirror-line>span::selection,\n.am-engine-view .CodeMirror-line>span::selection,\n.am-engine .CodeMirror-line>span>span::selection,\n.am-engine-view .CodeMirror-line>span>span::selection {\n     background: #b3d7fd;\n    \n}\n\n.am-engine .CodeMirror-line::-moz-selection,\n.am-engine-view .CodeMirror-line::-moz-selection,\n.am-engine .CodeMirror-line>span::-moz-selection,\n.am-engine-view .CodeMirror-line>span::-moz-selection,\n.am-engine .CodeMirror-line>span>span::-moz-selection,\n.am-engine-view .CodeMirror-line>span>span::-moz-selection {\n     background: #b3d7fd;\n    \n}\n\n.am-engine .cm-searching,\n.am-engine-view .cm-searching {\n     background-color: #ffa;\n     background-color: rgba(255, 255, 0, 0.4);\n    \n}\n\n.am-engine .cm-force-border,\n.am-engine-view .cm-force-border {\n     padding-right: 0.1px;\n    \n}\n\n@media print {\n\n    /* .am-engine,\n     .am-engine-view { */\n        \n        /* Hide the cursor when printing */\n        \n    /* } */\n\n     .am-engine .CodeMirror div.CodeMirror-cursors,\n     .am-engine-view .CodeMirror div.CodeMirror-cursors {\n         visibility: hidden;\n        \n    }\n\n    \n}\n\n.am-engine .cm-tab-wrap-hack:after,\n.am-engine-view .cm-tab-wrap-hack:after {\n     content: '';\n    \n}\n\n.am-engine span.CodeMirror-selectedtext,\n.am-engine-view span.CodeMirror-selectedtext {\n     background: none;\n    \n}\n\n.am-engine-view .data-codeblock-container {\n     margin: 5px 0;\n    \n}\n\n.am-engine-view .CodeMirror {\n     padding: 16px;\n     overflow: initial;\n    \n}\n\n.am-engine-view .CodeMirror pre {\n     padding: 0;\n    \n}\n\n.am-content-editor .am-engine .data-codeblock-container .CodeMirror-lines {\n    min-height: 40px;\n}");var Bx=function(e){Qm(n,Qk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).resize=function(){return e.codeEditor.container.find(".data-codeblock-content")},e}return Rm(n,[{key:"init",value:function(){var e=this;cy||(this.codeEditor=new Rx(this.editor,{onSave:function(t,n){e.setValue({mode:t,code:n})}}))}},{key:"toolbar",value:function(){var e=this;return[{type:"dnd"},{type:"copy"},{type:"delete"},{type:"node",node:(0,this.editor.$)("<div />"),didMount:function(t){setTimeout((function(){var n,i,r;i=t.get(),r=(null===(n=e.codeEditor)||void 0===n?void 0:n.mode)||"plain",O(zx,{defaultValue:r,getContainer:i?function(){return i}:void 0,onSelect:function(t){var n;return null===(n=e.codeEditor)||void 0===n?void 0:n.update(t)}}).mount(i)}),20)}}]}},{key:"focusEditor",value:function(){var e;null===(e=this.codeEditor)||void 0===e||e.focus()}},{key:"render",value:function(){if(this.codeEditor){this.getCenter().append(this.codeEditor.container);var e=this.getValue(),t=(null==e?void 0:e.mode)||"plain",n=(null==e?void 0:e.code)||"";Vy(this.editor)?this.codeEditor.create(t,n):this.codeEditor.render(t,n)}}}],[{key:"cardName",get:function(){return"codeblock"}},{key:"cardType",get:function(){return ky.BLOCK}}]),n}(),Fx={text:"plain",sh:"bash",ts:"typescript",js:"javascript",py:"python",puml:"plantuml",uml:"plantuml",vb:"basic",md:"markdown","c++":"cpp"},Hx=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"init",value:function(){var e=this;this.editor.on("paser:html",(function(t){return e.parseHtml(t)})),this.editor.on("paste:schema",(function(t){return e.pasteSchema(t)})),this.editor.on("paste:each",(function(t){return e.pasteHtml(t)})),Vy(this.editor)&&this.markdown&&(this.editor.on("keydown:enter",(function(t){return e.markdown(t)})),this.editor.on("paste:markdown-before",(function(t){return e.pasteMarkdown(t)})))}},{key:"execute",value:function(e,t){if(Vy(this.editor)){var n=this.editor.card.insert(Bx.cardName,{mode:e,code:t});setTimeout((function(){n.focusEditor()}),200)}}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"markdown",value:function(e){if(Vy(this.editor)&&!1!==this.options.markdown){var t=this.editor.change,n=t.getRange();if(n.collapsed&&!t.isComposing()&&this.markdown){var i=this.editor.block.closest(n.startNode);if(this.editor.node.isRootBlock(i)){var r=this.editor.block.getLeftText(i),o=/^```(.*){0,20}$/.exec(r);if(o){var a=(void 0===o[1]?"":o[1]).toLowerCase(),s=Fx[a]||a;if(s||""===s)return e.preventDefault(),this.editor.block.removeLeftText(i),this.editor.command.execute(this.constructor.pluginName,s),i.remove(),!1}}}}}},{key:"pasteSchema",value:function(e){e.add([{type:"block",name:"pre",attributes:{"data-syntax":{required:!0,value:"*"}}},{type:"block",name:"div",attributes:{"data-syntax":{required:!0,value:"*"}}}])}},{key:"pasteHtml",value:function(e){var t;if(Vy(this.editor)&&(e.attributes("data-syntax")||"code"===(null===(t=e.first())||void 0===t?void 0:t.name))){var n=new cw(e,this.editor).toText();n=Ay(n),this.editor.card.replaceNode(e,"codeblock",{mode:e.attributes("data-syntax")||"plain",code:n}),e.remove()}}},{key:"pasteMarkdown",value:function(e){var t=this;if(Vy(this.editor)&&this.markdown&&e.isText()){var n=e.text();if(n){if(/```/.exec(n)){var i=this.editor,r=i.$,o=i.card,a="",s=Object.keys(Dx).concat(Object.keys(Fx)).sort((function(e,t){return e.length>t.length?-1:1})),l=function(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",a=new cw(e.join("\n"),t.editor).toText(),s=Ay(a);s.endsWith("\n")&&(s=s.substr(0,s.length-2));var l=r("<div></div>"),c=o.replaceNode(l,"codeblock",{mode:i,code:s});return l.remove(),null===(n=c.get())||void 0===n?void 0:n.outerHTML},c=n.split(/\n|\r\n/),u=[],d=!1,h="text";c.forEach((function(e){var t=/^(.*)```(\s)*$/.exec(e);if(t&&d)return u.push(t[1]),a+=l(u,h)+"\n",h="text",d=!1,void(u=[]);if(t=/^```(.*)/.exec(e)){d=!0,h=s.find((function(e){return t&&0===t[1].indexOf(e)}))||"text";var n=0===t[1].indexOf(h)?t[1].substr(h.length+1):t[1];h=Fx[h]||h,u.push(n)}else d?u.push(e):a+=e+"\n"})),u.length>0&&(a+=l(u,h)+"\n"),e.text(a)}}}}},{key:"parseHtml",value:function(e){var t=this,n=this.editor.$;cy||e.find("[".concat(Ub,"=").concat(Bx.cardName)).each((function(e){var i=n(e),r=t.editor.card.find(i),o=null==r?void 0:r.getValue();if(o&&o.code){i.empty();var a=new Rx(t.editor,{}),s=a.container.find(".data-codeblock-content");s.css({border:"1px solid #e8e8e8","max-width":"750px"}),a.render(o.mode||"plain",o.code),s.addClass("am-engine-view"),s.hide(),document.body.appendChild(s[0]),s.traverse((function(e){var t,n;if(e.type===Node.ELEMENT_NODE&&((null===(t=e.get())||void 0===t||null===(n=t.classList)||void 0===n?void 0:n.length)||0)>0){var i=e.get(),r=window.getComputedStyle(i);["color","margin","padding","background"].forEach((function(e){i.style[e]=r.getPropertyValue(e)}))}})),s.show(),s.css("background","#f9f9f9"),i.append(s),i.removeAttributes(Ub),i.removeAttributes(Vb),i.removeAttributes("data-card-value"),i.attributes("data-syntax",o.mode||"plain"),s.removeClass("am-engine-view")}else i.remove()}))}}],[{key:"pluginName",get:function(){return"codeblock"}}]),n}(),Ux={exports:{}},Yx=Ux.exports=function(e,t,n,i){var r={features:null,bind:function(e,t,n,i){var r=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[r](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){r.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){r.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(r.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(r.features)return r.features;var e=r.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var i=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var o=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);o&&o.length>0&&(o=parseInt(o[1],10))>=1&&o<8&&(n.isOldIOSPhone=!0)}var a=i.match(/Android\s([0-9\.]*)/),s=a?a[1]:0;(s=parseFloat(s))>=1&&(s<4.4&&(n.isOldAndroid=!0),n.androidVersion=s),n.isMobileOpera=/opera mini|opera mobi/i.test(i)}for(var l,c,u=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],h=0;h<4;h++){t=d[h];for(var f=0;f<3;f++)l=u[f],c=t+(t?l.charAt(0).toUpperCase()+l.slice(1):l),!n[l]&&c in e&&(n[l]=c);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var p=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-p)),i=window.setTimeout((function(){e(t+n)}),n);return p=t+n,i},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,r.features=n,n}};r.detectFeatures(),r.features.oldIE&&(r.bind=function(e,t,n,i){t=t.split(" ");for(var r,o=(i?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(r=t[s])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+r])return!1}else n["oldIE"+r]=a;e[o]("on"+r,n["oldIE"+r])}else e[o]("on"+r,n)});var o=this,a=25,s=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};r.extend(l,i);var c,u,d,h,f,p,g,v,m,b,y,w,k,x,C,M,S,E,O,N,T,A,I,D,_,j,L,R,P,z,B,F,H,U,Y,V,W,$,G,Z,q,Q,K,X,J,ee,te,ne,ie,re,oe,ae,se,le,ce,ue,de=function(){return{x:0,y:0}},he=de(),fe=de(),pe=de(),ge={},ve=0,me={},be=de(),ye=0,we=!0,ke=[],xe={},Ce=!1,Me=function(e,t){r.extend(o,t.publicMethods),ke.push(e)},Se=function(e){var t=Jt();return e>t-1?e-t:e<0?t+e:e},Ee={},Oe=function(e,t){return Ee[e]||(Ee[e]=[]),Ee[e].push(t)},Ne=function(e){var t=Ee[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(o,n)}},Te=function(){return(new Date).getTime()},Ae=function(e){le=e,o.bg.style.opacity=e*l.bgOpacity},Ie=function(e,t,n,i,r){(!Ce||r&&r!==o.currItem)&&(i/=r?r.fitRatio:o.currItem.fitRatio),e[A]=w+t+"px, "+n+"px"+k+" scale("+i+")"},De=function(e){ie&&(e&&(b>o.currItem.fitRatio?Ce||(dn(o.currItem,!1,!0),Ce=!0):Ce&&(dn(o.currItem),Ce=!1)),Ie(ie,pe.x,pe.y,b))},_e=function(e){e.container&&Ie(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},je=function(e,t){t[A]=w+e+"px, 0px"+k},Le=function(e,t){if(!l.loop&&t){var n=h+(be.x*ve-e)/be.x,i=Math.round(e-bt.x);(n<0&&i>0||n>=Jt()-1&&i<0)&&(e=bt.x+i*l.mainScrollEndFriction)}bt.x=e,je(e,f)},Re=function(e,t){var n=yt[e]-me[e];return fe[e]+he[e]+n-n*(t/y)},Pe=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},ze=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Be=null,Fe=function(){Be&&(r.unbind(document,"mousemove",Fe),r.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,Ne("mouseUsed")),Be=setTimeout((function(){Be=null}),100)},He=function(){r.bind(document,"keydown",o),B.transform&&r.bind(o.scrollWrap,"click",o),l.mouseUsed||r.bind(document,"mousemove",Fe),r.bind(window,"resize scroll orientationchange",o),Ne("bindEvents")},Ue=function(){r.unbind(window,"resize scroll orientationchange",o),r.unbind(window,"scroll",m.scroll),r.unbind(document,"keydown",o),r.unbind(document,"mousemove",Fe),B.transform&&r.unbind(o.scrollWrap,"click",o),G&&r.unbind(window,g,o),clearTimeout(F),Ne("unbindEvents")},Ye=function(e,t){var n=sn(o.currItem,ge,e);return t&&(ne=n),n},Ve=function(e){return e||(e=o.currItem),e.initialZoomLevel},We=function(e){return e||(e=o.currItem),e.w>0?l.maxSpreadZoom:1},$e=function(e,t,n,i){return i===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=Re(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ge=function(){if(A){var t=B.perspective&&!D;return w="translate"+(t?"3d(":"("),void(k=B.perspective?", 0px)":")")}A="left",r.addClass(e,"pswp--ie"),je=function(e,t){t.left=e+"px"},_e=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,r=t*e.h;n.width=i+"px",n.height=r+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},De=function(){if(ie){var e=ie,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,r=n*t.h;e.width=i+"px",e.height=r+"px",e.left=pe.x+"px",e.top=pe.y+"px"}}},Ze=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]()))},qe=function(e){e&&(Q||q||re||W)&&(e.preventDefault(),e.stopPropagation())},Qe=function(){o.setScrollOffset(0,r.getScrollY())},Ke={},Xe=0,Je=function(e){Ke[e]&&(Ke[e].raf&&j(Ke[e].raf),Xe--,delete Ke[e])},et=function(e){Ke[e]&&Je(e),Ke[e]||(Xe++,Ke[e]={})},tt=function(){for(var e in Ke)Ke.hasOwnProperty(e)&&Je(e)},nt=function(e,t,n,i,r,o,a){var s,l=Te();et(e);var c=function(){if(Ke[e]){if((s=Te()-l)>=i)return Je(e),o(n),void(a&&a());o((n-t)*r(s/i)+t),Ke[e].raf=_(c)}};c()},it={shout:Ne,listen:Oe,viewportSize:ge,options:l,isMainScrollAnimating:function(){return re},getZoomLevel:function(){return b},getCurrentIndex:function(){return h},isDragging:function(){return G},isZooming:function(){return ee},setScrollOffset:function(e,t){me.x=e,z=me.y=t,Ne("updateScrollOffset",me)},applyZoomPan:function(e,t,n,i){pe.x=t,pe.y=n,b=e,De(i)},init:function(){if(!c&&!u){var n;o.framework=r,o.template=e,o.bg=r.getChildByClass(e,"pswp__bg"),L=e.className,c=!0,B=r.detectFeatures(),_=B.raf,j=B.caf,A=B.transform,P=B.oldIE,o.scrollWrap=r.getChildByClass(e,"pswp__scroll-wrap"),o.container=r.getChildByClass(o.scrollWrap,"pswp__container"),f=o.container.style,o.itemHolders=M=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],M[0].el.style.display=M[2].el.style.display="none",Ge(),m={resize:o.updateSize,orientationchange:function(){clearTimeout(F),F=setTimeout((function(){ge.x!==o.scrollWrap.clientWidth&&o.updateSize()}),500)},scroll:Qe,keydown:Ze,click:qe};var i=B.isOldIOSPhone||B.isOldAndroid||B.isMobileOpera;for(B.animationName&&B.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<ke.length;n++)o["init"+ke[n]]();t&&(o.ui=new t(o,r)).init(),Ne("firstUpdate"),h=h||l.index||0,(isNaN(h)||h<0||h>=Jt())&&(h=0),o.currItem=Xt(h),(B.isOldIOSPhone||B.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),l.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=r.getScrollY()+"px")),void 0===z&&(Ne("initialLayout"),z=R=r.getScrollY());var a="pswp--open ";for(l.mainClass&&(a+=l.mainClass+" "),l.showHideOpacity&&(a+="pswp--animate_opacity "),a+=D?"pswp--touch":"pswp--notouch",a+=B.animationName?" pswp--css_animation":"",a+=B.svg?" pswp--svg":"",r.addClass(e,a),o.updateSize(),p=-1,ye=null,n=0;n<s;n++)je((n+p)*be.x,M[n].el.style);P||r.bind(o.scrollWrap,v,o),Oe("initialZoomInEnd",(function(){o.setContent(M[0],h-1),o.setContent(M[2],h+1),M[0].el.style.display=M[2].el.style.display="block",l.focus&&e.focus(),He()})),o.setContent(M[1],h),o.updateCurrItem(),Ne("afterInit"),we||(x=setInterval((function(){Xe||G||ee||b!==o.currItem.initialZoomLevel||o.updateSize()}),1e3)),r.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,u=!0,Ne("close"),Ue(),en(o.currItem,null,!0,o.destroy))},destroy:function(){Ne("destroy"),Zt&&clearTimeout(Zt),e.setAttribute("aria-hidden","true"),e.className=L,x&&clearInterval(x),r.unbind(o.scrollWrap,v,o),r.unbind(window,"scroll",o),Mt(),tt(),Ee=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),pe.x=e,pe.y=t,De()},handleEvent:function(e){e=e||window.event,m[e.type]&&m[e.type](e)},goTo:function(e){var t=(e=Se(e))-h;ye=t,h=e,o.currItem=Xt(h),ve-=t,Le(be.x*ve),tt(),re=!1,o.updateCurrItem()},next:function(){o.goTo(h+1)},prev:function(){o.goTo(h-1)},updateCurrZoomItem:function(e){if(e&&Ne("beforeChange",0),M[1].el.children.length){var t=M[1].el.children[0];ie=r.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ie=null;ne=o.currItem.bounds,y=b=o.currItem.initialZoomLevel,pe.x=ne.center.x,pe.y=ne.center.y,e&&Ne("afterChange")},invalidateCurrItems:function(){C=!0;for(var e=0;e<s;e++)M[e].item&&(M[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==ye){var t,n=Math.abs(ye);if(!(e&&n<2)){o.currItem=Xt(h),Ce=!1,Ne("beforeChange",ye),n>=s&&(p+=ye+(ye>0?-s:s),n=s);for(var i=0;i<n;i++)ye>0?(t=M.shift(),M[s-1]=t,p++,je((p+2)*be.x,t.el.style),o.setContent(t,h-n+i+1+1)):(t=M.pop(),M.unshift(t),p--,je(p*be.x,t.el.style),o.setContent(t,h+n-i-1-1));if(ie&&1===Math.abs(ye)){var r=Xt(S);r.initialZoomLevel!==b&&(sn(r,ge),dn(r),_e(r))}ye=0,o.updateCurrZoomItem(),S=h,Ne("afterChange")}}},updateSize:function(t){if(!we&&l.modal){var n=r.getScrollY();if(z!==n&&(e.style.top=n+"px",z=n),!t&&xe.x===window.innerWidth&&xe.y===window.innerHeight)return;xe.x=window.innerWidth,xe.y=window.innerHeight,e.style.height=xe.y+"px"}if(ge.x=o.scrollWrap.clientWidth,ge.y=o.scrollWrap.clientHeight,Qe(),be.x=ge.x+Math.round(ge.x*l.spacing),be.y=ge.y,Le(be.x*ve),Ne("beforeResize"),void 0!==p){for(var i,a,c,u=0;u<s;u++)i=M[u],je((u+p)*be.x,i.el.style),c=h+u-1,l.loop&&Jt()>2&&(c=Se(c)),(a=Xt(c))&&(C||a.needsUpdate||!a.bounds)?(o.cleanSlide(a),o.setContent(i,c),1===u&&(o.currItem=a,o.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===i.index&&c>=0&&o.setContent(i,c),a&&a.container&&(sn(a,ge),dn(a),_e(a));C=!1}y=b=o.currItem.initialZoomLevel,(ne=o.currItem.bounds)&&(pe.x=ne.center.x,pe.y=ne.center.y,De(!0)),Ne("resize")},zoomTo:function(e,t,n,i,o){t&&(y=b,yt.x=Math.abs(t.x)-pe.x,yt.y=Math.abs(t.y)-pe.y,Pe(fe,pe));var a=Ye(e,!1),s={};$e("x",a,s,e),$e("y",a,s,e);var l=b,c={x:pe.x,y:pe.y};ze(s);var u=function(t){1===t?(b=e,pe.x=s.x,pe.y=s.y):(b=(e-l)*t+l,pe.x=(s.x-c.x)*t+c.x,pe.y=(s.y-c.y)*t+c.y),o&&o(t),De(1===t)};n?nt("customZoomTo",0,1,n,i||r.easing.sine.inOut,u):u(1)}},rt=30,ot=10,at={},st={},lt={},ct={},ut={},dt=[],ht={},ft=[],pt={},gt=0,vt=de(),mt=0,bt=de(),yt=de(),wt=de(),kt=function(e,t){return e.x===t.x&&e.y===t.y},xt=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Ct=function(e,t){return pt.x=Math.abs(e.x-t.x),pt.y=Math.abs(e.y-t.y),Math.sqrt(pt.x*pt.x+pt.y*pt.y)},Mt=function(){K&&(j(K),K=null)},St=function(){G&&(K=_(St),Ht())},Et=function(){return!("fit"===l.scaleMode&&b===o.currItem.initialZoomLevel)},Ot=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:Ot(e.parentNode,t))},Nt={},Tt=function(e,t){return Nt.prevent=!Ot(e.target,l.isClickableElement),Ne("preventDragEvent",e,t,Nt),Nt.prevent},At=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},It=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Dt=function(e,t,n){if(e-U>50){var i=ft.length>2?ft.shift():{};i.x=t,i.y=n,ft.push(i),U=e}},_t=function(){var e=pe.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(ge.y/2))},jt={},Lt={},Rt=[],Pt=function(e){for(;Rt.length>0;)Rt.pop();return I?(ue=0,dt.forEach((function(e){0===ue?Rt[0]=e:1===ue&&(Rt[1]=e),ue++}))):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Rt[0]=At(e.touches[0],jt),e.touches.length>1&&(Rt[1]=At(e.touches[1],Lt))):(jt.x=e.pageX,jt.y=e.pageY,jt.id="",Rt[0]=jt),Rt},zt=function(e,t){var n,i,r,a,s=pe[e]+t[e],c=t[e]>0,u=bt.x+t.x,d=bt.x-ht.x;if(n=s>ne.min[e]||s<ne.max[e]?l.panEndFriction:1,s=pe[e]+t[e]*n,(l.allowPanToNext||b===o.currItem.initialZoomLevel)&&(ie?"h"!==oe||"x"!==e||q||(c?(s>ne.min[e]&&(n=l.panEndFriction,ne.min[e],i=ne.min[e]-fe[e]),(i<=0||d<0)&&Jt()>1?(a=u,d<0&&u>ht.x&&(a=ht.x)):ne.min.x!==ne.max.x&&(r=s)):(s<ne.max[e]&&(n=l.panEndFriction,ne.max[e],i=fe[e]-ne.max[e]),(i<=0||d>0)&&Jt()>1?(a=u,d>0&&u<ht.x&&(a=ht.x)):ne.min.x!==ne.max.x&&(r=s))):a=u,"x"===e))return void 0!==a&&(Le(a,!0),X=a!==ht.x),ne.min.x!==ne.max.x&&(void 0!==r?pe.x=r:X||(pe.x+=t.x*n)),void 0!==a;re||X||b>o.currItem.fitRatio&&(pe[e]+=t[e]*n)},Bt=function(e){if(!("mousedown"===e.type&&e.button>0))if(Kt)e.preventDefault();else if(!$||"mousedown"!==e.type){if(Tt(e,!0)&&e.preventDefault(),Ne("pointerDown"),I){var t=r.arraySearch(dt,e.pointerId,"id");t<0&&(t=dt.length),dt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Pt(e),i=n.length;J=null,tt(),G&&1!==i||(G=ae=!0,r.bind(window,g,o),V=ce=se=W=X=Q=Z=q=!1,oe=null,Ne("firstTouchStart",n),Pe(fe,pe),he.x=he.y=0,Pe(ct,n[0]),Pe(ut,ct),ht.x=be.x*ve,ft=[{x:ct.x,y:ct.y}],U=H=Te(),Ye(b,!0),Mt(),St()),!ee&&i>1&&!re&&!X&&(y=b,q=!1,ee=Z=!0,he.y=he.x=0,Pe(fe,pe),Pe(at,n[0]),Pe(st,n[1]),It(at,st,wt),yt.x=Math.abs(wt.x)-pe.x,yt.y=Math.abs(wt.y)-pe.y,te=Ct(at,st))}},Ft=function(e){if(e.preventDefault(),I){var t=r.arraySearch(dt,e.pointerId,"id");if(t>-1){var n=dt[t];n.x=e.pageX,n.y=e.pageY}}if(G){var i=Pt(e);if(oe||Q||ee)J=i;else if(bt.x!==be.x*ve)oe="h";else{var o=Math.abs(i[0].x-ct.x)-Math.abs(i[0].y-ct.y);Math.abs(o)>=ot&&(oe=o>0?"h":"v",J=i)}}},Ht=function(){if(J){var e=J.length;if(0!==e)if(Pe(at,J[0]),lt.x=at.x-ct.x,lt.y=at.y-ct.y,ee&&e>1){if(ct.x=at.x,ct.y=at.y,!lt.x&&!lt.y&&kt(J[1],st))return;Pe(st,J[1]),q||(q=!0,Ne("zoomGestureStarted"));var t=Ct(at,st),n=$t(t);n>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(ce=!0);var i=1,r=Ve(),a=We();if(n<r)if(l.pinchToClose&&!ce&&y<=o.currItem.initialZoomLevel){var s=1-(r-n)/(r/1.2);Ae(s),Ne("onPinchClose",s),se=!0}else(i=(r-n)/r)>1&&(i=1),n=r-i*(r/3);else n>a&&((i=(n-a)/(6*r))>1&&(i=1),n=a+i*r);i<0&&(i=0),It(at,st,vt),he.x+=vt.x-wt.x,he.y+=vt.y-wt.y,Pe(wt,vt),pe.x=Re("x",n),pe.y=Re("y",n),V=n>b,b=n,De()}else{if(!oe)return;if(ae&&(ae=!1,Math.abs(lt.x)>=ot&&(lt.x-=J[0].x-ut.x),Math.abs(lt.y)>=ot&&(lt.y-=J[0].y-ut.y)),ct.x=at.x,ct.y=at.y,0===lt.x&&0===lt.y)return;if("v"===oe&&l.closeOnVerticalDrag&&!Et()){he.y+=lt.y,pe.y+=lt.y;var c=_t();return W=!0,Ne("onVerticalDrag",c),Ae(c),void De()}Dt(Te(),at.x,at.y),Q=!0,ne=o.currItem.bounds,zt("x",lt)||(zt("y",lt),ze(pe),De())}}},Ut=function(e){if(B.isOldAndroid){if($&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout($),$=setTimeout((function(){$=0}),600))}var t;if(Ne("pointerUp"),Tt(e,!1)&&e.preventDefault(),I){var n=r.arraySearch(dt,e.pointerId,"id");if(n>-1)if(t=dt.splice(n,1)[0],navigator.msPointerEnabled){var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var a,s=Pt(e),c=s.length;if("mouseup"===e.type&&(c=0),2===c)return J=null,!0;1===c&&Pe(ut,s[0]),0!==c||oe||re||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ne("touchRelease",e,t));var u=-1;if(0===c&&(G=!1,r.unbind(window,g,o),Mt(),ee?u=0:-1!==mt&&(u=Te()-mt)),mt=1===c?Te():-1,a=-1!==u&&u<150?"zoom":"swipe",ee&&c<2&&(ee=!1,1===c&&(a="zoomPointerUp"),Ne("zoomGestureEnded")),J=null,Q||q||re||W)if(tt(),Y||(Y=Yt()),Y.calculateSwipeSpeed("x"),W)if(_t()<l.verticalDragRange)o.close();else{var d=pe.y,h=le;nt("verticalDrag",0,1,300,r.easing.cubic.out,(function(e){pe.y=(o.currItem.initialPosition.y-d)*e+d,Ae((1-h)*e+h),De()})),Ne("onVerticalDrag",1)}else{if((X||re)&&0===c){if(Wt(a,Y))return;a="zoomPointerUp"}re||("swipe"===a?!X&&b>o.currItem.fitRatio&&Vt(Y):Gt())}},Yt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){ft.length>1?(e=Te()-U+50,t=ft[ft.length-2][i]):(e=Te()-H,t=ut[i]),n.lastFlickOffset[i]=ct[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(pe[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:pe[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,pe[e],n.backAnimDestination[e],t||300,r.easing.sine.out,(function(t){pe[e]=t,De()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,pe[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Ke.zoomPan&&(Ke.zoomPan.raf=_(n.panAnimLoop),n.now=Te(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),De(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return pe.x=Math.round(pe.x),pe.y=Math.round(pe.y),De(),void Je("zoomPan")}};return n},Vt=function(e){if(e.calculateSwipeSpeed("y"),ne=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;et("zoomPan"),e.lastNow=Te(),e.panAnimLoop()},Wt=function(e,t){var n,i,a;if(re||(gt=h),"swipe"===e){var s=ct.x-ut.x,c=t.lastFlickDist.x<10;s>rt&&(c||t.lastFlickOffset.x>20)?i=-1:s<-rt&&(c||t.lastFlickOffset.x<-20)&&(i=1)}i&&((h+=i)<0?(h=l.loop?Jt()-1:0,a=!0):h>=Jt()&&(h=l.loop?0:Jt()-1,a=!0),a&&!l.loop||(ye+=i,ve-=i,n=!0));var u,d=be.x*ve,f=Math.abs(d-bt.x);return n||d>bt.x==t.lastFlickSpeed.x>0?(u=Math.abs(t.lastFlickSpeed.x)>0?f/Math.abs(t.lastFlickSpeed.x):333,u=Math.min(u,400),u=Math.max(u,250)):u=333,gt===h&&(n=!1),re=!0,Ne("mainScrollAnimStart"),nt("mainScroll",bt.x,d,u,r.easing.cubic.out,Le,(function(){tt(),re=!1,gt=-1,(n||gt!==h)&&o.updateCurrItem(),Ne("mainScrollAnimComplete")})),n&&o.updateCurrItem(!0),n},$t=function(e){return 1/te*e*y},Gt=function(){var e=b,t=Ve(),n=We();b<t?e=t:b>n&&(e=n);var i,a=1,s=le;return se&&!V&&!ce&&b<t?(o.close(),!0):(se&&(i=function(e){Ae((a-s)*e+s)}),o.zoomTo(e,0,200,r.easing.cubic.out,i),!0)};Me("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,r){E=e+t,O=e+n,N=e+i,T=r?e+r:""};(I=B.pointerEvent)&&B.touch&&(B.touch=!1),I?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):B.touch?(e("touch","start","move","end","cancel"),D=!0):e("mouse","down","move","up"),g=O+" "+N+" "+T,v=E,I&&!D&&(D=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=D,m[E]=Bt,m[O]=Ft,m[N]=Ut,T&&(m[T]=m[N]),B.touch&&(v+=" mousedown",g+=" mousemove mouseup",m.mousedown=m[E],m.mousemove=m[O],m.mouseup=m[N]),D||(l.allowPanToNext=!1)}}});var Zt,qt,Qt,Kt,Xt,Jt,en=function(t,n,i,a){var s;Zt&&clearTimeout(Zt),Kt=!0,Qt=!0,t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=l.getThumbBoundsFn&&l.getThumbBoundsFn(h);var c,u,f=i?l.hideAnimationDuration:l.showAnimationDuration,p=function(){Je("initialZoom"),i?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(Ae(1),n&&(n.style.display="block"),r.addClass(e,"pswp--animated-in"),Ne("initialZoom"+(i?"OutEnd":"InEnd"))),a&&a(),Kt=!1};if(!f||!s||void 0===s.x)return Ne("initialZoom"+(i?"Out":"In")),b=t.initialZoomLevel,Pe(pe,t.initialPosition),De(),e.style.opacity=i?0:1,Ae(1),void(f?setTimeout((function(){p()}),f):p());c=d,u=!o.currItem.src||o.currItem.loadError||l.showHideOpacity,t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(b=s.w/t.w,pe.x=s.x,pe.y=s.y-R,o[u?"template":"bg"].style.opacity=.001,De()),et("initialZoom"),i&&!c&&r.removeClass(e,"pswp--animated-in"),u&&(i?r[(c?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){r.addClass(e,"pswp--animate_opacity")}),30)),Zt=setTimeout((function(){if(Ne("initialZoom"+(i?"Out":"In")),i){var n=s.w/t.w,o={x:pe.x,y:pe.y},a=b,l=le,d=function(t){1===t?(b=n,pe.x=s.x,pe.y=s.y-z):(b=(n-a)*t+a,pe.x=(s.x-o.x)*t+o.x,pe.y=(s.y-z-o.y)*t+o.y),De(),u?e.style.opacity=1-t:Ae(l-t*l)};c?nt("initialZoom",0,1,f,r.easing.cubic.out,d,p):(d(1),Zt=setTimeout(p,f+20))}else b=t.initialZoomLevel,Pe(pe,t.initialPosition),De(),Ae(1),u?e.style.opacity=1:Ae(1),Zt=setTimeout(p,f+20)}),i?25:90)},tn={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return qt.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var i=e.bounds;i.center.x=Math.round((tn.x-t)/2),i.center.y=Math.round((tn.y-n)/2)+e.vGap.top,i.max.x=t>tn.x?Math.round(tn.x-t):i.center.x,i.max.y=n>tn.y?Math.round(tn.y-n)+e.vGap.top:i.center.y,i.min.x=t>tn.x?0:i.center.x,i.min.y=n>tn.y?e.vGap.top:i.center.y},sn=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Ne("parseVerticalMargin",e)),tn.x=t.x,tn.y=t.y-e.vGap.top-e.vGap.bottom,i){var r=tn.x/e.w,o=tn.y/e.h;e.fitRatio=r<o?r:o;var a=l.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=on())}if(!n)return;return an(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds},ln=function(e,t,n,i,r,a){t.loadError||i&&(t.imageAppended=!0,dn(t,i,t===o.currItem&&Ce),n.appendChild(i),a&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=r.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},un=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0},dn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),r=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=r+"px"),t.style.width=i+"px",t.style.height=r+"px"}},hn=function(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&ln(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}};Me("Controller",{publicMethods:{lazyLoadItem:function(e){e=Se(e);var t=Xt(e);t&&(!t.loaded&&!t.loading||C)&&(Ne("gettingData",e,t),t.src&&cn(t))},initController:function(){r.extend(l,rn,!0),o.items=qt=n,Xt=o.getItemAt,(Jt=l.getNumItemsFn)()<3&&(l.loop=!1),Oe("beforeChange",(function(e){var t,n=l.preload,i=null===e||e>=0,r=Math.min(n[0],Jt()),a=Math.min(n[1],Jt());for(t=1;t<=(i?a:r);t++)o.lazyLoadItem(h+t);for(t=1;t<=(i?r:a);t++)o.lazyLoadItem(h-t)})),Oe("initialLayout",(function(){o.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(h)})),Oe("mainScrollAnimComplete",hn),Oe("initialZoomInEnd",hn),Oe("destroy",(function(){for(var e,t=0;t<qt.length;t++)(e=qt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null}))},getItemAt:function(e){return e>=0&&void 0!==qt[e]&&qt[e]},allowProgressiveImg:function(){return l.forceProgressiveLoading||!D||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Se(t));var n=o.getItemAt(e.index);n&&(n.container=null);var i,a=o.getItemAt(t);if(a){Ne("gettingData",t,a),e.index=t,e.item=a;var s=a.container=r.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?s.appendChild(a.html):s.innerHTML=a.html),un(a),sn(a,ge),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&((i=r.createEl("pswp__img","img")).style.opacity=1,i.src=a.src,dn(a,i),ln(t,a,s,i));else{if(a.loadComplete=function(n){if(c){if(e&&e.index===t){if(un(n,!0))return n.loadComplete=n.img=null,sn(n,ge),_e(n),void(e.index===h&&o.updateCurrZoomItem());n.imageAppended?!Kt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):B.transform&&(re||Kt)?nn.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):ln(t,n,s,n.img,re||Kt,!0)}n.loadComplete=null,n.img=null,Ne("imageLoadComplete",t,n)}},r.features.transform){var u="pswp__img pswp__img--placeholder";u+=a.msrc?"":" pswp__img--placeholder--blank";var d=r.createEl(u,a.msrc?"img":"");a.msrc&&(d.src=a.msrc),dn(a,d),s.appendChild(d),a.placeholder=d}a.loading||cn(a),o.allowProgressiveImg()&&(!Qt&&B.transform?nn.push({item:a,baseDiv:s,img:a.img,index:t,holder:e}):ln(t,a,s,a.img,!0,!0))}Qt||t!==h?_e(a):(ie=s.style,en(a,i||a.img)),e.el.innerHTML="",e.el.appendChild(s)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var fn,pn,gn={},vn=function(e,t,n){var i=document.createEvent("CustomEvent"),r={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,r),e.target.dispatchEvent(i)};Me("Tap",{publicMethods:{initTap:function(){Oe("firstTouchStart",o.onTapStart),Oe("touchRelease",o.onTapRelease),Oe("destroy",(function(){gn={},fn=null}))},onTapStart:function(e){e.length>1&&(clearTimeout(fn),fn=null)},onTapRelease:function(e,t){if(t&&!Q&&!Z&&!Xe){var n=t;if(fn&&(clearTimeout(fn),fn=null,xt(n,gn)))return void Ne("doubleTap",n);if("mouse"===t.type)return void vn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||r.hasClass(e.target,"pswp__single-tap"))return void vn(e,t);Pe(gn,n),fn=setTimeout((function(){vn(e,t),fn=null}),300)}}}}),Me("DesktopZoom",{publicMethods:{initDesktopZoom:function(){P||(D?Oe("mouseUsed",(function(){o.setupDesktopZoom()})):o.setupDesktopZoom(!0))},setupDesktopZoom:function(t){pn={};var n="wheel mousewheel DOMMouseScroll";Oe("bindEvents",(function(){r.bind(e,n,o.handleMouseWheel)})),Oe("unbindEvents",(function(){pn&&r.unbind(e,n,o.handleMouseWheel)})),o.mouseZoomedIn=!1;var i,a=function(){o.mouseZoomedIn&&(r.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),b<1?r.addClass(e,"pswp--zoom-allowed"):r.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){i&&(r.removeClass(e,"pswp--dragging"),i=!1)};Oe("resize",a),Oe("afterChange",a),Oe("pointerDown",(function(){o.mouseZoomedIn&&(i=!0,r.addClass(e,"pswp--dragging"))})),Oe("pointerUp",s),t||a()},handleMouseWheel:function(e){if(b<=o.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Xe||G?e.preventDefault():A&&Math.abs(e.deltaY)>2&&(d=!0,o.close())),!0;if(e.stopPropagation(),pn.x=0,"deltaX"in e)1===e.deltaMode?(pn.x=18*e.deltaX,pn.y=18*e.deltaY):(pn.x=e.deltaX,pn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(pn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?pn.y=-.16*e.wheelDeltaY:pn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;pn.y=e.detail}Ye(b,!0);var t=pe.x-pn.x,n=pe.y-pn.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ge.x/2+me.x,y:ge.y/2+me.y};var n=l.getDoubleTapZoom(!0,o.currItem),i=b===n;o.mouseZoomedIn=!i,o.zoomTo(i?o.currItem.initialZoomLevel:n,t,333),r[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var mn,bn,yn,wn,kn,xn,Cn,Mn,Sn,En,On,Nn,Tn={history:!0,galleryUID:1},An=function(){return On.hash.substring(1)},In=function(){mn&&clearTimeout(mn),yn&&clearTimeout(yn)},Dn=function(){var e=An(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var r=i[n].split("=");r.length<2||(t[r[0]]=r[1])}if(l.galleryPIDs){var o=t.pid;for(t.pid=0,n=0;n<qt.length;n++)if(qt[n].pid===o){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},_n=function(){if(yn&&clearTimeout(yn),Xe||G)yn=setTimeout(_n,500);else{wn?clearTimeout(bn):wn=!0;var e=h+1,t=Xt(h);t.hasOwnProperty("pid")&&(e=t.pid);var n=Cn+"&gid="+l.galleryUID+"&pid="+e;Mn||-1===On.hash.indexOf(n)&&(En=!0);var i=On.href.split("#")[0]+"#"+n;Nn?"#"+n!==window.location.hash&&history[Mn?"replaceState":"pushState"]("",document.title,i):Mn?On.replace(i):On.hash=n,Mn=!0,bn=setTimeout((function(){wn=!1}),60)}};Me("History",{publicMethods:{initHistory:function(){if(r.extend(l,Tn,!0),l.history){On=window.location,En=!1,Sn=!1,Mn=!1,Cn=An(),Nn="pushState"in history,Cn.indexOf("gid=")>-1&&(Cn=(Cn=Cn.split("&gid=")[0]).split("?gid=")[0]),Oe("afterChange",o.updateURL),Oe("unbindEvents",(function(){r.unbind(window,"hashchange",o.onHashChange)}));var e=function(){xn=!0,Sn||(En?history.back():Cn?On.hash=Cn:Nn?history.pushState("",document.title,On.pathname+On.search):On.hash=""),In()};Oe("unbindEvents",(function(){d&&e()})),Oe("destroy",(function(){xn||e()})),Oe("firstUpdate",(function(){h=Dn().pid}));var t=Cn.indexOf("pid=");t>-1&&"&"===(Cn=Cn.substring(0,t)).slice(-1)&&(Cn=Cn.slice(0,-1)),setTimeout((function(){c&&r.bind(window,"hashchange",o.onHashChange)}),40)}},onHashChange:function(){if(An()===Cn)return Sn=!0,void o.close();wn||(kn=!0,o.goTo(Dn().pid),kn=!1)},updateURL:function(){In(),kn||(Mn?mn=setTimeout(_n,800):_n())}}}),r.extend(o,it)},Vx={exports:{}},Wx=Vx.exports=function(e,t){var n,i,r,o,a,s,l,c,u,d,h,f,p,g,v,m,b,y,w=this,k=!1,x=!0,C=!0,M={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},S=function(e){if(m)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!u&&L();for(var n,i,r=(e.target||e.srcElement).getAttribute("class")||"",o=0;o<Y.length;o++)(n=Y[o]).onTap&&r.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),m=!0;var a=t.features.isOldAndroid?600:30;setTimeout((function(){m=!1}),a)}},E=function(){return!e.likelyTouchDevice||v.mouseUsed||screen.width>v.fitControlsWidth},O=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},N=function(){var e=1===v.getNumItemsFn();e!==g&&(O(i,"ui--one-slide",e),g=e)},T=function(){O(l,"share-modal--hidden",C)},A=function(){return(C=!C)?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout((function(){C&&T()}),300)):(T(),setTimeout((function(){C||t.addClass(l,"pswp__share-modal--fade-in")}),30)),C||D(),!1},I=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),C||A(),1))},D=function(){for(var e,t,n,i,r="",o=0;o<v.shareButtons.length;o++)e=v.shareButtons[o],t=v.getImageURLForShare(e),n=v.getPageURLForShare(e),i=v.getTextForShare(e),r+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(i))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(r=v.parseShareButtonOut(e,r));l.children[0].innerHTML=r,l.children[0].onclick=I},_=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},j=0,L=function(){clearTimeout(y),j=0,u&&w.setIdle(!1)},R=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(y),y=setTimeout((function(){w.setIdle(!0)}),v.timeToIdleOutside))},P=function(){v.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},z=function(){v.preloaderEl&&(B(!0),d("beforeChange",(function(){clearTimeout(p),p=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&B(!1):B(!0)}),v.loadingIndicatorDelay)})),d("imageLoadComplete",(function(t,n){e.currItem===n&&B(!0)})))},B=function(e){f!==e&&(O(h,"preloader--active",!e),f=e)},F=function(e){var n=e.vGap;if(E()){var a=v.barsSize;if(v.captionEl&&"auto"===a.bottom)if(o||((o=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),i.insertBefore(o,r),t.addClass(i,"pswp__ui--fit")),v.addCaptionHTMLFn(e,o,!0)){var s=o.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},H=function(){v.timeToIdle&&d("mouseUsed",(function(){t.bind(document,"mousemove",L),t.bind(document,"mouseout",R),b=setInterval((function(){2==++j&&w.setIdle(!0)}),v.timeToIdle/2)}))},U=function(){var e;d("onVerticalDrag",(function(e){x&&e<.95?w.hideControls():!x&&e>=.95&&w.showControls()})),d("onPinchClose",(function(t){x&&t<.9?(w.hideControls(),e=!0):e&&!x&&t>.9&&w.showControls()})),d("zoomGestureEnded",(function(){(e=!1)&&!x&&w.showControls()}))},Y=[{name:"caption",option:"captionEl",onInit:function(e){r=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){A()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){A()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){h=e}}],V=function(){var e,n,r,o=function(i){if(i)for(var o=i.length,a=0;a<o;a++){e=i[a],n=e.className;for(var s=0;s<Y.length;s++)r=Y[s],n.indexOf("pswp__"+r.name)>-1&&(v[r.option]?(t.removeClass(e,"pswp__element--disabled"),r.onInit&&r.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};o(i.children);var a=t.getChildByClass(i,"pswp__top-bar");a&&o(a.children)};w.init=function(){t.extend(e.options,M,!0),v=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,U(),d("beforeChange",w.update),d("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)})),d("preventDragEvent",(function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)})),d("bindEvents",(function(){t.bind(i,"pswpTap click",S),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),d("unbindEvents",(function(){C||A(),b&&clearInterval(b),t.unbind(document,"mouseout",R),t.unbind(document,"mousemove",L),t.unbind(i,"pswpTap click",S),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)})),d("destroy",(function(){v.captionEl&&(o&&i.removeChild(o),t.removeClass(r,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),w.setIdle(!1)})),v.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",(function(){v.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")})),d("initialZoomOut",(function(){t.addClass(i,"pswp__ui--hidden")})),d("parseVerticalMargin",F),V(),v.shareEl&&s&&l&&(C=!0),N(),H(),P(),z()},w.setIdle=function(e){u=e,O(i,"ui--idle",e)},w.update=function(){x&&e.currItem?(w.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,r),O(r,"caption--empty",!e.currItem.title)),k=!0):k=!1,C||A(),N()},w.updateFullscreen=function(i){i&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){v.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},w.onGlobalTap=function(n){var i=(n=n||window.event).target||n.srcElement;if(!m)if(n.detail&&"mouse"===n.detail.pointerType){if(_(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(x?w.hideControls():w.showControls()),v.tapToClose&&(t.hasClass(i,"pswp__img")||_(i)))return void e.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;O(i,"ui--over-close",_(t))},w.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),x=!1},w.showControls=function(){x=!0,k||w.update(),t.removeClass(i,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}},$x=function(){function e(t,n){jm(this,e),this.prevStatus="default",this.nextStatus="default",this.zoomInStatus="default",this.zoomOutStatus="default",this.originSizeStatus="default",this.bestSizeStatus="default",this.editor=t,this.pswp=n}return Rm(e,[{key:"init",value:function(){var e=this;this.pswp.on("afterzoom",(function(){e.afterZoom()})),this.pswp.on("afterchange",(function(){e.afterChange()})),this.pswp.on("resize",(function(){setTimeout((function(){e.afterChange(),e.afterZoom()}),333)})),this.render()}},{key:"renderTemplate",value:function(){var e=this,t=this.editor.$('\n        <div class="data-pswp-tool-bar">\n            <div class="pswp-toolbar-content"></div>\n        </div>\n        '),n=t.find(".pswp-toolbar-content"),i=this.editor.language.get("image");return n.append(this.renderBtn("arrow-left",i.prev,this.prevStatus,(function(){"disable"!==e.prevStatus&&e.pswp.prev()}))),n.append('<span class="data-pswp-counter"></span>'),n.append(this.renderBtn("arrow-right",i.next,this.nextStatus,(function(){"disable"!==e.nextStatus&&e.pswp.next()}))),n.append('<span class="separation"></span>'),n.append(this.renderBtn("zoom-in",i.zoomIn,this.zoomInStatus,(function(){"disable"!==e.zoomInStatus&&e.pswp.zoomIn()}))),n.append(this.renderBtn("zoom-out",i.zoomOut,this.zoomOutStatus,(function(){"disable"!==e.zoomOutStatus&&e.pswp.zoomOut()}))),n.append(this.renderBtn("origin-size",i.originSize,this.originSizeStatus,(function(){"disable"!==e.originSizeStatus&&e.pswp.zoomToOriginSize()}))),n.append(this.renderBtn("best-size",i.bestSize,this.bestSizeStatus,(function(){"disable"!==e.bestSizeStatus&&e.pswp.zoomToBestSize()}))),t}},{key:"afterZoom",value:function(){var e=this.pswp.getCurrentZoomLevel(),t=this.pswp.getInitialZoomLevel(),n="default";e===t&&(n="activated"),1===t&&(n="disable"),this.zoomOutStatus=.05===e?"disable":"default",this.zoomInStatus=5===e?"disable":"default",this.originSizeStatus=1===e?"activated":"default",this.bestSizeStatus=n,this.render()}},{key:"afterChange",value:function(){var e=this.pswp.getCount();this.nextStatus=1===e?"disable":"default",this.prevStatus=1===e?"disable":"default",this.render()}},{key:"renderBtn",value:function(e,t,n,i){var r=this.editor.$('<span class="data-pswp-'.concat(e," btn ").concat(n,'"></span>')),o=new Nw(this.editor);return r.on("mouseenter",(function(){o.show(r,t)})),r.on("mouseleave",(function(){o.hide()})),r.on("mousedown",(function(e){e.stopPropagation(),o.hide()})),r.on("click",i),r}},{key:"render",value:function(){this.pswp.barUI.empty(),this.pswp.barUI.append(this.renderTemplate())}}]),e}();function Gx(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}Gx(".pswp .data-pswp-tool-bar {\n    position: absolute;\n    top: initial;\n    margin: 0 auto;\n    bottom: 20px;\n    vertical-align: middle;\n    height: 54px;\n    width: 100%;\n    text-align: center;\n   \n}\n\n.pswp .data-pswp-tool-bar .separation {\n    width: 1px;\n    margin: 0px 10px;\n    display: inline-block;\n    height: 20px;\n    border: 0.5px solid #383838;\n   \n}\n\n.pswp .data-pswp-tool-bar .btn {\n    color: #D9D9D9;\n    display: inline-block;\n    width: 32px;\n    height: 32px;\n    padding: 6px;\n    margin: 0 6px;\n    border: 1px solid #383838;\n    border-radius: 2px;\n   \n}\n\n.pswp .data-pswp-tool-bar .btn::before {\n    width: 20px;\n    height: 20px;\n    margin: 0 auto;\n    content: ' ';\n    display: inline-block;\n    background-repeat: no-repeat;\n    opacity: 0.65;\n    background-position: -1px -1px;\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-arrow-left {\n    padding: 8px;\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-arrow-right {\n    padding: 8px;\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-arrow-left::before {\n    width: 16px;\n    height: 16px;\n    background-size: 16px 16px;\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5sZWZ0LWNpcmNsZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJsZWZ0LWNpcmNsZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImxlZnQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTQuMTQwNjI1LDQuMjYzNjcxODggTDE0LjE0MDYyNSwyLjc1MzkwNjI1IEMxNC4xNDA2MjUsMi42MjMwNDY4OCAxMy45OTAyMzQ0LDIuNTUwNzgxMjUgMTMuODg4NjcxOSwyLjYzMDg1OTM3IEw1LjA4Mzk4NDM4LDkuNTA3ODEyNSBDNC43NjM2NzE4OCw5Ljc1NzgxMjUgNC43NjM2NzE4OCwxMC4yNDAyMzQ0IDUuMDgzOTg0MzgsMTAuNDkwMjM0NCBMMTMuODg4NjcxOSwxNy4zNjcxODc1IEMxMy45OTIxODc1LDE3LjQ0NzI2NTYgMTQuMTQwNjI1LDE3LjM3NSAxNC4xNDA2MjUsMTcuMjQ0MTQwNiBMMTQuMTQwNjI1LDE1LjczNDM3NSBDMTQuMTQwNjI1LDE1LjYzODY3MTkgMTQuMDk1NzAzMSwxNS41NDY4NzUgMTQuMDIxNDg0NCwxNS40ODgyODEzIEw2Ljk5MDIzNDM4LDEwIEwxNC4wMjE0ODQ0LDQuNTA5NzY1NjMgQzE0LjA5NTcwMzEsNC40NTExNzE4OCAxNC4xNDA2MjUsNC4zNTkzNzUgMTQuMTQwNjI1LDQuMjYzNjcxODggWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-arrow-right::before {\n    width: 16px;\n    height: 16px;\n    background-size: 16px 16px;\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5yaWdodC1jaXJjbGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0icmlnaHQtY2lyY2xlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0icmlnaHQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTQuOTU1MDc4MSw5LjUwNzgxMjUgTDYuMTUwMzkwNjIsMi42MzA4NTkzNyBDNi4wNDY4NzUsMi41NTA3ODEyNSA1Ljg5ODQzNzUsMi42MjMwNDY4NyA1Ljg5ODQzNzUsMi43NTM5MDYyNSBMNS44OTg0Mzc1LDQuMjYzNjcxODggQzUuODk4NDM3NSw0LjM1OTM3NSA1Ljk0MzM1OTM4LDQuNDUxMTcxODggNi4wMTc1NzgxMiw0LjUwOTc2NTYyIEwxMy4wNDg4MjgxLDEwIEw2LjAxNzU3ODEyLDE1LjQ5MDIzNDQgQzUuOTQxNDA2MjUsMTUuNTQ4ODI4MSA1Ljg5ODQzNzUsMTUuNjQwNjI1IDUuODk4NDM3NSwxNS43MzYzMjgxIEw1Ljg5ODQzNzUsMTcuMjQ2MDkzOCBDNS44OTg0Mzc1LDE3LjM3Njk1MzEgNi4wNDg4MjgxMiwxNy40NDkyMTg4IDYuMTUwMzkwNjIsMTcuMzY5MTQwNiBMMTQuOTU1MDc4MSwxMC40OTIxODc1IEMxNS4yNzUzOTA2LDEwLjI0MjE4NzUgMTUuMjc1MzkwNiw5Ljc1NzgxMjUgMTQuOTU1MDc4MSw5LjUwNzgxMjUgWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-zoom-in::before {\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT56b29tIGluPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Inpvb20taW4iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDQxNDA2Myw4LjY1MjM0Mzc1IEwxMC4xMzY3MTg4LDguNjUyMzQzNzUgTDEwLjEzNjcxODgsNi4wMzUxNTYyNSBDMTAuMTM2NzE4OCw1Ljk0OTIxODc1IDEwLjA2NjQwNjMsNS44Nzg5MDYyNSA5Ljk4MDQ2ODc1LDUuODc4OTA2MjUgTDguODA4NTkzNzUsNS44Nzg5MDYyNSBDOC43MjI2NTYyNSw1Ljg3ODkwNjI1IDguNjUyMzQzNzUsNS45NDkyMTg3NSA4LjY1MjM0Mzc1LDYuMDM1MTU2MjUgTDguNjUyMzQzNzUsOC42NTIzNDM3NSBMNi4zNDc2NTYyNSw4LjY1MjM0Mzc1IEM2LjI2MTcxODc1LDguNjUyMzQzNzUgNi4xOTE0MDYyNSw4LjcyMjY1NjI1IDYuMTkxNDA2MjUsOC44MDg1OTM3NSBMNi4xOTE0MDYyNSw5Ljk4MDQ2ODc1IEM2LjE5MTQwNjI1LDEwLjA2NjQwNjMgNi4yNjE3MTg3NSwxMC4xMzY3MTg4IDYuMzQ3NjU2MjUsMTAuMTM2NzE4OCBMOC42NTIzNDM3NSwxMC4xMzY3MTg4IEw4LjY1MjM0Mzc1LDEyLjc1MzkwNjMgQzguNjUyMzQzNzUsMTIuODM5ODQzNyA4LjcyMjY1NjI1LDEyLjkxMDE1NjMgOC44MDg1OTM3NSwxMi45MTAxNTYzIEw5Ljk4MDQ2ODc1LDEyLjkxMDE1NjMgQzEwLjA2NjQwNjMsMTIuOTEwMTU2MyAxMC4xMzY3MTg4LDEyLjgzOTg0MzcgMTAuMTM2NzE4OCwxMi43NTM5MDYzIEwxMC4xMzY3MTg4LDEwLjEzNjcxODggTDEyLjQ0MTQwNjMsMTAuMTM2NzE4OCBDMTIuNTI3MzQzNywxMC4xMzY3MTg4IDEyLjU5NzY1NjMsMTAuMDY2NDA2MyAxMi41OTc2NTYzLDkuOTgwNDY4NzUgTDEyLjU5NzY1NjMsOC44MDg1OTM3NSBDMTIuNTk3NjU2Myw4LjcyMjY1NjI1IDEyLjUyNzM0MzcsOC42NTIzNDM3NSAxMi40NDE0MDYzLDguNjUyMzQzNzUgWiBNMTcuOTg4MjgxMywxNi45MzM1OTM4IEwxNS4xMzY3MTg4LDE0LjA4MjAzMTMgQzE3LjUyMTQ4NDQsMTEuMTczODI4MSAxNy4zNTU0Njg4LDYuODY1MjM0MzggMTQuNjI4OTA2Myw0LjE0MDYyNSBDMTEuNzM4MjgxMywxLjI0ODA0Njg4IDcuMDQyOTY4NzUsMS4yNDgwNDY4OCA0LjE0MDYyNSw0LjE0MDYyNSBDMS4yNDgwNDY4OCw3LjA0Mjk2ODc1IDEuMjQ4MDQ2ODgsMTEuNzM4MjgxMyA0LjE0MDYyNSwxNC42Mjg5MDYzIEM2Ljg2NTIzNDM4LDE3LjM1NTQ2ODggMTEuMTczODI4MSwxNy41MjE0ODQ0IDE0LjA4MjAzMTMsMTUuMTM2NzE4OCBMMTYuOTMzNTkzOCwxNy45ODgyODEzIEMxNi45OTYwOTM4LDE4LjA0Mjk2ODggMTcuMDk1NzAzMSwxOC4wNDI5Njg4IDE3LjE0ODQzNzUsMTcuOTg4MjgxMyBMMTcuOTg4MjgxMywxNy4xNDg0Mzc1IEMxOC4wNDI5Njg4LDE3LjA5NTcwMzEgMTguMDQyOTY4OCwxNi45OTYwOTM4IDE3Ljk4ODI4MTMsMTYuOTMzNTkzOCBaIE0xMy41OTM3NSwxMy41OTM3NSBDMTEuMjczNDM3NSwxNS45MTIxMDk0IDcuNTE1NjI1LDE1LjkxMjEwOTQgNS4xOTUzMTI1LDEzLjU5Mzc1IEMyLjg3Njk1MzEzLDExLjI3MzQzNzUgMi44NzY5NTMxMyw3LjUxNTYyNSA1LjE5NTMxMjUsNS4xOTUzMTI1IEM3LjUxNTYyNSwyLjg3Njk1MzEzIDExLjI3MzQzNzUsMi44NzY5NTMxMyAxMy41OTM3NSw1LjE5NTMxMjUgQzE1LjkxMjEwOTQsNy41MTU2MjUgMTUuOTEyMTA5NCwxMS4yNzM0Mzc1IDEzLjU5Mzc1LDEzLjU5Mzc1IFoiIGlkPSLlvaLnirYiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-zoom-out::before {\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT56b29tIG91dDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJ6b29tLW91dCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iMCIgeD0iMCIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40NDE0MDYzLDguNjUyMzQzNzUgTDYuMzQ3NjU2MjUsOC42NTIzNDM3NSBDNi4yNjE3MTg3NSw4LjY1MjM0Mzc1IDYuMTkxNDA2MjUsOC43MjI2NTYyNSA2LjE5MTQwNjI1LDguODA4NTkzNzUgTDYuMTkxNDA2MjUsOS45ODA0Njg3NSBDNi4xOTE0MDYyNSwxMC4wNjY0MDYzIDYuMjYxNzE4NzUsMTAuMTM2NzE4OCA2LjM0NzY1NjI1LDEwLjEzNjcxODggTDEyLjQ0MTQwNjMsMTAuMTM2NzE4OCBDMTIuNTI3MzQzNywxMC4xMzY3MTg4IDEyLjU5NzY1NjMsMTAuMDY2NDA2MyAxMi41OTc2NTYzLDkuOTgwNDY4NzUgTDEyLjU5NzY1NjMsOC44MDg1OTM3NSBDMTIuNTk3NjU2Myw4LjcyMjY1NjI1IDEyLjUyNzM0MzcsOC42NTIzNDM3NSAxMi40NDE0MDYzLDguNjUyMzQzNzUgWiBNMTcuOTg4MjgxMywxNi45MzM1OTM4IEwxNS4xMzY3MTg4LDE0LjA4MjAzMTMgQzE3LjUyMTQ4NDQsMTEuMTczODI4MSAxNy4zNTU0Njg4LDYuODY1MjM0MzggMTQuNjI4OTA2Myw0LjE0MDYyNSBDMTEuNzM4MjgxMywxLjI0ODA0Njg4IDcuMDQyOTY4NzUsMS4yNDgwNDY4OCA0LjE0MDYyNSw0LjE0MDYyNSBDMS4yNDgwNDY4OCw3LjA0Mjk2ODc1IDEuMjQ4MDQ2ODgsMTEuNzM4MjgxMyA0LjE0MDYyNSwxNC42Mjg5MDYzIEM2Ljg2NTIzNDM4LDE3LjM1NTQ2ODggMTEuMTczODI4MSwxNy41MjE0ODQ0IDE0LjA4MjAzMTMsMTUuMTM2NzE4OCBMMTYuOTMzNTkzOCwxNy45ODgyODEzIEMxNi45OTYwOTM4LDE4LjA0Mjk2ODggMTcuMDk1NzAzMSwxOC4wNDI5Njg4IDE3LjE0ODQzNzUsMTcuOTg4MjgxMyBMMTcuOTg4MjgxMywxNy4xNDg0Mzc1IEMxOC4wNDI5Njg4LDE3LjA5NTcwMzEgMTguMDQyOTY4OCwxNi45OTYwOTM4IDE3Ljk4ODI4MTMsMTYuOTMzNTkzOCBaIE0xMy41OTM3NSwxMy41OTM3NSBDMTEuMjczNDM3NSwxNS45MTIxMDk0IDcuNTE1NjI1LDE1LjkxMjEwOTQgNS4xOTUzMTI1LDEzLjU5Mzc1IEMyLjg3Njk1MzEzLDExLjI3MzQzNzUgMi44NzY5NTMxMyw3LjUxNTYyNSA1LjE5NTMxMjUsNS4xOTUzMTI1IEM3LjUxNTYyNSwyLjg3Njk1MzEzIDExLjI3MzQzNzUsMi44NzY5NTMxMyAxMy41OTM3NSw1LjE5NTMxMjUgQzE1LjkxMjEwOTQsNy41MTU2MjUgMTUuOTEyMTA5NCwxMS4yNzM0Mzc1IDEzLjU5Mzc1LDEzLjU5Mzc1IFoiIGlkPSLlvaLnirYiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-origin-size::before {\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hY3R1YWwgc2l6ZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJhY3R1YWwtc2l6ZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIj4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNS45Mzc1LDE1LjM5MDYyNSBMNC4xMTY3NzYzMiwxNS4zOTA2MjUgTDQuMTE2Nzc2MzIsNy40NDU3MDk3NSBMMS44NzUsNy40NDU3MDk3NSBMMS44NzUsNi40MjA3NTQ5NCBDMi42NjcxNzc2LDYuNDE3MjcwNjUgMy4zMDI5MzEwOCw2LjI2Mzg2MzM2IDMuNzc5NjI2MzcsNS45NTM5MDU1MyBDNC4yMzAwNDk4Miw1LjY2MTAzMDIxIDQuNTI4ODg0MSw1LjIwODg0ODQxIDQuNjc2MDQ5NzgsNC42MDkzNzUgTDUuOTM3NSw0LjYwOTM3NSBMNS45Mzc1LDE1LjM5MDYyNSBaIE05LjY4NzUsNy41MzkwNjI1IEwxMS40MDYyNSw3LjUzOTA2MjUgTDExLjQwNjI1LDkuNTcwMzEyNSBMOS42ODc1LDkuNTcwMzEyNSBMOS42ODc1LDcuNTM5MDYyNSBaIE05LjY4NzUsMTMuMzU5Mzc1IEwxMS40MDYyNSwxMy4zNTkzNzUgTDExLjQwNjI1LDE1LjM5MDYyNSBMOS42ODc1LDE1LjM5MDYyNSBMOS42ODc1LDEzLjM1OTM3NSBaIE0xNy41LDE1LjM5MDYyNSBMMTcuNSw0LjYwOTM3NSBMMTYuMjM4NTQ5OCw0LjYwOTM3NSBDMTYuMDkxMzg0MSw1LjIwODg0ODQxIDE1Ljc5MjU0OTgsNS42NjEwMzAyMSAxNS4zNDIxMjY0LDUuOTUzOTA1NTMgQzE0Ljg2NTQzMTEsNi4yNjM4NjMzNiAxNC4yMjk2Nzc2LDYuNDE3MjcwNjUgMTMuNDM3NSw2LjQyMDc1NDk0IEwxMy40Mzc1LDcuNDQ1NzA5NzUgTDE1LjY3OTI3NjMsNy40NDU3MDk3NSBMMTUuNjc5Mjc2MywxNS4zOTA2MjUgTDE3LjUsMTUuMzkwNjI1IFoiIGlkPSLlvaLnirbnu5PlkIgiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\n   \n}\n\n.pswp .data-pswp-tool-bar .data-pswp-best-size::before {\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5maXQgc2NyZWVuPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImZpdC1zY3JlZW4iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJhcnJhd3NhbHQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTYuNjk5MjE4OCwzLjEyNjk1MzEyIEwxMy4wMDM5MDYzLDMuNTg1OTM3NSBDMTIuODc1LDMuNjAxNTYyNSAxMi44MjIyNjU2LDMuNzU3ODEyNSAxMi45MTIxMDk0LDMuODQ5NjA5MzcgTDEzLjk4MDQ2ODgsNC45MTc5Njg3NSBMMTAuOTgyNDIxOSw3LjkxNjAxNTYyIEMxMC45MjE4NzUsNy45NzY1NjI1IDEwLjkyMTg3NSw4LjA3NjE3MTg3IDEwLjk4MjQyMTksOC4xMzY3MTg3NSBMMTEuODYzMjgxMyw5LjAxNzU3ODEyIEMxMS45MjM4MjgxLDkuMDc4MTI1IDEyLjAyMzQzNzUsOS4wNzgxMjUgMTIuMDgzOTg0NCw5LjAxNzU3ODEyIEwxNS4wODM5ODQ0LDYuMDE3NTc4MTIgTDE2LjE1MjM0MzgsNy4wODU5Mzc1IEMxNi4yNDQxNDA2LDcuMTc3NzM0MzcgMTYuNDAwMzkwNiw3LjEyMzA0Njg3IDE2LjQxNjAxNTYsNi45OTQxNDA2MiBMMTYuODczMDQ2OSwzLjMwMDc4MTI1IEMxNi44ODY3MTg4LDMuMTk5MjE4NzUgMTYuODAwNzgxMywzLjExMzI4MTI1IDE2LjY5OTIxODgsMy4xMjY5NTMxMiBaIE04LjEzNjcxODc1LDEwLjk4MjQyMTkgQzguMDc2MTcxODgsMTAuOTIxODc1IDcuOTc2NTYyNSwxMC45MjE4NzUgNy45MTYwMTU2MywxMC45ODI0MjE5IEw0LjkxNzk2ODc1LDEzLjk4MjQyMTkgTDMuODQ5NjA5MzgsMTIuOTE0MDYyNSBDMy43NTc4MTI1LDEyLjgyMjI2NTYgMy42MDE1NjI1LDEyLjg3Njk1MzEgMy41ODU5Mzc1LDEzLjAwNTg1OTQgTDMuMTI2OTUzMTMsMTYuNjk5MjE4OCBDMy4xMTUyMzQzOCwxNi44MDA3ODEyIDMuMTk5MjE4NzUsMTYuODg0NzY1NiAzLjMwMDc4MTI1LDE2Ljg3MzA0NjkgTDYuOTk2MDkzNzUsMTYuNDE0MDYyNSBDNy4xMjUsMTYuMzk4NDM3NSA3LjE3NzczNDM4LDE2LjI0MjE4NzUgNy4wODc4OTA2MywxNi4xNTAzOTA2IEw2LjAxOTUzMTI1LDE1LjA4MjAzMTIgTDkuMDE5NTMxMjUsMTIuMDgyMDMxMiBDOS4wODAwNzgxMywxMi4wMjE0ODQ0IDkuMDgwMDc4MTMsMTEuOTIxODc1IDkuMDE5NTMxMjUsMTEuODYxMzI4MSBMOC4xMzY3MTg3NSwxMC45ODI0MjE5IEw4LjEzNjcxODc1LDEwLjk4MjQyMTkgWiIgaWQ9IuW9oueKtiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\n   \n}\n\n.pswp .data-pswp-tool-bar .btn:not(.disable):hover {\n    cursor: pointer;\n   \n}\n\n.pswp .data-pswp-tool-bar .btn:not(.disable):hover::before {\n    opacity: 1;\n   \n}\n\n.pswp .data-pswp-tool-bar .btn.disable {\n    background: none;\n   \n}\n\n.pswp .data-pswp-tool-bar .btn.activated {\n    background: #454545;\n   \n}\n\n.pswp .data-pswp-tool-bar .btn.activated::before {\n    opacity: 1;\n   \n}\n\n.pswp .data-pswp-tool-bar .btn.disable::before {\n    opacity: 0.25;\n   \n}\n\n.pswp .data-pswp-tool-bar .disable:hover {\n    cursor: not-allowed;\n   \n}\n\n.pswp .data-pswp-tool-bar .pswp-toolbar-content {\n    display: inline-block;\n    width: auto;\n    background: #252525;\n    border-radius: 4px;\n    padding: 12px;\n   \n}\n\n.pswp .data-pswp-tool-bar .pswp-toolbar-content .data-pswp-counter {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    display: inline-block;\n    font-size: 16px;\n    vertical-align: top;\n    line-height: 34px;\n    color: #DEDEDE;\n    margin: 0 2px;\n   \n}\n\n.pswp.data-pswp-mobile .data-pswp-tool-bar {\n    display: none;\n   \n}\n\n.pswp__ui {\n   -webkit-font-smoothing: auto;\n   visibility: visible;\n   opacity: 1;\n   z-index: 1550;\n}\n\n.pswp__button {\n   width: 44px;\n   height: 44px;\n   position: relative;\n   background: none;\n   cursor: pointer;\n   overflow: visible;\n   display: block;\n   border: 0;\n   padding: 0;\n   margin: 0;\n   float: right;\n   opacity: 0.75;\n   -webkit-transition: opacity 0.2s;\n   transition: opacity 0.2s;\n   box-shadow: none;\n}\n\n.pswp-fade-out {\n   opacity: 0;\n   -webkit-animation: fadeOut 0.333s;\n           animation: fadeOut 0.333s;\n}\n\n.pswp .data-pswp-button-close {\n   margin: 32px;\n   margin-right: 0px;\n   width: 40px;\n   height: 40px;\n   background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5jbG9zZS1kZWZhdWx0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iuafpeeci+WbvueJh+S8mOWMljQuMCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IueUu+advyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ4LjAwMDAwMCwgLTczNS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9ImNsb3NlLWRlZmF1bHQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4LjAwMDAwMCwgNzM1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iIzFBMUExQSIgb3BhY2l0eT0iMC4zNSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9ImNsb3NlIiBvcGFjaXR5PSIwLjY1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjAwMDAwMCwgOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy4yMTQwNjI1LDEyIEwxOS4zNjY0MDYyLDQuNjY2NDA2MjUgQzE5LjQ2OTUzMTIsNC41NDQ1MzEyNSAxOS4zODI4MTI1LDQuMzU5Mzc1IDE5LjIyMzQzNzUsNC4zNTkzNzUgTDE3LjM1MzEyNSw0LjM1OTM3NSBDMTcuMjQyOTY4Nyw0LjM1OTM3NSAxNy4xMzc1LDQuNDA4NTkzNzUgMTcuMDY0ODQzNyw0LjQ5Mjk2ODc1IEwxMS45OTA2MjUsMTAuNTQyMTg3NSBMNi45MTY0MDYyNSw0LjQ5Mjk2ODc1IEM2Ljg0NjA5Mzc1LDQuNDA4NTkzNzUgNi43NDA2MjUsNC4zNTkzNzUgNi42MjgxMjUsNC4zNTkzNzUgTDQuNzU3ODEyNSw0LjM1OTM3NSBDNC41OTg0Mzc1LDQuMzU5Mzc1IDQuNTExNzE4NzUsNC41NDQ1MzEyNSA0LjYxNDg0Mzc1LDQuNjY2NDA2MjUgTDEwLjc2NzE4NzUsMTIgTDQuNjE0ODQzNzUsMTkuMzMzNTkzNyBDNC41MTE3MTg3NSwxOS40NTU0Njg4IDQuNTk4NDM3NSwxOS42NDA2MjUgNC43NTc4MTI1LDE5LjY0MDYyNSBMNi42MjgxMjUsMTkuNjQwNjI1IEM2LjczODI4MTI1LDE5LjY0MDYyNSA2Ljg0Mzc1LDE5LjU5MTQwNjIgNi45MTY0MDYyNSwxOS41MDcwMzEyIEwxMS45OTA2MjUsMTMuNDU3ODEyNSBMMTcuMDY0ODQzNywxOS41MDcwMzEyIEMxNy4xMzUxNTYyLDE5LjU5MTQwNjIgMTcuMjQwNjI1LDE5LjY0MDYyNSAxNy4zNTMxMjUsMTkuNjQwNjI1IEwxOS4yMjM0Mzc1LDE5LjY0MDYyNSBDMTkuMzgyODEyNSwxOS42NDA2MjUgMTkuNDY5NTMxMiwxOS40NTU0Njg4IDE5LjM2NjQwNjIsMTkuMzMzNTkzNyBMMTMuMjE0MDYyNSwxMiBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\n}\n\n");var Zx=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e,i){var r;return jm(this,n),(r=t.call(this)).timeouts=[],r.isDestroy=!0,r.editor=e,r.options=_m({shareEl:!1,fullscreenEl:!1,zoomEl:!1,history:!1,closeOnScroll:!1,preloaderEl:!1,captionEl:!1,counterEl:!1,clickToCloseNonZoomable:!1,showAnimationDuration:0,hideAnimationDuration:0,closeOnVerticalDrag:py,tapToClose:!0,barsSize:{top:44,bottom:80}},i),r.isDestroy=!0,r.root=r.renderTemplate(),r.barUI=r.root.find(".data-pswp-custom-top-bar"),r.closeUI=r.root.find(".data-pswp-button-close"),r.editor.$(document.body).append(r.root),r.zoomUI=new $x(r.editor,Xm(r)),r.zoomUI.render(),py||(r.bindKeyboardEvnet(),r.bindClickEvent(),r.hoverControllerFadeInAndOut()),r}return Rm(n,[{key:"renderTemplate",value:function(){var e=this.editor.$('\n        <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="pswp__bg"></div>\n            <div class="pswp__scroll-wrap">\n                <div class="pswp__container">\n                    <div class="pswp__item"></div>\n                    <div class="pswp__item"></div>\n                    <div class="pswp__item"></div>\n                </div>\n                <div class="pswp__ui pswp__ui--hidden">\n                    <button class="pswp__button data-pswp-button-close" title="Close (Esc)"></button>\n                    <div class="data-pswp-custom-top-bar"></div>\n                </div>\n            </div>\n        </div>');return e.addClass(py?"data-pswp-mobile":"data-pswp-pc"),e}},{key:"hoverControllerFadeInAndOut",value:function(){var e=this;this.barUI.on("mouseenter",(function(){e.removeFadeOut(e.barUI,"barFadeInAndOut"),e.removeFadeOut(e.closeUI,"closeFadeInAndOut")})),this.barUI.on("mouseleave",(function(){e.fadeOut(e.barUI,"barFadeInAndOut"),e.fadeOut(e.closeUI,"closeFadeInAndOut")})),this.closeUI.on("mouseenter",(function(){e.removeFadeOut(e.barUI,"barFadeInAndOut"),e.removeFadeOut(e.closeUI,"closeFadeInAndOut")})),this.closeUI.on("mouseleave",(function(){e.fadeOut(e.barUI,"barFadeInAndOut"),e.fadeOut(e.closeUI,"closeFadeInAndOut")}))}},{key:"removeFadeOut",value:function(e,t){this.timeouts[t]&&clearTimeout(this.timeouts[t]),e.removeClass("pswp-fade-out")}},{key:"fadeOut",value:function(e,t){this.timeouts[t]&&clearTimeout(this.timeouts[t]),this.timeouts[t]=setTimeout((function(){e.addClass("pswp-fade-out")}),3e3)}},{key:"bindClickEvent",value:function(){var e=this;this.root.on("click",(function(t){var n=t.target,i=e.editor.$(n||[]);i.hasClass("pswp__img")&&setTimeout((function(){e.zoom=void 0,e.afterZoom()}),366),(i.hasClass("pswp__bg")||i.hasClass("itellyou-pswp-tool-bar"))&&e.close()})),this.closeUI.on("click",(function(){e.close()}))}},{key:"prev",value:function(){var e;null===(e=this.pswpUI)||void 0===e||e.prev()}},{key:"next",value:function(){var e;null===(e=this.pswpUI)||void 0===e||e.next()}},{key:"renderCounter",value:function(){var e,t;this.barUI.find(".data-pswp-counter").html("".concat(((null===(e=this.pswpUI)||void 0===e?void 0:e.getCurrentIndex())||0)+1," / ").concat((null===(t=this.pswpUI)||void 0===t?void 0:t.items.length)||""))}},{key:"getCurrentZoomLevel",value:function(){return this.zoom&&+this.zoom.toFixed(2)||this.pswpUI&&+this.pswpUI.getZoomLevel().toFixed(2)||0}},{key:"zoomTo",value:function(e){this.pswpUI&&(this.pswpUI.zoomTo(e,{x:this.pswpUI.viewportSize.x/2,y:this.pswpUI.viewportSize.y/2},100),this.zoom=e,this.afterZoom())}},{key:"zoomIn",value:function(){var e=this.getCurrentZoomLevel(),t=(e||0)+.2;5!==e&&(t>5&&(t=5),this.zoomTo(t))}},{key:"zoomOut",value:function(){var e=this.getCurrentZoomLevel();if(.05!==e&&void 0!==e){var t=e-.2;.05>t&&(t=.05),this.zoomTo(t)}}},{key:"bindKeyboardEvnet",value:function(){var e=this;this.root.on("keydown",(function(t){(t.metaKey||t.ctrlKey)&&187===t.keyCode&&(t.preventDefault(),e.zoomIn()),Nm("mod+-",t)&&(t.preventDefault(),e.zoomOut())}))}},{key:"zoomToOriginSize",value:function(){this.zoomTo(1)}},{key:"zoomToBestSize",value:function(){var e=this.getInitialZoomLevel();e&&this.zoomTo(e)}},{key:"updateCursor",value:function(){var e=this.root,t=this.getCurrentZoomLevel(),n=this.getInitialZoomLevel();1===t?e.addClass("pswp--zoomed-in"):n==n&&e.removeClass("pswp--zoomed-in")}},{key:"getInitialZoomLevel",value:function(){var e;return this.pswpUI?+((null===(e=this.pswpUI.currItem.initialZoomLevel)||void 0===e?void 0:e.toFixed(2))||0):0}},{key:"afterZoom",value:function(){this.updateCursor(),this.emit("afterzoom")}},{key:"getCount",value:function(){var e;return(null===(e=this.pswpUI)||void 0===e?void 0:e.items.length)||0}},{key:"afterChange",value:function(){var e=this;if(!py){var t=this.getInitialZoomLevel();this.renderCounter(),this.zoom=t,setTimeout((function(){e.afterZoom()}),100),this.emit("afterchange"),this.zoom=this.getInitialZoomLevel()}this.setWhiteBackground()}},{key:"bindPswpEvent",value:function(){var e,t,n,i,r=this;null===(e=this.pswpUI)||void 0===e||e.listen("afterChange",(function(){r.afterChange()})),null===(t=this.pswpUI)||void 0===t||t.listen("destroy",(function(){r.isDestroy=!0})),null===(n=this.pswpUI)||void 0===n||n.listen("resize",(function(){r.emit("resize")})),null===(i=this.pswpUI)||void 0===i||i.listen("imageLoadComplete",(function(){r.setWhiteBackground()}))}},{key:"setWhiteBackground",value:function(){this.root.find(".pswp__img").each((function(e){var t=e;t.complete?(t.style.background="white",t.style["box-shadow"]="0 0 10px rgba(0, 0, 0, 0.5)"):t.onload=function(){t.style.background="white",t.style["box-shadow"]="0 0 10px rgba(0, 0, 0, 0.5)"}}))}},{key:"open",value:function(e,t){if(!0===this.isDestroy){var n=this.root,i=new Yx(this.root.get(),Wx,e,_m({index:t},this.options));i.items=e,i.init(),this.pswpUI=i,this.isDestroy=!1,py||(this.barUI.removeClass("pswp-fade-out"),this.fadeOut(this.barUI,"barFadeInAndOut"),this.closeUI.removeClass("pswp-fade-out"),this.fadeOut(this.closeUI,"closeFadeInAndOut")),n.removeClass("pswp-fade-in"),n.addClass("pswp-fade-in"),this.afterChange(),this.bindPswpEvent()}}},{key:"close",value:function(){var e;null===(e=this.pswpUI)||void 0===e||e.close()}},{key:"destroy",value:function(){this.close()}}]),n}();Gx(".data-image-resizer {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    bottom: 0px;\n    right: 0;\n    z-index: 1;\n}\n.data-image-resizer-holder {\n    position: absolute;\n    width: 12px;\n    height: 12px;\n    border: 2px solid #fff;\n    background: #1890FF;\n    display: inline-block;\n}\n.data-image-resizer-holder-right-top {\n    top: -6px;\n    right: -6px;\n    cursor: nesw-resize;\n}\n.data-image-resizer-holder-right-bottom {\n    bottom: -6px;\n    right: -6px;\n    cursor: nwse-resize;\n}\n.data-image-resizer-holder-left-bottom {\n    bottom: -6px;\n    left: -6px;\n    cursor: nesw-resize;\n}\n.data-image-resizer-holder-left-top {\n    left: -6px;\n    top: -6px;\n    cursor: nwse-resize;\n}\n\n.data-image-resizer-bg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    cursor: pointer;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n}\n.data-image-resizer-bg-active {\n    opacity: 0.3;\n}\n\n.data-image-resizer-number {\n    position: absolute;\n    display: inline-block;\n    line-height: 24px;\n    padding: 0 4px;\n    font-size: 12px;\n    border-radius: 3px 3px;\n    background: rgba(0, 0, 0, 0.86);\n    color: rgba(255, 255, 255, 0.96);\n    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity 0.3s ease-in-out;\n    transform: scale(0.8);\n}\n\n.data-image-resizer-number-right-top {\n    top: 0px;\n    right: -6px;\n    transform: translateX(100%) scale(0.8);\n}\n\n.data-image-resizer-number-right-bottom {\n    right: -6px;\n    bottom: 0px;\n    transform: translateX(100%) scale(0.8);\n}\n\n.data-image-resizer-number-left-bottom {\n    left: -6px;\n    bottom: 0px;\n    transform: translateX(-100%) scale(0.8);\n}\n\n.data-image-resizer-number-left-top {\n    left: -6px;\n    top: 0px;\n    transform: translateX(-100%) scale(0.8);\n}\n\n.data-image-resizer-number-active {\n    opacity: 1;\n    visibility: visible;\n}");var qx=function(){function e(t,n){var i=this;jm(this,e),this.point={x:0,y:0},this.resizing=!1,this.onMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=e.clientX,n=e.clientY;if(t!==i.point.x||n!==i.point.y){var r=i.point.x-t,o=i.point.y-n;i.updateSize(r,o)}i.resizing=!0},this.onMouseUp=function(e){e.preventDefault(),e.stopPropagation();var t=i.root.get();if(t){var n=t.clientWidth,r=t.clientHeight;i.size={width:n,height:r},i.resizerNumber.removeClass("data-image-resizer-number-".concat(i.position)),i.resizerNumber.removeClass("data-image-resizer-number-active"),i.position=void 0,i.resizing=!1,document.removeEventListener("mousemove",(function(e){return i.onMouseMove(e)})),document.removeEventListener("mouseup",i.onMouseUp);var o=i.options.onChange;o&&o(i.size),i.image.hide()}},this.editor=t,this.options=n,this.root=this.editor.$(this.renderTemplate(n.src)),this.image=this.root.find("img"),this.resizerNumber=this.root.find(".data-image-resizer-number");var r=this.options,o=r.width,a=r.height;this.size={width:o,height:a},this.maxWidth=this.options.maxWidth}return Rm(e,[{key:"renderTemplate",value:function(e){return'\n        <div class="data-image-resizer">\n            <img class="data-image-resizer-bg data-image-resizer-bg-active" src="'.concat(e,'" />\n            <div class="data-image-resizer-holder data-image-resizer-holder-right-top"></div>\n            <div class="data-image-resizer-holder data-image-resizer-holder-right-bottom"></div>\n            <div class="data-image-resizer-holder data-image-resizer-holder-left-bottom"></div>\n            <div class="data-image-resizer-holder data-image-resizer-holder-left-top"></div>\n            <span class="data-image-resizer-number"></span>\n        </div>')}},{key:"onMouseDown",value:function(e,t){this.resizing||(e.preventDefault(),e.stopPropagation(),this.root.css("top",["right-top","left-top"].indexOf(t)>-1?"auto":0),this.root.css("left",["left-top","left-bottom"].indexOf(t)>-1?"auto":0),this.root.css("bottom",["right-bottom","left-bottom"].indexOf(t)>-1?"auto":0),this.root.css("right",["right-top","right-bottom"].indexOf(t)>-1?"auto":0),this.point={x:e.clientX,y:e.clientY},this.position=t,this.resizing=!0,this.resizerNumber.addClass("data-image-resizer-number-".concat(this.position)),this.resizerNumber.addClass("data-image-resizer-number-active"),this.image.show(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"updateSize",value:function(e,t){(e=["right-top","right-bottom"].indexOf(this.position||"")>-1?this.size.width-e:this.size.width+e)<24&&(e=24);var n=this.options.rate;e>this.maxWidth&&(e=this.maxWidth),(t=e*n)<24&&(e=(t=24)/n),e=Math.round(e),t=Math.round(t),this.setSize(e,t)}},{key:"setSize",value:function(e,t){this.root.css({width:e+"px",height:t+"px"}),this.resizerNumber.html("".concat(e,"·").concat(t))}},{key:"on",value:function(e,t){this.image.on(e,t)}},{key:"off",value:function(e,t){this.image.off(e,t)}},{key:"render",value:function(){var e=this,t=this.options,n=t.width,i=t.height;return this.root.css({width:"".concat(n,"px"),height:"".concat(i,"px")}),this.root.find(".data-image-resizer-holder-right-top").on("mousedown",(function(t){return e.onMouseDown(t,"right-top")})),this.root.find(".data-image-resizer-holder-right-bottom").on("mousedown",(function(t){return e.onMouseDown(t,"right-bottom")})),this.root.find(".data-image-resizer-holder-left-bottom").on("mousedown",(function(t){return e.onMouseDown(t,"left-bottom")})),this.root.find(".data-image-resizer-holder-left-top").on("mousedown",(function(t){return e.onMouseDown(t,"left-top")})),this.root}},{key:"destroy",value:function(){this.root.remove(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}}]),e}();Gx(".data-image {\n    position: relative;\n    display: inline-block;\n    font-size: 14px;\n    text-align: left;\n    border-radius: 3px 3px;\n    line-height: 24px;\n    text-indent: 0;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n\n.data-image-meta {\n    position: relative;\n    color: #595959;\n    line-height: 0;\n}\n\n.data-image-progress {\n    padding-left: 8px;\n    color: rgba(255, 255, 255, 0.9);\n}\n\n.data-image-progress .data-anticon {\n    color: rgba(255, 255, 255, 0.9);\n    line-height: 24px;\n    margin-right: 10px;\n}\n\n.data-image-maximize {\n    position: absolute;\n    z-index: 2;\n    right: 10px;\n    top: 10px;\n    background-color: rgba(0, 0, 0, 0.65);\n    width: 20px;\n    height: 20px;\n    text-align: center;\n    font-size: 16px;\n    color: #fff;\n    line-height: 20px;\n    border-radius: 4px;\n    box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.08);\n    cursor: pointer;\n}\n\n.data-image-maximize .data-icon-maximize {\n    margin-left: 1px;\n}\n\n.data-image-loading , .data-image-loaded {\n    display: inline-block;\n    border-radius: 0 0;\n    padding: 0 0;\n    background: transparent;\n    border-color: transparent;\n}\n\n.data-image-loading .data-image-meta, .data-image-loaded .data-image-meta {\n    display: inline-block;\n}\n\n.data-image-loading  .data-image-meta img,.data-image-loaded .data-image-meta img {\n    border-radius: 2px 2px;\n    display: inline-block;\n    width: 100%;\n    opacity: 0.6;\n    text-align: left;\n    cursor: pointer;\n    transition: opacity 0.3s ease-in-out, box-shadow 0.3s ease-in-out;\n}\n\n.data-image-loading  .data-image-meta .data-image-progress,.data-image-loaded .data-image-meta .data-image-progress {\n    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n    position: absolute;\n    bottom: 8px;\n    right: 8px;\n    font-size: 12px;\n    line-height: 24px;\n    color: rgba(255, 255, 255, 0.9);\n    padding: 0px 6px;\n    border-radius: 2px 2px;\n    background: rgba(0, 0, 0, 0.8);\n    white-space: nowrap;\n}\n\n.data-image-loaded .data-image-meta img {\n    opacity: 1;\n}\n\n.data-image-error {\n    padding: 2px 4px;\n    background: #f5f5f5;\n    display: inline-flex;\n    border-radius: 4px;\n    max-width: 200px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    font-size: 12px;\n    align-items: center;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n\n.data-image-error .data-icon {\n    font-size: 12px;\n}\n\n.data-image-error .data-icon-error {\n    color: red;\n    margin-right: 8px;\n}\n\n.data-image-error .data-icon-copy {\n    margin-left: 8px;\n    cursor: pointer;\n}");var Qx=sy().devicePixelRatio,Kx=void 0,Xx=function(){function e(t,n){var i=this;jm(this,e),this.rate=1,this.onWindowResize=function(){if(Vy(i.editor)){i.maxWidth=i.getMaxWidth(),i.resetSize();var e=i.image.get();if(e){var t=e.clientWidth,n=e.clientHeight;i.resizer&&(i.resizer.maxWidth=i.maxWidth,i.resizer.setSize(t,n))}}},this.focus=function(){Vy(i.editor)&&(i.root.addClass("data-image-active"),"done"===i.status&&(i.destroyEditor(),i.renderEditor()))},this.blur=function(){Vy(i.editor)&&(i.root.removeClass("data-image-active"),"done"===i.status&&i.destroyEditor())},this.editor=t,this.options=n,this.src=this.options.src,this.size=this.options.size||{width:0,height:0,naturalHeight:0,naturalWidth:0},this.status=this.options.status,this.root=t.$(this.renderTemplate()),this.progress=this.root.find(".data-image-progress"),this.image=this.root.find("img"),this.detail=this.root.find(".data-image-detail"),this.meta=this.root.find(".data-image-meta"),this.maximize=this.root.find(".data-image-maximize"),this.maxWidth=this.getMaxWidth(),this.pswp=Kx||new Zx(this.editor),Kx=this.pswp}return Rm(e,[{key:"renderTemplate",value:function(e){var t=this.options,n=t.link,i=t.percent,r=t.className,o=t.onBeforeRender;if("error"===this.status)return'<span class="data-image-error"><span class="data-icon data-icon-error"></span>'.concat(e||this.options.message,'<span class="data-icon data-icon-copy"></span></span>');var a=o?o(this.status,this.options.src):this.options.src,s='<span class="data-image-progress">\n                            <i class="data-anticon">\n                                <svg viewBox="0 0 1024 1024" class="data-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n                                    <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n                                </svg>\n                            </i>\n                            <span class="percent">'.concat(i||0,"%</span>\n                        </span>"),l=Ty(this.options.alt||""),c=l?' alt="'.concat(l,'" title="').concat(l,'" '):"",u='<img src="'.concat(By(a),'" class="').concat(r||"",' data-drag-image" ').concat(c,"/>");if(n&&!Vy(this.editor)){var d=n.target||"_blank";u='<a href="'.concat(By(n.href),'" target="').concat(d,'">').concat(u,"</a>")}return'\n        <span class="data-image">\n            <span class="data-image-content data-image-loading">\n                <span class="data-image-detail">\n                    <span class="data-image-meta">\n                        '.concat(u,"\n                        ").concat(s,"\n                        ").concat('<span class="data-image-maximize" style="display: none;"><span class="data-icon data-icon-maximize"></span></span>',"\n                    </span>\n                </span>\n            </span>\n        </span>")}},{key:"bindErrorEvent",value:function(e){var t=this,n=e.find(".data-icon-copy"),i=new Nw(this.editor);n.on("mouseenter",(function(){i.show(n,t.editor.language.get("image","errorMessageCopy").toString())})),n.on("mouseleave",(function(){i.hide()})),n.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault(),i.hide(),t.editor.clipboard.copy(t.options.message||"Error message"),t.editor.messageSuccess(t.editor.language.get("copy","success").toString())}))}},{key:"setProgressPercent",value:function(e){this.progress.find(".percent").html("".concat(e,"%"))}},{key:"imageLoadCallback",value:function(){if(this.editor.card.closest(this.root)){if("done"===this.status){var e=this.root.find(".data-image-content");e.addClass("data-image-loaded"),e.removeClass("data-image-loading")}var t=this.image.get();if(t){var n=t.naturalWidth,i=t.naturalHeight;this.rate=i/n,this.size.naturalWidth=n,this.size.naturalHeight=i,this.size.width||(this.size.width=n),this.size.height||(this.size.height=i),this.resetSize(),this.image.css("visibility","visible"),this.image.css("background-color",""),this.image.css("background-repeat",""),this.image.css("background-position",""),this.image.css("background-image","");var r=this.options.onChange;Vy(this.editor)&&r&&r(this.size),window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize),this.resizer&&this.resizer.setSize(t.clientWidth,t.clientHeight)}}}},{key:"imageLoadError",value:function(){this.status="error";var e=this.options.container;e.empty(),e.append(this.renderTemplate(this.editor.language.get("image","loadError").toString())),this.bindErrorEvent(e);var t=this.options.onError;t&&t()}},{key:"getMaxWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.container,t=this.editor.block.closest(e).get();return t?t.clientWidth-6:0}},{key:"resetSize",value:function(){this.meta.css({"background-color":"",width:"",height:""}),this.image.css({width:"",height:""});var e=this.image.get();if(e){var t=this.size,n=t.width,i=t.height;if(i)if(n)if(n&&i)i=Math.round(this.rate*n),this.size.height=i;else{n=e.clientWidth,i=e.clientHeight;var r=this.size,o=r.naturalWidth,a=r.naturalHeight;this.isSvg()&&o&&a&&(n=o,i=a)}else n=Math.round(i/this.rate);else i=Math.round(this.rate*n);n>this.maxWidth&&(n=this.maxWidth,i=Math.round(n*this.rate)),this.image.css("width","".concat(n,"px")),this.image.css("height","".concat(i,"px"))}}},{key:"changeSize",value:function(e,t){e<24&&(t=(e=24)*this.rate),e>this.maxWidth&&(t=(e=this.maxWidth)*this.rate),t<24&&(e=(t=24)/this.rate),e=Math.round(e),t=Math.round(t),this.size.width=e,this.size.height=t,this.image.css({width:"".concat(e,"px"),height:"".concat(t,"px")});var n=this.options.onChange;n&&n(this.size),this.destroyEditor(),this.renderEditor()}},{key:"isSvg",value:function(){return this.src.endsWith(".svg")||this.src.startsWith("data:image/svg+xml")}},{key:"openZoom",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=[],i=this.editor.card.closest(this.root),r=0;this.editor.container.find('[data-card-key="image"]').toArray().filter((function(e){return e.find("img").length>0})).forEach((function(e,o){var a=t.editor.card.find(e);if(a){var s=a.getCenter().find("img"),l=a.getValue()||{},c=parseInt(s.css("width")),u=parseInt(s.css("height")),d=l.naturalWidth||c*Qx,h=l.naturalHeight||u*Qx,f=l.src,p=s.attributes("src");n.push({src:f,msrc:p,w:d,h:h}),(null==i?void 0:i.equal(e))&&(r=o)}})),this.pswp.open(n,r)}},{key:"closeZoom",value:function(){var e;null===(e=this.pswp)||void 0===e||e.close()}},{key:"renderEditor",value:function(){var e=this,t=this.image.get();if(t){var n=t.clientWidth,i=t.clientHeight;if(n&&i){this.maxWidth=this.getMaxWidth(),this.rate=i/n;var r=new qx(this.editor,{src:this.src,width:n,height:i,rate:this.rate,maxWidth:this.maxWidth,onChange:function(t){var n=t.width,i=t.height;return e.changeSize(n,i)}}),o=r.render();this.root.find(".data-image-detail").append(o),this.resizer=r,this.resizer.on("dblclick",(function(t){return e.openZoom(t)}))}}}},{key:"destroyEditor",value:function(){var e;null===(e=this.resizer)||void 0===e||e.destroy()}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"render",value:function(){var e=this,t=this.options.container;if("error"===this.status&&Vy(this.editor))return this.bindErrorEvent(this.root),void t.append(this.root);"uploading"===this.status?this.progress.show():this.progress.remove(),this.maxWidth=this.getMaxWidth();var n=this.size,i=n.width,r=n.height;if(Vy(this.editor)?this.image.css("visibility","hidden"):i&&r&&(i>this.maxWidth&&(i=this.maxWidth,r=Math.round(i*r/this.size.width)),this.image.css("width",i+"px"),this.image.css("height",r+"px"),this.image.css("background-color","#FAFAFA"),this.image.css("background-repeat","no-repeat"),this.image.css("background-position","center"),this.image.css("background-image","url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjggMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5pbWFnZS1maWxs5aSH5Lu9PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iuafpeeci+WbvueJh+S8mOWMljQuMCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWKoOi9veWbvueJhyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTU3Mi4wMDAwMDAsIC01MDYuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJpbWFnZS1maWxs5aSH5Lu9IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzAuMDAwMDAwLCA1MDEuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yOSw1IEwzLDUgQzIuNDQ2ODc1LDUgMiw1LjQ0Njg3NSAyLDYgTDIsMjYgQzIsMjYuNTUzMTI1IDIuNDQ2ODc1LDI3IDMsMjcgTDI5LDI3IEMyOS41NTMxMjUsMjcgMzAsMjYuNTUzMTI1IDMwLDI2IEwzMCw2IEMzMCw1LjQ0Njg3NSAyOS41NTMxMjUsNSAyOSw1IFogTTEwLjU2MjUsOS41IEMxMS42NjU2MjUsOS41IDEyLjU2MjUsMTAuMzk2ODc1IDEyLjU2MjUsMTEuNSBDMTIuNTYyNSwxMi42MDMxMjUgMTEuNjY1NjI1LDEzLjUgMTAuNTYyNSwxMy41IEM5LjQ1OTM3NSwxMy41IDguNTYyNSwxMi42MDMxMjUgOC41NjI1LDExLjUgQzguNTYyNSwxMC4zOTY4NzUgOS40NTkzNzUsOS41IDEwLjU2MjUsOS41IFogTTI2LjYyMTg3NSwyMy4xNTkzNzUgQzI2LjU3ODEyNSwyMy4xOTY4NzUgMjYuNTE4NzUsMjMuMjE4NzUgMjYuNDU5Mzc1LDIzLjIxODc1IEw1LjUzNzUsMjMuMjE4NzUgQzUuNCwyMy4yMTg3NSA1LjI4NzUsMjMuMTA2MjUgNS4yODc1LDIyLjk2ODc1IEM1LjI4NzUsMjIuOTA5Mzc1IDUuMzA5Mzc1LDIyLjg1MzEyNSA1LjM0Njg3NSwyMi44MDYyNSBMMTAuNjY4NzUsMTYuNDkzNzUgQzEwLjc1NjI1LDE2LjM4NzUgMTAuOTE1NjI1LDE2LjM3NSAxMS4wMjE4NzUsMTYuNDYyNSBDMTEuMDMxMjUsMTYuNDcxODc1IDExLjA0Mzc1LDE2LjQ4MTI1IDExLjA1MzEyNSwxNi40OTM3NSBMMTQuMTU5Mzc1LDIwLjE4MTI1IEwxOS4xLDE0LjMyMTg3NSBDMTkuMTg3NSwxNC4yMTU2MjUgMTkuMzQ2ODc1LDE0LjIwMzEyNSAxOS40NTMxMjUsMTQuMjkwNjI1IEMxOS40NjI1LDE0LjMgMTkuNDc1LDE0LjMwOTM3NSAxOS40ODQzNzUsMTQuMzIxODc1IEwyNi42NTkzNzUsMjIuODA5Mzc1IEMyNi43NDA2MjUsMjIuOTEyNSAyNi43MjgxMjUsMjMuMDcxODc1IDI2LjYyMTg3NSwyMy4xNTkzNzUgWiIgaWQ9IlNoYXBlIiBmaWxsPSIjRThFOEU4Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==')")),this.image.on("load",(function(){return e.imageLoadCallback()})),this.image.on("error",(function(){return e.imageLoadError()})),t.append(this.root),Vy(this.editor)||!this.root.inEditor()){if(this.root.on("mouseenter",(function(){e.maximize.show()})),this.root.on("mouseleave",(function(){e.maximize.hide()})),!Vy(this.editor))0===this.image.closest("a").length&&this.image.on("click",(function(t){return e.openZoom(t)}));this.image.on("dblclick",(function(t){return e.openZoom(t)})),this.maximize.on("click",(function(t){return e.openZoom(t)}))}if(!/^data:image\//i.test(this.src)){var o,a=!!(null===(o=this.image.get())||void 0===o?void 0:o.clientHeight);"uploading"!==this.status||a||this.detail.css("background-color","#F5F5F5");var s=this.size,l=s.width,c=s.height;l>this.maxWidth?this.detail.css("width","".concat(this.maxWidth,"px")):(l?this.detail.css("width","".concat(l,"px")):a||this.detail.css("width","300px"),c?this.detail.css("height","".concat(c,"px")):a||this.detail.css("height","200px"))}}}]),e}(),Jx=function(e){Qm(n,Qk);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"setProgressPercent",value:function(e){var t;null===(t=this.image)||void 0===t||t.setProgressPercent(e)}},{key:"setSize",value:function(e){this.setValue({size:e}),this.widthInput&&(this.widthInput.get().value=e.width.toString()),this.heightInput&&(this.heightInput.get().value=e.height.toString())}},{key:"onInputChange",value:function(e,t){var n,i=this.getValue();if("string"==typeof e){var r,o;if(!/^[1-9]+(\d+)?$/.test(e)&&this.widthInput)e=(null==i||null===(r=i.size)||void 0===r?void 0:r.width)||(null==i||null===(o=i.size)||void 0===o?void 0:o.naturalWidth)||0,this.widthInput.get().value=e.toString();e=parseInt(e.toString(),10)}if("string"==typeof t){var a,s;if(!/^[1-9]+(\d+)?$/.test(t)&&this.heightInput)t=(null==i||null===(a=i.size)||void 0===a?void 0:a.height)||(null==i||null===(s=i.size)||void 0===s?void 0:s.naturalHeight)||0,this.heightInput.get().value=t.toString();t=parseInt(t.toString(),10)}null===(n=this.image)||void 0===n||n.changeSize(parseInt(e.toString(),10),t)}},{key:"toolbar",value:function(){var e,t,n,i,r,o=this,a=this.editor.language,s=this.getValue();return!0===this.isLocalError||"error"===(null===(e=s)||void 0===e?void 0:e.status)?[{type:"delete"}]:[{type:"copy"},{type:"delete"},{type:"input",placeholder:a.get("image","toolbbarWidthTitle").toString(),prefix:"W:",value:(null===(t=s)||void 0===t||null===(n=t.size)||void 0===n?void 0:n.width)||0,didMount:function(e){o.widthInput=e.find("input[type=input]")},onChange:function(e){var t,n=Math.round(parseInt(e,10)*((null===(t=o.image)||void 0===t?void 0:t.rate)||1));o.onInputChange(e,n)}},{type:"input",placeholder:a.get("image","toolbbarHeightTitle").toString(),prefix:"H:",value:(null===(i=s)||void 0===i||null===(r=i.size)||void 0===r?void 0:r.height)||0,didMount:function(e){o.heightInput=e.find("input[type=input]")},onChange:function(e){var t,n=Math.round(parseInt(e,10)/((null===(t=o.image)||void 0===t?void 0:t.rate)||1));o.onInputChange(n,e)}},{type:"button",content:'<span class="data-icon data-icon-huanyuan"></span>',title:a.get("image","toolbbarReductionTitle").toString(),onClick:function(){var e,t,n,i;s=o.getValue(),o.onInputChange((null===(e=s)||void 0===e||null===(t=e.size)||void 0===t?void 0:t.naturalWidth)||0,(null===(n=s)||void 0===n||null===(i=n.size)||void 0===i?void 0:i.naturalHeight)||0)}}]}},{key:"onSelect",value:function(e){this.activated||kb(Km(n.prototype),"onSelect",this).call(this,e)}},{key:"onActivate",value:function(e){var t,i;kb(Km(n.prototype),"onActivate",this).call(this,e),e?null===(t=this.image)||void 0===t||t.focus():null===(i=this.image)||void 0===i||i.blur()}},{key:"render",value:function(){var e=this,t=this.getValue();t&&(this.image=new Xx(this.editor,{container:this.getCenter(),status:t.status||"done",src:t.src,size:t.size,alt:t.alt,link:t.link,percent:t.percent,message:t.message,onChange:function(t){t&&e.setSize(t)},onError:function(){e.isLocalError=!0,e.didUpdate()}}),this.image.render())}},{key:"didUpdate",value:function(){var e,t,n;null===(e=this.toolbarModel)||void 0===e||null===(t=e.getContainer())||void 0===t||t.remove(),null===(n=this.toolbarModel)||void 0===n||n.create()}}],[{key:"cardName",get:function(){return"image"}},{key:"cardType",get:function(){return ky.INLINE}}]),n}(),eC=function(e){Qm(r,Kw);var t,n,i=eb(r);function r(){var e;return jm(this,r),(e=i.apply(this,arguments)).cardComponents={},e.loadCounts={},e.extensionNames=["svg","png","bmp","jpg","jpeg","gif","tif","tiff","emf","webp"],e}return Rm(r,[{key:"init",value:function(){var e=this;Vy(this.editor)&&(this.editor.on("keydown:enter",(function(t){return e.markdown(t)})),this.editor.on("drop:files",(function(t){return e.dropFiles(t)})),this.editor.on("paste:event",(function(t){var n=t.files;return e.pasteFiles(n)})),this.editor.on("paste:schema",(function(t){return e.pasteSchema(t)})),this.editor.on("paste:each",(function(t){return e.pasteEach(t)})),this.editor.on("paste:after",(function(){return e.pasteAfter()})),this.editor.on("paste:markdown",(function(t){return e.pasteMarkdown(t)})));var t=this.options.file.accept,n=[];"string"==typeof t&&(t=t.split(",")),(t||[]).forEach((function(e){var t=(e=e.trim()).split(".").pop();t&&n.push(t)})),n.length>0&&(this.extensionNames=n)}},{key:"isImage",value:function(e){var t=Yk(e);return this.extensionNames.indexOf(t)>=0}},{key:"dataURIToFile",value:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})}},{key:"loadImage",value:function(e,t){var n=this;this.loadCounts[e]||(this.loadCounts[e]=1);var i=new Image;i.src=t.src,i.onload=function(){delete n.loadCounts[e],n.editor.card.update(e,t)},i.onerror=function(){n.loadCounts[e]<=3?setTimeout((function(){n.loadCounts[e]++,n.loadImage(e,t)}),500):(delete n.loadCounts[e],n.editor.card.update(e,t))}}},{key:"waiting",value:(n=Am(Iv.mark((function e(){var t,n=this;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return Object.keys(n.cardComponents).every((function(e){var t=n.cardComponents[e].getValue();return"uploading"!==(null==t?void 0:t.status)}))},e.abrupt("return",t()?Promise.resolve():new Promise((function(e){var n=0;!function i(){setTimeout((function(){t()||n>100?e():i(),n+=1}),50)}()})));case 2:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"execute",value:(t=Am(Iv.mark((function e(t){var n,i,r,o,a,s,l,c,u,d,h,f,p=this;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vy(this.editor)){e.next=2;break}return e.abrupt("return");case 2:if(n=this.editor,i=n.request,r=n.card,o=n.language,a=this.options.file,s=a.action,l=a.data,c=a.type,u=a.contentType,d=a.multiple,h=this.options.parse,f=this.options.file.limitSize||5242880,Array.isArray(t)||"string"==typeof t){e.next=12;break}return e.next=9,i.getFiles({event:t,accept:vy?"image/*":this.extensionNames.length>0?"."+this.extensionNames.join(",."):"",multiple:d});case 9:t=e.sent,e.next=15;break;case 12:if("string"!=typeof t){e.next=15;break}return this.insertRemote(t),e.abrupt("return");case 15:if(0!==t.length){e.next=17;break}return e.abrupt("return");case 17:return i.upload({url:s,data:l,type:c,contentType:u,onBefore:function(e){return!(e.size>f&&(p.editor.messageError(o.get("image","uploadLimitError").toString().replace("$size",(f/1024/1024).toFixed(0)+"M")),1))},onReady:function(e){if(Vy(p.editor)&&!p.cardComponents[e.uid]){var t=r.insert("image",{status:"uploading",src:e.src});p.cardComponents[e.uid]=t}},onUploading:function(e,t){var n=t.percent,i=p.cardComponents[e.uid||""];i&&i.setProgressPercent(n)},onSuccess:function(e,t){var n=p.cardComponents[t.uid||""];if(n){var i=e.url||e.data&&e.data.url||e.src||e.data&&e.data.src,o=h?h(e):i?{result:!0,data:i}:{result:!1};o.result?i=o.data:r.update(n.id,{status:"error",message:o.data||p.editor.language.get("image","uploadError")});var a={status:"done"};i&&(a.src=i,p.loadImage(n.id,a)),delete p.cardComponents[t.uid||""]}},onError:function(e,t){var n=p.cardComponents[t.uid||""];n&&(r.update(n.id,{status:"error",message:e.message||p.editor.language.get("image","uploadError")}),delete p.cardComponents[t.uid||""])}},t),e.abrupt("return");case 19:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"dropFiles",value:function(e){var t=this;if(Vy(this.editor)&&0!==(e=e.filter((function(e){return t.isImage(e)}))).length)return this.editor.command.execute("image-uploader",e),!1}},{key:"pasteSchema",value:function(e){e.add({type:"inline",name:"img",attributes:{src:"@url",width:"@number",height:"@number",style:{"max-width":"@length","max-height":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-size":"@number","data-width":"@number","data-height":"@number"}})}},{key:"pasteFiles",value:function(e){var t=this;if(Vy(this.editor)&&0!==(e=e.filter((function(e){return t.isImage(e)}))).length)return this.editor.command.execute("image-uploader",e),!1}},{key:"pasteEach",value:function(e){var t=this.options.isRemote;if(e.isCard()&&e.attributes(Yb)){var n=this.editor.card.find(e);if(!n)return;var i=n.getValue();return i&&i.src?void(t&&t(i.src)?(i.status="uploading",i.percent=0,this.editor.card.replaceNode(e,"image",i)):"uploading"===i.status&&(i.percent=0,n.setValue(_m(_m({},i),{},{status:"done"})))):void e.remove()}if("img"===e.name){var r=e.attributes("src")||e.attributes("data-src"),o=e.attributes("alt");if(!r)return void e.remove();this.editor.card.replaceNode(e,"image",{src:r,status:t&&t(r)||/^data:image\//i.test(r)?"uploading":"done",alt:o,percent:0})}}},{key:"uploadAddress",value:function(e,t){var n=this;if(Vy(this.editor)){var i=this.options.remote,r=i.action,o=i.type,a=i.data,s=i.contentType,l=this.options.parse;this.editor.request.ajax({url:r,method:"POST",contentType:s||"application/json",type:void 0===o?"json":o,data:_m(_m({},a),{},{url:e}),success:function(e){var i=e.url||e.data&&e.data.url||e.src||e.data&&e.data.src,r=l?l(e):i?{result:!0,data:i}:{result:!1};r.result?i=r.data:n.editor.card.update(t.id,{status:"error",message:r.data||n.editor.language.get("image","uploadError")});var o={status:"done"};i&&(o.src=i,n.loadImage(t.id,o))},error:function(e){n.editor.card.update(t.id,{status:"error",message:e.message||n.editor.language.get("image","uploadError")})}})}}},{key:"insertRemote",value:function(e,t){var n={src:e,alt:t,status:"uploading"},i=this.options.isRemote;if(i&&i(e)){var r=this.editor.card.insert("image",n);this.uploadAddress(e,r)}else n.status="done",this.editor.card.insert("image",n)}},{key:"pasteAfter",value:function(){var e=this;this.editor.container.find("[data-card-key=image]").each((function(t,n){var i=e.editor.card.find(t);if(i&&Vy(e.editor)){var r=i.getValue();if("uploading"===(null==r?void 0:r.status)&&!Object.keys(e.cardComponents).find((function(t){return e.cardComponents[t].id===i.id}))){var o=r.src;if(/^data:image\//i.test(o)){var a=e.dataURIToFile(o),s=Yk(a),l=s?"image.".concat(s):"image",c=new globalThis.File([a],l);return c.uid=(new Date).getTime()+"-"+wy(),e.editor.command.execute("image-uploader",[c]),void(e.cardComponents[c.uid]=i)}var u=e.options.isRemote;u&&u(o)&&e.uploadAddress(o,i)}}}))}},{key:"markdown",value:function(e){if(Vy(this.editor)&&!1!==this.options.markdown){var t=this.editor.change,n=t.getRange();if(n.collapsed&&!t.isComposing()&&this.markdown){var i=this.editor.block.closest(n.startNode);if(this.editor.node.isRootBlock(i)){var r=this.editor.block.getLeftText(i),o=/^!\[([^\]]{0,})\]\((https?:\/\/[^\)]{5,})\)$/.exec(r);if(o){e.preventDefault();var a=o[1].split("|"),s=o[2];this.editor.block.removeLeftText(i);var l=a[1];"center"!==l&&"right"!==l||this.editor.command.execute("alignment",l),this.insertRemote(s,a[0])}}}}}},{key:"pasteMarkdown",value:function(e){if(Vy(this.editor)&&this.markdown&&e.isText()){var t=this.options.isRemote,n=e.text();if(n){var i=/(!\[([^\]]{0,})\]\((https?:\/\/[^\)]{5,})\))/,r=i.exec(n);if(r){for(var o="",a=e.clone(!0).get(),s=this.editor,l=s.$,c=s.card;a.textContent&&(r=i.exec(a.textContent));){var u,d=a.splitText(r.index);o+=a.textContent,a=d.splitText(r[0].length);var h=r[2],f=r[3],p=c.replaceNode(l(d),"image",{src:f,status:t&&t(f)||/^data:image\//i.test(f)?"uploading":"done",alt:h,percent:0});d.remove(),o+=(null===(u=p.get())||void 0===u?void 0:u.outerHTML)+"\n"}o+=a.textContent,e.text(o)}}}}}],[{key:"pluginName",get:function(){return"image-uploader"}}]),r}(),tC={en:{image:{next:"Next",prev:"Previous",zoomIn:"Zoom In",zoomOut:"Zoom Out",originSize:"Origin Size",bestSize:"Best Size",errorMessageCopy:"Copy error message",loadError:"The picture failed to load!",uploadError:"The picture failed to upload!",uploadLimitError:"Upload image size is limited to $size",toolbarReductionTitle:"Reduction size",toolbarWidthTitle:"Width",toolbarHeightTitle:"Height"}},"zh-cn":{image:{next:"下一张",prev:"上一张",zoomIn:"放大",zoomOut:"缩小",originSize:"实际尺寸",bestSize:"适应屏幕",errorMessageCopy:"复制错误信息",loadError:"图片加载失败！",uploadError:"上传图片失败！",uploadLimitError:"上传图片大小限制为 $size",toolbarReductionTitle:"还原",toolbarWidthTitle:"宽度",toolbarHeightTitle:"宽度"}}},nC=function(e){Qm(i,Kw);var t,n=eb(i);function i(){var e;return jm(this,i),(e=n.apply(this,arguments)).components=[],e}return Rm(i,[{key:"init",value:function(){var e=this;this.editor.language.add(tC),this.editor.on("paser:html",(function(t){return e.parseHtml(t)}))}},{key:"execute",value:function(e,t,n){var i={status:e,src:t,alt:n};"error"===e&&(i.src="",i.message=t);var r=this.editor.card.insert("image",i);this.components.push(r)}},{key:"waiting",value:(t=Am(Iv.mark((function e(){var t,n=this;return Iv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return n.components.every((function(e,t){var i=e.getValue();if("uploading"!==(null==i?void 0:i.status))return!0;var r=!e.root.inEditor();return r&&n.components.splice(t,1),r}))},e.abrupt("return",t()?Promise.resolve():new Promise((function(e){var n=0;!function i(){setTimeout((function(){t()||n>100?e():i(),n+=1}),50)}()})));case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"parseHtml",value:function(e){var t=this,n=this.editor.$;e.find("[".concat(Ub,"=").concat(Jx.cardName)).each((function(e){var i=n(e),r=t.editor.card.find(i),o=null==r?void 0:r.getValue();if(null==o?void 0:o.src){var a=i.find(".data-image-meta > img");i.empty(),a.attributes("src",o.src),a.css("visibility","visible"),i.replaceWith(a)}else i.remove()}))}}],[{key:"pluginName",get:function(){return"image"}}]),i}(),iC=/\s/;var rC=/^\s+/;function oC(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&iC.test(e.charAt(t)););return t}(e)+1).replace(rC,""):e}function aC(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var sC="object"==typeof global&&global&&global.Object===Object&&global,lC="object"==typeof self&&self&&self.Object===Object&&self,cC=(sC||lC||Function("return this")()).Symbol,uC=Object.prototype,dC=uC.hasOwnProperty,hC=uC.toString,fC=cC?cC.toStringTag:void 0;var pC=Object.prototype.toString;var gC=cC?cC.toStringTag:void 0;function vC(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":gC&&gC in Object(e)?function(e){var t=dC.call(e,fC),n=e[fC];try{e[fC]=void 0;var i=!0}catch(YM){}var r=hC.call(e);return i&&(t?e[fC]=n:delete e[fC]),r}(e):function(e){return pC.call(e)}(e)}var mC=/^[-+]0x[0-9a-f]+$/i,bC=/^0b[01]+$/i,yC=/^0o[0-7]+$/i,wC=parseInt;function kC(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==vC(e)}(e))return NaN;if(aC(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=aC(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=oC(e);var n=bC.test(e);return n||yC.test(e)?wC(e.slice(2),n?2:8):mC.test(e)?NaN:+e}function xC(e){var t=function(e){return e?1/0===(e=kC(e))||-1/0===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function CC(e){return"number"==typeof e&&e==xC(e)}var MC=function(){function e(t,n){jm(this,e),this.editor=t,this.table=n}return Rm(e,[{key:"htmlEdit",value:function(t,n){var i=t.rows,r=t.cols,o=t.html,a="<td ".concat("data-transient-attributes",'="table-cell-selection">').concat(e.EmptyCell,"</td>").repeat(r),s="<tr>".concat(a,"</tr>").repeat(i),l="<col />".repeat(r),c="<colgroup>".concat(l,"</colgroup>"),u="<div ".concat(Tb,'="').concat(Db,'" class="').concat("table-cols-header",'">')+'<div class="'.concat("table-col-delete-button",'"><span class="data-icon data-icon-delete"></span></div>')+'<div class="'.concat("table-col-add-button",'"><span class="data-icon data-icon-plus"></span><div class="').concat("table-col-add-split-button",'"></div></div>')+'<div class="'.concat("table-cols-header-item",'" draggable="true">\n                <div class="col-dragger">\n                    <span class="data-icon data-icon-drag"></span>\n                    <p class="drag-info"></p>\n                </div>\n                <div class="').concat("cols-trigger",'"></div>\n            </div>').repeat(r)+"\n        </div>",d="<div ".concat(Tb,'="').concat(Db,'" class="').concat("table-rows-header",'">')+'<div class="'.concat("table-row-delete-button",'"><span class="data-icon data-icon-delete"></span></div>')+'<div class="'.concat("table-row-add-button",'"><span class="data-icon data-icon-plus"></span><div class="').concat("table-row-add-split-button",'"></div></div>')+'<div class="'.concat("table-rows-header-item",'" draggable="true">\n                <div class="row-dragger">\n                    <span class="data-icon data-icon-drag"></span>\n                    <span class="drag-info"></span>\n                </div>\n                <div class="').concat("rows-trigger",'"></div>\n            </div>').repeat(i)+"\n        </div>",h="<div ".concat(Tb,'="').concat(Db,'" class="').concat("table-highlight",'"></div>'),f="<div ".concat(Tb,'="').concat(Db,'" class="').concat("table-header",'"><div class="').concat("table-header",'-item"></div></div>'),p="<div ".concat(Tb,'="').concat(Db,'" class="').concat("table-placeholder",'"></div>'),g=n.map((function(e){var t;if(e.split)return'<div class="split"></div>';var n=e.text;switch(e.action){case"insertColLeft":case"insertColRight":case"insertRowUp":case"insertRowDown":n=(null===(t=n)||void 0===t?void 0:t.replace("$data","<input type='text' class=\"".concat("table-menubar-item-input",'" />')))||""}return'<div class="'.concat("table-menubar-item",'" data-action="').concat(e.action,'">\n                <span class="data-icon data-icon-table-').concat(e.icon,'"></span>').concat(n,"</div>")}));(g=["<div ".concat(Tb,'="').concat(Db,'" class="').concat("table-menubar",'">').concat(g.join(""),"</div>")],o)&&(o.indexOf("<colgroup")>-1||(o=o.replace(/^(<table[^>]+>)/,(function(e){return e+c}))),o=this.table.helper.normalize(this.editor.$(o)).get().outerHTML);var v=o||'<table class="'.concat("data-table",'" ').concat("data-transient-attributes",'="class">').concat(c).concat(s,"</table>");return'<div class="'.concat("table-wrapper",'" ').concat("data-transient-attributes",'="*">\n                ').concat(f,'\n                <div class="').concat("table-viewport",'">\n                    ').concat(u,"\n                    ").concat(v,"\n                    ").concat(p,"\n                    ").concat(h,"\n                </div>\n                ").concat(d,"\n                ").concat(g,"\n            </div>")}},{key:"htmlView",value:function(e){var t=e.html;return'<div class="'.concat("data-table-reader",'">').concat(t,"</div>")}}]),e}();MC.TABLE_WRAPPER_CLASS=".".concat("table-wrapper"),MC.TABLE_CLASS=".".concat("data-table"),MC.COLS_HEADER_CLASS=".".concat("table-cols-header"),MC.COLS_HEADER_ITEM_CLASS=".".concat("table-cols-header-item"),MC.COLS_HEADER_TRIGGER_CLASS=".".concat("cols-trigger"),MC.COLS_ADDITION_HEADER_CLASS=".".concat("cols-addition-header"),MC.ROWS_HEADER_CLASS=".".concat("table-rows-header"),MC.ROWS_HEADER_ITEM_CLASS=".".concat("table-rows-header-item"),MC.ROWS_HEADER_TRIGGER_CLASS=".".concat("rows-trigger"),MC.HEADER_CLASS=".".concat("table-header"),MC.MENUBAR_CLASS=".".concat("table-menubar"),MC.MENUBAR_ITEM_CLASS=".".concat("table-menubar-item"),MC.MENUBAR_ITEM_INPUT_CALSS=".".concat("table-menubar-item-input"),MC.VIEWPORT=".".concat("table-viewport"),MC.VIEWPORT_READER=".".concat("data-table-reader"),MC.PLACEHOLDER_CLASS=".".concat("table-placeholder"),MC.MULTI_ADDITION_CLASS=".".concat("multi-addition"),MC.TABLE_HIGHLIGHT_CLASS=".".concat("table-highlight"),MC.ROW_DELETE_BUTTON_CLASS=".".concat("table-row-delete-button"),MC.COL_DELETE_BUTTON_CLASS=".".concat("table-col-delete-button"),MC.ROW_ADD_BUTTON_CLASS=".".concat("table-row-add-button"),MC.COL_ADD_BUTTON_CLASS=".".concat("table-col-add-button"),MC.ROW_ADD_BUTTON_SPLIT_CLASS=".".concat("table-row-add-split-button"),MC.COL_ADD_BUTTON_SPLIT_CLASS=".".concat("table-col-add-split-button"),MC.TABLE_TD_CONTENT_CLASS=".".concat("table-main-content"),MC.TABLE_TD_BG_CLASS=".".concat("table-main-bg"),MC.EmptyCell='<div class="'.concat("table-main-content",'" contenteditable="true" ').concat(Tb,'="').concat(jb,'"><p><br /></p></div><div class="').concat("table-main-bg",'"><div class="table-main-border-top"></div><div class="table-main-border-right"></div><div class="table-main-border-bottom"></div><div class="table-main-border-left"></div></div>');var SC=function(){function e(t){jm(this,e),this.editor=t}return Rm(e,[{key:"isEmptyModelCol",value:function(e){return e.isEmpty}},{key:"getTableModel",value:function(e){for(var t=[],n=e.get(),i=n.rows,r=i.length,o=0;o<r;o++)for(var a=i[o].cells,s=a.length,l=0;l<s;l++){var c=a[l],u=c.rowSpan,d=c.colSpan;d=void 0===d?1:d;var h=(u=void 0===u?1:u)>1||d>1;t[o]=t[o]||[];for(var f=l;t[o][f];)f++;if(t[o][f]={rowSpan:u,colSpan:d,isMulti:h,element:c},h)for(var p=u;p>0;){for(var g=d;g>0;){if(1!==g||1!==p){var v=o+p-1,m=f+g-1;t[v]=t[v]||[],t[v][m]={isEmpty:!0,parent:{row:o,col:f},element:null}}g--}p--}}var b=t.map((function(e){return e.length})),y=Math.max.apply(Math,Wm(b));return t.forEach((function(e){if(e.length<y)for(var t=y-e.length;t--;)e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var n=0;n<y;n++)e[n]||(e[n]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:t.length,cols:y,width:n.offsetWidth,height:n.offsetHeight,table:t}}},{key:"normalize",value:function(e){var t=this;this.trimStartTr(e),this.fixNumberTr(e),e.addClass("data-table"),e.attributes("data-transient-attributes","class");var n=e.css("width");0===parseInt(n)?e.css("width","auto"):e.css("width",parseInt(n,10)+"px"),e.css("background-color","");var i=this.editor.$;e.find("td").each((function(e){var t=i(e);t.attributes("data-transient-attributes","table-cell-selection");var n=t.find(Lb);if(0===n.length){var r=t.html();t.empty(),t.append(MC.EmptyCell),(n=t.find(Lb)).html(r)}}));var r=this.getTableModel(e),o=e.find("col");if(0!==o.length){for(var a=o.length-1;a>=0;a--){var s=o[a],l=i(o[a]).attributes("width");if(l&&i(o[a]).attributes("width",parseInt(l)),s.span>1)for(var c=s.span-1;c--;){var u;null===(u=o[a].parentNode)||void 0===u||u.insertBefore(o[a].cloneNode(),o[a])}}if((o=e.find("col")).length<r.cols)for(var d=o.length-1,h=r.cols-o.length;h--;){var f;null===(f=o[0].parentNode)||void 0===f||f.appendChild(o[d].cloneNode())}e.find("col").attributes("span",1)}else{var p=e.find("colgroup")[0];p||(p=document.createElement("colgroup")),e.prepend(p);for(var g=function(e){var t=e.find("tr")[0],n=i(t).find("td"),r=[];n.each((function(e){var t=i(e).attributes("data-colwidth"),n=i(e).attributes("width"),o=i(e)[0].colSpan;t?t=t.split(","):n&&(n=parseInt(n)/o);for(var a=0;o>a;a++)t&&t[a]?r.push(parseInt(t[a])):n?r.push(parseInt(n.toString())):r.push(void 0)}));var o=e.find("td");return o.removeAttributes("data-colwidth"),o.removeAttributes("width"),r}(e),v=document.createElement("col"),m=0;r.cols>m;m++){var b=v.cloneNode();g[m]&&b.setAttribute("width",(g[m]||"").toString()),p.appendChild(b)}}var y=e.get();return r.table.forEach((function(e,n){y.rows[n]||y.insertRow(n);for(var i=e.filter((function(e){return!t.isEmptyModelCol(e)&&e.isShadow})).length;i--;)0===n?y.rows[n].insertCell(0):y.rows[n].insertCell()})),e.find("tr").each((function(e){var t=i(e),n=parseInt(i(e).css("height"));n=n||33,t.css("height",n+"px")})),e}},{key:"trimStartTr",value:function(e){var t=e.find("tr").eq(0);t&&0===t.children().length&&t.remove()}},{key:"fixNumberTr",value:function(e){for(var t=e.get(),n=t.rows,i=n.length,r=[],o=0,a=[],s=0,l=0,c=0,u=0;u<i;u++){for(var d=n[u].cells,h=0,f=0;f<d.length;f++){var p=d[f],g=p.rowSpan,v=p.colSpan;s+=g*v,h+=v,g>1&&(l+=(g-1)*v)}a[u]=h,0===u&&(o=h),c=Math.max(h,c)}if(CC(s/o)&&o===c){var m=0;if(a.forEach((function(e){m+=c-e})),m!==l)if(CC((l-m)/c)){for(var b=[],y=0;y<i;y++){for(var w=n[y].cells,k=y+b.length;r[k]===c;)b.push(k),k++;for(var x=0;x<w.length;x++){var C=w[x],M=C.rowSpan,S=C.colSpan;if(M>1)for(var E=1;E<M;E++)r[k+E]=(r[k+E]||0)+S}}b.forEach((function(e){t.insertRow(e)}))}}}},{key:"fixDragEvent",value:function(e){var t,n;null===(t=e.dataTransfer)||void 0===t||t.clearData(),null===(n=e.dataTransfer)||void 0===n||n.setData("aomao","")}},{key:"copyCss",value:function(e,t){var n=this.editor.$;ry(e)&&(e=n(e)),ry(t)&&(t=n(t)),t.css("text-align",e.css("text-align")),t.css("vertical-align",e.css("vertical-align"));var i=e.css("background-color");i="rgba(0, 0, 0, 0)"!==i?i:"#fff",t.css("background-color",i),t.css("color",e.css("color")),t.css("font-weight",e.css("font-weight"))}},{key:"copyTo",value:function(e,t){var n=this.editor.$;ry(e)&&(e=n(e)),ry(t)&&(t=n(t)),t.html(Py(e.html()))}},{key:"copyHTML",value:function(e){var t;this.clipboard={html:e,text:(null===(t=this.editor.$(e).get())||void 0===t?void 0:t.innerText)||""}}},{key:"getCopyData",value:function(){return this.clipboard}},{key:"trimBlankSpan",value:function(e){for(var t=[],n=0,i=e.length-1;e[n]&&"span"===e[n].tagName.toLowerCase()&&""===e[n].innerText.trim();)n++;for(;e[i]&&"span"===e[i].tagName.toLowerCase()&&""===e[i].innerText.trim();)i--;if(n<=i)for(var r=n;r<=i;r++)t.push(e[r]);return t.length?this.editor.$(t):e}},{key:"normalizeTable",value:function(e){this.trimStartTr(e),this.fixNumberTr(e),e.addClass("data-table");var t=e.css("width");0===parseInt(t)?e.css("width","auto"):e.css("width",parseInt(t,10)+"px"),e.css("background-color","");var n=this.getTableModel(e),i=this.editor.$,r=e.find("col");if(0!==r.length){for(var o=r.length-1;o>=0;o--){var a=r[o],s=i(r[o]).attributes("width");if(s&&i(r[o]).attributes("width",parseInt(s)),a.span>1)for(var l=a.span-1;l--;){var c;null===(c=r[o].parentNode)||void 0===c||c.insertBefore(r[o].cloneNode(),r[o])}}if((r=e.find("col")).length<n.cols)for(var u=r.length-1,d=n.cols-r.length;d--;){var h;null===(h=r[0].parentNode)||void 0===h||h.appendChild(r[u].cloneNode())}e.find("col").attributes("span",1)}else{var f=e.find("colgroup")[0];f||(f=document.createElement("colgroup")),e.prepend(f);for(var p=function(e){var t=e.find("tr")[0],n=i(t).find("td"),r=[];n.each((function(e){var t=i(e).attributes("data-colwidth"),n=i(e).attributes("width"),o=i(e)[0].colSpan;t?t=t.split(","):n&&(n=parseInt(n)/o);for(var a=0;o>a;a++)t&&t[a]?r.push(parseInt(t[a])):n?r.push(parseInt(n.toString())):r.push(void 0)}));var o=e.find("td");return o.removeAttributes("data-colwidth"),o.removeAttributes("width"),r}(e),g=document.createElement("col"),v=0;n.cols>v;v++){var m=g.cloneNode();p[v]&&m.setAttribute("width",(p[v]||"").toString()),f.appendChild(m)}}var b=e.get();return n.table.forEach((function(e,t){b.rows[t]||b.insertRow(t);for(var n=e.filter((function(e){return e.isShadow})).length;n--;)0===t?b.rows[t].insertCell(0):b.rows[t].insertCell()})),e.find("tr").each((function(e){var t=i(e),n=parseInt(i(e).css("height"));n=n||33,t.css("height",n+"px")})),e}}]),e}(),EC=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e,i,r){var o;return jm(this,n),(o=t.call(this)).contextVisible=!1,o.moveColIndex=-1,o.moveRowIndex=-1,o.onChangeSize=function(e){o.dragging&&(o.dragging.y>-1?o.onChangeRowHeight(e):o.dragging.x>-1&&o.onChangeColWidth(e))},o.onChangeSizeEnd=function(e){if(("mouseleave"!==e.type||!o.table.getCenter().contains(e.toElement))&&o.dragging&&o.changeSize){var t=o.changeSize.trigger,n=t.width,i=t.height,r=t.element;r.removeClass("dragging"),o.dragging.x>-1&&r.css("height","".concat(i,"px")),o.dragging.y>-1&&r.css("width","".concat(n,"px")),o.dragging=void 0,o.renderRowBars(),o.unbindChangeSizeEvent(),o.emit("sizeChanged")}},o.onDragCol=function(e){var t;if(e.stopPropagation(),o.draggingHeader&&e.target&&(void 0===o.dragging&&(o.dragging={x:e.offsetX,y:e.offsetY}),!(Math.abs(o.dragging.x-e.offsetX)<3))){var n=o.editor.$;o.dragging.x=e.offsetX,o.draggingHeader.element.removeClass("dragging");var i=n(e.target).closest("td"),r=n(e.target).closest(MC.COLS_HEADER_ITEM_CLASS);if(0!==i.length||0!==r.length)if(r.length>0){var a,s=null===(a=o.colsHeader)||void 0===a?void 0:a.find(MC.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));if(void 0===s)return;var l=s,c=e.offsetX>r.get().offsetWidth/2?l+1:l;o.showPlaceHolder(c)}else{var u=null===(t=o.colsHeader)||void 0===t?void 0:t.find(MC.COLS_HEADER_ITEM_CLASS);if(u){var d=i.get().colSpan,h=Vm(o.table.selection.getCellPoint(i),2);h[0];for(var f=h[1],p=f,g=0,v=0;v<d;v++){var m=u.eq(f+v).get();if(g+m.offsetWidth/2>e.offsetX){p=f+v;break}if(g+m.offsetWidth>e.offsetX){p=f+v+1;break}g+=m.offsetWidth}o.showPlaceHolder(p)}}}},o.onDragColEnd=function(){var e,t;o.unbindDragColEvent();var n=o.draggingHeader||{},i=n.index,r=n.count;if(o.draggingHeader&&void 0!==i&&void 0!==r){var a=o.table,s=a.command,l=a.selection,c=l.getSelectArea(),u=null===(e=o.table.wrapper)||void 0===e?void 0:e.find(MC.COLS_HEADER_ITEM_CLASS);if(u){for(var d=[],h=c.begin.col;h<=c.end.col;h++){var f,p;d.push((null===(f=u.eq(h))||void 0===f||null===(p=f.get())||void 0===p?void 0:p.offsetWidth)||0)}s.mockCopy(),c.begin.col>i?(s.insertColAt(i,r,!1,d,!0),l.selectCol(i,i+r-1),s.mockPaste(!0),l.selectCol(c.begin.col+r,c.end.col+r),s.removeCol(),l.selectCol(i,i+r-1)):(s.insertColAt(i,r,!1,d,!0),l.selectCol(i,i+r-1),s.mockPaste(!0),l.selectCol(c.begin.col,c.end.col),s.removeCol(),l.selectCol(i-r,i-1)),null===(t=o.placeholder)||void 0===t||t.css("display","none"),o.draggingHeader=void 0,o.dragging=void 0}}},o.onDragRow=function(e){var t;if(e.stopPropagation(),o.draggingHeader&&e.target&&(void 0===o.dragging&&(o.dragging={x:e.offsetX,y:e.offsetY}),!(Math.abs(o.dragging.y-e.offsetY)<3))){o.dragging.y=e.offsetY,o.draggingHeader.element.removeClass("dragging");var n=o.editor.$,i=n(e.target).closest("td"),r=n(e.target).closest(MC.ROWS_HEADER_ITEM_CLASS);if(0!==i.length||0!==r.length)if(r.length>0){var a,s=null===(a=o.rowsHeader)||void 0===a?void 0:a.find(MC.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));if(void 0===s)return;var l=s,c=e.offsetY>r.get().offsetHeight/2?l+1:l;o.showPlaceHolder(c)}else{var u=null===(t=o.rowsHeader)||void 0===t?void 0:t.find(MC.ROWS_HEADER_ITEM_CLASS);if(u){for(var d=i.get().rowSpan,h=Vm(o.table.selection.getCellPoint(i),1)[0],f=h,p=0,g=0;g<d;g++){var v=u[h+g];if(p+v.offsetHeight/2>e.offsetY){f=h+g;break}if(p+v.offsetHeight>e.offsetY){f=h+g+1;break}p+=v.offsetHeight}o.showPlaceHolder(f)}}}},o.onDragRowEnd=function(){var e;o.unbindDragRowEvent();var t=o.draggingHeader||{},n=t.index,i=t.count;if(o.draggingHeader&&void 0!==n&&void 0!==i){var r=o.table,a=r.command,s=r.selection,l=s.getSelectArea(),c=l.begin,u=l.end;a.mockCopy(),c.row>n?(a.insertRowAt(n,i,!1,!0),s.selectRow(n,n+i-1),a.mockPaste(!0),s.selectRow(c.row+i,u.row+i),a.removeRow(),s.selectRow(n,n+i-1)):(a.insertRowAt(n,i,!1,!0),s.selectRow(n,n+i-1),a.mockPaste(!0),s.selectRow(c.row,u.row),a.removeRow(),s.selectRow(n-i,n-1)),null===(e=o.placeholder)||void 0===e||e.css("display","none"),o.draggingHeader=void 0,o.dragging=void 0}},o.onMenuInputMousedown=function(e){e.stopPropagation()},o.handleHighlightRow=function(){var e=o.table.selection,t=e.tableModel;if(t){var n=_m({},e.getSelectArea());n.allCol=!0,n.begin={row:n.begin.row,col:0},n.end={row:n.end.row,col:t.cols-1},e.showHighlight(n)}},o.handleHighlightCol=function(){var e=o.table.selection,t=e.tableModel;if(t){var n=_m({},e.getSelectArea());n.allRow=!0,n.begin={row:0,col:n.begin.col},n.end={row:t.rows-1,col:n.end.col},e.showHighlight(n)}},o.handleHighlightTable=function(){var e=o.table.selection,t=e.tableModel;if(t){var n=_m({},e.getSelectArea());n.allRow=!0,n.allCol=!0,n.begin={row:0,col:0},n.end={row:t.rows-1,col:t.cols-1},e.showHighlight(n)}},o.table=i,o.editor=e,o.COL_MIN_WIDTH=r.col_min_width,o.ROW_MIN_HEIGHT=r.row_min_height,o}return Rm(n,[{key:"init",value:function(){var e,t,n,i=this.table.wrapper;i&&(this.tableRoot=i.find(MC.TABLE_CLASS),this.colsHeader=i.find(MC.COLS_HEADER_CLASS),this.rowsHeader=i.find(MC.ROWS_HEADER_CLASS),this.tableHeader=i.find(MC.HEADER_CLASS),this.viewport=i.find(MC.VIEWPORT),this.menuBar=i.find(MC.MENUBAR_CLASS),this.placeholder=i.find(MC.PLACEHOLDER_CLASS),this.rowDeleteButton=null===(e=this.rowsHeader)||void 0===e?void 0:e.find(MC.ROW_DELETE_BUTTON_CLASS),this.colDeleteButton=i.find(MC.COL_DELETE_BUTTON_CLASS),this.colAddButton=null===(t=this.colsHeader)||void 0===t?void 0:t.find(MC.COL_ADD_BUTTON_CLASS),this.colAddButtonSplit=this.colAddButton.find(MC.COL_ADD_BUTTON_SPLIT_CLASS),this.rowAddButton=null===(n=this.rowsHeader)||void 0===n?void 0:n.find(MC.ROW_ADD_BUTTON_CLASS),this.rowAddButtonSplit=this.rowAddButton.find(MC.ROW_ADD_BUTTON_SPLIT_CLASS),this.renderRowBars(),this.renderColBars(),this.bindEvents())}},{key:"renderRowBars",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,r=null===(e=this.tableRoot)||void 0===e?void 0:e.get();if(r){var o=r.rows;i=i||o.length;for(var a=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(MC.ROWS_HEADER_ITEM_CLASS),s=n;s<i;s++){var l;null==a||null===(l=a.eq(s))||void 0===l||l.css("height","".concat(o[s].offsetHeight,"px"))}}}},{key:"renderColBars",value:function(){var e,t,n,i,r,o=this,a=null===(e=this.tableRoot)||void 0===e?void 0:e.get();if(a){var s=a.offsetWidth;null===(t=this.tableRoot)||void 0===t||t.css("width","".concat(s,"px")),null===(n=this.colsHeader)||void 0===n||n.css("width","".concat(s,"px"));var l=null===(i=this.tableRoot)||void 0===i?void 0:i.find("col");if(l){var c=!0,u={},d=0,h=0;l.each((function(e,t){var n=o.editor.$(e).attributes("width");n?(u[t]=n,d+=parseInt(n),c=!1):h++}));var f=null===(r=this.colsHeader)||void 0===r?void 0:r.find(MC.COLS_HEADER_ITEM_CLASS);if(f)if(c){var p,g=[],v=this.table.selection.tableModel;null==v||null===(p=v.table)||void 0===p||p.forEach((function(e){e.forEach((function(e,t){g[t]||o.table.helper.isEmptyModelCol(e)||e.isMulti||!e.element||(g[t]=e.element.offsetWidth)}))}));for(var m=0,b=0,y=0;y<l.length;y++)g[y]?b+=g[y]:m++;var w=0;m>0&&(w=Math.round((s-b)/m));for(var k=0;k<l.length;k++){var x,C,M=g[k]||w;null===(x=f.eq(k))||void 0===x||x.css("width",M+"px"),null===(C=l.eq(k))||void 0===C||C.attributes("width",M)}}else if(h){var S=Math.round((s-d)/h);l.each((function(e,t){var n,i,r=void 0===u[t]?S:u[t];null===(n=f.eq(t))||void 0===n||n.css("width",r+"px"),null===(i=l.eq(t))||void 0===i||i.attributes("width",r)}))}else l.each((function(e,t){var n,i,r=Math.round(s*u[t]/d);null===(n=f.eq(t))||void 0===n||n.css("width",r+"px"),null===(i=l.eq(t))||void 0===i||i.attributes("width",r)}))}}}},{key:"bindEvents",value:function(){var e,t,n,i,r,o,a,s,l,c,u,d,h,f,p,g,v,m=this;null===(e=this.colsHeader)||void 0===e||e.on("mousedown",(function(e){return m.onMouseDownColsHeader(e)})).on("click",(function(e){return m.onClickColsHeader(e)})).on("dragstart",(function(e){return m.onDragStartColsHeader(e)})),null===(t=this.rowsHeader)||void 0===t||t.on("mousedown",(function(e){return m.onMouseDownRowsHeader(e)})).on("click",(function(e){return m.onClickRowsHeader(e)})).on("dragstart",(function(e){return m.onDragStartRowsHeader(e)})),null===(n=this.tableHeader)||void 0===n||n.on("click",(function(e){return m.onClickTableHeader(e)})),null===(i=this.tableRoot)||void 0===i||i.on("contextmenu",(function(e){return e.preventDefault()})),null===(r=this.colsHeader)||void 0===r||r.on("contextmenu",(function(e){return e.preventDefault()})),null===(o=this.rowsHeader)||void 0===o||o.on("contextmenu",(function(e){return e.preventDefault()})),null===(a=this.tableRoot)||void 0===a||a.on("mousedown",(function(e){return m.onTableMouseDown(e)})),null===(s=this.menuBar)||void 0===s||s.on("click",(function(e){return m.handleClickMenu(e)})),null===(l=this.menuBar)||void 0===l||l.on("mouseover",(function(e){return m.handleHoverMenu(e)})),null===(c=this.menuBar)||void 0===c||c.on("mouseleave",(function(e){return m.hideHighlight(e)})),null===(u=this.viewport)||void 0===u||u.on("mousedown",(function(e){var t;if(e.target){var n=m.editor.$(e.target);if(Vy(m.editor)&&e.target&&(null===(t=m.viewport)||void 0===t?void 0:t.equal(n))){e.preventDefault(),e.stopPropagation();var i=m.editor.change.getRange();m.table.focusPrevBlock(i,!0),m.editor.card.activate(i.startNode,Cy.MOUSE_DOWN),m.editor.focus()}}})),null===(d=this.rowDeleteButton)||void 0===d||d.on("mouseover",(function(e){return m.handleHighlightRow()})).on("mouseleave",(function(e){return m.hideHighlight(e)})).on("click",(function(e){m.table.command.removeRow()})),null===(h=this.colDeleteButton)||void 0===h||h.on("mouseover",(function(e){return m.handleHighlightCol()})).on("mouseleave",(function(e){return m.hideHighlight(e)})).on("click",(function(e){m.table.command.removeCol()})),null===(f=this.colAddButton)||void 0===f||f.on("mouseenter",(function(){m.hideColAddButtonTimeount&&clearTimeout(m.hideColAddButtonTimeount)})).on("mouseleave",(function(){m.hideColAddButtonTimeount=setTimeout((function(){var e;null===(e=m.colAddButton)||void 0===e||e.hide(),m.moveColIndex=-1}),200)})).on("click",(function(){m.moveColIndex>-1&&m.table.command.insertColAt(m.moveColIndex,1)})),null===(p=this.colsHeader)||void 0===p||p.on("mouseenter",(function(){m.hideColAddButtonTimeount&&clearTimeout(m.hideColAddButtonTimeount)})).on("mousemove",(function(e){return m.onMouseMoveColsHeader(e)})).on("mouseleave",(function(){m.hideColAddButtonTimeount=setTimeout((function(){var e;null===(e=m.colAddButton)||void 0===e||e.hide()}),200)})),null===(g=this.rowAddButton)||void 0===g||g.on("mouseenter",(function(){var e;m.hideRowAddButtonTimeount&&clearTimeout(m.hideRowAddButtonTimeount),null===(e=m.rowsHeader)||void 0===e||e.css("z-index",2)})).on("mouseleave",(function(){m.hideRowAddButtonTimeount=setTimeout((function(){var e,t;null===(e=m.rowAddButton)||void 0===e||e.hide(),null===(t=m.rowsHeader)||void 0===t||t.css("z-index",1),m.moveRowIndex=-1}),200)})).on("click",(function(){m.table.command.insertRowAt(m.moveRowIndex,1,!0)})),null===(v=this.rowsHeader)||void 0===v||v.on("mouseenter",(function(){m.hideRowAddButtonTimeount&&clearTimeout(m.hideRowAddButtonTimeount)})).on("mousemove",(function(e){var t;m.onMouseMoveRowsHeader(e),null===(t=m.rowsHeader)||void 0===t||t.css("z-index",2)})).on("mouseleave",(function(){m.hideRowAddButtonTimeount=setTimeout((function(){var e,t;null===(e=m.rowsHeader)||void 0===e||e.css("z-index",""),null===(t=m.rowAddButton)||void 0===t||t.hide()}),200)}))}},{key:"onTableMouseDown",value:function(e){e.target&&((0,this.editor.$)(e.target).closest("td").length>0&&2===e.button?this.showContextMenu(e):this.hideContextMenu())}},{key:"onMouseMoveColsHeader",value:function(e){var t,n;if(e.target&&this.colAddButton&&this.colAddButtonSplit){var i=(0,this.editor.$)(e.target),r=i.closest(MC.COLS_HEADER_ITEM_CLASS);if(0!==r.length){var o=this.colsHeader.find(MC.COLS_HEADER_ITEM_CLASS).toArray(),a=r.width(),s=this.colAddButton.width(),l=r.get().offsetLeft,c=o.findIndex((function(e){return e.equal(r)})),u=e.offsetX>a/2||i.hasClass("cols-trigger"),d=o[o.length-1].equal(r);u&&(l+=d?a-s/2:a),this.moveColIndex=c+(u?1:0),null===(t=this.colAddButton)||void 0===t||t.show("flex"),this.colAddButton.css("left","".concat(l,"px"));var h=((null===(n=this.table.selection.tableModel)||void 0===n?void 0:n.height)||0)+r.height()+4;this.colAddButtonSplit.css("height","".concat(h,"px")),this.colAddButtonSplit.css("left","".concat(d&&u?s-3+"px":""))}}}},{key:"onMouseMoveRowsHeader",value:function(e){var t;if(e.target&&this.rowAddButton&&this.rowAddButtonSplit){var n=(0,this.editor.$)(e.target),i=n.closest(MC.ROWS_HEADER_ITEM_CLASS);if(0!==i.length){var r=this.rowsHeader.find(MC.ROWS_HEADER_ITEM_CLASS).toArray(),o=i.height(),a=i.get().offsetTop,s=r.findIndex((function(e){return e.equal(i)})),l=e.offsetY>o/2||n.hasClass("rows-trigger");l&&(a+=o),this.moveRowIndex=s+(l?1:0),this.rowAddButton.show("flex"),this.rowAddButton.css("top","".concat(a,"px"));var c=((null===(t=this.table.selection.tableModel)||void 0===t?void 0:t.width)||0)+i.width()+4;this.rowAddButtonSplit.css("width","".concat(c,"px"))}}}},{key:"onMouseDownColsHeader",value:function(e){var t=(0,this.editor.$)(e.target||[]).closest(MC.COLS_HEADER_TRIGGER_CLASS);0!==t.length?this.startChangeCol(t,e):2===e.button&&this.showContextMenu(e)}},{key:"onMouseDownRowsHeader",value:function(e){var t=(0,this.editor.$)(e.target||[]).closest(MC.ROWS_HEADER_TRIGGER_CLASS);0!==t.length?this.startChangeRow(t,e):2===e.button&&this.showContextMenu(e)}},{key:"onClickColsHeader",value:function(e){var t,n=this.table.selection,i=this.editor.$;if(!(i(e.target||[]).closest(MC.COLS_HEADER_TRIGGER_CLASS).length>0)){var r=i(e.target||[]).closest(MC.COLS_HEADER_ITEM_CLASS);if(0!==r.length){var o=null===(t=this.colsHeader)||void 0===t?void 0:t.find(MC.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));void 0!==o&&n.selectCol(o)}}}},{key:"onClickRowsHeader",value:function(e){var t,n=this.table.selection,i=this.editor.$;if(!(i(e.target||[]).closest(MC.ROWS_HEADER_TRIGGER_CLASS).length>0)){var r=i(e.target||[]).closest(MC.ROWS_HEADER_ITEM_CLASS);if(0!==r.length){var o=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(MC.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));void 0!==o&&n.selectRow(o)}}}},{key:"onClickTableHeader",value:function(e){var t,n=this.table.selection;if(null===(t=this.tableHeader)||void 0===t?void 0:t.hasClass("selected"))n.clearSelect();else{var i=n.tableModel;if(!i)return;n.select({row:0,col:0},{row:i.rows-1,col:i.cols-1})}}},{key:"activeHeader",value:function(){var e,t,n=this.table.selection.getSelectArea();this.clearActiveStatus();for(var i,r,o=null===(e=this.colsHeader)||void 0===e?void 0:e.find(MC.COLS_HEADER_ITEM_CLASS),a=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(MC.ROWS_HEADER_ITEM_CLASS),s=n.begin,l=n.end,c=n.allCol,u=n.allRow,d=s.row;d<=l.row;d++){var h,f;if(c)null==a||null===(h=a.eq(d))||void 0===h||h.addClass("selected"),u&&(null==a||null===(f=a.eq(d))||void 0===f||f.addClass("no-dragger"))}for(var p=s.col;p<=l.col;p++){var g,v;if(u)null==o||null===(g=o.eq(p))||void 0===g||g.addClass("selected"),c&&(null==o||null===(v=o.eq(p))||void 0===v||v.addClass("no-dragger"))}c&&u?null===(i=this.tableHeader)||void 0===i||i.addClass("selected"):null===(r=this.tableHeader)||void 0===r||r.removeClass("selected");if(c&&!u){var m,b=null===(m=this.tableRoot)||void 0===m?void 0:m.find("tr").eq(s.row);if(b){var y,w,k=b.get().offsetTop;null===(y=this.rowDeleteButton)||void 0===y||y.show("flex"),null===(w=this.rowDeleteButton)||void 0===w||w.css("top","".concat(k-this.rowDeleteButton.height(),"px"))}}else{var x;null===(x=this.rowDeleteButton)||void 0===x||x.hide()}if(!c&&u){for(var C,M,S,E,O=0,N=s.col;N<=l.col;N++){var T;O+=(null==o||null===(T=o.eq(N))||void 0===T?void 0:T.width())||0}var A=(null==o||null===(C=o.eq(s.col))||void 0===C||null===(M=C.get())||void 0===M?void 0:M.offsetLeft)||0;null===(S=this.colDeleteButton)||void 0===S||S.show("flex"),null===(E=this.colDeleteButton)||void 0===E||E.css("left","".concat(A+O/2,"px"))}else{var I;null===(I=this.colDeleteButton)||void 0===I||I.hide()}}},{key:"clearActiveStatus",value:function(){var e,t,n,i=null===(e=this.colsHeader)||void 0===e?void 0:e.find(MC.COLS_HEADER_ITEM_CLASS),r=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(MC.ROWS_HEADER_ITEM_CLASS);null==i||i.removeClass("selected"),null==i||i.removeClass("no-dragger"),null==r||r.removeClass("selected"),null==r||r.removeClass("no-dragger"),null===(n=this.tableHeader)||void 0===n||n.removeClass("selected")}},{key:"refresh",value:function(){this.renderColBars(),this.renderRowBars(),this.activeHeader()}},{key:"startChangeCol",value:function(e,t){var n,i,r;t.stopPropagation(),t.preventDefault();var o=e.parent(),a=o.get();this.table.selection.clearSelect(),this.dragging={x:t.clientX,y:-1};var s=(null===(n=this.colsHeader)||void 0===n?void 0:n.find(MC.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(o)})))||0;this.changeSize={trigger:{element:e,height:e.height(),width:e.width()},element:o,width:a.offsetWidth,height:-1,index:s,table:{width:(null===(i=this.table.selection.tableModel)||void 0===i?void 0:i.width)||0,height:(null===(r=this.table.selection.tableModel)||void 0===r?void 0:r.height)||0}},this.bindChangeSizeEvent()}},{key:"startChangeRow",value:function(e,t){var n,i,r;t.stopPropagation(),t.preventDefault();var o=e.parent(),a=o.get();this.table.selection.clearSelect(),this.dragging={x:-1,y:t.clientY};var s=(null===(n=this.rowsHeader)||void 0===n?void 0:n.find(MC.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(o)})))||0;this.changeSize={trigger:{element:e,height:e.height(),width:e.width()},element:o,width:-1,height:a.offsetHeight,index:s,table:{width:(null===(i=this.table.selection.tableModel)||void 0===i?void 0:i.width)||0,height:(null===(r=this.table.selection.tableModel)||void 0===r?void 0:r.height)||0}},this.bindChangeSizeEvent()}},{key:"bindChangeSizeEvent",value:function(){var e,t;null===(e=this.colsHeader)||void 0===e||e.addClass("resize"),null===(t=this.rowsHeader)||void 0===t||t.addClass("resize"),document.addEventListener("mousemove",this.onChangeSize),document.addEventListener("mouseup",this.onChangeSizeEnd),document.addEventListener("mouseleave",this.onChangeSizeEnd)}},{key:"unbindChangeSizeEvent",value:function(){var e,t;null===(e=this.colsHeader)||void 0===e||e.removeClass("resize"),null===(t=this.rowsHeader)||void 0===t||t.removeClass("resize"),document.removeEventListener("mousemove",this.onChangeSize),document.removeEventListener("mouseup",this.onChangeSizeEnd),document.removeEventListener("mouseleave",this.onChangeSizeEnd)}},{key:"onChangeColWidth",value:function(e){var t,n,i,r,o;if(this.dragging&&this.changeSize){var a=e.clientX-this.dragging.x,s=Math.max(this.COL_MIN_WIDTH,this.changeSize.width+a);a=s-this.changeSize.width;var l=this.changeSize.table.width+a;this.changeSize.element.css("width",s+"px");var c=this.changeSize.element.get();null===(t=this.colsHeader)||void 0===t||t.css("width",l+"px");var u=null===(n=this.viewport)||void 0===n?void 0:n.get(),d=c.offsetLeft+c.offsetWidth;d-u.scrollLeft+20>u.offsetWidth?u.scrollLeft=d+20-u.offsetWidth:u.scrollLeft+u.offsetWidth===u.scrollWidth&&(u.scrollLeft=Math.max(0,l+34-u.offsetWidth)),this.clearActiveStatus(),this.hideContextMenu(),this.renderRowBars(),this.renderColSplitBars(this.changeSize.element,this.changeSize.trigger.element),null===(i=this.tableRoot)||void 0===i||null===(r=i.find("col").eq(this.changeSize.index))||void 0===r||r.attributes("width",s),null===(o=this.tableRoot)||void 0===o||o.css("width","".concat(l,"px"))}}},{key:"onChangeRowHeight",value:function(e){var t,n;if(this.dragging&&this.changeSize){var i=e.clientY-this.dragging.y,r=Math.max(this.ROW_MIN_HEIGHT,this.changeSize.height+i);i=r-this.changeSize.height,this.changeSize.element.css("height",r+"px"),this.clearActiveStatus(),this.hideContextMenu(),this.renderRowSplitBars(this.changeSize.element,this.changeSize.trigger.element),null===(t=this.tableRoot)||void 0===t||null===(n=t.find("tr").eq(this.changeSize.index))||void 0===n||n.css("height","".concat(r,"px"))}}},{key:"renderColSplitBars",value:function(e,t){var n,i=(null===(n=this.table.selection.tableModel)||void 0===n?void 0:n.height)||0;t.addClass("dragging").css("height","".concat(i+e.height(),"px"))}},{key:"renderRowSplitBars",value:function(e,t){var n,i,r=null===(n=this.viewport)||void 0===n?void 0:n.get(),o=(null===(i=this.table.selection.tableModel)||void 0===i?void 0:i.width)||0,a=Math.min(r.offsetWidth,o);t.addClass("dragging").css("width","".concat(a+e.width(),"px"))}},{key:"onDragStartColsHeader",value:function(e){var t,n;e.stopPropagation();var i=this.table.selection.getSelectArea();if(e.target&&i.allRow){var r=(0,this.editor.$)(e.target).closest(MC.COLS_HEADER_ITEM_CLASS);if(0!==r.length){var o=null===(t=this.colsHeader)||void 0===t?void 0:t.find(MC.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));if(void 0!==o){var a=o;a<i.begin.col||a>i.end.col||(this.draggingHeader={element:r,minIndex:i.begin.col,maxIndex:i.end.col,count:i.end.col-i.begin.col+1},r.addClass("dragging"),r.find(".drag-info").html(this.editor.language.get("table","draggingCol").replace("$data",this.draggingHeader.count.toString())),null===(n=this.colsHeader)||void 0===n||n.addClass("dragging"),this.table.helper.fixDragEvent(e),this.bindDragColEvent())}}}}},{key:"onDragStartRowsHeader",value:function(e){var t,n;e.stopPropagation();var i=this.table.selection.getSelectArea();if(e.target&&i.allCol){var r=(0,this.editor.$)(e.target).closest(MC.ROWS_HEADER_ITEM_CLASS);if(0!==r.length){var o=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(MC.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));if(void 0!==o){var a=o;a<i.begin.row||a>i.end.row||(this.draggingHeader={element:r,minIndex:i.begin.row,maxIndex:i.end.row,count:i.end.row-i.begin.row+1},r.addClass("dragging"),r.find(".drag-info").html(this.editor.language.get("table","draggingRow").replace("$data",this.draggingHeader.count.toString())),null===(n=this.rowsHeader)||void 0===n||n.addClass("dragging"),this.table.helper.fixDragEvent(e),this.bindDragRowEvent())}}}}},{key:"bindDragColEvent",value:function(){var e=this.table.wrapper;null==e||e.on("dragover",this.onDragCol),null==e||e.on("drop",this.onDragColEnd),null==e||e.on("dragend",this.onDragColEnd)}},{key:"unbindDragColEvent",value:function(){var e,t,n=this.table.wrapper,i=null===(e=this.colsHeader)||void 0===e?void 0:e.find(MC.COLS_HEADER_ITEM_CLASS);null==i||i.removeClass("dragging"),null===(t=this.colsHeader)||void 0===t||t.removeClass("dragging"),null==n||n.off("dragover",this.onDragCol),null==n||n.off("drop",this.onDragColEnd),null==n||n.off("dragend",this.onDragColEnd)}},{key:"bindDragRowEvent",value:function(){var e=this.table.wrapper;null==e||e.on("dragover",this.onDragRow),null==e||e.on("drop",this.onDragRowEnd),null==e||e.on("dragend",this.onDragRowEnd)}},{key:"unbindDragRowEvent",value:function(){var e,t,n=this.table.wrapper,i=null===(e=this.rowsHeader)||void 0===e?void 0:e.find(MC.ROWS_HEADER_ITEM_CLASS);null==i||i.removeClass("dragging"),null===(t=this.rowsHeader)||void 0===t||t.removeClass("dragging"),null==n||n.off("dragover",this.onDragRow),null==n||n.off("drop",this.onDragRowEnd),null==n||n.off("dragend",this.onDragRowEnd)}},{key:"showPlaceHolder",value:function(e){if(this.draggingHeader){var t=this.draggingHeader,n=t.element,i=t.minIndex,r=t.maxIndex;if(n.closest(MC.COLS_HEADER_CLASS).length>0){var o,a,s,l,c,u,d,h,f;if(e===this.draggingHeader.index)return;if(i<=e&&e<=r+1)return delete this.draggingHeader.index,void(null===(f=this.placeholder)||void 0===f||f.css("display","none"));this.draggingHeader.index=e;var p=null===(o=this.colsHeader)||void 0===o?void 0:o.find(MC.COLS_HEADER_ITEM_CLASS);if(!p)return;var g=this.draggingHeader.index!==p.length?p.eq(this.draggingHeader.index).get().offsetLeft+2:p.eq(this.draggingHeader.index-1).get().offsetLeft+p.eq(this.draggingHeader.index-1).get().offsetWidth+2,v=null===(a=this.viewport)||void 0===a?void 0:a.get(),m=v.scrollLeft,b=v.offsetWidth;g<m&&(v.scrollLeft=g-5),g>m+b&&(v.scrollLeft=g-b+5);var y=((null===(s=this.table.selection.tableModel)||void 0===s?void 0:s.height)||0)+p.height();null===(l=this.placeholder)||void 0===l||l.css("width","3px"),null===(c=this.placeholder)||void 0===c||c.css("height","".concat(y,"px")),null===(u=this.placeholder)||void 0===u||u.css("left",g+"px"),null===(d=this.placeholder)||void 0===d||d.css("top","0px"),null===(h=this.placeholder)||void 0===h||h.css("display","block")}else if(n.closest(MC.ROWS_HEADER_CLASS).length>0){var w,k,x,C,M,S,E,O;if(e===this.draggingHeader.index)return;if(i<=e&&e<=r+1)return delete this.draggingHeader.index,void(null===(O=this.placeholder)||void 0===O||O.css("display","none"));this.draggingHeader.index=e;var N=null===(w=this.rowsHeader)||void 0===w?void 0:w.find(MC.ROWS_HEADER_ITEM_CLASS);if(!N)return;var T=this.draggingHeader.index!==N.length?N.eq(this.draggingHeader.index).get().offsetTop+2:N.eq(this.draggingHeader.index-1).get().offsetTop+N.eq(this.draggingHeader.index-1).get().offsetHeight+2,A=(null===(k=this.table.selection.tableModel)||void 0===k?void 0:k.width)||0;null===(x=this.placeholder)||void 0===x||x.css("height","3px"),null===(C=this.placeholder)||void 0===C||C.css("width","".concat(A,"px")),null===(M=this.placeholder)||void 0===M||M.css("left","3px"),null===(S=this.placeholder)||void 0===S||S.css("top",21+T+"px"),null===(E=this.placeholder)||void 0===E||E.css("display","block")}}}},{key:"removeRow",value:function(e){var t,n,i,r,o=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(MC.ROWS_HEADER_ITEM_CLASS),a=null==o||null===(n=o.eq(e))||void 0===n?void 0:n.get();a&&(null===(i=this.rowsHeader)||void 0===i||null===(r=i.get())||void 0===r||r.removeChild(a))}},{key:"removeCol",value:function(e){var t,n,i,r,o,a,s=null===(t=this.colsHeader)||void 0===t?void 0:t.find(MC.COLS_HEADER_ITEM_CLASS),l=null===(n=this.colsHeader)||void 0===n?void 0:n.get(),c=null==s||null===(i=s.eq(e))||void 0===i?void 0:i.get();l&&c&&(null===(r=this.colsHeader)||void 0===r||r.css("width",l.offsetWidth-c.offsetWidth+"px"),l.removeChild(c),null===(o=this.tableRoot)||void 0===o||o.css("width",null===(a=this.colsHeader)||void 0===a?void 0:a.css("width")))}},{key:"showContextMenu",value:function(e){var t=this;if(this.menuBar&&e.target){var n=this.editor.$,i=this.table.selection,r=this.menuBar.find(MC.MENUBAR_ITEM_CLASS);r.removeClass("disabled"),r.each((function(e){var r=n(e),o=r.attributes("data-action");if(t.getMenuDisabled(o))r.addClass("disabled");else{var a=r.find("input".concat(MC.MENUBAR_ITEM_INPUT_CALSS));if(0===a.length)return;var s=a.get();a.on("blur",(function(){s.value=(parseInt(s.value,10)||1).toString()})).on("keydown",(function(e){Nm("enter",e)&&t.handleTriggerMenu(r)}));var l=i.getSelectArea(),c=["insertColLeft","insertColRight"].indexOf(o)>-1,u=["insertRowUp","insertRowDown"].indexOf(o)>-1;c&&(s.value="".concat(l.end.col-l.begin.col+1)),u&&(s.value="".concat(l.end.row-l.begin.row+1)),a.on("mousedown",t.onMenuInputMousedown)}})),this.menuBar.find("div.split").each((function(e){for(var t=n(e),i=t.prev();i;){if(i.hasClass("split")){t.remove();break}if(!i.hasClass("disabled"))break;i=i.prev()}i||t.remove()}));for(var o=n(e.target),a=o.getBoundingClientRect()||{top:0,left:0},s=o.parent(),l=0,c=0;s&&s.closest(MC.TABLE_WRAPPER_CLASS).length>0;){var u=s.getBoundingClientRect()||{top:0,left:0};l+=a.top-u.top,c+=a.left-u.left,a=u,s=s.parent()}this.menuBar.css("left",c+e.offsetX+"px"),this.menuBar.css("top",l+e.offsetY+"px"),this.menuBar.css("display","block"),this.contextVisible=!0}}},{key:"hideContextMenu",value:function(){var e,t;if(this.contextVisible){var n=this.editor.$,i=null===(e=this.menuBar)||void 0===e?void 0:e.find(MC.MENUBAR_ITEM_CLASS);null==i||i.removeClass("disabled"),null==i||i.each((function(e){var t=n(e).find("input".concat(MC.MENUBAR_ITEM_INPUT_CALSS));0!==t.length&&t.removeAllEvents()})),this.contextVisible=!1,null===(t=this.menuBar)||void 0===t||t.hide()}}},{key:"getMenuDisabled",value:function(e){var t=this.table,n=t.selection,i=t.command;switch(e){case"cut":case"copy":return!n.selectArea||n.selectArea.count<=1;case"splitCell":return!n.hasMergeCell();case"mergeCell":return!n.selectArea;case"mockPaste":return!i.hasCopyData();case"removeCol":case"insertColLeft":case"insertColRight":return n.isColSelected();case"removeRow":case"insertRowUp":case"insertRowDown":return n.isRowSelected();default:return!1}}},{key:"handleClickMenu",value:function(e){if(e.target){var t=(0,this.editor.$)(e.target),n=t.closest(".table-menubar-item");0!==n.length&&"input"!==t.name&&(e.stopPropagation(),this.handleTriggerMenu(n))}}},{key:"handleTriggerMenu",value:function(e){if(!e.hasClass("disabled")){var t,n=e.attributes("data-action"),i=e.find("input".concat(MC.MENUBAR_ITEM_INPUT_CALSS)),r=void 0;if(i.length>0)r=parseInt((null===(t=i.get())||void 0===t?void 0:t.value)||"1",10);this.table.command[n](r)}this.hideContextMenu()}},{key:"handleHoverMenu",value:function(e){if(e.target){var t=(0,this.editor.$)(e.target).closest(".table-menubar-item");if(0!==t.length){e.stopPropagation();var n=this.table.selection;if(!t.hasClass("disabled"))switch(t.attributes("data-action")){case"removeCol":this.handleHighlightCol();break;case"removeRow":this.handleHighlightRow();break;case"removeTable":this.handleHighlightTable();break;default:n.hideHighlight()}}}}},{key:"hideHighlight",value:function(e){e.stopPropagation(),this.table.selection.hideHighlight()}}]),n}(),OC=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e,i){var r;return jm(this,n),(r=t.call(this)).isShift=!1,r.onTdMouseDown=function(e){if(r.selectRange=void 0,e.target&&Vy(r.editor)){var t=r.editor,n=t.$,i=t.change,o=n(e.target),a=o.closest("td");if(0!==a.length){var s=i.getRange(),l=Vm(r.getCellPoint(a),2),c=l[0],u=l[1],d=!!a.attributes("table-cell-selection");if(r.isShift){var h={row:0,col:0};if(r.prevMouseDownTd){var f=Vm(r.getCellPoint(r.prevMouseDownTd),2);h={row:f[0],col:f[1]}}else if(r.selectArea&&(h=r.selectArea.begin,r.tableModel)){var p=r.tableModel.table[h.row][h.col];!r.table.helper.isEmptyModelCol(p)&&p.element&&(r.prevMouseDownTd=n(p.element))}r.select(h,{row:c,col:u})}else{if(r.prevMouseDownTd=a,2!==e.button&&r.select({row:c,col:u},{row:c,col:u}),"td"!==o.name||!d&&s.startNode.closest("td").equal(a)&&s.endNode.closest("td").equal(a))"td"===o.name&&e.preventDefault();else{if(2===e.button&&o.attributes("table-cell-selection"))return;e.preventDefault(),r.focusCell(a)}2!==e.button?(r.dragging={trigger:{element:a}},r.addDragEvent()):o.attributes("table-cell-selection")&&e.preventDefault()}}}},r.removeDragEvent=function(){var e,t,n;null===(e=r.tableRoot)||void 0===e||e.removeClass("drag-select"),null===(t=r.tableRoot)||void 0===t||t.removeClass("drag-selecting"),null===(n=r.table.wrapper)||void 0===n||n.off("mouseup",r.removeDragEvent).off("mousemove",r.onDragMove),r.dragging=void 0},r.onDragMove=function(e){if(r.dragging&&e.target){var t,n,i=r.editor.$(e.target).closest("td");if(!(0===i.length||r.prevOverTd&&i.equal(r.prevOverTd)))if(r.prevOverTd=i,r.dragging.trigger.element.equal(i))null===(t=r.tableRoot)||void 0===t||t.removeClass("drag-selecting"),r.clearSelect();else null===(n=r.tableRoot)||void 0===n||n.addClass("drag-selecting"),r.selectCell(r.dragging.trigger.element,i)}},r.onShiftKeydown=function(e){e.target&&r.tableModel&&Vy(r.editor)&&Nm("shift",e)&&(r.isShift=!0)},r.onKeydown=function(e){if(e.target&&r.tableModel&&Vy(r.editor)){var t=(0,r.editor.$)(e.target).closest("td");if(0!==t.length){var n=Vm(r.getCellPoint(t),2),i=n[0],o=n[1];i<0||o<0||(Nm("shift+left",e)?r.selectLeft(e,t):Nm("shift+right",e)?r.selectRigth(e,t):Nm("shift+up",e)?r.selectUp(e,t):Nm("shift+down",e)&&r.selectDown(e,t),Nm("shift",e)?r.isShift=!0:(r.selectRange&&(r.isShift=!1,r.selectRange=void 0),r.clearSelect()))}}},r.onShiftKeyup=function(e){!1===r.isShift&&r.selectRange&&(r.selectRange=void 0,r.clearSelect()),r.isShift=!1},r.table=i,r.editor=e,r}return Rm(n,[{key:"init",value:function(){var e=this.table.wrapper;e&&(this.tableRoot=e.find(MC.TABLE_CLASS),this.colsHeader=e.find(MC.COLS_HEADER_CLASS),this.rowsHeader=e.find(MC.ROWS_HEADER_CLASS),this.tableHeader=e.find(MC.HEADER_CLASS),this.highlight=e.find(MC.TABLE_HIGHLIGHT_CLASS),this.render("init"),this.bindEvents())}},{key:"render",value:function(e){this.refreshModel();var t=this.tableModel;if(t){var n=this.getSelectArea(),i=n.begin,r=n.end;if("mergeCell"===e||"splitCell"===e){var o=i.row<0?0:Math.min(i.row,t.rows-1),a=i.col<0?0:Math.min(i.col,t.cols-1),s=t.table[o][a];this.table.helper.isEmptyModelCol(s)&&(s=t.table[s.parent.row][s.parent.col]),!this.table.helper.isEmptyModelCol(s)&&s.element&&("mergeCell"===e?(this.clearSelect(),this.selectCellRange(s.element)):this.focusCell(s.element))}else if("removeRow"===e){var l=i.row<0?0:Math.min(i.row,t.rows-1),c=t.table[l][0];!this.table.helper.isEmptyModelCol(c)&&c.element&&this.focusCell(c.element)}else if("removeCol"===e){var u=i.col<0?0:Math.min(i.col,t.cols-1),d=t.table[0][u];!this.table.helper.isEmptyModelCol(d)&&d.element&&this.focusCell(d.element)}else this.select(i,r);this.renderBorder()}}},{key:"renderBorder",value:function(){var e,t,n=this,i=this.tableModel;i&&(null===(e=this.tableRoot)||void 0===e||e.find("td.table-last-column").removeClass("table-last-column"),null===(t=this.tableRoot)||void 0===t||t.find("td.table-last-row").removeClass("table-last-row"),i.table.forEach((function(e,t){e.forEach((function(e,r){if(!n.table.helper.isEmptyModelCol(e)){if(!e.element)return;var o=t===i.rows-1,a=r===i.cols-1;e.isMulti&&(r+e.colSpan===i.cols&&(a=!0),t+e.rowSpan===i.rows&&(o=!0)),o&&e.element.classList.add("table-last-column"),a&&e.element.classList.add("table-last-row")}}))})))}},{key:"bindEvents",value:function(){var e;document.addEventListener("keydown",this.onShiftKeydown),document.addEventListener("keyup",this.onShiftKeyup),null===(e=this.table.wrapper)||void 0===e||e.on("mousedown",this.onTdMouseDown).on("keydown",this.onKeydown)}},{key:"unbindEvents",value:function(){var e;document.removeEventListener("keydown",this.onShiftKeydown),document.removeEventListener("keyup",this.onShiftKeyup),null===(e=this.table.wrapper)||void 0===e||e.off("mousedown",this.onTdMouseDown).off("keydown",this.onKeydown)}},{key:"refreshModel",value:function(){this.tableRoot&&0!==this.tableRoot.length&&(this.tableModel=this.table.helper.getTableModel(this.tableRoot))}},{key:"each",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.tableModel;if(n){var i=this.getSelectArea(),r=i.begin,o=i.end;if(!(r.row<0||r.col<0))if(t)for(var a=o.row;a>-1&&a>=r.row;a--)for(var s=o.col;s>-1&&s>=r.col;s--){var l=n.table[a][s];e(l,a,s)}else for(var c=r.row;c>-1&&c<=o.row;c++)for(var u=r.col;u>-1&&u<=o.col;u++){var d=n.table[c][u];e(d,c,u)}}}},{key:"getCellPoint",value:function(e){var t,n,i=this;if("td"!==e.name)return[-1,-1];var r=null===(t=e.parent())||void 0===t?void 0:t.index();if(void 0===r||r<0)return[-1,-1];var o=null===(n=this.tableModel)||void 0===n?void 0:n.table[r].findIndex((function(t){var n;return e.equal((i.table.helper.isEmptyModelCol(t)?null===(n=i.tableModel)||void 0===n?void 0:n.table[t.parent.row][t.parent.col]:t).element)}));return void 0===o||o<0?[-1,-1]:[r,o]}},{key:"getCellIndex",value:function(e,t){if(!this.tableModel)return 0;for(var n=this.tableModel.table[e],i=0,r=0;r<t;r++){var o=n[r];!this.table.helper.isEmptyModelCol(o)&&o.element&&i++}return i}},{key:"getSingleCell",value:function(){return this.prevMouseDownTd?this.prevMouseDownTd:null}},{key:"getSingleCellPoint",value:function(){var e=this.getSingleCell();return e?this.getCellPoint(e):[-1,-1]}},{key:"getSelectArea",value:function(){if(this.selectArea)return this.selectArea;var e=this.getSingleCellPoint();if(!this.tableModel||-1===e[0])return{begin:{row:-1,col:-1},end:{row:-1,col:-1},count:0,allCol:!1,allRow:!1};var t=this.tableModel,n=t.cols,i=t.rows,r=t.table,o=r[e[0]][e[1]];return this.table.helper.isEmptyModelCol(o)&&(o=r[o.parent.row][o.parent.col]).element&&(e=this.getCellPoint(this.editor.$(o.element))),{begin:{row:e[0],col:e[1]},end:{row:e[0],col:e[1]},count:-1===e[0]?0:1,allCol:1===n,allRow:1===i}}},{key:"selectCol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.tableModel){if(this.isShift)if(this.prevMouseDownTd){var n=this.getCellPoint(this.prevMouseDownTd),i=Vm(n,2);i[0];var r=i[1];e=r}else if(this.selectArea&&(e=this.selectArea.begin.col,this.tableModel)){var o=this.tableModel.table[this.selectArea.begin.row][this.selectArea.begin.col];!this.table.helper.isEmptyModelCol(o)&&o.element&&this.focusCell(o.element)}this.select({row:0,col:e},{row:this.tableModel.rows-1,col:t})}}},{key:"selectRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.tableModel){if(this.isShift)if(this.prevMouseDownTd){var n=this.getCellPoint(this.prevMouseDownTd),i=Vm(n,2),r=i[0];i[1],e=r}else if(this.selectArea&&(e=this.selectArea.begin.row,this.tableModel)){var o=this.tableModel.table[this.selectArea.begin.row][this.selectArea.begin.col];!this.table.helper.isEmptyModelCol(o)&&o.element&&this.focusCell(o.element)}this.select({row:e,col:0},{row:t,col:this.tableModel.cols-1})}}},{key:"selectCell",value:function(e,t){if("td"===e.name&&"td"===t.name){var n=this.getCellPoint(e),i=this.getCellPoint(t);this.select({row:n[0],col:n[1]},{row:i[0],col:i[1]})}}},{key:"clearSelect",value:function(){this.select({row:-1,col:-1},{row:-1,col:-1})}},{key:"select",value:function(e,t){var n;if(this.tableModel){var i=e.row===t.row&&e.col===t.col,r=Math.min(e.row,t.row),o=Math.max(e.row,t.row),a=Math.min(e.col,t.col),s=Math.max(e.col,t.col);null===(n=this.tableRoot)||void 0===n||n.find("td[table-cell-selection]").removeAttributes("table-cell-selection");for(var l=o,c=a,u=s,d=r;d>-1&&d<=l;d++)for(var h=c;h>-1&&h<=u;h++){var f=this.tableModel.table[d][h];if(this.table.helper.isEmptyModelCol(f)){r>f.parent.row&&(r=f.parent.row),a>=f.parent.col&&(a=f.parent.col);var p=this.tableModel.table[f.parent.row][f.parent.col];this.table.helper.isEmptyModelCol(p)||(p.rowSpan>1&&o<p.rowSpan-1+f.parent.row&&(o=p.rowSpan-1+f.parent.row),p.colSpan>1&&s<p.colSpan-1+f.parent.col&&(s=p.colSpan-1+f.parent.col))}else this.table.helper.isEmptyModelCol(f)||(f.rowSpan>1&&o<f.rowSpan-1+d&&(o=f.rowSpan-1+d),f.colSpan>1&&s<f.colSpan-1+h&&(s=f.colSpan-1+h))}var g=0;if(r>=0&&a>=0&&o<this.tableModel.rows&&s<this.tableModel.cols)for(var v=r;v<=o;v++)for(var m=a;m<=s;m++){var b=this.tableModel.table[v][m];this.table.helper.isEmptyModelCol(b)||(!i&&b.element&&this.editor.$(b.element).attributes("table-cell-selection","true"),g++)}if(i&&e.row>-1&&e.col>-1){var y,w=this.tableModel.table[e.row][e.col];this.table.helper.isEmptyModelCol(w)||!w.element||(null===(y=this.prevMouseDownTd)||void 0===y?void 0:y.equal(w.element))||this.focusCell(w.element)}var k=0===a&&s===this.tableModel.cols-1,x=0===r&&o===this.tableModel.rows-1;this.selectArea=0===g||i?void 0:{begin:{row:r,col:a},end:{row:o,col:s},count:g,allCol:k,allRow:x},this.emit("select",this.selectArea)}}},{key:"focusCell",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.$;ry(e)&&(e=i(e));var r,o=n.getRange(),a=e.find(Lb);if(a.length>0)o.select(a,!0).shrinkToElementNode().collapse(!1),n.select(o),null===(r=a.get())||void 0===r||r.focus(),this.prevMouseDownTd=e,this.selectCell(e,e)}}},{key:"selectCellRange",value:function(e){var t;if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.$;ry(e)&&(e=r(e));var o=i.getRange(),a=e.find(Lb);if(0!==a.length){o.select(a,!0).shrinkToElementNode();var s,l=a.children(),c=l.eq(0);if(1===l.length&&"br"===(null==c||null===(t=c.first())||void 0===t?void 0:t.name))o.collapse(!1),i.select(o),null===(s=a.get())||void 0===s||s.focus();else i.select(o);this.prevMouseDownTd=e,this.selectCell(e,e)}}}},{key:"addDragEvent",value:function(){var e,t;null===(e=this.tableRoot)||void 0===e||e.addClass("drag-select"),null===(t=this.table.wrapper)||void 0===t||t.on("mouseup",this.removeDragEvent).on("mousemove",this.onDragMove)}},{key:"selectLeft",value:function(e,t){var n,i,r;if(Vy(this.editor)){var o=Vm(this.getCellPoint(t),2),a=o[0],s=o[1];if(!(a<0||s<0)){var l=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,c=this.editor.change.getRange();if(0===l){if(this.selectRange&&"right"===this.selectRange.type&&c.endOffset!==this.selectRange.startOffset)return;this.selectRange={type:"left",startOffset:c.startOffset,endOffset:c.endOffset};var u=c.startNode;if(0!==c.startOffset)return;if(u.prev())return;for(var d=u.parent();d&&!d.isEditable();){if(d.prev())return;d=d.parent()}}var h=(null===(i=this.selectArea)||void 0===i?void 0:i.begin)||{row:a,col:s},f=(null===(r=this.selectArea)||void 0===r?void 0:r.end)||{row:a,col:s},p=h.col!==s,g=p?h.col-1:f.col-1;g<0||(e.preventDefault(),g===s&&2===l&&(g=-1),p?this.select(_m(_m({},h),{},{col:g}),f):this.select(h,_m(_m({},f),{},{col:g})))}}}},{key:"selectRigth",value:function(e,t){var n,i,r;if(Vy(this.editor)&&this.tableModel){e.stopPropagation();var o=Vm(this.getCellPoint(t),2),a=o[0],s=o[1];if(!(a<0||s<0)){var l=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,c=this.editor.change.getRange();if(0===l){var u;if(this.selectRange&&"left"===this.selectRange.type&&c.startOffset!==this.selectRange.endOffset)return;this.selectRange={type:"right",startOffset:c.startOffset,endOffset:c.endOffset};var d=c.endNode;if(d.isText()&&c.endOffset!==d.text().length)return;var h=d.children();if(d.isElement()&&c.endOffset!==h.length&&"br"!==(null===(u=d.last())||void 0===u?void 0:u.name))return;if(d.next())return;for(var f=d.parent();f&&!f.isEditable();){if(f.next())return;f=f.parent()}}var p=this.tableModel.cols,g=(null===(i=this.selectArea)||void 0===i?void 0:i.begin)||{row:a,col:s},v=(null===(r=this.selectArea)||void 0===r?void 0:r.end)||{row:a,col:s},m=g.col!==s,b=m?g.col+1:v.col+1;b>p-1||(e.preventDefault(),b===s&&2===l&&(b=-1),m?this.select(_m(_m({},g),{},{col:b}),v):this.select(g,_m(_m({},v),{},{col:b})))}}}},{key:"selectUp",value:function(e,t){var n,i,r;if(Vy(this.editor)&&this.tableModel){var o=Vm(this.getCellPoint(t),2),a=o[0],s=o[1];if(!(a<0||s<0)){var l=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,c=this.editor.change.getRange();if(0===l){if(this.selectRange&&"bottom"===this.selectRange.type&&c.endOffset!==this.selectRange.startOffset)return;this.selectRange={type:"top",startOffset:c.startOffset,endOffset:c.endOffset};var u=c.getBoundingClientRect(),d=t.find(Lb).getBoundingClientRect();if(0!==u.width&&0===u.height&&u.top-((null==d?void 0:d.top)||0)>10)return}var h=(null===(i=this.selectArea)||void 0===i?void 0:i.begin)||{row:a,col:s},f=(null===(r=this.selectArea)||void 0===r?void 0:r.end)||{row:a,col:s},p=h.row!==a,g=p?h.row-1:f.row-1;e.preventDefault(),g<0||(g===a&&2===l&&(g=-1),p?this.select(_m(_m({},h),{},{row:g}),f):this.select(h,_m(_m({},f),{},{row:g})))}}}},{key:"selectDown",value:function(e,t){var n,i,r;if(Vy(this.editor)&&this.tableModel){var o=Vm(this.getCellPoint(t),2),a=o[0],s=o[1];if(!(a<0||s<0)){var l=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,c=this.editor.change.getRange();if(c.shrinkToElementNode(),0===l){if(this.selectRange&&"top"===this.selectRange.type&&c.startOffset!==this.selectRange.endOffset)return;this.selectRange={type:"bottom",startOffset:c.startOffset,endOffset:c.endOffset};var u=c.getBoundingClientRect(),d=t.find(Lb).getBoundingClientRect();if(0!==u.width&&0===u.height&&((null==d?void 0:d.bottom)||0)-u.bottom>10)return}var h=this.tableModel.rows,f=(null===(i=this.selectArea)||void 0===i?void 0:i.begin)||{row:a,col:s},p=(null===(r=this.selectArea)||void 0===r?void 0:r.end)||{row:a,col:s},g=f.row!==a,v=g?f.row+1:p.row+1;v>h-1||(e.preventDefault(),v===a&&2===l&&(v=-1),g?this.select(_m(_m({},f),{},{row:v}),p):this.select(f,_m(_m({},p),{},{row:v})))}}}},{key:"getSelectionHtml",value:function(){var e=this.tableModel,t=this.table.helper;if(!e||!this.tableRoot)return null;for(var n=this.getSelectArea(),i=n.begin,r=n.end,o=this.tableRoot.find("col"),a=[],s=0,l=i.col;l<=r.col;l++){var c,u=null===(c=o.eq(l))||void 0===c?void 0:c.get();u&&(a.push('<col width="'.concat(u.width,'" />')),s+=parseInt(u.width))}for(var d="<colgroup>".concat(a.join(""),"</colgroup>"),h=[],f=i.row;f<=r.row;f++){for(var p=[],g=i.col;g<=r.col;g++){var v=e.table[f][g],m=void 0,b=void 0,y=void 0;if(!t.isEmptyModelCol(v)&&v.element&&(y=v.element.cloneNode(!0)),!t.isEmptyModelCol(v)&&v.isMulti&&(m=Math.min(f+v.rowSpan-1,r.row)-f+1,b=Math.min(g+v.colSpan-1,r.col)-g+1),t.isEmptyModelCol(v)){var w=e.table[v.parent.row][v.parent.col];if(v.parent.row===f&&v.parent.col<i.col&&g===i.col){var k,x=i.col-v.parent.col;if(!t.isEmptyModelCol(w))b=Math.min(w.colSpan-x,r.col-i.col+1),m=w.rowSpan,y=null===(k=w.element)||void 0===k?void 0:k.cloneNode(!0)}if(v.parent.col===g&&v.parent.row<i.row&&f===i.row){var C,M=i.row-v.parent.row;if(!t.isEmptyModelCol(w))m=Math.min(w.rowSpan-M,r.row-i.row+1),b=w.colSpan,y=null===(C=w.element)||void 0===C?void 0:C.cloneNode(!0)}}y&&(y=y,m&&y.setAttribute("rowspan","".concat(m)),b&&y.setAttribute("colspan","".concat(b)),p.push(y.outerHTML))}h.push("<tr>".concat(p.join(""),"</tr>"))}return'<table style="width:'.concat(s,'px">').concat(d).concat(h.join(""),"</table>")}},{key:"hasMergeCell",value:function(){var e=this.table,t=this.tableModel;if(!t)return!1;var n=this.getSelectArea(),i=n.begin;if(n.end,1!==n.count)return!1;var r=t.table[i.row][i.col];return!e.helper.isEmptyModelCol(r)&&!0===r.isMulti}},{key:"isRowSelected",value:function(){return!!this.selectArea&&this.selectArea.allRow}},{key:"isColSelected",value:function(){return!!this.selectArea&&this.selectArea.allCol}},{key:"isTableSelected",value:function(){return!!this.selectArea&&this.selectArea.allCol&&this.selectArea.allRow}},{key:"showHighlight",value:function(e){var t,n,i,r,o=this.table.helper,a=this.tableModel;if(a){var s=e.begin,l=e.end,c=e.allCol,u=e.allRow;if(!(s.row<0||s.col<0)){var d=s.row,h=l.row,f=s.col,p=l.col;this.hideHighlight();for(var g=null===(t=this.colsHeader)||void 0===t?void 0:t.find(MC.COLS_HEADER_ITEM_CLASS),v=null===(n=this.rowsHeader)||void 0===n?void 0:n.find(MC.ROWS_HEADER_ITEM_CLASS),m=d;m<=h;m++)for(var b=f;b<=p;b++){var y=a.table[m][b];if(this.table.helper.isEmptyModelCol(y)){s.row>y.parent.row&&(s.row=y.parent.row),s.col>=y.parent.col&&(s.col=y.parent.col);var w=a.table[y.parent.row][y.parent.col];this.table.helper.isEmptyModelCol(w)||(w.rowSpan>1&&l.row<w.rowSpan-1+y.parent.row&&(l.row=w.rowSpan-1+y.parent.row),w.colSpan>1&&l.col<w.colSpan-1+y.parent.col&&(l.col=w.colSpan-1+y.parent.col))}else this.table.helper.isEmptyModelCol(y)||(y.rowSpan>1&&l.row<y.rowSpan-1+m&&(l.row=y.rowSpan-1+m),y.colSpan>1&&l.col<y.colSpan-1+b&&(l.col=y.colSpan-1+b))}for(var k,x=0,C=0,M=s.row;M<=l.row;M++){var S,E=a.table[M][s.col];if(!o.isEmptyModelCol(E)&&E.element)x+=E.element.offsetHeight,null==v||null===(S=v.eq(M))||void 0===S||S.addClass("active")}for(var O=s.col;O<=l.col;O++){var N,T=a.table[s.row][O];if(!o.isEmptyModelCol(T)&&T.element)C+=T.element.offsetWidth,null==g||null===(N=g.eq(O))||void 0===N||N.addClass("active")}if(l.row===a.rows-1&&l.col===a.cols-1)null===(k=this.tableHeader)||void 0===k||k.addClass("active");var A=a.table[s.row][s.col],I=28,D=13;if(!o.isEmptyModelCol(A)&&A.element&&(I+=A.element.offsetTop,D+=A.element.offsetLeft),I+=(null===(i=this.colsHeader)||void 0===i||null===(r=i.find(MC.COLS_HEADER_ITEM_CLASS).get())||void 0===r?void 0:r.offsetHeight)||0,x>0&&C>0){var _,j,L,R,P,z,B,F,H;if(null===(_=this.highlight)||void 0===_||_.css("width","".concat(C,"px")),null===(j=this.highlight)||void 0===j||j.css("height","".concat(x,"px")),null===(L=this.highlight)||void 0===L||L.css("top","".concat(I,"px")),null===(R=this.highlight)||void 0===R||R.css("left","".concat(D,"px")),null===(P=this.highlight)||void 0===P||P.show("block"),null===(z=this.table.wrapper)||void 0===z||z.addClass("data-table-highlight"),c)null===(B=this.table.wrapper)||void 0===B||B.addClass("data-table-highlight-row");if(u)null===(F=this.table.wrapper)||void 0===F||F.addClass("data-table-highlight-col");if(c&&u)null===(H=this.table.wrapper)||void 0===H||H.addClass("data-table-highlight-all")}}}}},{key:"hideHighlight",value:function(){var e,t,n,i,r,o,a,s;null===(e=this.highlight)||void 0===e||e.hide(),null===(t=this.colsHeader)||void 0===t||t.find(".active").removeClass("active"),null===(n=this.rowsHeader)||void 0===n||n.find(".active").removeClass("active"),null===(i=this.tableHeader)||void 0===i||i.removeClass("active"),null===(r=this.table.wrapper)||void 0===r||r.removeClass("data-table-highlight"),null===(o=this.table.wrapper)||void 0===o||o.removeClass("data-table-highlight-row"),null===(a=this.table.wrapper)||void 0===a||a.removeClass("data-table-highlight-col"),null===(s=this.table.wrapper)||void 0===s||s.removeClass("data-table-highlight-all")}}]),n}(),NC=function(e){Qm(n,tb.exports.EventEmitter2);var t=eb(n);function n(e,i){var r;return jm(this,n),(r=t.call(this)).tableCleared=!1,r.rowCleared=!1,r.colCleared=!1,r.clearFormat=function(){var e=r.table,t=e.selection,n=e.helper;t.getSelectArea(),t.each((function(e){!n.isEmptyModelCol(e)&&e.element&&e.element.removeAttribute("style")})),r.emit("actioned","clearFormat")},r.hasCopyData=function(){return!!r.table.helper.getCopyData()},r.editor=e,r.table=i,r}return Rm(n,[{key:"init",value:function(){var e=this.table.wrapper;e&&(this.tableRoot=e.find(MC.TABLE_CLASS),this.colsHeader=e.find(MC.COLS_HEADER_CLASS),this.rowsHeader=e.find(MC.ROWS_HEADER_CLASS),this.tableHeader=e.find(MC.HEADER_CLASS),this.viewport=e.find(MC.VIEWPORT))}},{key:"insertColAt",value:function(e,t,n,i){var r,o,a=this.table,s=a.selection,l=a.wrapper;a.helper;var c=s.tableModel;if(l&&c&&this.tableRoot){var u=(n=0===e||n)?e:e-1,d=n?"after":"before",h=l.find(MC.COLS_HEADER_ITEM_CLASS),f=null===(r=h.eq(u))||void 0===r?void 0:r.get(),p=l.find(MC.COLS_HEADER_CLASS),g=0;i||(i=f.offsetWidth),Array.isArray(i)?i.forEach((function(e){g+=e})):"number"==typeof i&&(g=t*i);var v=this.editor.$;p.css("width",p.get().offsetWidth+g+"px");var m=this.tableRoot.find("colgroup"),b=l.find("tr"),y=this.tableRoot.find("col"),w=null===(o=y.eq(u))||void 0===o?void 0:o.clone();if(w){for(var k=t;k>0;){var x=v(f.outerHTML);v(f)[d](x);var C=null==w?void 0:w.clone();v(C).attributes("width",Array.isArray(i)?i[t-k]:i);var M=y[e];m[0].insertBefore(C[0],M),k--}b.each((function(n,i){for(var r=s.getCellIndex(i,e),o=0;o<t;o++){n.insertCell(r).innerHTML=MC.EmptyCell}}));for(var S=arguments.length,E=new Array(S>4?S-4:0),O=4;O<S;O++)E[O-4]=arguments[O];this.emit.apply(this,["actioned","insertCol"].concat(E)),s.selectArea&&s.selectCol(e,e+t-1)}}}},{key:"insertCol",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.table,r=i.selection,o=i.wrapper,a=r.tableModel;if(o&&a){var s=r.getSelectArea(),l="left"===e,c="end"===e||!e,u=o.find(MC.COLS_HEADER_ITEM_CLASS),d=a.cols-1;c||(d=l?s.begin.col:s.end.col);for(var h=l?d:d+1,f=null===(t=u.eq(d))||void 0===t?void 0:t.get().offsetWidth,p=arguments.length,g=new Array(p>2?p-2:0),v=2;v<p;v++)g[v-2]=arguments[v];if(this.insertColAt.apply(this,[h,n,l,f].concat(g)),c){var m,b=null===(m=this.viewport)||void 0===m?void 0:m.get();if(!b)return;b.scrollLeft=b.scrollWidth-b.offsetWidth}}}},{key:"removeCol",value:function(){var e=this.table,t=e.selection,n=e.conltrollBar,i=e.helper,r=t.tableModel;if(r&&this.tableRoot){var o=r.table,a=_m({},t.getSelectArea());t.each((function(e){i.isEmptyModelCol(e)||(a.end.col+=e.colSpan-1)}));var s=a.end.col-a.begin.col+1,l=this.tableRoot.find("colgroup"),c=this.tableRoot.find("tr"),u=l.find("col");if(a.allCol)this.removeTable();else{for(var d=a.end.col;d>=a.begin.col;d--){var h;n.removeCol(d),null===(h=u.eq(d))||void 0===h||h.remove()}o.forEach((function(e,t){for(var n=a.end.col;n>=a.begin.col;n--){var r=e[n];if(i.isEmptyModelCol(r)){var l=o[r.parent.row][r.parent.col];if(!i.isEmptyModelCol(l)&&r.parent.col<a.begin.col){var u=Math.min(s,r.parent.col+l.colSpan-a.begin.col);l.element&&(l.element.colSpan=l.colSpan-u)}}else{var d;if(r.isMulti){var h=n+r.colSpan-1>a.end.col,f=a.end.col+1-n;if(h){for(var p,g,v=0,m=0;m<=a.end.col;m++)i.isEmptyModelCol(e[m])||v++;var b=null===(p=c.eq(t))||void 0===p||null===(g=p.get())||void 0===g?void 0:g.insertCell(v);if(!b)return;b.innerHTML=MC.EmptyCell,b.colSpan=r.colSpan-f,b.rowSpan=r.rowSpan}}null===(d=r.element)||void 0===d||d.remove()}}}));for(var f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];this.emit.apply(this,["actioned","removeCol"].concat(p))}}}},{key:"insertColLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertCol("left",e)}},{key:"insertColRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertCol("right",e)}},{key:"insertRowAt",value:function(e,t,n){var i=this,r=this.table,o=r.wrapper,a=r.selection,s=r.helper,l=a.tableModel;if(o&&l){var c=this.editor.$,u=(n=0===e||n)?"after":"before",d=n?e:e-1,h=o.find(MC.ROWS_HEADER_ITEM_CLASS),f=h[d],p=n?d:d+1,g=[],v=l.table[d];v.forEach((function(e,i){if(s.isEmptyModelCol(e)||!e.isMulti)if(s.isEmptyModelCol(e)){var r=l.table[e.parent.row][e.parent.col];!s.isEmptyModelCol(r)&&e.parent.row<p&&e.parent.row+r.rowSpan-1>=p?r.element.rowSpan=r.rowSpan+t:!s.isEmptyModelCol(r)&&e.parent.row<d&&e.parent.col===i&&g.push({tdBase:r.element})}else g.push({tdBase:e.element});else!n&&e.rowSpan>1&&p<=d+e.rowSpan-1?e.element.rowSpan=e.rowSpan+t:g.push({tdBase:e.element})}));for(var m=t,b=function(){var e,t,n=null===(e=i.tableRoot)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.insertRow(p);n&&(g.forEach((function(e){var t=n.insertCell();t.innerHTML=MC.EmptyCell,t.colSpan=e.tdBase.colSpan})),c(f)[u](c(f.outerHTML)),m--)};m>0;)b();for(var y=arguments.length,w=new Array(y>3?y-3:0),k=3;k<y;k++)w[k-3]=arguments[k];this.emit.apply(this,["actioned","insertRow"].concat(w)),a.selectArea&&a.selectRow(e,e+t-1)}}},{key:"insertRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.table,i=n.selection,r=n.helper,o=i.tableModel;if(o){var a=i.getSelectArea(),s="up"===e,l="end"===e||!e,c=o.rows-1;if(!l){var u=a.end.row;i.each((function(e){r.isEmptyModelCol(e)||(u+=e.rowSpan-1)})),c=s?a.begin.row:u}for(var d=s?c:c+1,h=arguments.length,f=new Array(h>2?h-2:0),p=2;p<h;p++)f[p-2]=arguments[p];this.insertRowAt.apply(this,[d,t,s].concat(f))}}},{key:"insertRowUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertRow("up",e)}},{key:"insertRowDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertRow("down",e)}},{key:"removeRow",value:function(){var e=this.table,t=e.selection,n=e.conltrollBar,i=e.helper,r=t.tableModel;if(r&&this.tableRoot){var o=r.table,a=_m({},t.getSelectArea()),s=a.begin,l=a.end;t.each((function(e){i.isEmptyModelCol(e)||(l.row+=e.rowSpan-1)}));var c=l.row-s.row+1,u=this.tableRoot.find("tr");if(a.allRow)this.removeTable();else{for(var d=function(e){o[e].forEach((function(n,r){if(!i.isEmptyModelCol(n)&&n.isMulti&&n.rowSpan>1&&e+n.rowSpan-1>l.row){var a=t.getCellIndex(l.row+1,r),d=u[l.row+1].insertCell(a),h=l.row-e+1;d.innerHTML=MC.EmptyCell,d.colSpan=n.colSpan,d.rowSpan=n.rowSpan-h}if(i.isEmptyModelCol(n)){var f=o[n.parent.row][n.parent.col];if(!i.isEmptyModelCol(f)&&n.parent.row<s.row){var p=Math.min(c,n.parent.row+f.rowSpan-s.row);f.element.rowSpan=f.rowSpan-p}}}))},h=s.row;h<=l.row;h++)d(h);for(var f=l.row;f>=s.row;f--){var p;null===(p=this.tableRoot.get())||void 0===p||p.deleteRow(f),n.removeRow(f)}for(var g=arguments.length,v=new Array(g),m=0;m<g;m++)v[m]=arguments[m];this.emit.apply(this,["actioned","removeRow"].concat(v))}}}},{key:"removeTable",value:function(){Vy(this.editor)||this.emit("tableRemoved"),this.editor.card.remove(this.table.id)}},{key:"copy",value:function(){var e=this.table,t=e.selection,n=e.helper,i=t.getSelectionHtml();i&&(this.editor.clipboard.copy(this.editor.$(i)[0]),n.copyHTML(i))}},{key:"mockCopy",value:function(){var e=this.table,t=e.selection,n=e.helper,i=t.getSelectionHtml();i&&n.copyHTML(i)}},{key:"shortcutCopy",value:function(e){var t,n,i,r=this.table,o=r.selection,a=r.helper,s=o.getSelectionHtml();if(s){var l=this.editor.$;null===(t=e.clipboardData)||void 0===t||t.clearData(),null===(n=e.clipboardData)||void 0===n||n.setData("text/plain",l(s).html()),null===(i=e.clipboardData)||void 0===i||i.setData("text/html",s),a.copyHTML(s),e.preventDefault()}}},{key:"cut",value:function(){this.copy(),this.clear()}},{key:"shortcutCut",value:function(e){this.shortcutCopy(e),this.clear()}},{key:"clear",value:function(){var e=this.table,t=e.selection,n=e.helper,i=t.getSelectArea();if(i.allCol&&i.allRow){if(this.tableCleared)return this.removeTable(),void(this.tableCleared=!1);this.tableCleared=!0}if(i.allRow){if(this.rowCleared)return this.removeRow(),void(this.rowCleared=!1);this.rowCleared=!0}if(i.allCol){if(this.colCleared)return this.removeCol(),void(this.colCleared=!1);this.colCleared=!0}t.each((function(e){!n.isEmptyModelCol(e)&&e.element&&(e.element.innerHTML=MC.EmptyCell)})),this.emit("actioned","clear")}},{key:"mockPaste",value:function(){var e=this.table.helper.getCopyData();if(e){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.paste.apply(this,[e].concat(n))}}},{key:"shortcutPaste",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.editor.clipboard.getData(e);this.paste(t)}},{key:"paste",value:function(e){var t=this.table,n=t.selection,i=t.helper,r=n.tableModel;if(r){var o=this.editor.$,a=n.getSelectArea(),s=a.begin,l=a.end,c=s.row===l.row&&s.col===l.col,u=e.html;if(e.text,u){for(var d=new cw(u,this.editor).toValue(),h=i.trimBlankSpan(o(d)),f=arguments.length,p=new Array(f>1?f-1:0),g=1;g<f;g++)p[g-1]=arguments[g];if("table"===h.name){i.normalizeTable(h);var v=i.getTableModel(h),m=v.rows,b=v.cols,y=v.table[0][0],w=r.table[s.row][s.col];if(i.isEmptyModelCol(y)||i.isEmptyModelCol(w))return;var k=y.rowSpan,x=y.colSpan,C=k===m&&x===b;if(C&&!a&&y.element)return i.copyTo(y.element,w.element),void this.emit.apply(this,["actioned","paste"].concat(p));if(c){if(b+s.col>r.cols){var M=b+s.col-r.cols;this.insertCol("end",M,!0)}if(m+s.row>r.rows){var S=m+s.row-r.rows;this.insertRow("end",S,!0)}n.select(s,{row:s.row+m-1,col:s.col+b-1})}var E=n.getSelectArea();this.splitCell(!0),n.each((function(e,t,n){var r=(t-E.begin.row)%m,o=(n-E.begin.col)%b,a=v.table[r][o];if(a){if(!i.isEmptyModelCol(a)&&a.isMulti&&!i.isEmptyModelCol(e)){var s=e.element;return s.rowSpan=Math.min(a.rowSpan,E.end.row-t+1),s.colSpan=Math.min(a.colSpan,E.end.col-n+1),void i.copyTo(a.element,s)}var l;if(i.isEmptyModelCol(a))i.isEmptyModelCol(e)||null===(l=e.element)||void 0===l||l.remove();else a.element&&!i.isEmptyModelCol(e)&&e.element&&i.copyTo(a.element,e.element)}}))}else this.mergeCell(!0);this.emit.apply(this,["actioned","paste"].concat(p))}}}},{key:"mergeCell",value:function(){var e=this,t=this.table,n=t.selection,i=t.helper,r=n.selectArea,o=n.tableModel;if(r&&o){var a=r.begin,s=r.end,l=s.row-a.row+1,c=s.col-a.col+1,u=[],d=null;if(this.splitCell(),n.select(a,s),n.each((function(t,n,r){if(!i.isEmptyModelCol(t))return r===a.col&&n===a.row?((d=t.element).rowSpan=l,void(d.colSpan=c)):void(t.element&&(""!==t.element.innerText.trim()&&u.unshift(e.editor.$(t.element).find(MC.TABLE_TD_CONTENT_CLASS).html()),t.element.remove()))})),d){var h=this.editor.$(d),f=h.find(MC.TABLE_TD_CONTENT_CLASS);f.html(f.html()+u.join(""));for(var p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];this.emit.apply(this,["actioned","mergeCell"].concat(g))}}}},{key:"splitCell",value:function(){var e=this,t=this.table,n=t.selection,i=t.helper,r=n.tableModel;if(r&&this.tableRoot){var o=this.tableRoot.find("tr");n.each((function(t,a,s){if(!i.isEmptyModelCol(t))for(var l=a+t.rowSpan,c=s+t.colSpan,u=l-1;u>=a;u--){u>=o.length&&e.insertRowAt(a,1);for(var d=u>=o.length?e.tableRoot.find("tr")[u]:o[u],h=c-1;h>=s;h--){var f=r.table[u][h];if(!i.isEmptyModelCol(f)&&f.isMulti)f.element=f.element,f.element.colSpan=1,f.element.rowSpan=1;else if(i.isEmptyModelCol(f)){var p=n.getCellIndex(u,h);d.insertCell(p).innerHTML=MC.EmptyCell}}}}));for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];this.emit.apply(this,["actioned","splitCell"].concat(s))}}}]),n}(),TC=function(e){Qm(n,Qk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).contenteditable=["div".concat(MC.TABLE_TD_CONTENT_CLASS)],e.helper=new SC(e.editor),e.template=new MC(e.editor,Xm(e)),e.selection=new OC(e.editor,Xm(e)),e.conltrollBar=new EC(e.editor,Xm(e),{col_min_width:40,row_min_height:33}),e.command=new NC(e.editor,Xm(e)),e}return Rm(n,[{key:"toolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"delete"}]}},{key:"getTableValue",value:function(){var e=this;if(this.wrapper){var t=this.wrapper.find(MC.TABLE_CLASS);if(t){var n=this.selection.tableModel;if(n){var i=this.editor,r=i.$,o=i.schema,a=i.conversion,s=r("<div></div>");s.append(t.clone(!0));var l=new cw(s,this.editor,(function(t){t.find(MC.TABLE_TD_BG_CLASS).remove(),t.find(Lb).each((function(t){e.editor.node.unwrap(r(t))}))}));return{rows:n.rows,cols:n.cols,height:n.height,width:n.width,html:l.toValue(o,a.getValue(),!1,!0)}}}}}},{key:"updateBackgroundSelection",value:function(e){var t=this.selection,n=t.selectArea,i=t.tableModel;if(n&&n.count>1&&i){var r=n.begin,o=n.end,a=i.table[r.row][r.col];!this.helper.isEmptyModelCol(a)&&a.element&&e.setStart(a.element,0);var s=i.table[o.row][o.col];!this.helper.isEmptyModelCol(s)&&s.element&&e.setEnd(s.element,0)}}},{key:"drawBackground",value:function(e,t){var n=e.get().getBoundingClientRect(),i=new DOMRect(n.x,n.y,0,0),r=t.startNode,o=t.endNode;if("td"===r.name&&"td"===o.name){var a=r.get().getBoundingClientRect();i.x=a.left-n.left,i.y=a.top-n.top,i.width=a.right-a.left,i.height=a.bottom-a.top;var s=o.get().getBoundingClientRect();return i.width=s.right-a.left,i.height=s.bottom-a.top,i}}},{key:"activate",value:function(e){var t,i,r;(kb(Km(n.prototype),"activate",this).call(this,e),e)?null===(t=this.wrapper)||void 0===t||t.addClass("active"):(this.selection.clearSelect(),this.conltrollBar.hideContextMenu(),null===(r=this.wrapper)||void 0===r||r.removeClass("active"));null===(i=this.scrollbar)||void 0===i||i.refresh()}},{key:"onChange",value:function(){if(Vy(this.editor)){this.editor.history.hold(),this.conltrollBar.refresh(),this.selection.render("change");var e=this.getTableValue();e&&e!==this.getValue()&&this.setValue(e)}}},{key:"didRender",value:function(){var e,t,n,i=this;this.viewport=null===(e=this.wrapper)||void 0===e?void 0:e.find(Vy(this.editor)?MC.VIEWPORT:MC.VIEWPORT_READER),this.selection.init(),this.conltrollBar.init(),this.command.init(),this.viewport&&(this.scrollbar=new Kk(this.editor,this.viewport,!0,!1,!0),this.scrollbar.on("display",(function(e){var t,n;"block"===e?null===(t=i.wrapper)||void 0===t||t.addClass("scrollbar-show"):null===(n=i.wrapper)||void 0===n||n.removeClass("scrollbar-show")}))),null===(t=this.scrollbar)||void 0===t||t.refresh(),this.selection.on("select",(function(){if(i.conltrollBar.refresh(),Vy(i.editor)){var e=i.selection,t=e.selectArea,n=e.tableModel;t&&t.count>1&&n&&i.editor.ot.updateSelectionData()}})),this.conltrollBar.on("sizeChanged",(function(){var e;i.selection.refreshModel(),null===(e=i.scrollbar)||void 0===e||e.refresh(),i.onChange()})),this.command.on("actioned",(function(e,t){var n;"paste"===e&&i.editor.card.render(i.wrapper),i.selection.render(e),null===(n=i.scrollbar)||void 0===n||n.refresh(),t||i.onChange()}));var r=null===(n=this.wrapper)||void 0===n?void 0:n.find(MC.TABLE_CLASS);if(r){this.editor.card.render(r);var o=this.getValue();(null==o?void 0:o.html)||this.onChange()}}},{key:"render",value:function(){var e,t=this.editor.$,n=this.getValue();if(!n)return"Error value";if(n.html){var i=this.helper.getTableModel(t(n.html));n.rows=i.rows,n.cols=i.cols}return this.wrapper=Vy(this.editor)?t(this.template.htmlEdit(n,[{action:"cut",icon:"cut",text:(e=this.editor.language.get("table")).cut},{action:"copy",icon:"copy",text:e.copy},{action:"mockPaste",icon:"paste",text:e.paste},{split:!0},{action:"insertColLeft",icon:"insert-col-left",text:e.insertColLeft},{action:"insertColRight",icon:"insert-col-right",text:e.insertColRight},{action:"insertRowUp",icon:"insert-row-up",text:e.insertRowUp},{action:"insertRowDown",icon:"insert-row-down",text:e.insertRowDown},{split:!0},{action:"mergeCell",icon:"merge-cell",text:e.mergeCell},{action:"splitCell",icon:"split-cell",text:e.splitCell},{split:!0},{action:"removeCol",icon:"remove-col",text:e.removeCol},{action:"removeRow",icon:"remove-row",text:e.removeRow},{split:!0},{action:"removeTable",icon:"remove-table",text:e.removeTable},{split:!0},{action:"clear",icon:"clear",text:e.clear}])):t(this.template.htmlView(n)),Vy(this.editor)||this.wrapper.find("table").addClass("data-table"),this.wrapper}}],[{key:"cardName",get:function(){return"table"}},{key:"cardType",get:function(){return ky.BLOCK}},{key:"selectStyleType",get:function(){return"background"}}]),n}(),AC={en:{table:{insertColLeft:"Insert column(s) $data left",insertColRight:"Insert column(s) $data right",insertRowUp:"Insert row(s) $data up",insertRowDown:"Insert row(s) $data down",mergeCell:"Merge cells",splitCell:"Unmerge cells",removeCol:"Delete selected column(s)",removeRow:"Delete selected row(s)",removeTable:"Delete table",copy:"Copy",cut:"Cut",paste:"Paste",clear:"Clear",align:"Align",verticalAlign:"Vertical Align",alignLeft:"Align left",alignCenter:"Align center",alignRight:"Align right",alignJustify:"Align justify",alignTop:"Align Top",alignMiddle:"Align middle",alignBottom:"Align bottom",undo:"Undo",redo:"Redo",paintformat:"Paint format",removeformat:"Clear format",bold:"Bold",italic:"Italic",strikethrough:"Strike-through",underline:"Underline",fontcolor:"Font color",highlightColor:"Highlight color",backcolor:"Background color",taskList:"Task list",list:"List",orderedList:"Order list",unorderedList:"UnOrder list",link:"Link",image:"Image",label:"Status",save:"Save",insertSection:"Insert section",fontsizeTitle:"Font",file:"Attachment",fileDescription:"Upload one or more files",emoji:"Emoji",indent:{buttonTitle:"Indent",decrease:"Decrease indent",increase:"Increase indent",draggingCol:"Moving the $data column",draggingRow:"Moving the $data row"}}},"zh-cn":{table:{insertColLeft:"左边插入 $data 列",insertColRight:"右边插入 $data 列",insertRowUp:"上方插入 $data 行",insertRowDown:"下方插入 $data 行",mergeCell:"合并单元格",splitCell:"拆分单元格",removeCol:"删除选中列",removeRow:"删除选中行",removeTable:"删除表格",copy:"复制",cut:"剪切",paste:"粘贴",clear:"清空内容",align:"水平对齐",verticalAlign:"垂直对齐",alignLeft:"左对齐",alignCenter:"水平居中",alignRight:"右对齐",alignJustify:"两端对齐",alignTop:"顶对齐",alignMiddle:"垂直居中",alignBottom:"底对齐",undo:"撤销",redo:"重做",paintformat:"格式刷",removeformat:"清除格式",bold:"粗体",italic:"斜体",strikethrough:"中划线",underline:"下划线",fontcolor:"字体颜色",highlightColor:"字体背景色",backcolor:"单元格背景色",taskList:"任务列表",list:"列表",orderedList:"有序列表",unorderedList:"无序列表",link:"链接",image:"图片",label:"状态",save:"保存",insertSection:"插入Section",fontsizeTitle:"字号",file:"附件",fileDescription:"上传单个或多个文件",emoji:"Emoji 表情",indent:{buttonTitle:"缩进",decrease:"减少缩进",increase:"增加缩进"},draggingCol:"正在移动 $data 列",draggingRow:"正在移动 $data 行"}}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("div[dnd-trigger-key=\"table\"], div[toolbar-trigger-key=\"table\"] {\n    margin-left: -13px;\n    margin-top: -13px;\n    z-index: 1;\n}\n\n.data-table {\n    border: none;\n    position: relative;\n    z-index: 1;\n    table-layout: fixed;\n    white-space: pre-wrap;\n    width: 100%;\n    border-collapse: collapse;\n}\n\n.data-table tr,.data-table td {\n    position: relative;\n}\n\n.data-table tr {\n    height: 33px;\n}\n\n.data-table tr td {\n    border: none;\n    vertical-align: top;\n    cursor: text;\n}\n\n.data-table tr td[table-cell-selection]:after {\n    content: ' ';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(180, 213, 254, 0.5);\n    pointer-events: none;\n    z-index: 2;\n}\n\n.data-table.drag-selecting, .data-table tr td[table-cell-selection] {\n    caret-color:transparent\n}\n\n.data-table tr td[table-cell-selection] ::-moz-selection{\n    background: transparent !important;\n}\n\n.data-table tr td[table-cell-selection] ::selection{\n    background: transparent !important;\n}\n\n.table-wrapper {\n    position: relative;\n    cursor: default;\n}\n\n.table-wrapper.active {\n    margin-top: -42px;\n    width: 100%;\n}\n\n.table-wrapper.scrollbar-show {\n    margin-bottom: -8px;\n}\n\n.table-wrapper.data-table-highlight tr td[table-cell-selection]:after {\n    background: transparent;\n}\n\n.table-wrapper .table-header {\n    position: absolute;\n    visibility: hidden;\n    left: -13px;\n    top: 28px;\n    width: 14px;\n    height: 14px;\n    cursor: pointer;\n    z-index: 2;\n    background-color: #ffffff;\n}\n\n.table-wrapper .table-header .table-header-item {\n    border: 1px solid #dfdfdf;\n    background-color: #f2f3f5;\n    border-top-left-radius: 50%;\n    width: 100%;\n    height: 100%;\n}\n\n.table-wrapper .table-header:hover {\n    background-color: #ffffff;\n}\n\n.table-wrapper.data-table-highlight-all .table-header {\n    background: rgba(255, 77, 79, 0.4) !important;\n    border-color:  rgba(255, 77, 79, 0.4) !important;\n}\n\n.table-wrapper .table-header-item:hover{\n    background-color: #e2e4e6;\n}\n\n.table-wrapper.active .table-header {\n    visibility:visible\n}\n\n.table-wrapper .table-header.selected .table-header-item {\n    background: #4daaff;\n}\n\n.table-wrapper .table-cols-header {\n    position: relative;\n    height: 14px;\n    display: none;\n    width: 100%;\n    cursor: default;\n    margin-bottom: -1px;\n}\n\n.table-wrapper.active .table-cols-header {\n    display: flex;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item {\n    position: relative;\n    height: 14px;\n    width: auto;\n    border: 1px solid #dfdfdf;\n    border-bottom: 0 none;\n    overflow: visible;\n    background: #f2f3f5;\n    cursor: pointer;\n    border-right: 0 none;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item:hover{\n    background-color: #e2e4e6;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item:first-child {\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item:last-child {\n    border-top-right-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border-right: 1px solid #dfdfdf;\n}\n.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item.active, .table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item {\n    background: rgba(255, 77, 79, 0.4) !important;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected {\n    background: #fff;\n    border-color: #fff;\n    z-index: 1;\n    border-radius: 0;\n    height: 14px;\n    border-bottom: 0;\n    cursor: move;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger {\n    display: block;\n    position: absolute;\n    left: -1px;\n    top: -1px;\n    right: -1px;\n    bottom: 0;\n    background: #4daaff;\n    border: 1px solid #dfdfdf;\n    border-radius: 0;\n    z-index: 1;\n}\n\n.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item .col-dragger,.table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item .col-dragger {\n    background: transparent !important;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger .drag-info {\n    display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .col-dragger .data-icon {\n    display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger {\n    height: 50px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger .drag-info {\n    display: block;\n    background: #fff;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger {\n    position: absolute;\n    right: -4px;\n    top: -1px;\n    width: 7px;\n    height: 14px;\n    z-index: 10;\n    cursor: col-resize;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger:hover {\n    background: #0589f3;\n}\n\n\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger.dragging {\n    width: 2px;\n    background: #0589f3;\n    right: -1px;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger {\n    text-align: center;\n    display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag {\n    transform: rotate(90deg);\n    font-size: 10px;\n    color: #fff;\n    position: relative;\n    top: -6px;\n}\n.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag,.table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag{\n    display: none;\n}\n.table-wrapper .table-cols-header.dragging .table-cols-header-item .cols-trigger {\n    display: none;\n}\n.table-wrapper .table-cols-header.resize .table-cols-header-item {\n    cursor: col-resize;\n}\n.table-wrapper .table-rows-header {\n    position: absolute;\n    left: -13px;\n    top: 41px;\n    width: 14px;\n    z-index: 1;\n    border-right: 0;\n    visibility: hidden;\n}\n\n.table-wrapper.active .table-rows-header {\n    visibility: visible;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item {\n    position: relative;\n    width: 100%;\n    border: 1px solid #dfdfdf;\n    border-bottom: 0;\n    background: #f2f3f5;\n    cursor: pointer;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item:hover\n{\n    background-color: #e2e4e6;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item:first-child {\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item:last-child{\n    border-bottom: 1px solid #dfdfdf;\n}\n\n.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item.active,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item {\n    background: rgba(255, 77, 79, 0.4) !important;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item.selected {\n    width: 14px;\n    background: #fff;\n    border-color: #fff;\n    cursor: move;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger {\n    display: flex;\n    position: absolute;\n    align-items: center;\n    text-align: left;\n    white-space: nowrap;\n    content: ' ';\n    left: -1px;\n    top: -1px;\n    bottom: -1px;\n    right: -1px;\n    background: #4daaff;\n    border: 1px solid #dfdfdf;\n    border-radius: 0;\n    z-index: 1;\n}\n.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item .row-dragger,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item .row-dragger{\n    background: transparent !important;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger .drag-info {\n    display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.no-dragger .row-dragger .data-icon {\n    display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger {\n    width: 150px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger .drag-info {\n    margin-left: 5px;\n    display: flex;\n    padding: 10px;\n    background: #fff;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger {\n    position: absolute;\n    bottom: -4px;\n    height: 7px;\n    width: 14px;\n    left: -1px;\n    z-index: 10;\n    cursor: row-resize;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger:hover {\n    background: #0589f3;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger.dragging {\n    height: 2px;\n    background: #0589f3;\n    bottom: -1px;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger {\n    display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag {\n    font-size: 10px;\n    color: #fff;\n    margin-left: 1px;\n}\n\n.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag{\n    display: none;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .drag-info {\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n.table-wrapper .table-rows-header.dragging .table-rows-header-item .rows-trigger {\n    display: none;\n}\n.table-wrapper .table-rows-header.resize .table-rows-header-item {\n    cursor: row-resize;\n}\n\n.table-wrapper .table-viewport {\n    position: relative;\n    overflow: hidden;\n    overflow-y: hidden;\n    cursor: text;\n}\n\n.table-wrapper.active .table-viewport{\n    padding-top: 28px;\n    padding-left: 13px;\n    margin-left: -13px;\n}\n\n.table-wrapper .table-viewport .scrollbar-shadow-left {\n    top: 0;\n    bottom: 8px;\n}\n\n.table-wrapper.active .table-viewport .scrollbar-shadow-left {\n    top: 28px;\n    margin-left: 14px;\n}\n\n.table-wrapper .table-viewport .scrollbar-shadow-right {\n    top: 0;\n    bottom: 8px;\n}\n\n.table-wrapper.active .table-viewport .scrollbar-shadow-right {\n    top: 28px;\n}\n\n.table-wrapper .table-placeholder {\n    position: absolute;\n    border: 1px solid #008dff;\n    background: #008dff;\n    display: none;\n}\n.table-wrapper .table-menubar {\n    position: absolute;\n    display: none;\n    padding: 4px 0;\n    border-radius: 4px;\n    border: 1px solid #e9e9e9;\n    box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.08);\n    background: #fff;\n    /* \\u4ee3\\u7801\\u5757\\u7684 codemirror \\u9ed8\\u8ba4\\u7ed9\\u6bcf\\u884c\\u4ee3\\u7801\\u7684 pre \\u8bbe\\u7f6e\\u4e86 z-index 2, \\u5982\\u679c\\u8868\\u683c\\u5728\\u4ee3\\u7801\\u5757\\u524d\\u9762\\uff0c\\u9020\\u6210\\u53f3\\u952e\\u83dc\\u5355\\u65e0\\u6cd5\\u70b9\\u51fb */\n    z-index: 10;\n    min-width: 200px;\n}\n.table-wrapper .table-menubar .table-menubar-item {\n    padding: 6px 16px;\n    cursor: default;\n}\n.table-wrapper .table-menubar .table-menubar-item:hover {\n    background: #f0f0f0;\n}\n\n.table-wrapper .table-menubar .table-menubar-item.disabled {\n    color: #aaa;\n    display: none;\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input {\n    width: 46px;\n    line-height: 12px;\n    font-size: 12px;\n    outline: none;\n    border: 1px solid #dadada;\n    border-radius: 4px;\n    text-align: center;\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input::-moz-selection {\n    color: inherit;\n    background:transparent\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input::selection {\n    color: inherit;\n    background:transparent\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input:focus::-moz-selection\n{\n    color: #fff;\n    background: #1890ff;\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input:focus::selection\n{\n    color: #fff;\n    background: #1890ff;\n}\n\n.table-wrapper .table-menubar .split {\n    height: 0;\n    border-top: 1px solid #e8e8e8;\n    margin: 2px 0;\n}\n\n.table-wrapper .table-main-content {\n    margin: 4px 8px;\n    position: relative;\n    z-index: 3;\n}\n\n.table-wrapper .table-main-bg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n    bottom: 0;\n    pointer-events: none;\n}\n\n.table-wrapper .table-main-bg .table-main-border-top {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n    height: 0;\n    border-top: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper .table-main-bg .table-main-border-right {\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: -1px;\n    z-index: 1;\n    width: 0;\n    border-right: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper tr td.table-last-row .table-main-bg .table-main-border-right {\n    display: block;\n    right: 0;\n}\n\n.table-wrapper .table-main-bg .table-main-border-bottom {\n    display: none;\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n    z-index: 1;\n    height: 0;\n    border-bottom: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper tr td.table-last-column .table-main-bg .table-main-border-bottom{\n    display: block;\n    bottom: 0;\n}\n\n.table-wrapper .table-main-bg .table-main-border-left {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 1;\n    width: 0;\n    border-left: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper .table-highlight {\n    background: #ff4d4f;\n    opacity: 0.08;\n    position: absolute;\n    z-index: 2;\n    pointer-events: none;\n    display: none;\n}\n\n.table-wrapper.scrollbar-show .data-scrollable.scroll-x {\n    padding-bottom: 8px;\n}\n\n.table-wrapper .data-scrollable.scroll-x {\n    padding-bottom: 0;\n}\n\n.table-wrapper .data-scrollable.scroll-x:hover {\n    overflow: hidden;\n}\n\n.table-wrapper.scrollbar-show .data-scrollable.scroll-x:hover {\n    overflow-x: auto;\n}\n\n.table-wrapper.scrollbar-show .data-scrollable.scroll-x .data-scrollbar-x{\n    margin-bottom: 2px;\n}\n\n.table-wrapper .data-scrollable .data-scrollbar.data-scrollbar-x {\n    height: 4px;\n}\n\n.table-wrapper .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\n    height: 4px;\n}\n\n.table-wrapper .table-rows-header .table-row-delete-button,.table-wrapper .table-rows-header .table-row-add-button {\n    position: absolute;\n    right: 100%;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 2;\n    width: 24px;\n    height: 24px;\n    border: 1px solid #e4e4e4;\n    border-radius: 2px;\n    cursor: pointer;\n    background-color: #fff;\n    background-position: center center;\n    background-repeat: no-repeat;\n\n    left: 14px;\n    margin-left: 2px;\n    margin-top: -2px;\n}\n\n.table-wrapper .table-rows-header .table-row-delete-button .data-icon,.table-wrapper .table-rows-header .table-row-add-button .data-icon {\n    font-size: 12px;\n}\n\n.table-wrapper .table-rows-header .table-row-add-button {\n    left: -30px;\n    margin-top: -12px;\n}\n\n.table-wrapper .table-rows-header .table-row-delete-button:hover,.table-wrapper .table-col-delete-button:hover {\n    color:#ff4d4f;\n}\n\n.table-wrapper .table-col-delete-button, .table-wrapper .table-col-add-button {\n    position: absolute;\n    bottom: 100%;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 2;\n    margin-bottom: 4px;\n    width: 24px;\n    height: 24px;\n    border: 1px solid #e4e4e4;\n    border-radius: 2px;\n    cursor: pointer;\n    background: #fff;\n    background-position: center center;\n    background-repeat: no-repeat;\n    margin-left: -12px;\n}\n\n.table-wrapper .table-col-delete-button .data-icon, .table-wrapper .table-col-add-button .data-icon {\n    font-size: 12px;\n}\n\n.table-wrapper .table-cols-header .table-col-add-button .table-col-add-split-button {\n    position: absolute;\n    width: 2px;\n    left: 10px;\n    top: 22px;\n    background: #008dff;\n    display: none;\n}\n\n.table-wrapper .table-rows-header .table-row-add-button .table-row-add-split-button {\n    position: absolute;\n    height: 2px;\n    left: 22px;\n    background: #008dff;\n    display: none;\n}\n\n.table-wrapper .table-col-add-button:hover, .table-wrapper .table-row-add-button:hover {\n    color: #008dff;\n}\n\n.table-wrapper .table-col-add-button:hover .table-col-add-split-button{\n    display: block;\n}\n\n.table-wrapper .table-row-add-button:hover .table-row-add-split-button{\n    display: block;\n}\n\n.data-table-reader .data-table tr td {\n    border: 1px solid rgb(217, 217, 217);\n    cursor: auto;\n}");var IC=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"init",value:function(){var e=this;this.editor.language.add(AC),this.editor.schema.add(this.schema()),this.editor.on("paser:html",(function(t){return e.parseHtml(t)})),this.editor.on("paste:each-after",(function(t){return e.pasteHtml(t)})),this.editor.on("paste:markdown-after",(function(t){return e.pasteMarkdown(t)}))}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"schema",value:function(){return[{name:"table",type:"block",attributes:{class:"data-table",style:{width:"@length"}}},{name:"colgroup",type:"block"},{name:"col",type:"block",attributes:{width:"@number",span:"@number"},allowIn:["colgroup"]},{name:"thead",type:"block"},{name:"tbody",type:"block"},{name:"tr",type:"block",attributes:{style:{height:"@length"}},allowIn:["tbody"]},{name:"td",type:"block",attributes:{colspan:"@number",rowspan:"@number",class:["table-last-column","table-last-row","table-last-column","table-cell-selection"]},allowIn:["tr"]},{name:"th",type:"block",attributes:{colspan:"@number",rowspan:"@number"},allowIn:["tr"]}]}},{key:"execute",value:function(e,t){Vy(this.editor)&&(this.editor.change.getRange().startNode.closest(Lb).length>0||this.editor.card.insert(TC.cardName,{rows:e||3,cols:t||3}))}},{key:"pasteHtml",value:function(e){Vy(this.editor)&&"table"===e.name&&this.editor.card.replaceNode(e,TC.cardName,{html:e.get().outerHTML})}},{key:"parseHtml",value:function(e){var t=this,n=this.editor.$;e.find("[".concat(Ub,"=").concat(TC.cardName)).each((function(e){var i=n(e),r=i.find("table");0!==r.length?(r.css({outline:"none","border-collapse":"collapse"}),r.find("td").css({"min-width":"90px","font-size":"14px","white-space":"normal","word-wrap":"break-word",border:"1px solid #d9d9d9",padding:"4px 8px",cursor:"default"}),r.find(MC.TABLE_TD_BG_CLASS).remove(),r.find(MC.TABLE_TD_CONTENT_CLASS).each((function(e){t.editor.node.unwrap(n(e))})),i.replaceWith(r)):i.remove()}))}},{key:"pasteMarkdown",value:function(e){if(Vy(this.editor)&&!1!==this.options.markdown&&e.isText()){var t=e.text();if(t){if(/\|(?:(?:[^\|]+?)\|){2,}/.exec(t)){var n=this.editor.$,i=function(e){var t;return null===(t=n("<table>".concat(e.join(""),"</table>")).get())||void 0===t?void 0:t.outerHTML},r="",o=t.split(/\n|\r\n/),a=[];o.forEach((function(e){var t=/^\s*\|(?:(?:[^\|]+?)\|){2,}\s*$/.exec(e);if(t){var n=t[0].split("|"),o=[];n.forEach((function(e){0!==e.trim().indexOf("---")&&o.push("<td>".concat(e,"</td>"))})),o.length===n.length&&a.push("<tr>".concat(o.join(""),"</tr>"))}else a.length>0?(r+=i(a)+"\n"+e+"\n",a=[]):r+=e+"\n"})),a.length>0&&(r+=i(a)+"\n"),e.text(r)}}}}}],[{key:"pluginName",get:function(){return"table"}}]),n}(),DC=function(e,t,n){var i=null==e?void 0:e.plugin.components[t];if(i&&i.hotkey){var r=i.hotkey();if(r){if(Array.isArray(r))if(n){var o=r.findIndex((function(e){return"object"===zm(e)&&e.args===n}));r=r[o>-1?o:0]}else r=r[0];return"object"===zm(r)&&(r=r.key),r}}},_C={engine:Object,name:{type:String,required:!0},icon:String,content:[String,Function],title:String,placement:String,hotkey:[String,Boolean],command:Object,autoExecute:Object,className:String,active:Object,disabled:Object,onClick:Function,onMouseDown:Function,onMouseEnter:Function,onMouseLevel:Function},jC={engine:Object,name:{type:String,required:!0},direction:String,items:{type:Array,required:!0},values:{type:[String,Array,Number],required:!0},className:String,onSelect:Function,hasDot:Object},LC={engine:Object,name:{type:String,required:!0},values:[String,Array,Number],items:{type:Array,default:[]},icon:String,content:[String,Function],title:String,disabled:Object,single:Object,className:String,direction:String,onSelect:Function,hasArrow:Object,hasDot:Object},RC={engine:{type:Object,required:!0},color:{type:String,required:!0},active:Boolean,setStroke:Object,onSelect:Function},PC={engine:RC.engine,colors:{type:Array,required:!0},setStroke:RC.setStroke,onSelect:RC.onSelect},zC={engine:PC.engine,colors:Array,defaultColor:{type:String,required:!0},defaultActiveColor:{type:String,required:!0},setStroke:PC.setStroke,onSelect:RC.onSelect},BC=_m({engine:_C.engine,name:_C.name,content:{type:[String,Function],required:!0},buttonTitle:String,dropdownTitle:String,command:_C.command,autoExecute:_C.autoExecute,disabled:_C.disabled},oh(zC,"engine")),FC={name:_C.name,engine:_C.engine,icon:_C.icon,title:_C.title,search:{type:String,required:!0},description:_C.content,prompt:_C.content,command:_C.command,autoExecute:_C.autoExecute,className:_C.className,placement:_C.placement,onClick:Function,onMouseDown:Function},HC={engine:_C.engine,title:String,items:{type:Array,required:!0},onSelect:FC.onClick},UC={engine:HC.engine,header:String,groups:{type:Array,required:!0},className:FC.className,icon:FC.icon,content:_C.content,onSelect:HC.onSelect},YC={engine:{type:Object,required:!0},items:{type:Array,default:[]}},VC={engine:{type:Object,required:!0},items:{type:Array,default:[]},className:String},WC=o({name:"am-button",components:{ATooltip:Mv},props:_C,setup:function(e){var t=e.hotkey;return!e.engine||!0!==t&&void 0!==t||(t=DC(e.engine,e.command&&!Array.isArray(e.command)?e.command.name:e.name)),"string"==typeof t&&""!==t&&(t=Hy(t)),{visible:g(!1),hotkeyText:t}},data:function(){return{visible:!1}},methods:{triggerMouseDown:function(e){e.preventDefault(),this.disabled||(this.onMouseDown?this.onMouseDown(e):e.stopPropagation(),this.visible=!1)},triggerMouseEnter:function(e){this.onMouseEnter&&this.onMouseEnter(e),this.visible=!0},triggerMouseLeave:function(e){this.onMouseLevel&&this.onMouseLevel(e),this.visible=!1},triggerClick:function(e){var t=e.target.nodeName;if("INPUT"!==t&&"TEXTAREA"!==t&&e.preventDefault(),!(this.disabled||this.onClick&&!1===this.onClick(e)||!1===this.autoExecute)){var n,i,r=this.name,o=[];this.command&&(Array.isArray(this.command)?o=this.command:(r=this.command.name,o=this.command.args)),null===(n=this.engine)||void 0===n||(i=n.command).execute.apply(i,[r].concat(Wm(o)))}}}}),$C={key:0,class:"toolbar-tooltip-title"};function GC(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}GC("\n.editor-toolbar .toolbar-button {\n    display: inline-block;\n    height: 32px;\n    width: auto;\n    min-width: 32px;\n    margin: 0;\n    text-align: center;\n    padding: 0 7px;\n    background-color: transparent;\n    border: 1px solid transparent;\n    border-radius: 3px 3px;\n    font-size: 16px;\n    cursor: pointer;\n    color: #595959;\n    outline: none;\n    line-height: 32px;\n}\n.editor-toolbar .toolbar-button:hover {\n    border: 1px solid transparent;\n    background-color: #f5f5f5;\n}\n.editor-toolbar .toolbar-button:active,.editor-toolbar .toolbar-button-active,.editor-toolbar .toolbar-button-active:hover {\n    background-color: #e8e8e8;\n    border: 1px solid transparent;\n}\n.editor-toolbar .toolbar-button-disabled,.editor-toolbar .toolbar-button-disabled:hover {\n    background-color: transparent;\n    border: 1px solid transparent;\n    box-shadow: none;\n    color: #000000;\n    opacity: 0.25;\n    cursor: not-allowed;\n}\n"),WC.render=function(e,t,n,i,r,o){var a=T("a-tooltip");return A(),I(a,{placement:e.placement||"bottom",visible:!(!e.title&&!e.hotkeyText)&&e.visible},{title:D((function(){return[e.title?(A(),I("div",$C,_(e.title),1)):R("v-if",!0),e.hotkeyText?(A(),I("div",{key:1,class:"toolbar-tooltip-hotkey",innerHTML:e.hotkeyText},null,8,["innerHTML"])):R("v-if",!0)]})),default:D((function(){return[l("button",{class:["toolbar-button",e.className,{"toolbar-button-active":e.active,"toolbar-button-disabled":e.disabled}],onClick:t[1]||(t[1]=function(){return e.triggerClick&&e.triggerClick.apply(e,arguments)}),onMousedown:t[2]||(t[2]=function(){return e.triggerMouseDown&&e.triggerMouseDown.apply(e,arguments)}),onMouseenter:t[3]||(t[3]=function(){return e.triggerMouseEnter&&e.triggerMouseEnter.apply(e,arguments)}),onMouseleave:t[4]||(t[4]=function(){return e.triggerMouseLeave&&e.triggerMouseLeave.apply(e,arguments)})},[P(e.$slots,"icon",{},(function(){return[e.icon?(A(),I("span",{key:0,class:["data-icon","data-icon-".concat(e.icon)]},null,2)):R("v-if",!0)]})),P(e.$slots,"default",{},(function(){return[k(_("function"==typeof e.content?e.content():e.content),1)]}))],34)]})),_:3},8,["placement","visible"])},WC.__file="src/components/button.vue";var ZC=o({name:"am-dropdown-list",components:{ATooltip:Mv},props:jC,setup:function(e){return{hotkeys:e.items.map((function(t){return Im({},t.key,function(t){var n=t.command,i=t.hotkey;return!e.engine||!0!==i&&void 0!==i||(i=DC(e.engine,n&&!Array.isArray(n)?n.name:e.name)),"string"==typeof i&&""!==i&&(i=Hy(i)),i}(t))}))}},methods:{triggerSelect:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.items.find((function(e){return e.key===t}));if(n){var i=n.autoExecute,r=n.command;if((!this.onSelect||!1!==this.onSelect(e,t))&&!1!==i){var o,a,s=this.name,l=[t];r&&(Array.isArray(r)?l=l.concat(r):(s=r.name,l=l.concat(r.args))),null===(o=this.engine)||void 0===o||(a=o.command).execute.apply(a,[s].concat(Wm(l)))}}}}}),qC={key:0,class:"toolbar-tooltip-title"},QC={key:0,class:"data-icon data-icon-dot"};ZC.render=function(e,n,i,r,o,a){var s=T("a-tooltip");return A(),I("div",{class:["toolbar-dropdown-list","toolbar-dropdown-".concat(e.direction||"vertical"),{"toolbar-dropdown-dot":!1!==e.hasDot},e.className]},[(A(!0),I(t,null,j(e.items,(function(t){var n=t.key,i=t.placement,r=t.title,o=t.hotkey,a=t.direction,c=t.hasDot,u=t.content,d=t.className,h=t.icon;return A(),I(s,{key:n,placement:i||"right",overlayStyle:r||o?{}:{display:"none"}},{title:D((function(){return[r?(A(),I("div",qC,_(r),1)):R("v-if",!0),o?(A(),I("div",{key:1,class:"toolbar-tooltip-hotkey",innerHTML:o},null,8,["innerHTML"])):R("v-if",!0)]})),default:D((function(){return[l("a",{class:["toolbar-dropdown-list-item",d],onClick:function(t){return e.triggerSelect(t,n)}},[("string"==typeof e.values&&e.values===n||Array.isArray(e.values)&&e.values.indexOf(n)>-1)&&"horizontal"!==a&&!1!==c?(A(),I("span",QC)):R("v-if",!0),P(e.$slots,"icon",{},(function(){return[h?(A(),I("span",{key:0,class:["data-icon","data-icon-".concat(h)]},null,2)):R("v-if",!0)]})),P(e.$slots,"default",{},(function(){return[k(_("function"==typeof u?u():u),1)]}))],10,["onClick"])]})),_:2},1032,["placement","overlayStyle"])})),128))],2)},ZC.__file="src/components/dropdown-list.vue";var KC=o({name:"am-dropdown",components:{AmButton:WC,AmDropdownList:ZC},props:LC,setup:function(e,t){var n=g(""),i=g(void 0),r=function(r){!1!==e.single&&(r=Array.isArray(r)&&r.length>0?r[0]:r);var o=e.items.find((function(e){return"string"==typeof r&&e.key===r||Array.isArray(r)&&r.indexOf(e.key)>-1})),a=e.items.length>0?e.items.find((function(e){return!0===e.isDefault}))||e.items[0]:null;o?t.slots.default?i.value=o:Array.isArray(r)&&r.length>1?i.value={icon:e.icon,content:"function"==typeof e.content?e.content():e.content}:i.value={icon:o.icon,content:"function"==typeof o.content?o.content():o.content}:e.icon||e.content?(!Array.isArray(r)||r.length<1)&&(i.value={icon:e.icon,content:"function"==typeof e.content?e.content():e.content}):a&&(i.value={icon:a.icon,content:"function"==typeof a.content?a.content():a.content}),n.value=r||(e.icon||e.content?"":(null==a?void 0:a.key)||"")};return r(e.values),d((function(){return e.values}),r),{buttonContent:i,valuesVar:n}},data:function(){return{visible:!1}},methods:{triggerClick:function(e){e.preventDefault(),e.stopPropagation(),this.disabled||(this.visible?this.hide():this.show())},show:function(){document.addEventListener("click",this.hide),this.visible=!0},hide:function(){document.removeEventListener("click",this.hide),this.visible=!1},triggerSelect:function(e,t){this.hide(),this.onSelect&&this.onSelect(e,t)}}}),XC={key:1,class:"toolbar-dropdown-button-text"},JC={key:0,className:"data-icon data-icon-arrow"};GC("\n.toolbar-dropdown {\n    position: relative;\n    display: inline-block;\n    z-index: 10;\n}\n.toolbar-dropdown .toolbar-dropdown-trigger {\n    display: inline-block;\n}\n.toolbar-dropdown .toolbar-dropdown-trigger .toolbar-dropdown-button-text {\n    font-size: 12px;\n    vertical-align: top;\n}\n.toolbar-dropdown .toolbar-dropdown-trigger-arrow .toolbar-button{\n    padding-right: 20px;\n}\n.toolbar-dropdown .toolbar-dropdown-trigger-arrow .data-icon-arrow {\n    position: absolute;\n    right: 6px;\n    top: 14px;\n    width: 8px;\n    height: 8px;\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+);\n    background-repeat: no-repeat;\n    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.toolbar-dropdown .toolbar-dropdown-list {\n    position: absolute;\n    top: 32px;\n    left: 0px;\n    font-size: 12px;\n    background: #ffffff;\n    border: 1px solid #e8e8e8;\n    border-radius: 3px 3px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n    padding: 5px 0;\n    height: auto;\n    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n    z-index: 999;\n}\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item {\n    padding: 2px 10px 2px 16px;\n    line-height: 30px;\n    color: #595959;\n    text-align: left;\n    position: relative;\n    display: block;\n    white-space: nowrap;\n}\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item:hover {\n    color: #262626;\n    background-color: #f5f5f5;\n}\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item .data-icon {\n    margin-right: 8px;\n}\n.toolbar-dropdown .toolbar-dropdown-list.toolbar-dropdown-horizontal .toolbar-dropdown-list-item {\n    display: inline-block;\n}\n.toolbar-dropdown .toolbar-dropdown-list.toolbar-dropdown-dot .toolbar-dropdown-list-item {\n    padding-left: 30px;\n    padding-right: 16px;\n    white-space: nowrap;\n}\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item .data-icon-dot\n{\n    position: absolute;\n    top: 50%;\n    left: 8px;\n    margin-top: -7px;\n    width: 14px;\n    height: 14px;\n    display: block;\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjQgKDY3Mzc4KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5VbnRpdGxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPgogICAgICAgIDxnIGlkPSJjaGVjayIgZmlsbD0iIzAwMDAwMCI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDY4NzUsMi41OTc2NTYyNSBMMTEuNTEzMDg1OSwyLjU5NzY1NjI1IEMxMS4zNzkxMDE2LDIuNTk3NjU2MjUgMTEuMjUxOTUzMSwyLjY1OTE3OTY5IDExLjE2OTkyMTksMi43NjQ0NTMxMiBMNS41MzMwMDc4MSw5LjkwNTI3MzQ0IEwyLjgzMDA3ODEyLDYuNDgwNDY4NzUgQzIuNzQ2Njc5NjksNi4zNzUxOTUzMSAyLjYyMDg5ODQ0LDYuMzEzNjcxODcgMi40ODY5MTQwNiw2LjMxMzY3MTg3IEwxLjUzMTI1LDYuMzEzNjcxODcgQzEuNDM5NjQ4NDQsNi4zMTM2NzE4NyAxLjM4OTA2MjUsNi40MTg5NDUzMSAxLjQ0NTExNzE5LDYuNDkwMDM5MDYgTDUuMTg5ODQzNzUsMTEuMjM0MTc5NyBDNS4zNjQ4NDM3NSwxMS40NTU2NjQxIDUuNzAxMTcxODcsMTEuNDU1NjY0MSA1Ljg3NzUzOTA2LDExLjIzNDE3OTcgTDEyLjU1NDg4MjgsMi43NzI2NTYyNSBDMTIuNjEwOTM3NSwyLjcwMjkyOTY5IDEyLjU2MDM1MTYsMi41OTc2NTYyNSAxMi40Njg3NSwyLjU5NzY1NjI1IFoiIGlkPSJQYXRoIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);\n    background-repeat: no-repeat;\n}\n"),KC.render=function(e,t,n,i,r,o){var a=T("am-button"),s=T("am-dropdown-list");return A(),I("div",{class:["toolbar-dropdown",e.className],onClick:t[1]||(t[1]=function(){return e.triggerClick&&e.triggerClick.apply(e,arguments)})},[l("div",{class:["toolbar-dropdown-trigger",{"toolbar-dropdown-trigger-active":e.visible,"toolbar-dropdown-trigger-arrow":!1!==e.hasArrow}]},[l(a,{name:e.name,title:e.title,active:e.visible,disabled:e.disabled},{default:D((function(){return[P(e.$slots,"default",{item:e.content},(function(){return[e.buttonContent&&e.buttonContent.icon?(A(),I("span",{key:0,class:["data-icon","data-icon-".concat(e.buttonContent.icon)]},null,2)):R("v-if",!0),e.buttonContent&&!e.buttonContent.icon&&e.buttonContent.content?(A(),I("span",XC,_(e.buttonContent.content),1)):R("v-if",!0)]})),!1!==e.hasArrow?(A(),I("span",JC)):R("v-if",!0)]})),_:1},8,["name","title","active","disabled"])],2),e.visible?(A(),I(s,{key:0,hasDot:e.hasDot,engine:e.engine,direction:e.direction,name:e.name,items:e.items,values:e.valuesVar,"on-select":e.triggerSelect},null,8,["hasDot","engine","direction","name","items","values","on-select"])):R("v-if",!0)],2)},KC.__file="src/components/dropdown.vue";var eM=function e(){jm(this,e)};eM.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]],eM._map=function(){for(var e={},t=eM.colors,n=0,i=t.length;n<i;n++)for(var r=0,o=t[n].length;r<o;r++){e[t[n][r]]={y:n,x:r}}return e}(),eM.getStroke=function(e){var t=eM._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e},eM.getColors=function(){return this.colors};var tM=o({name:"am-color-plicker-item",props:RC,setup:function(e){var t="transparent"===e.color;return{title:e.engine.language.get("toolbar","colorPicker",e.color.toUpperCase()),special:t,triggerSelect:function(t){t.preventDefault(),t.stopPropagation(),e.onSelect&&e.onSelect(e.color,t)}}},data:function(){var e=this.toState(this.color||"#FFFFFF");return{state:e,needBorder:["#ffffff","#fafafa","transparent"].indexOf(e.hex)>=0,styles:this.getStyles(e)}},computed:{refreshStyles:function(){return this.getStyles()}},methods:{getContrastingColor:function(e){return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=210?"#8C8C8C":"#FFFFFF"},toState:function(e,t){var n=e.hex?Hm(e.hex):Hm(e),i=n.toHsl(),r=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===i.s&&(i.h=t||0,r.h=t||0),{hsl:i,hex:"000000"===a&&0===o.a?"transparent":"#".concat(a),rgb:o,hsv:r,oldHue:e.h||t||i.h,source:e.source}},getStyles:function(e){return{check:{fill:this.getContrastingColor(e||this.state),display:this.active?"block":"none"},block:{backgroundColor:this.color,border:this.setStroke?"1px solid ".concat(eM.getStroke(this.color)):void 0}}}}}),nM=l("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},null,-1);tM.render=function(e,t,n,i,r,o){return A(),I("span",{class:["colorpicker-group-item",{"colorpicker-group-item-border":e.needBorder,"colorpicker-group-item-active":e.active,"colorpicker-group-item-special":e.special}],onClick:t[1]||(t[1]=function(){return e.triggerSelect&&e.triggerSelect.apply(e,arguments)}),title:e.title},[l("span",{style:e.refreshStyles.block},[(A(),I("svg",{style:e.refreshStyles.check,viewBox:"0 0 18 18"},[nM],4))],4)],10,["title"])},tM.__file="src/components/color/picker/item.vue";var iM=o({name:"am-color-plicker-group",components:{AmColorPickerItem:tM},props:PC}),rM={class:"colorpicker-group"};iM.render=function(e,n,i,r,o,a){var s=T("am-color-picker-item");return A(),I("span",rM,[(A(!0),I(t,null,j(e.colors,(function(t){return A(),I(s,{engine:e.engine,color:t.value,active:t.active,key:t.value,"on-select":e.onSelect,"set-stroke":e.setStroke},null,8,["engine","color","active","on-select","set-stroke"])})),128))])},iM.__file="src/components/color/picker/group.vue";var oM=o({name:"am-color-picker",components:{AmColorPickerItem:tM,AmColorPickerGroup:iM},props:zC,setup:function(e,t){var n=function(e,t){return e.map((function(e){return e.map((function(e){var n="string"==typeof e?e:e.value;return{value:n,active:t===n}}))}))},i=g(n(e.colors||eM.getColors(),e.defaultActiveColor)),r=e.engine.language.get("toolbar","colorPicker","transparent"===e.defaultColor?"nonFillText":"defaultText");return{colors:i,triggerSelect:function(t,r){i.value=n(i.value,t),e.onSelect&&e.onSelect(t,r)},text:r}},methods:{triggerMouseDown:function(e){"INPUT"!==e.target.tagName&&e.preventDefault()}}}),aM={class:"colorpicker-default-text"};GC('\n.colorpicker-default {\n    display: flex;\n    align-items: center;\n    padding: 4px 8px;\n    margin: 4px 0 8px;\n    border-radius: 2px;\n    cursor: pointer;\n}\n.colorpicker-default:hover {\n    background-color: #f5f5f5;\n}\n.colorpicker-default-text {\n    margin-left: 8px;\n}\n.colorpicker-group {\n    display: flex;\n    width: 100%;\n    height: auto;\n    position: relative;\n    padding: 0 8px;\n}\n.colorpicker-group:nth-child(2){\n    margin-bottom: 6px;\n}\n.colorpicker-group:last-child {\n    margin-bottom: 0px;\n}\n.colorpicker-group-item {\n    width: 24px;\n    height: 24px;\n    padding: 2px 2px;\n    display: inline-block;\n    border-radius: 3px 3px;\n    border: 1px solid transparent;\n    flex: 0 0 auto;\n    cursor: pointer;\n    background-color: #fff;\n}\n.colorpicker-group-item > span {\n    position: relative;\n    width: 18px;\n    height: 18px;\n    display: block;\n    border-radius: 2px 2px;\n    border: 1px solid transparent;\n}\n.colorpicker-group-item > span svg {\n    position: absolute;\n    top: -1px;\n    left: 1px;\n    width: 12px;\n    height: 12px;\n}\n.colorpicker-group-item-border > span {\n    border: 1px solid #e8e8e8;\n}\n.colorpicker-group-item-special {\n    position: relative;\n}\n.colorpicker-group-item-special:after {\n    content: "";\n    display: block;\n    position: absolute;\n    top: 10px;\n    left: 0px;\n    width: 22px;\n    height: 0;\n    border-bottom: 2px solid #ff5151;\n    transform: rotate(45deg);\n}\n.colorpicker-group-item:hover {\n    border: 1px solid #d9d9d9;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);\n}\n'),oM.render=function(e,n,i,r,o,a){var s=T("am-color-picker-item"),c=T("am-color-picker-group");return A(),I("div",{class:"colorpicker-board",onMousedown:n[2]||(n[2]=function(){return e.triggerMouseDown&&e.triggerMouseDown.apply(e,arguments)})},[l("div",{class:"colorpicker-default",onClick:n[1]||(n[1]=function(t){return e.triggerSelect(e.defaultColor,t)})},[l(s,{engine:e.engine,color:e.defaultColor,"active-colors":[],"on-select":e.triggerSelect},null,8,["engine","color","on-select"]),l("span",aM,_(e.text),1)]),(A(!0),I(t,null,j(e.colors,(function(t,n){return A(),I(c,{engine:e.engine,colors:t,key:n,"on-select":e.triggerSelect,"set-stroke":e.setStroke},null,8,["engine","colors","on-select","set-stroke"])})),128))],32)},oM.__file="src/components/color/picker/picker.vue";var sM=o({name:"am-color",components:{AmButton:WC,AmColorPicker:oM},props:BC,setup:function(e){var t=g(!1),n=g("string"==typeof e.content?e.content:e.content(e.defaultActiveColor,eM.getStroke(e.defaultActiveColor),e.disabled)),i=g(e.defaultActiveColor),r=function(){document.addEventListener("click",o),t.value=!0},o=function e(n){n&&n.target.closest('[data-element="ui"]')||(document.removeEventListener("click",e),t.value=!1)},a=function(t,r){if(i.value=t,n.value="string"==typeof e.content?e.content:e.content(t,eM.getStroke(t),e.disabled),!1!==e.autoExecute){var o,a,s=e.name,l=[t,e.defaultColor];e.command&&(Array.isArray(e.command)?l=e.command:(s=e.command.name,l=e.command.args)),null===(o=e.engine)||void 0===o||(a=o.command).execute.apply(a,[s].concat(Wm(l)))}e.onSelect&&e.onSelect(t,r)};return L((function(){return document.removeEventListener("click",o)})),{visible:t,buttonContent:n,currentColor:i,triggerSelect:a,triggerClick:function(e){a(i.value,e)},toggleDropdown:function(e){e.preventDefault(),e.stopPropagation(),t.value?o():r()}}}}),lM={class:"toolbar-dropdown colorpicker-button"},cM=l("span",{className:"colorpicker-button-dropdown-empty"},null,-1),uM=l("span",{className:"data-icon data-icon-arrow"},null,-1),dM={key:0,class:"toolbar-dropdown-list","data-element":"ui"};GC("\n.editor-toolbar .colorpicker-button .colorpicker-button-group {\n    padding: 0 2px;\n}\n.colorpicker-button-group .toolbar-button {\n    padding: 0;\n}\n.colorpicker-button-group .colorpicker-button-text {\n    margin-right: 0;\n    min-width: 26px;\n    border-radius: 3px 0 0 3px;\n}\n.colorpicker-button-group .colorpicker-button-text:active {\n    background-color: #e8e8e8;\n}\n.colorpicker-button-group .colorpicker-button-dropdown {\n    margin-left: -1px;\n    min-width: 17px;\n    text-align: center;\n    padding: 0 0;\n    border-radius: 0 3px 3px 0;\n}\n.colorpicker-button-group .colorpicker-button-dropdown:hover,\n.colorpicker-button-group .colorpicker-button-dropdown:active {\n    background-color: #e8e8e8;\n}\n.colorpicker-button-group .colorpicker-button-dropdown .colorpicker-button-dropdown-empty {\n    display: inline-block;\n}\n.colorpicker-button-group:hover .toolbar-button {\n    border: 1px solid #e8e8e8;\n}\n.colorpicker-button-group-active .toolbar-button,\n.colorpicker-button-group-active:hover .toolbar-button {\n    border: 1px solid #e8e8e8;\n}\n"),sM.render=function(e,t,n,i,r,o){var a=T("am-button"),s=T("am-color-picker");return A(),I("div",lM,[l("div",{class:["toolbar-dropdown-trigger colorpicker-button-group",{"colorpicker-button-group-active":e.visible}]},[l(a,{class:"colorpicker-button-text",name:e.name,title:e.buttonTitle,"on-click":e.triggerClick},{default:D((function(){return[l("span",{innerHTML:e.buttonContent},null,8,["innerHTML"])]})),_:1},8,["name","title","on-click"]),l(a,{class:"colorpicker-button-dropdown toolbar-dropdown-trigger-arrow",name:e.name,title:e.dropdownTitle,"on-click":e.toggleDropdown},{icon:D((function(){return[cM]})),default:D((function(){return[uM]})),_:1},8,["name","title","on-click"])],2),e.visible?(A(),I("div",dM,[l(s,{engine:e.engine,colors:e.colors,"default-active-color":e.currentColor,"default-color":e.defaultColor,"on-select":e.triggerSelect,"set-stroke":e.setStroke},null,8,["engine","colors","default-active-color","default-color","on-select","set-stroke"])])):R("v-if",!0)])},sM.__file="src/components/color/color.vue";var hM=o({name:"am-collapse-item",components:{APopover:lm},props:FC,setup:function(e){var t,n=g(!1);return{iconIsHtml:/^<.*>/.test((null===(t=e.icon)||void 0===t?void 0:t.trim())||""),active:n,onClick:function(t){var n=t.target.nodeName;if("INPUT"!==n&&"TEXTAREA"!==n&&t.preventDefault(),(!e.onClick||!1!==e.onClick(t,e.name))&&!1!==e.autoExecute){var i,r,o=e.name,a=[];e.command&&(Array.isArray(e.command)?a=e.command:(o=e.command.name,a=e.command.args)),null===(i=e.engine)||void 0===i||(r=i.command).execute.apply(r,[o].concat(Wm(a)))}},triggerMouseEnter:function(){n.value=!0},triggerMouseLeave:function(){n.value=!1}}}}),fM={key:0,class:"toolbar-collapse-item-text"},pM={class:"toolbar-collapse-item-title"},gM={key:0,class:"toolbar-collapse-item-description"};hM.render=function(e,t,n,i,r,o){var a=T("a-popover");return A(),I(a,{placement:e.placement||"right",content:"function"==typeof e.prompt?e.prompt():e.prompt,overlayStyle:e.prompt?{}:{display:"none"}},{default:D((function(){return[l("div",{class:["toolbar-collapse-item",{"toolbar-collapse-item-active":e.active},e.className],onMouseenter:t[1]||(t[1]=function(){return e.triggerMouseEnter&&e.triggerMouseEnter.apply(e,arguments)}),onMouseleave:t[2]||(t[2]=function(){return e.triggerMouseLeave&&e.triggerMouseLeave.apply(e,arguments)}),onClick:t[3]||(t[3]=function(){return e.onClick&&e.onClick.apply(e,arguments)}),onMousedown:t[4]||(t[4]=function(){return e.onMouseDown&&e.onMouseDown.apply(e,arguments)})},[P(e.$slots,"icon",{},(function(){return[e.iconIsHtml?(A(),I("span",{key:0,innerHTML:e.icon},null,8,["innerHTML"])):R("v-if",!0),!e.iconIsHtml&&e.icon?(A(),I("span",{key:1,class:"data-icon data-icon-".concat(e.icon)},null,2)):R("v-if",!0)]})),e.title?(A(),I("div",fM,[l("div",pM,_(e.title),1),e.description?(A(),I("div",gM,_(e.description),1)):R("v-if",!0)])):R("v-if",!0)],34)]})),_:3},8,["placement","content","overlayStyle"])},hM.__file="src/components/collapse/item.vue";var vM=o({name:"am-collapse-group",components:{AmCollapseItem:hM},props:HC,setup:function(e){return{onClick:function(t,n){var i,r=e.items.find((function(e){return e.name===n}));return(null==r?void 0:r.onClick)&&(i=r.onClick(t,n)),e.onSelect&&e.onSelect(t,n),i}}}}),mM={className:"toolbar-collapse-group"},bM={key:0,class:"toolbar-collapse-group-title"};vM.render=function(e,n,i,r,o,a){var s=T("am-collapse-item");return A(),I("div",mM,[e.title?(A(),I("div",bM,_(e.title),1)):R("v-if",!0),(A(!0),I(t,null,j(e.items,(function(t){return A(),I(s,E({key:t.name,engine:e.engine},t,{onClick:e.onClick}),null,16,["engine","onClick"])})),128))])},vM.__file="src/components/collapse/group.vue";var yM=o({name:"am-collapse",components:{AmButton:WC,AmCollapseGroup:vM},props:UC,setup:function(e){var t=!(e.icon||e.content),n=g(t),i=g(null);L((function(){t&&document.removeEventListener("click",r)}));var r=function e(t){if(t)for(var r=t.target;r;){if(r===i.value)return;r=r.parentNode}document.removeEventListener("click",e),n.value=!1};return{isCustomize:t,visible:n,collapse:i,triggerClick:function(){n.value?r():(document.addEventListener("click",r),n.value=!0)},triggerSelect:function(t,n){r(),e.onSelect&&e.onSelect(t,n)}}}}),wM={key:1,class:"toolbar-dropdown-list","data-element":"ui"},kM={class:"toolbar-collapse-content"};GC("\n.toolbar-collapse-header {\n    color: #8c8c8c;\n    margin: 4px 16px 0;\n    font-size: 12px;\n    line-height: 20px;\n    text-align: left;\n    padding-bottom: 8px;\n    margin-bottom: 6px;\n    border-bottom: 1px solid #e8e8e8;\n}\n.toolbar-collapse-header code{\n    background-color: #f5f5f5;\n    border-radius: 4px;\n    padding: 2px;\n    border: 1px solid #d9d9d9;\n}\n.toolbar-collapse-content {\n    min-width: 200px\n}\n.toolbar-collapse-group-title {\n    padding: 2px 16px;\n    text-align: left;\n    color: #8c8c8c;\n    font-weight: 700;\n    font-size: 12px;\n    line-height: 24px;\n}\n.toolbar-collapse-item {\n    display: flex;\n    cursor: pointer;\n    padding: 4px 16px 0;\n}\n.toolbar-collapse-item-active {\n    background-color: #f4f4f4;\n}\n.toolbar-collapse-item .toolbar-collapse-item-text\n{\n    display: block;\n    text-align: left;\n    margin-left: 8px;\n}\n.toolbar-collapse-item .toolbar-collapse-item-title{\n    display: block;\n    color: #595959;\n    line-height: 24px;\n    font-size: 14px;\n    font-weight: normal;\n}\n.toolbar-collapse-item .toolbar-collapse-item-description\n{\n    display: block;\n    font-size: 12px;\n    color: rgba(0,0,0,.45);\n}\n"),yM.render=function(e,n,i,r,o,a){var s=T("am-button"),c=T("am-collapse-group");return A(),I("div",{class:["toolbar-dropdown toolbar-collapse",e.className],ref:"collapse"},[e.isCustomize?R("v-if",!0):(A(),I(s,{key:0,name:"collapse",icon:e.icon,content:e.content,"on-click":e.triggerClick,active:e.visible},null,8,["icon","content","on-click","active"])),e.visible?(A(),I("div",wM,[P(e.$slots,"header",{},(function(){return[e.header?(A(),I("div",{key:0,class:"toolbar-collapse-header",innerHTML:e.header},null,8,["innerHTML"])):R("v-if",!0)]})),l("div",kM,[(A(!0),I(t,null,j(e.groups,(function(t,n){return A(),I(c,E({key:n,engine:e.engine},t,{"on-select":e.triggerSelect}),null,16,["engine","on-select"])})),128))])])):R("v-if",!0)],2)},yM.__file="src/components/collapse/collapse.vue";var xM=o({name:"am-group",components:{AmButton:WC,AmDropdown:KC,AmColor:sM,AmCollapse:yM},props:YC}),CM={class:"editor-toolbar-group"};GC("\n.editor-toolbar-group {\n    padding: 4px 8px;\n    width: auto;\n    display: inline-block;\n    border-left: 1px solid #e8e8e8;\n}\n.editor-toolbar .editor-toolbar-group:nth-child(1) {\n    border-left: none;\n}\n"),xM.render=function(e,n,i,r,o,a){var s=T("am-button"),l=T("am-dropdown"),c=T("am-color"),u=T("am-collapse");return A(),I("div",CM,[(A(!0),I(t,null,j(e.items,(function(n,i){return A(),I(t,{key:i},["button"===n.type?(A(),I(s,E(Im({key:0},"key",i),n,{engine:e.engine}),null,16,["engine"])):R("v-if",!0),"dropdown"===n.type?(A(),I(l,E(Im({key:1},"key",i),n,{engine:e.engine}),null,16,["engine"])):R("v-if",!0),"color"===n.type?(A(),I(c,E(Im({key:2},"key",i),n,{engine:e.engine}),null,16,["engine"])):R("v-if",!0),"collapse"===n.type?(A(),I(u,E(Im({key:3},"key",i),n,{engine:e.engine}),null,16,["engine"])):R("v-if",!0)],64)})),128))])},xM.__file="src/components/group.vue";var MM={en:{toolbar:{collapse:{title:"Type <code>".concat(my?"⌘":"Ctrl","</code> + <code>/</code> to quickly insert a card")},undo:{title:"Undo"},redo:{title:"Redo"},paintformat:{title:"Format brush"},removeformat:{title:"Clear format"},heading:{title:"Text and title",p:"Text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},fontsize:{title:"Font size"},fontcolor:{title:"Font color",more:"More colors"},backcolor:{title:"Background color",more:"More colors"},bold:{title:"Bold"},italic:{title:"Italic"},strikethrough:{title:"Strikethrough"},underline:{title:"Underline"},moremark:{title:"More text styles",sup:"Sup",sub:"Sub",code:"Inline code"},alignment:{title:"Alignment",left:"Align left",center:"Align center",right:"Align right",justify:"Align justify"},unorderedlist:{title:"Unordered list"},orderedlist:{title:"Ordered list"},tasklist:{title:"Task list"},indent:{title:"Ident",in:"Increase indent",out:"Reduce indent"},link:{title:"Insert Link"},quote:{title:"Insert reference"},hr:{title:"Insert dividing line"},colorPicker:{defaultText:"Default Color",nonFillText:"No fill color","#000000":"Black","#262626":"Dark Gray 3","#595959":"Dark Gray 2","#8C8C8C":"Dark Gray 1","#BFBFBF":"Gray","#D9D9D9":"Light Gray 4","#E9E9E9":"Light Gray 3","#F5F5F5":"Light Gray 2","#FAFAFA":"Light Gray 1","#FFFFFF":"White","#F5222D":"Red","#FA541C":"Chinese Red","#FA8C16":"Orange","#FADB14":"Yellow","#52C41A":"Green","#13C2C2":"Cyan","#1890FF":"Light Blue","#2F54EB":"Blue","#722ED1":"Purple","#EB2F96":"Magenta","#FFE8E6":"Red 1","#FFECE0":"Chinese Red 1","#FFEFD1":"Orange 1","#FCFCCA":"Yellow 1","#E4F7D2":"Green 1","#D3F5F0":"Cyan 1","#D4EEFC":"Light Blue 1","#DEE8FC":"Blue 1","#EFE1FA":"Purple 1","#FAE1EB":"Magenta 1","#FFA39E":"Red 2","#FFBB96":"Chinese Red 2","#FFD591":"Orange 2","#FFFB8F":"Yellow 2","#B7EB8F":"Green 2","#87E8DE":"Cyan 2","#91D5FF":"Light Blue 2","#ADC6FF":"Blue 2","#D3ADF7":"Purple 2","#FFADD2":"Magenta 2","#FF4D4F":"Red 3","#FF7A45":"Chinese Red 3","#FFA940":"Orange 3","#FFEC3D":"Yellow 3","#73D13D":"Green 3","#36CFC9":"Cyan 3","#40A9FF":"Light Blue 3","#597EF7":"Blue 3","#9254DE":"Purple 3","#F759AB":"Magenta 3","#CF1322":"Red 4","#D4380D":"Chinese Red 4","#D46B08":"Orange 4","#D4B106":"Yellow 4","#389E0D":"Green 4","#08979C":"Cyan 4","#096DD9":"Light Blue 4","#1D39C4":"Blue 4","#531DAB":"Purple 4","#C41D7F":"Magenta 4","#820014":"Red 5","#871400":"Chinese Red 5","#873800":"Orange 5","#614700":"Yellow 5","#135200":"Green 5","#00474F":"Cyan 5","#003A8C":"Light Blue 5","#061178":"Blue 5","#22075E":"Purple 5","#780650":"Magenta 5"},component:{placeholder:"Card name"},image:{title:"Image"},codeblock:{title:"Codeblock"},table:{title:"Table"},file:{title:"File"},commonlyUsed:{title:"Commonly used"}}},"zh-cn":{toolbar:{collapse:{title:"输入  <code>".concat(my?"⌘":"Ctrl","</code> + <code>/</code>  快速插入卡片")},undo:{title:"撤销"},redo:{title:"重做"},paintformat:{title:"格式刷"},removeformat:{title:"清除格式"},heading:{title:"正文与标题",p:"正文",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontsize:{title:"字号"},fontcolor:{title:"字体颜色",more:"更多颜色"},backcolor:{title:"背景颜色",more:"更多颜色"},bold:{title:"粗体"},italic:{title:"斜体"},strikethrough:{title:"删除线"},underline:{title:"下划线"},moremark:{title:"更多文本样式",sup:"上标",sub:"下标",code:"行内代码"},alignment:{title:"对齐方式",left:"左对齐",center:"居中对齐",right:"右对齐",justify:"两端对齐"},unorderedlist:{title:"无序列表"},orderedlist:{title:"有序列表"},tasklist:{title:"任务列表"},indent:{title:"缩进",in:"增加缩进",out:"减少缩进"},link:{title:"链接"},quote:{title:"插入引用"},hr:{title:"插入分割线"},colorPicker:{defaultText:"默认",nonFillText:"无填充色","#000000":"黑色","#262626":"深灰 3","#595959":"深灰 2","#8C8C8C":"深灰 1","#BFBFBF":"灰色","#D9D9D9":"浅灰 4","#E9E9E9":"浅灰 3","#F5F5F5":"浅灰 2","#FAFAFA":"浅灰 1","#FFFFFF":"白色","#F5222D":"红色","#FA541C":"朱红","#FA8C16":"橙色","#FADB14":"黄色","#52C41A":"绿色","#13C2C2":"青色","#1890FF":"浅蓝","#2F54EB":"蓝色","#722ED1":"紫色","#EB2F96":"玫红","#FFE8E6":"红色 1","#FFECE0":"朱红 1","#FFEFD1":"橙色 1","#FCFCCA":"黄色 1","#E4F7D2":"绿色 1","#D3F5F0":"青色 1","#D4EEFC":"浅蓝 1","#DEE8FC":"蓝色 1","#EFE1FA":"紫色 1","#FAE1EB":"玫红 1","#FFA39E":"红色 2","#FFBB96":"朱红 2","#FFD591":"橙色 2","#FFFB8F":"黄色 2","#B7EB8F":"绿色 2","#87E8DE":"青色 2","#91D5FF":"浅蓝 2","#ADC6FF":"蓝色 2","#D3ADF7":"紫色 2","#FFADD2":"玫红 2","#FF4D4F":"红色 3","#FF7A45":"朱红 3","#FFA940":"橙色 3","#FFEC3D":"黄色 3","#73D13D":"绿色 3","#36CFC9":"青色 3","#40A9FF":"浅蓝 3","#597EF7":"蓝色 3","#9254DE":"紫色 3","#F759AB":"玫红 3","#CF1322":"红色 4","#D4380D":"朱红 4","#D46B08":"橙色 4","#D4B106":"黄色 4","#389E0D":"绿色 4","#08979C":"青色 4","#096DD9":"浅蓝 4","#1D39C4":"蓝色 4","#531DAB":"紫色 4","#C41D7F":"玫红 4","#820014":"红色 5","#871400":"朱红 5","#873800":"橙色 5","#614700":"黄色 5","#135200":"绿色 5","#00474F":"青色 5","#003A8C":"浅蓝 5","#061178":"蓝色 5","#22075E":"紫色 5","#780650":"玫红 5"},component:{placeholder:"卡片名称"},image:{title:"图标"},codeblock:{title:"代码块"},table:{title:"表格"},file:{title:"附件"},commonlyUsed:{title:"常用"}}}},SM=o({name:"am-table",props:{maxRows:Number,maxCols:Number,minRows:Number,minCols:Number,onSelect:Function},setup:function(e){return{maxRows:g(e.maxRows||10),maxCols:g(e.maxCols||10),minRows:g(e.minRows||4),minCols:g(e.minCols||4),currentRows:g(4),currentCols:g(4),selectedRows:g(0),selectedCols:g(0)}},methods:{triggerSelect:function(e,t,n){this.onSelect&&this.onSelect(e,t+1,n+1)},triggerHover:function(e,t){var n=Math.max(this.minRows,Math.min(this.maxRows,e+2)),i=Math.max(this.minCols,Math.min(this.maxCols,t+2));this.currentRows=n,this.currentCols=i,this.selectedRows=e+1,this.selectedCols=t+1}}}),EM={"data-element":"ui",class:"data-toolbar-table-selector"},OM={class:"data-toolbar-table-selector-info"};GC("\n.data-toolbar-table-selector .data-toolbar-table-selector-tr {\n    display: flex;\n    flex-wrap: nowrap;\n}\n.data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td {\n    width: 20px;\n    height: 16px;\n    border: 1px solid #d9d9d9;\n    margin-right: -1px;\n    margin-bottom: -1px;\n    cursor: pointer;\n}\n.data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td.actived {\n    background: #ddefff;\n}\n.data-toolbar-table-selector .data-toolbar-table-selector-info {\n    text-align: center;\n}\n"),SM.render=function(e,n,i,r,o,a){return A(),I("div",EM,[(A(!0),I(t,null,j(e.currentRows,(function(n){return A(),I("div",{class:"data-toolbar-table-selector-tr",key:n},[(A(!0),I(t,null,j(e.currentCols,(function(t){return A(),I("div",{class:[{"data-toolbar-table-selector-td":!0},{actived:n-1<e.selectedRows&&t-1<e.selectedCols}],key:{col:t},onClick:function(i){return e.triggerSelect(i,n-1,t-1)},onMouseover:function(i){return e.triggerHover(n-1,t-1)}},null,42,["onClick","onMouseover"])})),128))])})),128)),l("div",OM,_(void 0===e.selectedRows?0:e.selectedRows)+"x"+_(void 0===e.selectedCols?0:e.selectedCols),1)])},SM.__file="src/components/table.vue";GC(".editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .toolbar-button {\n    font-weight: bold;\n    min-width: 73px;\n}\n\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h1,\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h2,\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h3,\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h4,\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h5,\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h6 {\n    line-height: 1.6;\n    font-weight: bold;\n    color: #262626;\n}\n\n.heading-item-h1 {\n    font-size: 28px;\n}\n\n.heading-item-h2 {\n    font-size: 24px;\n}\n\n.heading-item-h3 {\n    font-size: 20px;\n}\n\n.heading-item-h4 {\n    font-size: 16px;\n}\n\n.heading-item-h5 {\n    font-size: 14px;\n}\n\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h6 {\n    font-size: 14px;\n    font-weight: normal;\n}\n\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-fontsize .toolbar-button {\n    font-weight: bold;\n    min-width: 58px;\n}");var NM=function(e){var t=e.language.get("toolbar");return[{type:"collapse",header:t.collapse.title,icon:"collapse",groups:[{items:[{name:"image-uploader",icon:'<span>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\t\t\twidth="24"\n\t\t\t\t\t\t\t\t\t\theight="24"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<g fill="none" fill-rule="evenodd">\n\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\tstroke="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=".667"\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#FFF"\n\t\t\t\t\t\t\t\t\t\t\t\tx=".333"\n\t\t\t\t\t\t\t\t\t\t\t\ty=".333"\n\t\t\t\t\t\t\t\t\t\t\t\twidth="23.333"\n\t\t\t\t\t\t\t\t\t\t\t\theight="23.333"\n\t\t\t\t\t\t\t\t\t\t\t\trx="1.333"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<g fill-rule="nonzero">\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\td="M8.625 8a1.126 1.126 0 010 2.25 1.126 1.126 0 010-2.25z"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#FFD666"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\td="M17.95 14.88a.144.144 0 01-.092.033H6.14a.139.139 0 01-.14-.137.14.14 0 01.033-.089l2.981-3.45a.143.143 0 01.198-.018c.005.005.012.01.017.017l1.74 2.016 2.767-3.203a.143.143 0 01.198-.017l.018.017 4.018 4.64a.137.137 0 01-.02.191z"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#CCC"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\td="M17.91 14.88a.144.144 0 01-.092.033H9.333l4.363-4.864a.143.143 0 01.198-.017l.018.017 4.018 4.64a.137.137 0 01-.02.191z"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#737373"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>',title:t.image.title,search:"图片,tupian,image,img"},{name:"codeblock",icon:'<span>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\t\t\twidth="24"\n\t\t\t\t\t\t\t\t\t\theight="24"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<g fill="none" fill-rule="evenodd">\n\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\tstroke="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#FFF"\n\t\t\t\t\t\t\t\t\t\t\t\tx=".5"\n\t\t\t\t\t\t\t\t\t\t\t\ty=".5"\n\t\t\t\t\t\t\t\t\t\t\t\twidth="23"\n\t\t\t\t\t\t\t\t\t\t\t\theight="23"\n\t\t\t\t\t\t\t\t\t\t\t\trx="2"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td="M19.331 11.815c-.407-.22-.665-.678-.665-1.181V8.062c0-.202-.148-.367-.33-.367h-.933a.153.153 0 01-.153-.153v-.64c0-.084.068-.152.153-.152h.933c.651 0 1.18.588 1.18 1.312v2.572c0 .14.072.269.186.33l.843.455c.05.026.08.078.08.134v.894c0 .056-.03.108-.08.134l-.843.455a.373.373 0 00-.186.33v2.572c0 .724-.529 1.312-1.18 1.312h-.933a.153.153 0 01-.153-.153v-.64c0-.084.068-.152.153-.152h.933c.182 0 .33-.165.33-.367v-2.572c0-.503.258-.961.665-1.18l.344-.186-.344-.185zM5.044 11.815c.407-.22.665-.678.665-1.181V8.062c0-.202.148-.367.33-.367h.933a.153.153 0 00.153-.153v-.64a.153.153 0 00-.153-.152H6.04c-.651 0-1.18.588-1.18 1.312v2.572c0 .14-.072.269-.186.33l-.843.455a.153.153 0 00-.08.134v.894c0 .056.03.108.08.134l.843.455c.114.061.186.19.186.33v2.572c0 .724.529 1.312 1.18 1.312h.933a.153.153 0 00.153-.153v-.64a.153.153 0 00-.153-.152H6.04c-.182 0-.33-.165-.33-.367v-2.572c0-.503-.258-.961-.665-1.18L4.7 12l.344-.185z"\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#595959"\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule="nonzero"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#1890FF"\n\t\t\t\t\t\t\t\t\t\t\t\topacity=".25"\n\t\t\t\t\t\t\t\t\t\t\t\td="M8.25 8.25h7.5v1.125h-7.5z"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#D2E8DB"\n\t\t\t\t\t\t\t\t\t\t\t\td="M8.25 10.5h4.5v1.125h-4.5z"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#E0E0E0"\n\t\t\t\t\t\t\t\t\t\t\t\td="M8.25 12.75h4.5v1.125h-4.5zM8.25 15h6v1.125h-6z"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>',title:t.codeblock.title,search:"代码块,daimakuai,code"},{name:"table",command:{name:"table",args:[3,3]},placement:"rightTop",prompt:S(SM,{onSelect:function(t,n,i){e.command.execute("table",n,i)}}),icon:'<span><svg\n\t\t\t\t\t\t\t\t\twidth="24px"\n\t\t\t\t\t\t\t\t\theight="24px"\n\t\t\t\t\t\t\t\t\tview-box="0 0 24 24"\n\t\t\t\t\t\t\t\t\tversion="1.1"\n\t\t\t\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tstroke="none"\n\t\t\t\t\t\t\t\t\t\tstroke-width="1"\n\t\t\t\t\t\t\t\t\t\tfill="none"\n\t\t\t\t\t\t\t\t\t\tfill-rule="evenodd"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<g transform="translate(-16.000000, -93.000000)">\n\t\t\t\t\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t\t\t\t\t<g transform="translate(16.000000, 53.000000)">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<g transform="translate(0.000000, 40.000000)">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width="0.666666667"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#FFFFFF"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx="0.333333333"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty="0.333333333"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="23.3333333"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight="23.3333333"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trx="1.33333333"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<g transform="translate(5.250000, 6.750000)">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td="M0.75,0 L3.75,0 L3.75,10.5 L0.75,10.5 C0.335786438,10.5 5.07265313e-17,10.1642136 0,9.75 L0,0.75 C-5.07265313e-17,0.335786438 0.335786438,7.6089797e-17 0.75,0 Z"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#F0F0F0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td="M0.25,2.75 L13.25,2.75 L13.25,0.75 C13.25,0.473857625 13.0261424,0.25 12.75,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,2.75 Z"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke="#595959"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width="0.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-opacity="0.15"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#25B864"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty="5.25"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="13.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight="1"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle-Copy"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty="7.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="13.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight="1"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx="6.75"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="1"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight="10.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle-Copy-5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx="9.75"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="1"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight="10.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke="#737373"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width="0.75"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx="0.375"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty="0.375"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="12.75"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight="9.75"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trx="0.75"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td="M3.5,10.25 L3.5,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,9.75 C0.25,10.0261424 0.473857625,10.25 0.75,10.25 L3.5,10.25 Z"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke="#737373"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width="0.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td="M0.25,2.75 L13.25,2.75 L13.25,0.75 C13.25,0.473857625 13.0261424,0.25 12.75,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,2.75 Z"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="Rectangle"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke="#737373"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width="0.5"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t</svg></span>',title:t.table.title,search:"biaoge,table"},{name:"file-uploader",icon:'<span>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\twidth="24"\n\t\t\t\t\t\t\t\t\t\theight="24"\n\t\t\t\t\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<g fill="none" fill-rule="evenodd">\n\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\tstroke="#E8E8E8"\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#FFF"\n\t\t\t\t\t\t\t\t\t\t\t\tx=".5"\n\t\t\t\t\t\t\t\t\t\t\t\ty=".5"\n\t\t\t\t\t\t\t\t\t\t\t\twidth="23"\n\t\t\t\t\t\t\t\t\t\t\t\theight="23"\n\t\t\t\t\t\t\t\t\t\t\t\trx="2"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#E0E0E0"\n\t\t\t\t\t\t\t\t\t\t\t\td="M11.25 15h8.25v1.125h-8.25zM14.25 11.25h5.25v1.125h-5.25zM14.25 8.25h5.25v1.125h-5.25z"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td="M11.216 8.324a2.593 2.593 0 00-3.791 0l-2.896 3.04a.108.108 0 00-.029.074c0 .028.01.055.029.075l.41.43c.038.041.101.041.14 0l2.896-3.04a1.841 1.841 0 012.69 0c.36.378.557.88.557 1.413 0 .534-.197 1.035-.557 1.413l-2.95 3.1-.48.502c-.446.47-1.173.47-1.62 0a1.226 1.226 0 01-.335-.851c0-.322.119-.624.335-.851l2.928-3.075a.382.382 0 01.276-.12h.001c.105 0 .201.043.274.12.075.078.115.18.115.29a.416.416 0 01-.115.288l-2.393 2.512a.108.108 0 00-.029.075c0 .028.01.054.03.074l.409.43c.038.041.102.041.14 0l2.392-2.513c.221-.232.342-.54.342-.867 0-.328-.122-.637-.342-.868a1.131 1.131 0 00-1.653 0l-.284.3-2.642 2.776a2.06 2.06 0 00-.564 1.43c0 .54.2 1.047.564 1.428.376.394.868.591 1.36.591.494 0 .986-.197 1.361-.591l3.43-3.602c.505-.532.785-1.24.785-1.991a2.867 2.867 0 00-.784-1.992z"\n\t\t\t\t\t\t\t\t\t\t\t\tfill="#595959"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>',title:t.file.title,search:"附件,文件,fujian,wenjian,file"}]}]},{type:"button",name:"undo",icon:"undo",title:t.undo.title,onDisabled:function(){return!e.command.queryState("undo")},onActive:function(){return!1}},{type:"button",name:"redo",icon:"redo",title:t.redo.title,onDisabled:function(){return!e.command.queryState("redo")},onActive:function(){return!1}},{type:"button",name:"paintformat",icon:"paintformat",title:t.paintformat.title},{type:"button",name:"removeformat",icon:"clean",title:t.removeformat.title},{type:"dropdown",name:"heading",className:"toolbar-dropdown-heading",title:t.heading.title,items:[{key:"p",className:"heading-item-p",content:t.heading.p},{key:"h1",className:"heading-item-h1",content:t.heading.h1},{key:"h2",className:"heading-item-h2",content:t.heading.h2},{key:"h3",className:"heading-item-h3",content:t.heading.h3},{key:"h4",className:"heading-item-h4",content:t.heading.h4},{key:"h5",className:"heading-item-h5",content:t.heading.h5},{key:"h6",className:"heading-item-h6",content:t.heading.h6}]},{type:"dropdown",name:"fontsize",className:"toolbar-dropdown-fontsize",title:t.fontsize.title,items:[{key:"12px",content:"12px",hotkey:!1},{key:"13px",content:"13px",hotkey:!1},{key:"14px",content:"14px",isDefault:!0,hotkey:!1},{key:"15px",content:"15px",hotkey:!1},{key:"16px",content:"16px",hotkey:!1},{key:"19px",content:"19px",hotkey:!1},{key:"22px",content:"22px",hotkey:!1},{key:"24px",content:"24px",hotkey:!1},{key:"29px",content:"29px",hotkey:!1},{key:"32px",content:"32px",hotkey:!1},{key:"40px",content:"40px",hotkey:!1},{key:"48px",content:"48px",hotkey:!1}],onDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)}},{type:"button",name:"bold",icon:"bold",title:t.bold.title,onDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)}},{type:"button",name:"italic",icon:"italic",title:t.italic.title},{type:"button",name:"strikethrough",icon:"strikethrough",title:t.strikethrough.title},{type:"button",name:"underline",icon:"underline",title:t.underline.title},{type:"dropdown",name:"moremark",icon:"moremark",single:!1,title:t.moremark.title,items:[{key:"sup",icon:"sup",content:t.moremark.sup,command:{name:"sup",args:[]}},{key:"sub",icon:"sub",content:t.moremark.sub,command:{name:"sub",args:[]}},{key:"code",icon:"code",content:t.moremark.code,command:{name:"code",args:[]}}],onActive:function(){var t=[];return!0===e.command.queryState("sup")&&t.push("sup"),!0===e.command.queryState("sub")&&t.push("sub"),!0===e.command.queryState("code")&&t.push("code"),t}},{type:"color",name:"fontcolor",defaultColor:"#262626",defaultActiveColor:"#F5222D",buttonTitle:t.fontcolor.title,dropdownTitle:t.fontcolor.more,content:function(e,t,n){return!0===n&&(e="#BFBFBF",t="#BFBFBF"),'<svg\n\t\t\t\t\t\twidth="16px"\n\t\t\t\t\t\theight="16px"\n\t\t\t\t\t\tviewBox="0 0 16 16"\n\t\t\t\t\t\tstyle="margin-bottom: -2"\n\t\t\t\t\t>\n\t\t\t\t\t\t<title>color-font</title>\n\t\t\t\t\t\t<desc>Created with Sketch.</desc>\n\t\t\t\t\t\t<g\n\t\t\t\t\t\t\tid="color-font"\n\t\t\t\t\t\t\tstroke="none"\n\t\t\t\t\t\t\tstroke-width="1"\n\t\t\t\t\t\t\tfill="none"\n\t\t\t\t\t\t\tfill-rule="evenodd"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\tid="Rectangle-55"\n\t\t\t\t\t\t\t\tstroke='.concat(t,'\n\t\t\t\t\t\t\t\tstroke-width="0.5"\n\t\t\t\t\t\t\t\tfill=').concat(e,'\n\t\t\t\t\t\t\t\tx="2"\n\t\t\t\t\t\t\t\ty="12.75"\n\t\t\t\t\t\t\t\twidth="12"\n\t\t\t\t\t\t\t\theight="1.5"\n\t\t\t\t\t\t\t\trx="0.125"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td="M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z"\n\t\t\t\t\t\t\t\tid="A"\n\t\t\t\t\t\t\t\tfill="#595959"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</svg>')}},{type:"color",name:"backcolor",defaultColor:"transparent",defaultActiveColor:"#FADB14",buttonTitle:t.backcolor.title,dropdownTitle:t.backcolor.more,content:function(e,t,n){return!0===n&&(e="#BFBFBF",t="#BFBFBF"),'<svg\n                    width="16px"\n                    height="16px"\n                    viewBox="0 0 16 16"\n                    style="margin-bottom: -2"\n\t\t\t\t\t>\n\t\t\t\t\t\t<title>color-bg</title>\n\t\t\t\t\t\t<desc>Created with Sketch.</desc>\n\t\t\t\t\t\t<g\n\t\t\t\t\t\t\tid="color-bg"\n\t\t\t\t\t\t\tstroke="none"\n\t\t\t\t\t\t\tstroke-width="1"\n\t\t\t\t\t\t\tfill="none"\n\t\t\t\t\t\t\tfill-rule="evenodd"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n                            d="M11.9745711,7.921875 C11.9745711,7.921875 13.2147672,9.2863447 13.2147672,10.1226326 C13.2147672,10.8142992 12.6566789,11.3802083 11.9745711,11.3802083 C11.2924632,11.3802083 10.734375,10.8142992 10.734375,10.1226326 C10.734375,9.2863447 11.9745711,7.921875 11.9745711,7.921875 Z M9.07958999,6.47535893 L6.28501575,3.68078468 L3.4904415,6.47535893 L9.07958999,6.47535893 Z M5.3326566,3.04215357 L4.28223263,1.9917296 C4.22692962,1.93642659 4.22692962,1.84676271 4.28223263,1.7914597 L5.03228902,1.0414033 C5.08759203,0.986100299 5.17725591,0.986100299 5.23255892,1.0414033 L6.4546098,2.26345418 C6.46530408,2.27146914 6.4755605,2.28033918 6.48528564,2.29006432 L10.4848531,6.28963174 C10.5954591,6.40023775 10.5954591,6.57956552 10.4848531,6.69017153 L6.4838816,10.691143 C6.37327559,10.801749 6.19394782,10.801749 6.08334181,10.691143 L2.08377439,6.69157557 C1.97316838,6.58096956 1.97316838,6.40164179 2.08377439,6.29103578 L5.3326566,3.04215357 Z"\n                            id="Combined-Shape"\n                            fill="#595959"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\tid="Rectangle-55"\n\t\t\t\t\t\t\t\tstroke='.concat(t,'\n\t\t\t\t\t\t\t\tstroke-width="0.5"\n\t\t\t\t\t\t\t\tfill=').concat(e,'\n\t\t\t\t\t\t\t\tx="2"\n\t\t\t\t\t\t\t\ty="12.75"\n\t\t\t\t\t\t\t\twidth="12"\n\t\t\t\t\t\t\t\theight="1.5"\n\t\t\t\t\t\t\t\trx="0.125"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</svg>')}},{type:"dropdown",name:"alignment",title:t.alignment.title,items:[{key:"left",icon:"align-left",content:t.alignment.left},{key:"center",icon:"align-center",content:t.alignment.center},{key:"right",icon:"align-right",content:t.alignment.right},{key:"justify",icon:"align-justify",content:t.alignment.justify}]},{type:"button",name:"unorderedlist",icon:"unordered-list",title:t.unorderedlist.title},{type:"button",name:"orderedlist",icon:"ordered-list",title:t.orderedlist.title},{type:"button",name:"tasklist",icon:"task-list",title:t.tasklist.title},{type:"dropdown",name:"indent",icon:"indent",hasDot:!1,title:t.indent.title,items:[{key:"in",icon:"indent",content:t.indent.in},{key:"out",icon:"outdent",content:t.indent.out}]},{type:"button",name:"link",icon:"link",command:{name:"link",args:["_blank"]},title:t.link.title,onDisabled:function(){var t=e.change,n=e.card,i=t.getRange();return!!n.find(i.startNode)||i.commonAncestorNode.find($b).length>0}},{type:"button",name:"quote",icon:"quote",title:t.quote.title},{type:"button",name:"hr",icon:"hr",title:t.hr.title}]},TM=o({name:"am-toolbar",components:{AmGroup:xM},props:VC,setup:function(e){var t=g([]),n=function(){var n=[],i=NM(e.engine);e.items.forEach((function(t){var r=[];t.forEach((function(t){var n=void 0;if("string"==typeof t){var o=i.find((function(e){return"collapse"===t?e.type===t:"collapse"!==e.type&&e.name===t}));o&&(n=o)}else{var a=i.find((function(e){return"collapse"===t.type?e.type===t.type:"collapse"!==e.type&&e.name===t.name}));n=vm(oh(t,"type"),a)}n&&("button"===n.type?n.onActive?n.active=n.onActive():e.engine.command.queryEnabled(n.name)&&(n.active=e.engine.command.queryState(n.name)):"dropdown"===n.type&&(n.onActive?n.values=n.onActive():e.engine.command.queryEnabled(n.name)&&(n.values=e.engine.command.queryState(n.name))),"collapse"!==n.type&&n.onDisabled&&(n.disabled=n.onDisabled()),r.push(n))})),r.length>0&&n.push(r)})),t.value=n};return f((function(){e.engine.language.add(MM),e.engine.on("select",n),e.engine.on("change",n),n()})),L((function(){e.engine.off("select",n),e.engine.off("change",n)})),{groups:t}},methods:{preventDefault:function(e){e.preventDefault()},triggerMouseDown:function(){},triggerMouseOver:function(e){this.preventDefault(e)},triggerMouseMove:function(e){this.preventDefault(e)},triggerContextMenu:function(e){this.preventDefault(e)}}}),AM={class:"editor-toolbar-content"};GC("\n.ant-tooltip .toolbar-tooltip-title {\n    font-size: 12px;\n    text-align: center;\n}\n.ant-tooltip .toolbar-tooltip-hotkey {\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.85);\n    text-align: center;\n}\n.editor-toolbar {\n    position: relative;\n    width: 100%;\n    padding:0;\n    z-index: 200;\n    border-top:1px solid rgba(0,0,0,.05);\n    border-bottom: 1px solid rgba(0,0,0,.05);\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n.editor-toolbar .editor-toolbar-content {\n    position: relative;\n    flex-direction: row;\n    background: transparent;\n    text-align: center;\n    width: 100%;\n}\n"),TM.render=function(e,n,i,r,o,a){var s=T("am-group");return A(),I("div",{class:["editor-toolbar",e.className],"data-element":"ui",onMousedown:n[1]||(n[1]=function(){return e.triggerMouseDown&&e.triggerMouseDown.apply(e,arguments)}),onMouseover:n[2]||(n[2]=function(){return e.triggerMouseOver&&e.triggerMouseOver.apply(e,arguments)}),onMousemove:n[3]||(n[3]=function(){return e.triggerMouseMove&&e.triggerMouseMove.apply(e,arguments)}),onContextmenu:n[4]||(n[4]=function(){return e.triggerContextMenu&&e.triggerContextMenu.apply(e,arguments)})},[l("div",AM,[(A(!0),I(t,null,j(e.groups,(function(t,n){return A(),I(s,{key:n,engine:e.engine,items:t},null,8,["engine","items"])})),128))])],34)},TM.__file="src/components/toolbar.vue";var IM=void 0;cy||import("./keymaster.49344178.js").then((function(e){return e.k})).then((function(e){IM=_m({keymaster:e.default},oh(e,"default"))}));var DM=function(){function e(t,n){var i=this;jm(this,e),this.SCOPE_NAME="data-toolbar-component",this.handlePreventDefault=function(e){var t;if(0!==(null===(t=i.root)||void 0===t?void 0:t.closest("body").length))return e.preventDefault(),!1},this.otpions=n,this.engine=t}return Rm(e,[{key:"select",value:function(e){var t,n,i;null===(t=this.root)||void 0===t||t.find(".toolbar-collapse-item-active").removeClass("toolbar-collapse-item-active"),null===(n=this.root)||void 0===n||null===(i=n.find(".toolbar-collapse-item").eq(e))||void 0===i||i.addClass("toolbar-collapse-item-active")}},{key:"scroll",value:function(e){if(this.root){var t=this.root.find(".toolbar-collapse-item").toArray(),n=this.root.find(".toolbar-collapse-item-active"),i=t.findIndex((function(e){return e.equal(n)})),r="up"===e?i-1:i+1;r<0&&(r=t.length-1),r>=t.length&&(r=0),n=t[r],this.select(r);var o=0;this.root.find(".toolbar-collapse-group-title,.toolbar-collapse-item").each((function(e){if(n.equal(e))return!1;o+=e.clientHeight}));var a=this.root.get();a.scrollTop=o-a.clientHeight/2}}},{key:"unbindEvents",value:function(){if(IM){var e=IM,t=e.deleteScope,n=e.unbind;t(this.SCOPE_NAME),n("enter",this.SCOPE_NAME),n("up",this.SCOPE_NAME),n("down",this.SCOPE_NAME),n("esc",this.SCOPE_NAME),this.engine.off("keydown:enter",this.handlePreventDefault)}}},{key:"bindEvents",value:function(){var e=this;if(IM){this.unbindEvents();var t=IM,n=t.setScope,i=t.keymaster;n(this.SCOPE_NAME),i("enter",this.SCOPE_NAME,(function(t){var n,i,r;if(0!==(null===(n=e.root)||void 0===n?void 0:n.closest("body").length)){t.preventDefault();var o=null===(i=e.root)||void 0===i?void 0:i.find(".toolbar-collapse-item-active");null==o||null===(r=o.get())||void 0===r||r.click()}})),i("up",this.SCOPE_NAME,(function(t){var n;0!==(null===(n=e.root)||void 0===n?void 0:n.closest("body").length)&&(t.preventDefault(),e.scroll("up"))})),i("down",this.SCOPE_NAME,(function(t){var n;0!==(null===(n=e.root)||void 0===n?void 0:n.closest("body").length)&&(t.preventDefault(),e.scroll("down"))})),i("esc",this.SCOPE_NAME,(function(t){t.preventDefault(),e.unbindEvents();var n=e.otpions.onCancel;n&&n()})),this.engine.on("keydown:enter",this.handlePreventDefault)}}},{key:"remove",value:function(){this.root&&0!==this.root.length&&(this.vm&&this.vm.unmount(),this.root.remove(),this.root=void 0)}},{key:"render",value:function(e,t,n){this.unbindEvents(),this.remove(),this.root=this.engine.$('<div class="data-toolbar-component-list" />'),e.append(this.root);var i=this.root.get(),r=this.otpions.onSelect;this.vm=O(yM,{engine:this.engine,groups:n,onSelect:r}),this.vm.mount(this.root.get()),this.select(0),this.bindEvents(),setTimeout((function(){for(var n=0,r=0,o=t;o;){var a=o.getBoundingClientRect()||{left:0,top:0},s=o.parent();if(!s)break;var l=s.getBoundingClientRect()||{left:0,top:0};if(n+=a.top-l.top,r+=a.left-l.left,s.equal(e))break;o=s}i.style.top="".concat(n+t.height()/2,"px"),i.style.left="".concat(r,"px")}),50)}}]),e}();GC(".data-toolbar-component-list {\n    position: absolute;\n    min-height: 0px;\n    top: 10px;\n    left: 0;\n}\n\n.data-toolbar-component-list  .toolbar-dropdown-list {\n    top:0px;\n}\n\n.data-toolbar-component-placeholder {\n    color: rgba(0,0,0,0.25);pointer-events: none;position: absolute;width: 76px;left: 7px;\n}");var _M=function(e){Qm(n,Qk);var t=eb(n);function n(){var e;return jm(this,n),(e=t.apply(this,arguments)).data=[],e}return Rm(n,[{key:"init",value:function(){var e=this;if(Vy(this.editor)&&!cy){var t=NM(this.editor).find((function(e){return"collapse"===e.type})),n=[];t&&(n=t.groups);var i=[];n.forEach((function(e){i.push.apply(i,Wm(e.items))}));var r=this.getValue();r&&r.data&&(r.data.forEach((function(t){var n=t.title,r=[];t.items.forEach((function(e){var t=e;"string"!=typeof e&&(t=e.name);var n=i.find((function(e){return e.name===t}));n&&r.push(_m(_m({},n),"string"!=typeof e?e:{}))})),e.data.push({title:n,items:r})})),this.component=new DM(this.editor,{onCancel:function(){e.changeToText()},onSelect:function(){e.remove()}}))}}},{key:"search",value:function(e){var t=[];"string"==typeof e&&(e=e.toLowerCase()),this.data.forEach((function(n){n.items.forEach((function(n){n.search.toLowerCase().indexOf(e)>=0&&(t.find((function(e){return e.name===n.name}))||t.push(_m({},n)))}))}));var n=[];return t.length>0&&n.push({title:"",items:t}),n}},{key:"remove",value:function(){var e;Vy(this.editor)&&(null===(e=this.component)||void 0===e||e.remove(),this.editor.card.remove(this.id))}},{key:"changeToText",value:function(){var e,t;if(this.root.inEditor()&&Vy(this.editor)){var n=(null===(e=this.keyword)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText)||"";this.remove(),this.editor.node.insertText(n)}}},{key:"destroy",value:function(){var e,t;null===(e=this.component)||void 0===e||e.unbindEvents(),null===(t=this.component)||void 0===t||t.remove()}},{key:"activate",value:function(e){var t;(kb(Km(n.prototype),"activate",this).call(this,e),e)||(null===(t=this.component)||void 0===t||t.unbindEvents(),this.changeToText())}},{key:"handleInput",value:function(){var e,t;if(Vy(this.editor)){var n=this.editor,i=n.change,r=n.card;if(!i.isComposing()){var o,a=(null===(e=this.keyword)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText.replaceAll(/[\r\n]/g,""))||"";if(""===a)return null===(o=this.component)||void 0===o||o.remove(),void r.remove(this.id);var s=a.substr(1);if(""!==s){var l,c=this.search(s);if(c.length>0)null===(l=this.component)||void 0===l||l.render(this.editor.root,this.root,c);else this.changeToText()}else{var u;null===(u=this.component)||void 0===u||u.render(this.editor.root,this.root,this.data)}}}}},{key:"resetPlaceHolder",value:function(){var e,t,n,i;"/"===(null===(e=this.keyword)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText)?null===(n=this.placeholder)||void 0===n||n.show():null===(i=this.placeholder)||void 0===i||i.hide()}},{key:"render",value:function(){var e,t,n,i=this;if(Vy(this.editor)&&!cy){var r=this.editor.$,o=this.editor.language.get("toolbar","component");this.root.attributes("data-transient","true"),this.root.attributes("contenteditable","false");var a=r('<span class="data-toolbar-component-keyword" contenteditable="true">/</span><span class="data-toolbar-component-placeholder">'.concat(o.placeholder,"</span>")),s=this.getCenter();s.append(a),this.keyword=s.find(".data-toolbar-component-keyword"),this.placeholder=s.find(".data-toolbar-component-placeholder"),null===(e=this.keyword)||void 0===e||e.on("keydown",(function(e){Nm("enter",e)&&e.preventDefault()}));var l=Date.now();null===(t=this.keyword)||void 0===t||t.on("input",(function(){if(i.resetPlaceHolder(),Date.now()-l<100){var e,t,n=null===(e=i.keyword)||void 0===e?void 0:e.first();if(n&&n.isText()&&"/、"===n[0].nodeValue||"//"===(null==n||null===(t=n.get())||void 0===t?void 0:t.nodeValue)){var r,o=null===(r=n.get())||void 0===r?void 0:r.splitText(1);null==o||o.remove()}}setTimeout((function(){i.handleInput()}),10)})),null===(n=this.component)||void 0===n||n.render(this.editor.root,this.root,this.data)}}}],[{key:"cardName",get:function(){return"toolbar"}},{key:"cardType",get:function(){return ky.INLINE}},{key:"singleSelectable",get:function(){return!1}}]),n}(),jM=function(e){Qm(n,Kw);var t=eb(n);function n(){return jm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"init",value:function(){var e=this;this.editor.on("keydown:slash",(function(t){return e.onSlash(t)}))}},{key:"onSlash",value:function(e){if(Vy(this.editor)){var t=this.editor,n=t.change,i=t.history,r=n.getRange(),o=this.editor.block.closest(r.startNode),a=o.text().trim();if("/"===a&&fy&&o.empty(),(""===a||"/"===a&&fy||e.ctrlKey||e.metaKey)&&(r=n.getRange()).collapsed){e.preventDefault(),i.startCache();var s=this.options.config||[{title:this.editor.language.get("toolbar","commonlyUsed","title"),items:["image-uploader","codeblock","table","file"]}],l=this.editor.card.insert(_M.cardName,{data:s});this.editor.card.activate(l.root),r=n.getRange(),i.destroyCache();var c=l.find(".data-toolbar-component-keyword");r.select(c,!0),r.collapse(!1),n.select(r)}}}},{key:"execute",value:function(){throw new Error("Method not implemented.")}}],[{key:"pluginName",get:function(){return"toolbar"}}]),n}();TM.install=function(e){e.component(TM.name,TM)};const LM=[Xk,Jk,ex,tx,nx,ix,rx,ox,ax,lx,dx,hx,fx,px,gx,vx,mx,bx,yx,wx,kx,xx,Cx,Mx,Ax,Hx,nC,eC,IC,jM],RM=[sx,ux,Bx,_M,Jx,TC],PM="https://editor.aomao.com";var zM=o({name:"engine-deom",components:{Avatar:_g,AmToolbar:TM},data:()=>({items:[["collapse"],["undo","redo","paintformat","removeformat"],["heading","fontsize"],["bold","italic","strikethrough","underline","moremark"],["fontcolor","backcolor"],["alignment"],["unorderedlist","orderedlist","tasklist","indent"],["link","quote","hr"]]}),setup(){const e=g(null),t=g(null),n=g([]);return f((()=>{if(e.value){t.value=new $k(e.value,{plugins:LM,cards:RM,config:{[eC.pluginName]:{file:{action:`${PM}/upload/image`},remote:{action:`${PM}/upload/image`},isRemote:e=>e.indexOf(PM)<0}}});const n=t.value;n.messageSuccess=e=>{om.success(e)},n.messageError=e=>{om.error(e)},n.ot.initLockMode(),n.setValue("<strong>开始编辑～</strong>"),n.on("change",(e=>{}))}})),L((()=>{t.value&&t.value.destroy()})),{container:e,engine:t,members:n}}});const BM={class:"my-editor-wrapper"},FM={className:"editor-wrapper"},HM={className:"editor-container"},UM={ref:"container"};zM.render=function(e,t,n,i,r,o){const a=T("am-toolbar");return A(),I("div",BM,[e.engine?(A(),I(a,{key:0,engine:e.engine,items:e.items},null,8,["engine","items"])):R("",!0),l("div",FM,[l("div",HM,[l("div",UM,"This is Container",512)])])])};export{zM as _};
